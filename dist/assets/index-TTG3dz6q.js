function Db(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(a,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var bA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ky(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rb(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var s=t.default;if(typeof s=="function"){var r=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var o=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,o.get?o:{enumerable:!0,get:function(){return t[a]}})}),r}var ff={exports:{}},bu={},pf={exports:{}},ss={};var pg;function Ib(){if(pg)return ss;pg=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function b(te){return te===null||typeof te!="object"?null:(te=y&&te[y]||te["@@iterator"],typeof te=="function"?te:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function P(te,O,re){this.props=te,this.context=O,this.refs=N,this.updater=re||x}P.prototype.isReactComponent={},P.prototype.setState=function(te,O){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,O,"setState")},P.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function _(){}_.prototype=P.prototype;function C(te,O,re){this.props=te,this.context=O,this.refs=N,this.updater=re||x}var j=C.prototype=new _;j.constructor=C,A(j,P.prototype),j.isPureReactComponent=!0;var w=Array.isArray,D=Object.prototype.hasOwnProperty,z={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function X(te,O,re){var K,ne={},pe=null,je=null;if(O!=null)for(K in O.ref!==void 0&&(je=O.ref),O.key!==void 0&&(pe=""+O.key),O)D.call(O,K)&&!U.hasOwnProperty(K)&&(ne[K]=O[K]);var _e=arguments.length-2;if(_e===1)ne.children=re;else if(1<_e){for(var ue=Array(_e),xe=0;xe<_e;xe++)ue[xe]=arguments[xe+2];ne.children=ue}if(te&&te.defaultProps)for(K in _e=te.defaultProps,_e)ne[K]===void 0&&(ne[K]=_e[K]);return{$$typeof:t,type:te,key:pe,ref:je,props:ne,_owner:z.current}}function E(te,O){return{$$typeof:t,type:te.type,key:O,ref:te.ref,props:te.props,_owner:te._owner}}function G(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function I(te){var O={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(re){return O[re]})}var R=/\/+/g;function $(te,O){return typeof te=="object"&&te!==null&&te.key!=null?I(""+te.key):O.toString(36)}function q(te,O,re,K,ne){var pe=typeof te;(pe==="undefined"||pe==="boolean")&&(te=null);var je=!1;if(te===null)je=!0;else switch(pe){case"string":case"number":je=!0;break;case"object":switch(te.$$typeof){case t:case s:je=!0}}if(je)return je=te,ne=ne(je),te=K===""?"."+$(je,0):K,w(ne)?(re="",te!=null&&(re=te.replace(R,"$&/")+"/"),q(ne,O,re,"",function(xe){return xe})):ne!=null&&(G(ne)&&(ne=E(ne,re+(!ne.key||je&&je.key===ne.key?"":(""+ne.key).replace(R,"$&/")+"/")+te)),O.push(ne)),1;if(je=0,K=K===""?".":K+":",w(te))for(var _e=0;_e<te.length;_e++){pe=te[_e];var ue=K+$(pe,_e);je+=q(pe,O,re,ue,ne)}else if(ue=b(te),typeof ue=="function")for(te=ue.call(te),_e=0;!(pe=te.next()).done;)pe=pe.value,ue=K+$(pe,_e++),je+=q(pe,O,re,ue,ne);else if(pe==="object")throw O=String(te),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return je}function Q(te,O,re){if(te==null)return te;var K=[],ne=0;return q(te,K,"","",function(pe){return O.call(re,pe,ne++)}),K}function he(te){if(te._status===-1){var O=te._result;O=O(),O.then(function(re){(te._status===0||te._status===-1)&&(te._status=1,te._result=re)},function(re){(te._status===0||te._status===-1)&&(te._status=2,te._result=re)}),te._status===-1&&(te._status=0,te._result=O)}if(te._status===1)return te._result.default;throw te._result}var be={current:null},V={transition:null},de={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:V,ReactCurrentOwner:z};function ke(){throw Error("act(...) is not supported in production builds of React.")}return ss.Children={map:Q,forEach:function(te,O,re){Q(te,function(){O.apply(this,arguments)},re)},count:function(te){var O=0;return Q(te,function(){O++}),O},toArray:function(te){return Q(te,function(O){return O})||[]},only:function(te){if(!G(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},ss.Component=P,ss.Fragment=r,ss.Profiler=o,ss.PureComponent=C,ss.StrictMode=a,ss.Suspense=h,ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,ss.act=ke,ss.cloneElement=function(te,O,re){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var K=A({},te.props),ne=te.key,pe=te.ref,je=te._owner;if(O!=null){if(O.ref!==void 0&&(pe=O.ref,je=z.current),O.key!==void 0&&(ne=""+O.key),te.type&&te.type.defaultProps)var _e=te.type.defaultProps;for(ue in O)D.call(O,ue)&&!U.hasOwnProperty(ue)&&(K[ue]=O[ue]===void 0&&_e!==void 0?_e[ue]:O[ue])}var ue=arguments.length-2;if(ue===1)K.children=re;else if(1<ue){_e=Array(ue);for(var xe=0;xe<ue;xe++)_e[xe]=arguments[xe+2];K.children=_e}return{$$typeof:t,type:te.type,key:ne,ref:pe,props:K,_owner:je}},ss.createContext=function(te){return te={$$typeof:d,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:l,_context:te},te.Consumer=te},ss.createElement=X,ss.createFactory=function(te){var O=X.bind(null,te);return O.type=te,O},ss.createRef=function(){return{current:null}},ss.forwardRef=function(te){return{$$typeof:c,render:te}},ss.isValidElement=G,ss.lazy=function(te){return{$$typeof:p,_payload:{_status:-1,_result:te},_init:he}},ss.memo=function(te,O){return{$$typeof:f,type:te,compare:O===void 0?null:O}},ss.startTransition=function(te){var O=V.transition;V.transition={};try{te()}finally{V.transition=O}},ss.unstable_act=ke,ss.useCallback=function(te,O){return be.current.useCallback(te,O)},ss.useContext=function(te){return be.current.useContext(te)},ss.useDebugValue=function(){},ss.useDeferredValue=function(te){return be.current.useDeferredValue(te)},ss.useEffect=function(te,O){return be.current.useEffect(te,O)},ss.useId=function(){return be.current.useId()},ss.useImperativeHandle=function(te,O,re){return be.current.useImperativeHandle(te,O,re)},ss.useInsertionEffect=function(te,O){return be.current.useInsertionEffect(te,O)},ss.useLayoutEffect=function(te,O){return be.current.useLayoutEffect(te,O)},ss.useMemo=function(te,O){return be.current.useMemo(te,O)},ss.useReducer=function(te,O,re){return be.current.useReducer(te,O,re)},ss.useRef=function(te){return be.current.useRef(te)},ss.useState=function(te){return be.current.useState(te)},ss.useSyncExternalStore=function(te,O,re){return be.current.useSyncExternalStore(te,O,re)},ss.useTransition=function(){return be.current.useTransition()},ss.version="18.3.1",ss}var xg;function Lp(){return xg||(xg=1,pf.exports=Ib()),pf.exports}var gg;function Mb(){if(gg)return bu;gg=1;var t=Lp(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(c,h,f){var p,y={},b=null,x=null;f!==void 0&&(b=""+f),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(x=h.ref);for(p in h)a.call(h,p)&&!l.hasOwnProperty(p)&&(y[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)y[p]===void 0&&(y[p]=h[p]);return{$$typeof:s,type:c,key:b,ref:x,props:y,_owner:o.current}}return bu.Fragment=r,bu.jsx=d,bu.jsxs=d,bu}var yg;function zb(){return yg||(yg=1,ff.exports=Mb()),ff.exports}var e=zb(),Nh={},xf={exports:{}},pa={},gf={exports:{}},yf={};var vg;function Ob(){return vg||(vg=1,(function(t){function s(V,de){var ke=V.length;V.push(de);e:for(;0<ke;){var te=ke-1>>>1,O=V[te];if(0<o(O,de))V[te]=de,V[ke]=O,ke=te;else break e}}function r(V){return V.length===0?null:V[0]}function a(V){if(V.length===0)return null;var de=V[0],ke=V.pop();if(ke!==de){V[0]=ke;e:for(var te=0,O=V.length,re=O>>>1;te<re;){var K=2*(te+1)-1,ne=V[K],pe=K+1,je=V[pe];if(0>o(ne,ke))pe<O&&0>o(je,ne)?(V[te]=je,V[pe]=ke,te=pe):(V[te]=ne,V[K]=ke,te=K);else if(pe<O&&0>o(je,ke))V[te]=je,V[pe]=ke,te=pe;else break e}}return de}function o(V,de){var ke=V.sortIndex-de.sortIndex;return ke!==0?ke:V.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,c=d.now();t.unstable_now=function(){return d.now()-c}}var h=[],f=[],p=1,y=null,b=3,x=!1,A=!1,N=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(V){for(var de=r(f);de!==null;){if(de.callback===null)a(f);else if(de.startTime<=V)a(f),de.sortIndex=de.expirationTime,s(h,de);else break;de=r(f)}}function w(V){if(N=!1,j(V),!A)if(r(h)!==null)A=!0,he(D);else{var de=r(f);de!==null&&be(w,de.startTime-V)}}function D(V,de){A=!1,N&&(N=!1,_(X),X=-1),x=!0;var ke=b;try{for(j(de),y=r(h);y!==null&&(!(y.expirationTime>de)||V&&!I());){var te=y.callback;if(typeof te=="function"){y.callback=null,b=y.priorityLevel;var O=te(y.expirationTime<=de);de=t.unstable_now(),typeof O=="function"?y.callback=O:y===r(h)&&a(h),j(de)}else a(h);y=r(h)}if(y!==null)var re=!0;else{var K=r(f);K!==null&&be(w,K.startTime-de),re=!1}return re}finally{y=null,b=ke,x=!1}}var z=!1,U=null,X=-1,E=5,G=-1;function I(){return!(t.unstable_now()-G<E)}function R(){if(U!==null){var V=t.unstable_now();G=V;var de=!0;try{de=U(!0,V)}finally{de?$():(z=!1,U=null)}}else z=!1}var $;if(typeof C=="function")$=function(){C(R)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Q=q.port2;q.port1.onmessage=R,$=function(){Q.postMessage(null)}}else $=function(){P(R,0)};function he(V){U=V,z||(z=!0,$())}function be(V,de){X=P(function(){V(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){A||x||(A=!0,he(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(V){switch(b){case 1:case 2:case 3:var de=3;break;default:de=b}var ke=b;b=de;try{return V()}finally{b=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,de){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ke=b;b=V;try{return de()}finally{b=ke}},t.unstable_scheduleCallback=function(V,de,ke){var te=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?te+ke:te):ke=te,V){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ke+O,V={id:p++,callback:de,priorityLevel:V,startTime:ke,expirationTime:O,sortIndex:-1},ke>te?(V.sortIndex=ke,s(f,V),r(h)===null&&V===r(f)&&(N?(_(X),X=-1):N=!0,be(w,ke-te))):(V.sortIndex=O,s(h,V),A||x||(A=!0,he(D))),V},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(V){var de=b;return function(){var ke=b;b=de;try{return V.apply(this,arguments)}finally{b=ke}}}})(yf)),yf}var bg;function qb(){return bg||(bg=1,gf.exports=Ob()),gf.exports}var jg;function $b(){if(jg)return pa;jg=1;var t=Lp(),s=qb();function r(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)a.add(i[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function b(n){return h.call(y,n)?!0:h.call(p,n)?!1:f.test(n)?y[n]=!0:(p[n]=!0,!1)}function x(n,i,u,g){if(u!==null&&u.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return g?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,i,u,g){if(i===null||typeof i>"u"||x(n,i,u,g))return!0;if(g)return!1;if(u!==null)switch(u.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function N(n,i,u,g,S,F,Z){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=u,this.propertyName=n,this.type=i,this.sanitizeURL=F,this.removeEmptyString=Z}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){P[n]=new N(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];P[i]=new N(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){P[n]=new N(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){P[n]=new N(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){P[n]=new N(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){P[n]=new N(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){P[n]=new N(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){P[n]=new N(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){P[n]=new N(n,5,!1,n.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(_,C);P[i]=new N(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(_,C);P[i]=new N(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(_,C);P[i]=new N(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){P[n]=new N(n,1,!1,n.toLowerCase(),null,!1,!1)}),P.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){P[n]=new N(n,1,!1,n.toLowerCase(),null,!0,!0)});function j(n,i,u,g){var S=P.hasOwnProperty(i)?P[i]:null;(S!==null?S.type!==0:g||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(A(i,u,S,g)&&(u=null),g||S===null?b(i)&&(u===null?n.removeAttribute(i):n.setAttribute(i,""+u)):S.mustUseProperty?n[S.propertyName]=u===null?S.type===3?!1:"":u:(i=S.attributeName,g=S.attributeNamespace,u===null?n.removeAttribute(i):(S=S.type,u=S===3||S===4&&u===!0?"":""+u,g?n.setAttributeNS(g,i,u):n.setAttribute(i,u))))}var w=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),z=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),V=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var ke=Object.assign,te;function O(n){if(te===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);te=i&&i[1]||""}return`
`+te+n}var re=!1;function K(n,i){if(!n||re)return"";re=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Me){var g=Me}Reflect.construct(n,[],i)}else{try{i.call()}catch(Me){g=Me}n.call(i.prototype)}else{try{throw Error()}catch(Me){g=Me}n()}}catch(Me){if(Me&&g&&typeof Me.stack=="string"){for(var S=Me.stack.split(`
`),F=g.stack.split(`
`),Z=S.length-1,fe=F.length-1;1<=Z&&0<=fe&&S[Z]!==F[fe];)fe--;for(;1<=Z&&0<=fe;Z--,fe--)if(S[Z]!==F[fe]){if(Z!==1||fe!==1)do if(Z--,fe--,0>fe||S[Z]!==F[fe]){var Ne=`
`+S[Z].replace(" at new "," at ");return n.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",n.displayName)),Ne}while(1<=Z&&0<=fe);break}}}finally{re=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?O(n):""}function ne(n){switch(n.tag){case 5:return O(n.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return n=K(n.type,!1),n;case 11:return n=K(n.type.render,!1),n;case 1:return n=K(n.type,!0),n;default:return""}}function pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case z:return"Portal";case E:return"Profiler";case X:return"StrictMode";case $:return"Suspense";case q:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case I:return(n.displayName||"Context")+".Consumer";case G:return(n._context.displayName||"Context")+".Provider";case R:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Q:return i=n.displayName||null,i!==null?i:pe(n.type)||"Memo";case he:i=n._payload,n=n._init;try{return pe(n(i))}catch{}}return null}function je(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(i);case 8:return i===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function _e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ue(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function xe(n){var i=ue(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),g=""+n[i];if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var S=u.get,F=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return S.call(this)},set:function(Z){g=""+Z,F.call(this,Z)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(Z){g=""+Z},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ie(n){n._valueTracker||(n._valueTracker=xe(n))}function He(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var u=i.getValue(),g="";return n&&(g=ue(n)?n.checked?"true":"false":n.value),n=g,n!==u?(i.setValue(n),!0):!1}function Je(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function De(n,i){var u=i.checked;return ke({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function le(n,i){var u=i.defaultValue==null?"":i.defaultValue,g=i.checked!=null?i.checked:i.defaultChecked;u=_e(i.value!=null?i.value:u),n._wrapperState={initialChecked:g,initialValue:u,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Nt(n,i){i=i.checked,i!=null&&j(n,"checked",i,!1)}function At(n,i){Nt(n,i);var u=_e(i.value),g=i.type;if(u!=null)g==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(g==="submit"||g==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ye(n,i.type,u):i.hasOwnProperty("defaultValue")&&Ye(n,i.type,_e(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function ct(n,i,u){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var g=i.type;if(!(g!=="submit"&&g!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,u||i===n.value||(n.value=i),n.defaultValue=i}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function Ye(n,i,u){(i!=="number"||Je(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var ce=Array.isArray;function ye(n,i,u,g){if(n=n.options,i){i={};for(var S=0;S<u.length;S++)i["$"+u[S]]=!0;for(u=0;u<n.length;u++)S=i.hasOwnProperty("$"+n[u].value),n[u].selected!==S&&(n[u].selected=S),S&&g&&(n[u].defaultSelected=!0)}else{for(u=""+_e(u),i=null,S=0;S<n.length;S++){if(n[S].value===u){n[S].selected=!0,g&&(n[S].defaultSelected=!0);return}i!==null||n[S].disabled||(i=n[S])}i!==null&&(i.selected=!0)}}function Le(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return ke({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ue(n,i){var u=i.value;if(u==null){if(u=i.children,i=i.defaultValue,u!=null){if(i!=null)throw Error(r(92));if(ce(u)){if(1<u.length)throw Error(r(93));u=u[0]}i=u}i==null&&(i=""),u=i}n._wrapperState={initialValue:_e(u)}}function Ge(n,i){var u=_e(i.value),g=_e(i.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),i.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),g!=null&&(n.defaultValue=""+g)}function qe(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Qe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _t(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Qe(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lt,ut=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,u,g,S){MSApp.execUnsafeLocalFunction(function(){return n(i,u,g,S)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(lt=lt||document.createElement("div"),lt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=lt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Et(n,i){if(i){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=i;return}}n.textContent=i}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ws=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(n){ws.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ht[i]=ht[n]})});function es(n,i,u){return i==null||typeof i=="boolean"||i===""?"":u||typeof i!="number"||i===0||ht.hasOwnProperty(n)&&ht[n]?(""+i).trim():i+"px"}function yt(n,i){n=n.style;for(var u in i)if(i.hasOwnProperty(u)){var g=u.indexOf("--")===0,S=es(u,i[u],g);u==="float"&&(u="cssFloat"),g?n.setProperty(u,S):n[u]=S}}var Ut=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function is(n,i){if(i){if(Ut[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function Tt(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kt=null;function Bt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vs=null,Os=null,os=null;function Ot(n){if(n=_l(n)){if(typeof Vs!="function")throw Error(r(280));var i=n.stateNode;i&&(i=mc(i),Vs(n.stateNode,n.type,i))}}function ds(n){Os?os?os.push(n):os=[n]:Os=n}function qi(){if(Os){var n=Os,i=os;if(os=Os=null,Ot(n),i)for(n=0;n<i.length;n++)Ot(i[n])}}function Ur(n,i){return n(i)}function Ua(){}var Qn=!1;function Ft(n,i,u){if(Qn)return n(i,u);Qn=!0;try{return Ur(n,i,u)}finally{Qn=!1,(Os!==null||os!==null)&&(Ua(),qi())}}function On(n,i){var u=n.stateNode;if(u===null)return null;var g=mc(u);if(g===null)return null;u=g[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(r(231,i,typeof u));return u}var wa=!1;if(c)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){wa=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{wa=!1}function Xn(n,i,u,g,S,F,Z,fe,Ne){var Me=Array.prototype.slice.call(arguments,3);try{i.apply(u,Me)}catch(Xe){this.onError(Xe)}}var Es=!1,ar=null,pr=!1,mi=null,$i={onError:function(n){Es=!0,ar=n}};function Na(n,i,u,g,S,F,Z,fe,Ne){Es=!1,ar=null,Xn.apply($i,arguments)}function Ba(n,i,u,g,S,F,Z,fe,Ne){if(Na.apply(this,arguments),Es){if(Es){var Me=ar;Es=!1,ar=null}else throw Error(r(198));pr||(pr=!0,mi=Me)}}function Br(n){var i=n,u=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(u=i.return),n=i.return;while(n)}return i.tag===3?u:null}function ea(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function qn(n){if(Br(n)!==n)throw Error(r(188))}function yo(n){var i=n.alternate;if(!i){if(i=Br(n),i===null)throw Error(r(188));return i!==n?null:n}for(var u=n,g=i;;){var S=u.return;if(S===null)break;var F=S.alternate;if(F===null){if(g=S.return,g!==null){u=g;continue}break}if(S.child===F.child){for(F=S.child;F;){if(F===u)return qn(S),n;if(F===g)return qn(S),i;F=F.sibling}throw Error(r(188))}if(u.return!==g.return)u=S,g=F;else{for(var Z=!1,fe=S.child;fe;){if(fe===u){Z=!0,u=S,g=F;break}if(fe===g){Z=!0,g=S,u=F;break}fe=fe.sibling}if(!Z){for(fe=F.child;fe;){if(fe===u){Z=!0,u=F,g=S;break}if(fe===g){Z=!0,g=F,u=S;break}fe=fe.sibling}if(!Z)throw Error(r(189))}}if(u.alternate!==g)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?n:i}function _a(n){return n=yo(n),n!==null?Ui(n):null}function Ui(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ui(n);if(i!==null)return i;n=n.sibling}return null}var vo=s.unstable_scheduleCallback,bo=s.unstable_cancelCallback,al=s.unstable_shouldYield,Gd=s.unstable_requestPaint,Ds=s.unstable_now,Oc=s.unstable_getCurrentPriorityLevel,il=s.unstable_ImmediatePriority,$n=s.unstable_UserBlockingPriority,Bi=s.unstable_NormalPriority,qc=s.unstable_LowPriority,ol=s.unstable_IdlePriority,jo=null,Un=null;function $c(n){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(jo,n,void 0,(n.current.flags&128)===128)}catch{}}var Qr=Math.clz32?Math.clz32:Uc,Zd=Math.log,xr=Math.LN2;function Uc(n){return n>>>=0,n===0?32:31-(Zd(n)/xr|0)|0}var wo=64,ta=4194304;function ka(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jn(n,i){var u=n.pendingLanes;if(u===0)return 0;var g=0,S=n.suspendedLanes,F=n.pingedLanes,Z=u&268435455;if(Z!==0){var fe=Z&~S;fe!==0?g=ka(fe):(F&=Z,F!==0&&(g=ka(F)))}else Z=u&~S,Z!==0?g=ka(Z):F!==0&&(g=ka(F));if(g===0)return 0;if(i!==0&&i!==g&&(i&S)===0&&(S=g&-g,F=i&-i,S>=F||S===16&&(F&4194240)!==0))return i;if((g&4)!==0&&(g|=u&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=g;0<i;)u=31-Qr(i),S=1<<u,g|=n[u],i&=~S;return g}function No(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ir(n,i){for(var u=n.suspendedLanes,g=n.pingedLanes,S=n.expirationTimes,F=n.pendingLanes;0<F;){var Z=31-Qr(F),fe=1<<Z,Ne=S[Z];Ne===-1?((fe&u)===0||(fe&g)!==0)&&(S[Z]=No(fe,i)):Ne<=i&&(n.expiredLanes|=fe),F&=~fe}}function _o(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Bc(){var n=wo;return wo<<=1,(wo&4194240)===0&&(wo=64),n}function Yl(n){for(var i=[],u=0;31>u;u++)i.push(n);return i}function ko(n,i,u){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Qr(i),n[i]=u}function Va(n,i){var u=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var g=n.eventTimes;for(n=n.expirationTimes;0<u;){var S=31-Qr(u),F=1<<S;i[S]=0,g[S]=-1,n[S]=-1,u&=~F}}function ll(n,i){var u=n.entangledLanes|=i;for(n=n.entanglements;u;){var g=31-Qr(u),S=1<<g;S&i|n[g]&i&&(n[g]|=i),u&=~S}}var ls=0;function fi(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var cl,Kl,Vc,Wc,dl,pi=!1,Sa=[],Wa=null,wn=null,sa=null,It=new Map,So=new Map,Ha=[],Yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hc(n,i){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":wn=null;break;case"mouseover":case"mouseout":sa=null;break;case"pointerover":case"pointerout":It.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(i.pointerId)}}function Bn(n,i,u,g,S,F){return n===null||n.nativeEvent!==F?(n={blockedOn:i,domEventName:u,eventSystemFlags:g,nativeEvent:F,targetContainers:[S]},i!==null&&(i=_l(i),i!==null&&Kl(i)),n):(n.eventSystemFlags|=g,i=n.targetContainers,S!==null&&i.indexOf(S)===-1&&i.push(S),n)}function xi(n,i,u,g,S){switch(i){case"focusin":return Wa=Bn(Wa,n,i,u,g,S),!0;case"dragenter":return wn=Bn(wn,n,i,u,g,S),!0;case"mouseover":return sa=Bn(sa,n,i,u,g,S),!0;case"pointerover":var F=S.pointerId;return It.set(F,Bn(It.get(F)||null,n,i,u,g,S)),!0;case"gotpointercapture":return F=S.pointerId,So.set(F,Bn(So.get(F)||null,n,i,u,g,S)),!0}return!1}function Gc(n){var i=Xi(n.target);if(i!==null){var u=Br(i);if(u!==null){if(i=u.tag,i===13){if(i=ea(u),i!==null){n.blockedOn=i,dl(n.priority,function(){Vc(u)});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ul(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var u=Ao(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var g=new u.constructor(u.type,u);Kt=g,u.target.dispatchEvent(g),Kt=null}else return i=_l(u),i!==null&&Kl(i),n.blockedOn=u,!1;i.shift()}return!0}function Co(n,i,u){ul(n)&&u.delete(i)}function Jl(){pi=!1,Wa!==null&&ul(Wa)&&(Wa=null),wn!==null&&ul(wn)&&(wn=null),sa!==null&&ul(sa)&&(sa=null),It.forEach(Co),So.forEach(Co)}function Ca(n,i){n.blockedOn===i&&(n.blockedOn=null,pi||(pi=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jl)))}function Ga(n){function i(S){return Ca(S,n)}if(0<Sa.length){Ca(Sa[0],n);for(var u=1;u<Sa.length;u++){var g=Sa[u];g.blockedOn===n&&(g.blockedOn=null)}}for(Wa!==null&&Ca(Wa,n),wn!==null&&Ca(wn,n),sa!==null&&Ca(sa,n),It.forEach(i),So.forEach(i),u=0;u<Ha.length;u++)g=Ha[u],g.blockedOn===n&&(g.blockedOn=null);for(;0<Ha.length&&(u=Ha[0],u.blockedOn===null);)Gc(u),u.blockedOn===null&&Ha.shift()}var Aa=w.ReactCurrentBatchConfig,hl=!0;function Ql(n,i,u,g){var S=ls,F=Aa.transition;Aa.transition=null;try{ls=1,gi(n,i,u,g)}finally{ls=S,Aa.transition=F}}function Xl(n,i,u,g){var S=ls,F=Aa.transition;Aa.transition=null;try{ls=4,gi(n,i,u,g)}finally{ls=S,Aa.transition=F}}function gi(n,i,u,g){if(hl){var S=Ao(n,i,u,g);if(S===null)dc(n,i,g,Za,u),Hc(n,g);else if(xi(S,n,i,u,g))g.stopPropagation();else if(Hc(n,g),i&4&&-1<Yd.indexOf(n)){for(;S!==null;){var F=_l(S);if(F!==null&&cl(F),F=Ao(n,i,u,g),F===null&&dc(n,i,g,Za,u),F===S)break;S=F}S!==null&&g.stopPropagation()}else dc(n,i,g,null,u)}}var Za=null;function Ao(n,i,u,g){if(Za=null,n=Bt(g),n=Xi(n),n!==null)if(i=Br(n),i===null)n=null;else if(u=i.tag,u===13){if(n=ea(i),n!==null)return n;n=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Za=n,null}function Po(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oc()){case il:return 1;case $n:return 4;case Bi:case qc:return 16;case ol:return 536870912;default:return 16}default:return 16}}var ra=null,yi=null,Lo=null;function ec(){if(Lo)return Lo;var n,i=yi,u=i.length,g,S="value"in ra?ra.value:ra.textContent,F=S.length;for(n=0;n<u&&i[n]===S[n];n++);var Z=u-n;for(g=1;g<=Z&&i[u-g]===S[F-g];g++);return Lo=S.slice(n,1<g?1-g:void 0)}function na(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function aa(){return!0}function tc(){return!1}function Xr(n){function i(u,g,S,F,Z){this._reactName=u,this._targetInst=S,this.type=g,this.nativeEvent=F,this.target=Z,this.currentTarget=null;for(var fe in n)n.hasOwnProperty(fe)&&(u=n[fe],this[fe]=u?u(F):F[fe]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?aa:tc,this.isPropagationStopped=tc,this}return ke(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),i}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ml=Xr(ia),k=ke({},ia,{view:0,detail:0}),H=Xr(k),oe,ve,Ae,Be=ke({},k,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ae&&(Ae&&n.type==="mousemove"?(oe=n.screenX-Ae.screenX,ve=n.screenY-Ae.screenY):ve=oe=0,Ae=n),oe)},movementY:function(n){return"movementY"in n?n.movementY:ve}}),Ze=Xr(Be),vt=ke({},Be,{dataTransfer:0}),St=Xr(vt),qt=ke({},k,{relatedTarget:0}),$t=Xr(qt),us=ke({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Ws=Xr(us),gr=ke({},ia,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ts=Xr(gr),_r=ke({},ia,{data:0}),or=Xr(_r),Vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Nn[n])?!!i[n]:!1}function Vi(){return Zc}var Eo=ke({},k,{key:function(n){if(n.key){var i=Vr[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=na(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oa[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vi,charCode:function(n){return n.type==="keypress"?na(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?na(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Wi=Xr(Eo),To=ke({},Be,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=Xr(To),Fo=ke({},k,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vi}),en=Xr(Fo),Do=ke({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ro=Xr(Do),sc=ke({},Be,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rc=Xr(sc),Ys=[9,13,27,32],Pa=c&&"CompositionEvent"in window,Ya=null;c&&"documentMode"in document&&(Ya=document.documentMode);var Yc=c&&"TextEvent"in window&&!Ya,Vn=c&&(!Pa||Ya&&8<Ya&&11>=Ya),Gi=" ",fl=!1;function pl(n,i){switch(n){case"keyup":return Ys.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vi(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var la=!1;function Wn(n,i){switch(n){case"compositionend":return vi(i);case"keypress":return i.which!==32?null:(fl=!0,Gi);case"textInput":return n=i.data,n===Gi&&fl?null:n;default:return null}}function Hn(n,i){if(la)return n==="compositionend"||!Pa&&pl(n,i)?(n=ec(),Lo=yi=ra=null,la=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vn&&i.locale!=="ko"?null:i.data;default:return null}}var Zi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ka(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Zi[n.type]:i==="textarea"}function bi(n,i,u,g){ds(g),i=ed(i,"onChange"),0<i.length&&(u=new ml("onChange","change",null,u,g),n.push({event:u,listeners:i}))}var ji=null,Ja=null;function lr(n){lc(n,0)}function Io(n){var i=Ho(n);if(He(i))return n}function Qa(n,i){if(n==="change")return i}var La=!1;if(c){var Mo;if(c){var zo="oninput"in document;if(!zo){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),zo=typeof xl.oninput=="function"}Mo=zo}else Mo=!1;La=Mo&&(!document.documentMode||9<document.documentMode)}function gl(){ji&&(ji.detachEvent("onpropertychange",wi),Ja=ji=null)}function wi(n){if(n.propertyName==="value"&&Io(Ja)){var i=[];bi(i,Ja,n,Bt(n)),Ft(lr,i)}}function Yi(n,i,u){n==="focusin"?(gl(),ji=i,Ja=u,ji.attachEvent("onpropertychange",wi)):n==="focusout"&&gl()}function Ki(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Io(Ja)}function Oo(n,i){if(n==="click")return Io(i)}function Ji(n,i){if(n==="input"||n==="change")return Io(i)}function qo(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ks=typeof Object.is=="function"?Object.is:qo;function _n(n,i){if(Ks(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var u=Object.keys(n),g=Object.keys(i);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var S=u[g];if(!h.call(i,S)||!Ks(n[S],i[S]))return!1}return!0}function hs(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ns(n,i){var u=hs(n);n=0;for(var g;u;){if(u.nodeType===3){if(g=n+u.textContent.length,n<=i&&g>=i)return{node:u,offset:i-n};n=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=hs(u)}}function Js(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Js(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function yr(){for(var n=window,i=Je();i instanceof n.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)n=i.contentWindow;else break;i=Je(n.document)}return i}function Ea(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function nc(n){var i=yr(),u=n.focusedElem,g=n.selectionRange;if(i!==u&&u&&u.ownerDocument&&Js(u.ownerDocument.documentElement,u)){if(g!==null&&Ea(u)){if(i=g.start,n=g.end,n===void 0&&(n=i),"selectionStart"in u)u.selectionStart=i,u.selectionEnd=Math.min(n,u.value.length);else if(n=(i=u.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var S=u.textContent.length,F=Math.min(g.start,S);g=g.end===void 0?F:Math.min(g.end,S),!n.extend&&F>g&&(S=g,g=F,F=S),S=Ns(u,F);var Z=Ns(u,g);S&&Z&&(n.rangeCount!==1||n.anchorNode!==S.node||n.anchorOffset!==S.offset||n.focusNode!==Z.node||n.focusOffset!==Z.offset)&&(i=i.createRange(),i.setStart(S.node,S.offset),n.removeAllRanges(),F>g?(n.addRange(i),n.extend(Z.node,Z.offset)):(i.setEnd(Z.node,Z.offset),n.addRange(i)))}}for(i=[],n=u;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<i.length;u++)n=i[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yl=c&&"documentMode"in document&&11>=document.documentMode,Ni=null,Kc=null,vl=null,Jc=!1;function Kd(n,i,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Jc||Ni==null||Ni!==Je(g)||(g=Ni,"selectionStart"in g&&Ea(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),vl&&_n(vl,g)||(vl=g,g=ed(Kc,"onSelect"),0<g.length&&(i=new ml("onSelect","select",null,i,u),n.push({event:i,listeners:g}),i.target=Ni)))}function ac(n,i){var u={};return u[n.toLowerCase()]=i.toLowerCase(),u["Webkit"+n]="webkit"+i,u["Moz"+n]="moz"+i,u}var $o={animationend:ac("Animation","AnimationEnd"),animationiteration:ac("Animation","AnimationIteration"),animationstart:ac("Animation","AnimationStart"),transitionend:ac("Transition","TransitionEnd")},Uo={},Jd={};c&&(Jd=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function ic(n){if(Uo[n])return Uo[n];if(!$o[n])return n;var i=$o[n],u;for(u in i)if(i.hasOwnProperty(u)&&u in Jd)return Uo[n]=i[u];return n}var Qd=ic("animationend"),Xd=ic("animationiteration"),eu=ic("animationstart"),tu=ic("transitionend"),su=new Map,ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(n,i){su.set(n,i),l(i,[n])}for(var bl=0;bl<ru.length;bl++){var mn=ru[bl],ca=mn.toLowerCase(),Qc=mn[0].toUpperCase()+mn.slice(1);Xa(ca,"on"+Qc)}Xa(Qd,"onAnimationEnd"),Xa(Xd,"onAnimationIteration"),Xa(eu,"onAnimationStart"),Xa("dblclick","onDoubleClick"),Xa("focusin","onFocus"),Xa("focusout","onBlur"),Xa(tu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qi));function oc(n,i,u){var g=n.type||"unknown-event";n.currentTarget=u,Ba(g,i,void 0,n),n.currentTarget=null}function lc(n,i){i=(i&4)!==0;for(var u=0;u<n.length;u++){var g=n[u],S=g.event;g=g.listeners;e:{var F=void 0;if(i)for(var Z=g.length-1;0<=Z;Z--){var fe=g[Z],Ne=fe.instance,Me=fe.currentTarget;if(fe=fe.listener,Ne!==F&&S.isPropagationStopped())break e;oc(S,fe,Me),F=Ne}else for(Z=0;Z<g.length;Z++){if(fe=g[Z],Ne=fe.instance,Me=fe.currentTarget,fe=fe.listener,Ne!==F&&S.isPropagationStopped())break e;oc(S,fe,Me),F=Ne}}}if(pr)throw n=mi,pr=!1,mi=null,n}function Ss(n,i){var u=i[Sn];u===void 0&&(u=i[Sn]=new Set);var g=n+"__bubble";u.has(g)||(cc(i,n,2,!1),u.add(g))}function Xc(n,i,u){var g=0;i&&(g|=4),cc(u,n,g,i)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Bo(n){if(!n[jl]){n[jl]=!0,a.forEach(function(u){u!=="selectionchange"&&(Bu.has(u)||Xc(u,!1,n),Xc(u,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[jl]||(i[jl]=!0,Xc("selectionchange",!1,i))}}function cc(n,i,u,g){switch(Po(i)){case 1:var S=Ql;break;case 4:S=Xl;break;default:S=gi}u=S.bind(null,i,u,n),S=void 0,!wa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(S=!0),g?S!==void 0?n.addEventListener(i,u,{capture:!0,passive:S}):n.addEventListener(i,u,!0):S!==void 0?n.addEventListener(i,u,{passive:S}):n.addEventListener(i,u,!1)}function dc(n,i,u,g,S){var F=g;if((i&1)===0&&(i&2)===0&&g!==null)e:for(;;){if(g===null)return;var Z=g.tag;if(Z===3||Z===4){var fe=g.stateNode.containerInfo;if(fe===S||fe.nodeType===8&&fe.parentNode===S)break;if(Z===4)for(Z=g.return;Z!==null;){var Ne=Z.tag;if((Ne===3||Ne===4)&&(Ne=Z.stateNode.containerInfo,Ne===S||Ne.nodeType===8&&Ne.parentNode===S))return;Z=Z.return}for(;fe!==null;){if(Z=Xi(fe),Z===null)return;if(Ne=Z.tag,Ne===5||Ne===6){g=F=Z;continue e}fe=fe.parentNode}}g=g.return}Ft(function(){var Me=F,Xe=Bt(u),et=[];e:{var Ke=su.get(n);if(Ke!==void 0){var mt=ml,jt=n;switch(n){case"keypress":if(na(u)===0)break e;case"keydown":case"keyup":mt=Wi;break;case"focusin":jt="focus",mt=$t;break;case"focusout":jt="blur",mt=$t;break;case"beforeblur":case"afterblur":mt=$t;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Ze;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=St;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=en;break;case Qd:case Xd:case eu:mt=Ws;break;case tu:mt=Ro;break;case"scroll":mt=H;break;case"wheel":mt=rc;break;case"copy":case"cut":case"paste":mt=Ts;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Hi}var kt=(i&4)!==0,Cr=!kt&&n==="scroll",Te=kt?Ke!==null?Ke+"Capture":null:Ke;kt=[];for(var Ce=Me,Re;Ce!==null;){Re=Ce;var st=Re.stateNode;if(Re.tag===5&&st!==null&&(Re=st,Te!==null&&(st=On(Ce,Te),st!=null&&kt.push(uc(Ce,st,Re)))),Cr)break;Ce=Ce.return}0<kt.length&&(Ke=new mt(Ke,jt,null,u,Xe),et.push({event:Ke,listeners:kt}))}}if((i&7)===0){e:{if(Ke=n==="mouseover"||n==="pointerover",mt=n==="mouseout"||n==="pointerout",Ke&&u!==Kt&&(jt=u.relatedTarget||u.fromElement)&&(Xi(jt)||jt[tn]))break e;if((mt||Ke)&&(Ke=Xe.window===Xe?Xe:(Ke=Xe.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,mt?(jt=u.relatedTarget||u.toElement,mt=Me,jt=jt?Xi(jt):null,jt!==null&&(Cr=Br(jt),jt!==Cr||jt.tag!==5&&jt.tag!==6)&&(jt=null)):(mt=null,jt=Me),mt!==jt)){if(kt=Ze,st="onMouseLeave",Te="onMouseEnter",Ce="mouse",(n==="pointerout"||n==="pointerover")&&(kt=Hi,st="onPointerLeave",Te="onPointerEnter",Ce="pointer"),Cr=mt==null?Ke:Ho(mt),Re=jt==null?Ke:Ho(jt),Ke=new kt(st,Ce+"leave",mt,u,Xe),Ke.target=Cr,Ke.relatedTarget=Re,st=null,Xi(Xe)===Me&&(kt=new kt(Te,Ce+"enter",jt,u,Xe),kt.target=Re,kt.relatedTarget=Cr,st=kt),Cr=st,mt&&jt)t:{for(kt=mt,Te=jt,Ce=0,Re=kt;Re;Re=Vo(Re))Ce++;for(Re=0,st=Te;st;st=Vo(st))Re++;for(;0<Ce-Re;)kt=Vo(kt),Ce--;for(;0<Re-Ce;)Te=Vo(Te),Re--;for(;Ce--;){if(kt===Te||Te!==null&&kt===Te.alternate)break t;kt=Vo(kt),Te=Vo(Te)}kt=null}else kt=null;mt!==null&&Vu(et,Ke,mt,kt,!1),jt!==null&&Cr!==null&&Vu(et,Cr,jt,kt,!0)}}e:{if(Ke=Me?Ho(Me):window,mt=Ke.nodeName&&Ke.nodeName.toLowerCase(),mt==="select"||mt==="input"&&Ke.type==="file")var Pt=Qa;else if(Ka(Ke))if(La)Pt=Ji;else{Pt=Ki;var Dt=Yi}else(mt=Ke.nodeName)&&mt.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(Pt=Oo);if(Pt&&(Pt=Pt(n,Me))){bi(et,Pt,u,Xe);break e}Dt&&Dt(n,Ke,Me),n==="focusout"&&(Dt=Ke._wrapperState)&&Dt.controlled&&Ke.type==="number"&&Ye(Ke,"number",Ke.value)}switch(Dt=Me?Ho(Me):window,n){case"focusin":(Ka(Dt)||Dt.contentEditable==="true")&&(Ni=Dt,Kc=Me,vl=null);break;case"focusout":vl=Kc=Ni=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,Kd(et,u,Xe);break;case"selectionchange":if(yl)break;case"keydown":case"keyup":Kd(et,u,Xe)}var Rt;if(Pa)e:{switch(n){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else la?pl(n,u)&&(Vt="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Vt="onCompositionStart");Vt&&(Vn&&u.locale!=="ko"&&(la||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&la&&(Rt=ec()):(ra=Xe,yi="value"in ra?ra.value:ra.textContent,la=!0)),Dt=ed(Me,Vt),0<Dt.length&&(Vt=new or(Vt,n,null,u,Xe),et.push({event:Vt,listeners:Dt}),Rt?Vt.data=Rt:(Rt=vi(u),Rt!==null&&(Vt.data=Rt)))),(Rt=Yc?Wn(n,u):Hn(n,u))&&(Me=ed(Me,"onBeforeInput"),0<Me.length&&(Xe=new or("onBeforeInput","beforeinput",null,u,Xe),et.push({event:Xe,listeners:Me}),Xe.data=Rt))}lc(et,i)})}function uc(n,i,u){return{instance:n,listener:i,currentTarget:u}}function ed(n,i){for(var u=i+"Capture",g=[];n!==null;){var S=n,F=S.stateNode;S.tag===5&&F!==null&&(S=F,F=On(n,u),F!=null&&g.unshift(uc(n,F,S)),F=On(n,i),F!=null&&g.push(uc(n,F,S))),n=n.return}return g}function Vo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Vu(n,i,u,g,S){for(var F=i._reactName,Z=[];u!==null&&u!==g;){var fe=u,Ne=fe.alternate,Me=fe.stateNode;if(Ne!==null&&Ne===g)break;fe.tag===5&&Me!==null&&(fe=Me,S?(Ne=On(u,F),Ne!=null&&Z.unshift(uc(u,Ne,fe))):S||(Ne=On(u,F),Ne!=null&&Z.push(uc(u,Ne,fe)))),u=u.return}Z.length!==0&&n.push({event:i,listeners:Z})}var Cm=/\r\n?/g,Am=/\u0000|\uFFFD/g;function Wu(n){return(typeof n=="string"?n:""+n).replace(Cm,`
`).replace(Am,"")}function td(n,i,u){if(i=Wu(i),Wu(n)!==i&&u)throw Error(r(425))}function wl(){}var hc=null,Wo=null;function nu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var au=typeof setTimeout=="function"?setTimeout:void 0,Hu=typeof clearTimeout=="function"?clearTimeout:void 0,Gu=typeof Promise=="function"?Promise:void 0,Pm=typeof queueMicrotask=="function"?queueMicrotask:typeof Gu<"u"?function(n){return Gu.resolve(null).then(n).catch(Lm)}:au;function Lm(n){setTimeout(function(){throw n})}function iu(n,i){var u=i,g=0;do{var S=u.nextSibling;if(n.removeChild(u),S&&S.nodeType===8)if(u=S.data,u==="/$"){if(g===0){n.removeChild(S),Ga(i);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=S}while(u);Ga(i)}function fn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function da(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return n;i--}else u==="/$"&&i++}n=n.previousSibling}return null}var kn=Math.random().toString(36).slice(2),ei="__reactFiber$"+kn,Nl="__reactProps$"+kn,tn="__reactContainer$"+kn,Sn="__reactEvents$"+kn,Em="__reactListeners$"+kn,Tm="__reactHandles$"+kn;function Xi(n){var i=n[ei];if(i)return i;for(var u=n.parentNode;u;){if(i=u[tn]||u[ei]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(n=da(n);n!==null;){if(u=n[ei])return u;n=da(n)}return i}n=u,u=n.parentNode}return null}function _l(n){return n=n[ei]||n[tn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ho(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function mc(n){return n[Nl]||null}var ou=[],_i=-1;function Ta(n){return{current:n}}function vs(n){0>_i||(n.current=ou[_i],ou[_i]=null,_i--)}function _s(n,i){_i++,ou[_i]=n.current,n.current=i}var eo={},Wr=Ta(eo),Cn=Ta(!1),Go=eo;function kl(n,i){var u=n.type.contextTypes;if(!u)return eo;var g=n.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===i)return g.__reactInternalMemoizedMaskedChildContext;var S={},F;for(F in u)S[F]=i[F];return g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=S),S}function An(n){return n=n.childContextTypes,n!=null}function sd(){vs(Cn),vs(Wr)}function Zu(n,i,u){if(Wr.current!==eo)throw Error(r(168));_s(Wr,i),_s(Cn,u)}function lu(n,i,u){var g=n.stateNode;if(i=i.childContextTypes,typeof g.getChildContext!="function")return u;g=g.getChildContext();for(var S in g)if(!(S in i))throw Error(r(108,je(n)||"Unknown",S));return ke({},u,g)}function Zo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||eo,Go=Wr.current,_s(Wr,n),_s(Cn,Cn.current),!0}function Yu(n,i,u){var g=n.stateNode;if(!g)throw Error(r(169));u?(n=lu(n,i,Go),g.__reactInternalMemoizedMergedChildContext=n,vs(Cn),vs(Wr),_s(Wr,n)):vs(Cn),_s(Cn,u)}var ki=null,fc=!1,m=!1;function v(n){ki===null?ki=[n]:ki.push(n)}function T(n){fc=!0,v(n)}function M(){if(!m&&ki!==null){m=!0;var n=0,i=ls;try{var u=ki;for(ls=1;n<u.length;n++){var g=u[n];do g=g(!0);while(g!==null)}ki=null,fc=!1}catch(S){throw ki!==null&&(ki=ki.slice(n+1)),vo(il,M),S}finally{ls=i,m=!1}}return null}var W=[],Y=0,J=null,ee=0,se=[],ae=0,we=null,Ee=1,ie="";function Se(n,i){W[Y++]=ee,W[Y++]=J,J=n,ee=i}function Pe(n,i,u){se[ae++]=Ee,se[ae++]=ie,se[ae++]=we,we=n;var g=Ee;n=ie;var S=32-Qr(g)-1;g&=~(1<<S),u+=1;var F=32-Qr(i)+S;if(30<F){var Z=S-S%5;F=(g&(1<<Z)-1).toString(32),g>>=Z,S-=Z,Ee=1<<32-Qr(i)+S|u<<S|g,ie=F+n}else Ee=1<<F|u<<S|g,ie=n}function $e(n){n.return!==null&&(Se(n,1),Pe(n,1,0))}function Fe(n){for(;n===J;)J=W[--Y],W[Y]=null,ee=W[--Y],W[Y]=null;for(;n===we;)we=se[--ae],se[ae]=null,ie=se[--ae],se[ae]=null,Ee=se[--ae],se[ae]=null}var ze=null,Oe=null,Ve=!1,We=null;function Ct(n,i){var u=ai(5,null,null,0);u.elementType="DELETED",u.stateNode=i,u.return=n,i=n.deletions,i===null?(n.deletions=[u],n.flags|=16):i.push(u)}function ft(n,i){switch(n.tag){case 5:var u=n.type;return i=i.nodeType!==1||u.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,ze=n,Oe=fn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,ze=n,Oe=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(u=we!==null?{id:Ee,overflow:ie}:null,n.memoizedState={dehydrated:i,treeContext:u,retryLane:1073741824},u=ai(18,null,null,0),u.stateNode=i,u.return=n,n.child=u,ze=n,Oe=null,!0):!1;default:return!1}}function Ht(n){return(n.mode&1)!==0&&(n.flags&128)===0}function bt(n){if(Ve){var i=Oe;if(i){var u=i;if(!ft(n,i)){if(Ht(n))throw Error(r(418));i=fn(u.nextSibling);var g=ze;i&&ft(n,i)?Ct(g,u):(n.flags=n.flags&-4097|2,Ve=!1,ze=n)}}else{if(Ht(n))throw Error(r(418));n.flags=n.flags&-4097|2,Ve=!1,ze=n}}}function ts(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ze=n}function Qs(n){if(n!==ze)return!1;if(!Ve)return ts(n),Ve=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!nu(n.type,n.memoizedProps)),i&&(i=Oe)){if(Ht(n))throw Gt(),Error(r(418));for(;i;)Ct(n,i),i=fn(i.nextSibling)}if(ts(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(i===0){Oe=fn(n.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++}n=n.nextSibling}Oe=null}}else Oe=ze?fn(n.stateNode.nextSibling):null;return!0}function Gt(){for(var n=Oe;n;)n=fn(n.nextSibling)}function pt(){Oe=ze=null,Ve=!1}function nt(n){We===null?We=[n]:We.push(n)}var cr=w.ReactCurrentBatchConfig;function zt(n,i,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(r(309));var g=u.stateNode}if(!g)throw Error(r(147,n));var S=g,F=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===F?i.ref:(i=function(Z){var fe=S.refs;Z===null?delete fe[F]:fe[F]=Z},i._stringRef=F,i)}if(typeof n!="string")throw Error(r(284));if(!u._owner)throw Error(r(290,n))}return n}function Xt(n,i){throw n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Fs(n){var i=n._init;return i(n._payload)}function Rr(n){function i(Te,Ce){if(n){var Re=Te.deletions;Re===null?(Te.deletions=[Ce],Te.flags|=16):Re.push(Ce)}}function u(Te,Ce){if(!n)return null;for(;Ce!==null;)i(Te,Ce),Ce=Ce.sibling;return null}function g(Te,Ce){for(Te=new Map;Ce!==null;)Ce.key!==null?Te.set(Ce.key,Ce):Te.set(Ce.index,Ce),Ce=Ce.sibling;return Te}function S(Te,Ce){return Te=Rl(Te,Ce),Te.index=0,Te.sibling=null,Te}function F(Te,Ce,Re){return Te.index=Re,n?(Re=Te.alternate,Re!==null?(Re=Re.index,Re<Ce?(Te.flags|=2,Ce):Re):(Te.flags|=2,Ce)):(Te.flags|=1048576,Ce)}function Z(Te){return n&&Te.alternate===null&&(Te.flags|=2),Te}function fe(Te,Ce,Re,st){return Ce===null||Ce.tag!==6?(Ce=lf(Re,Te.mode,st),Ce.return=Te,Ce):(Ce=S(Ce,Re),Ce.return=Te,Ce)}function Ne(Te,Ce,Re,st){var Pt=Re.type;return Pt===U?Xe(Te,Ce,Re.props.children,st,Re.key):Ce!==null&&(Ce.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===he&&Fs(Pt)===Ce.type)?(st=S(Ce,Re.props),st.ref=zt(Te,Ce,Re),st.return=Te,st):(st=ph(Re.type,Re.key,Re.props,null,Te.mode,st),st.ref=zt(Te,Ce,Re),st.return=Te,st)}function Me(Te,Ce,Re,st){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Re.containerInfo||Ce.stateNode.implementation!==Re.implementation?(Ce=cf(Re,Te.mode,st),Ce.return=Te,Ce):(Ce=S(Ce,Re.children||[]),Ce.return=Te,Ce)}function Xe(Te,Ce,Re,st,Pt){return Ce===null||Ce.tag!==7?(Ce=wc(Re,Te.mode,st,Pt),Ce.return=Te,Ce):(Ce=S(Ce,Re),Ce.return=Te,Ce)}function et(Te,Ce,Re){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=lf(""+Ce,Te.mode,Re),Ce.return=Te,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case D:return Re=ph(Ce.type,Ce.key,Ce.props,null,Te.mode,Re),Re.ref=zt(Te,null,Ce),Re.return=Te,Re;case z:return Ce=cf(Ce,Te.mode,Re),Ce.return=Te,Ce;case he:var st=Ce._init;return et(Te,st(Ce._payload),Re)}if(ce(Ce)||de(Ce))return Ce=wc(Ce,Te.mode,Re,null),Ce.return=Te,Ce;Xt(Te,Ce)}return null}function Ke(Te,Ce,Re,st){var Pt=Ce!==null?Ce.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Pt!==null?null:fe(Te,Ce,""+Re,st);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case D:return Re.key===Pt?Ne(Te,Ce,Re,st):null;case z:return Re.key===Pt?Me(Te,Ce,Re,st):null;case he:return Pt=Re._init,Ke(Te,Ce,Pt(Re._payload),st)}if(ce(Re)||de(Re))return Pt!==null?null:Xe(Te,Ce,Re,st,null);Xt(Te,Re)}return null}function mt(Te,Ce,Re,st,Pt){if(typeof st=="string"&&st!==""||typeof st=="number")return Te=Te.get(Re)||null,fe(Ce,Te,""+st,Pt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case D:return Te=Te.get(st.key===null?Re:st.key)||null,Ne(Ce,Te,st,Pt);case z:return Te=Te.get(st.key===null?Re:st.key)||null,Me(Ce,Te,st,Pt);case he:var Dt=st._init;return mt(Te,Ce,Re,Dt(st._payload),Pt)}if(ce(st)||de(st))return Te=Te.get(Re)||null,Xe(Ce,Te,st,Pt,null);Xt(Ce,st)}return null}function jt(Te,Ce,Re,st){for(var Pt=null,Dt=null,Rt=Ce,Vt=Ce=0,on=null;Rt!==null&&Vt<Re.length;Vt++){Rt.index>Vt?(on=Rt,Rt=null):on=Rt.sibling;var gs=Ke(Te,Rt,Re[Vt],st);if(gs===null){Rt===null&&(Rt=on);break}n&&Rt&&gs.alternate===null&&i(Te,Rt),Ce=F(gs,Ce,Vt),Dt===null?Pt=gs:Dt.sibling=gs,Dt=gs,Rt=on}if(Vt===Re.length)return u(Te,Rt),Ve&&Se(Te,Vt),Pt;if(Rt===null){for(;Vt<Re.length;Vt++)Rt=et(Te,Re[Vt],st),Rt!==null&&(Ce=F(Rt,Ce,Vt),Dt===null?Pt=Rt:Dt.sibling=Rt,Dt=Rt);return Ve&&Se(Te,Vt),Pt}for(Rt=g(Te,Rt);Vt<Re.length;Vt++)on=mt(Rt,Te,Vt,Re[Vt],st),on!==null&&(n&&on.alternate!==null&&Rt.delete(on.key===null?Vt:on.key),Ce=F(on,Ce,Vt),Dt===null?Pt=on:Dt.sibling=on,Dt=on);return n&&Rt.forEach(function(Il){return i(Te,Il)}),Ve&&Se(Te,Vt),Pt}function kt(Te,Ce,Re,st){var Pt=de(Re);if(typeof Pt!="function")throw Error(r(150));if(Re=Pt.call(Re),Re==null)throw Error(r(151));for(var Dt=Pt=null,Rt=Ce,Vt=Ce=0,on=null,gs=Re.next();Rt!==null&&!gs.done;Vt++,gs=Re.next()){Rt.index>Vt?(on=Rt,Rt=null):on=Rt.sibling;var Il=Ke(Te,Rt,gs.value,st);if(Il===null){Rt===null&&(Rt=on);break}n&&Rt&&Il.alternate===null&&i(Te,Rt),Ce=F(Il,Ce,Vt),Dt===null?Pt=Il:Dt.sibling=Il,Dt=Il,Rt=on}if(gs.done)return u(Te,Rt),Ve&&Se(Te,Vt),Pt;if(Rt===null){for(;!gs.done;Vt++,gs=Re.next())gs=et(Te,gs.value,st),gs!==null&&(Ce=F(gs,Ce,Vt),Dt===null?Pt=gs:Dt.sibling=gs,Dt=gs);return Ve&&Se(Te,Vt),Pt}for(Rt=g(Te,Rt);!gs.done;Vt++,gs=Re.next())gs=mt(Rt,Te,Vt,gs.value,st),gs!==null&&(n&&gs.alternate!==null&&Rt.delete(gs.key===null?Vt:gs.key),Ce=F(gs,Ce,Vt),Dt===null?Pt=gs:Dt.sibling=gs,Dt=gs);return n&&Rt.forEach(function(Fb){return i(Te,Fb)}),Ve&&Se(Te,Vt),Pt}function Cr(Te,Ce,Re,st){if(typeof Re=="object"&&Re!==null&&Re.type===U&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case D:e:{for(var Pt=Re.key,Dt=Ce;Dt!==null;){if(Dt.key===Pt){if(Pt=Re.type,Pt===U){if(Dt.tag===7){u(Te,Dt.sibling),Ce=S(Dt,Re.props.children),Ce.return=Te,Te=Ce;break e}}else if(Dt.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===he&&Fs(Pt)===Dt.type){u(Te,Dt.sibling),Ce=S(Dt,Re.props),Ce.ref=zt(Te,Dt,Re),Ce.return=Te,Te=Ce;break e}u(Te,Dt);break}else i(Te,Dt);Dt=Dt.sibling}Re.type===U?(Ce=wc(Re.props.children,Te.mode,st,Re.key),Ce.return=Te,Te=Ce):(st=ph(Re.type,Re.key,Re.props,null,Te.mode,st),st.ref=zt(Te,Ce,Re),st.return=Te,Te=st)}return Z(Te);case z:e:{for(Dt=Re.key;Ce!==null;){if(Ce.key===Dt)if(Ce.tag===4&&Ce.stateNode.containerInfo===Re.containerInfo&&Ce.stateNode.implementation===Re.implementation){u(Te,Ce.sibling),Ce=S(Ce,Re.children||[]),Ce.return=Te,Te=Ce;break e}else{u(Te,Ce);break}else i(Te,Ce);Ce=Ce.sibling}Ce=cf(Re,Te.mode,st),Ce.return=Te,Te=Ce}return Z(Te);case he:return Dt=Re._init,Cr(Te,Ce,Dt(Re._payload),st)}if(ce(Re))return jt(Te,Ce,Re,st);if(de(Re))return kt(Te,Ce,Re,st);Xt(Te,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"?(Re=""+Re,Ce!==null&&Ce.tag===6?(u(Te,Ce.sibling),Ce=S(Ce,Re),Ce.return=Te,Te=Ce):(u(Te,Ce),Ce=lf(Re,Te.mode,st),Ce.return=Te,Te=Ce),Z(Te)):u(Te,Ce)}return Cr}var vr=Rr(!0),Hs=Rr(!1),kr=Ta(null),Ir=null,qs=null,rs=null;function ms(){rs=qs=Ir=null}function $s(n){var i=kr.current;vs(kr),n._currentValue=i}function fs(n,i,u){for(;n!==null;){var g=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,g!==null&&(g.childLanes|=i)):g!==null&&(g.childLanes&i)!==i&&(g.childLanes|=i),n===u)break;n=n.return}}function Xs(n,i){Ir=n,rs=qs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(ha=!0),n.firstContext=null)}function er(n){var i=n._currentValue;if(rs!==n)if(n={context:n,memoizedValue:i,next:null},qs===null){if(Ir===null)throw Error(r(308));qs=n,Ir.dependencies={lanes:0,firstContext:n}}else qs=qs.next=n;return i}var Cs=null;function sn(n){Cs===null?Cs=[n]:Cs.push(n)}function ks(n,i,u,g){var S=i.interleaved;return S===null?(u.next=u,sn(i)):(u.next=S.next,S.next=u),i.interleaved=u,As(n,g)}function As(n,i){n.lanes|=i;var u=n.alternate;for(u!==null&&(u.lanes|=i),u=n,n=n.return;n!==null;)n.childLanes|=i,u=n.alternate,u!==null&&(u.childLanes|=i),u=n,n=n.return;return u.tag===3?u.stateNode:null}var br=!1;function Hr(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pn(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function dr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ur(n,i,u){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,(ps&2)!==0){var S=g.pending;return S===null?i.next=i:(i.next=S.next,S.next=i),g.pending=i,As(n,u)}return S=g.interleaved,S===null?(i.next=i,sn(g)):(i.next=S.next,S.next=i),g.interleaved=i,As(n,u)}function rn(n,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194240)!==0)){var g=i.lanes;g&=n.pendingLanes,u|=g,i.lanes=u,ll(n,u)}}function Ps(n,i){var u=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var S=null,F=null;if(u=u.firstBaseUpdate,u!==null){do{var Z={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};F===null?S=F=Z:F=F.next=Z,u=u.next}while(u!==null);F===null?S=F=i:F=F.next=i}else S=F=i;u={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:F,shared:g.shared,effects:g.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=i:n.next=i,u.lastBaseUpdate=i}function nn(n,i,u,g){var S=n.updateQueue;br=!1;var F=S.firstBaseUpdate,Z=S.lastBaseUpdate,fe=S.shared.pending;if(fe!==null){S.shared.pending=null;var Ne=fe,Me=Ne.next;Ne.next=null,Z===null?F=Me:Z.next=Me,Z=Ne;var Xe=n.alternate;Xe!==null&&(Xe=Xe.updateQueue,fe=Xe.lastBaseUpdate,fe!==Z&&(fe===null?Xe.firstBaseUpdate=Me:fe.next=Me,Xe.lastBaseUpdate=Ne))}if(F!==null){var et=S.baseState;Z=0,Xe=Me=Ne=null,fe=F;do{var Ke=fe.lane,mt=fe.eventTime;if((g&Ke)===Ke){Xe!==null&&(Xe=Xe.next={eventTime:mt,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var jt=n,kt=fe;switch(Ke=i,mt=u,kt.tag){case 1:if(jt=kt.payload,typeof jt=="function"){et=jt.call(mt,et,Ke);break e}et=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=kt.payload,Ke=typeof jt=="function"?jt.call(mt,et,Ke):jt,Ke==null)break e;et=ke({},et,Ke);break e;case 2:br=!0}}fe.callback!==null&&fe.lane!==0&&(n.flags|=64,Ke=S.effects,Ke===null?S.effects=[fe]:Ke.push(fe))}else mt={eventTime:mt,lane:Ke,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},Xe===null?(Me=Xe=mt,Ne=et):Xe=Xe.next=mt,Z|=Ke;if(fe=fe.next,fe===null){if(fe=S.shared.pending,fe===null)break;Ke=fe,fe=Ke.next,Ke.next=null,S.lastBaseUpdate=Ke,S.shared.pending=null}}while(!0);if(Xe===null&&(Ne=et),S.baseState=Ne,S.firstBaseUpdate=Me,S.lastBaseUpdate=Xe,i=S.shared.interleaved,i!==null){S=i;do Z|=S.lane,S=S.next;while(S!==i)}else F===null&&(S.shared.lanes=0);yc|=Z,n.lanes=Z,n.memoizedState=et}}function ua(n,i,u){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var g=n[i],S=g.callback;if(S!==null){if(g.callback=null,g=u,typeof S!="function")throw Error(r(191,S));S.call(g)}}}var Fa={},Mr=Ta(Fa),hr=Ta(Fa),to=Ta(Fa);function Si(n){if(n===Fa)throw Error(r(174));return n}function Sl(n,i){switch(_s(to,i),_s(hr,n),_s(Mr,Fa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:_t(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=_t(i,n)}vs(Mr),_s(Mr,i)}function ti(){vs(Mr),vs(hr),vs(to)}function Ku(n){Si(to.current);var i=Si(Mr.current),u=_t(i,n.type);i!==u&&(_s(hr,n),_s(Mr,u))}function cu(n){hr.current===n&&(vs(Mr),vs(hr))}var Rs=Ta(0);function Da(n){for(var i=n;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var du=[];function uu(){for(var n=0;n<du.length;n++)du[n]._workInProgressVersionPrimary=null;du.length=0}var rd=w.ReactCurrentDispatcher,nd=w.ReactCurrentBatchConfig,si=0,Us=null,jr=null,mr=null,Cl=!1,Ci=!1,Al=0,Fm=0;function Sr(){throw Error(r(321))}function ad(n,i){if(i===null)return!1;for(var u=0;u<i.length&&u<n.length;u++)if(!Ks(n[u],i[u]))return!1;return!0}function pc(n,i,u,g,S,F){if(si=F,Us=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,rd.current=n===null||n.memoizedState===null?ab:ib,n=u(g,S),Ci){F=0;do{if(Ci=!1,Al=0,25<=F)throw Error(r(301));F+=1,mr=jr=null,i.updateQueue=null,rd.current=ob,n=u(g,S)}while(Ci)}if(rd.current=th,i=jr!==null&&jr.next!==null,si=0,mr=jr=Us=null,Cl=!1,i)throw Error(r(300));return n}function ri(){var n=Al!==0;return Al=0,n}function Ra(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Us.memoizedState=mr=n:mr=mr.next=n,mr}function Gn(){if(jr===null){var n=Us.alternate;n=n!==null?n.memoizedState:null}else n=jr.next;var i=mr===null?Us.memoizedState:mr.next;if(i!==null)mr=i,jr=n;else{if(n===null)throw Error(r(310));jr=n,n={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},mr===null?Us.memoizedState=mr=n:mr=mr.next=n}return mr}function xc(n,i){return typeof i=="function"?i(n):i}function id(n){var i=Gn(),u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=n;var g=jr,S=g.baseQueue,F=u.pending;if(F!==null){if(S!==null){var Z=S.next;S.next=F.next,F.next=Z}g.baseQueue=S=F,u.pending=null}if(S!==null){F=S.next,g=g.baseState;var fe=Z=null,Ne=null,Me=F;do{var Xe=Me.lane;if((si&Xe)===Xe)Ne!==null&&(Ne=Ne.next={lane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),g=Me.hasEagerState?Me.eagerState:n(g,Me.action);else{var et={lane:Xe,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};Ne===null?(fe=Ne=et,Z=g):Ne=Ne.next=et,Us.lanes|=Xe,yc|=Xe}Me=Me.next}while(Me!==null&&Me!==F);Ne===null?Z=g:Ne.next=fe,Ks(g,i.memoizedState)||(ha=!0),i.memoizedState=g,i.baseState=Z,i.baseQueue=Ne,u.lastRenderedState=g}if(n=u.interleaved,n!==null){S=n;do F=S.lane,Us.lanes|=F,yc|=F,S=S.next;while(S!==n)}else S===null&&(u.lanes=0);return[i.memoizedState,u.dispatch]}function so(n){var i=Gn(),u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=n;var g=u.dispatch,S=u.pending,F=i.memoizedState;if(S!==null){u.pending=null;var Z=S=S.next;do F=n(F,Z.action),Z=Z.next;while(Z!==S);Ks(F,i.memoizedState)||(ha=!0),i.memoizedState=F,i.baseQueue===null&&(i.baseState=F),u.lastRenderedState=F}return[F,g]}function Ju(){}function hu(n,i){var u=Us,g=Gn(),S=i(),F=!Ks(g.memoizedState,S);if(F&&(g.memoizedState=S,ha=!0),g=g.queue,cd(Xu.bind(null,u,g,n),[n]),g.getSnapshot!==i||F||mr!==null&&mr.memoizedState.tag&1){if(u.flags|=2048,Zn(9,mu.bind(null,u,g,S,i),void 0,null),an===null)throw Error(r(349));(si&30)!==0||Qu(u,i,S)}return S}function Qu(n,i,u){n.flags|=16384,n={getSnapshot:i,value:u},i=Us.updateQueue,i===null?(i={lastEffect:null,stores:null},Us.updateQueue=i,i.stores=[n]):(u=i.stores,u===null?i.stores=[n]:u.push(n))}function mu(n,i,u,g){i.value=u,i.getSnapshot=g,Pl(i)&&od(n)}function Xu(n,i,u){return u(function(){Pl(i)&&od(n)})}function Pl(n){var i=n.getSnapshot;n=n.value;try{var u=i();return!Ks(n,u)}catch{return!0}}function od(n){var i=As(n,1);i!==null&&Ti(i,n,1,-1)}function gc(n){var i=Ra();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xc,lastRenderedState:n},i.queue=n,n=n.dispatch=nb.bind(null,Us,n),[i.memoizedState,n]}function Zn(n,i,u,g){return n={tag:n,create:i,destroy:u,deps:g,next:null},i=Us.updateQueue,i===null?(i={lastEffect:null,stores:null},Us.updateQueue=i,i.lastEffect=n.next=n):(u=i.lastEffect,u===null?i.lastEffect=n.next=n:(g=u.next,u.next=n,n.next=g,i.lastEffect=n)),n}function Ai(){return Gn().memoizedState}function Ia(n,i,u,g){var S=Ra();Us.flags|=n,S.memoizedState=Zn(1|i,u,void 0,g===void 0?null:g)}function Yo(n,i,u,g){var S=Gn();g=g===void 0?null:g;var F=void 0;if(jr!==null){var Z=jr.memoizedState;if(F=Z.destroy,g!==null&&ad(g,Z.deps)){S.memoizedState=Zn(i,u,F,g);return}}Us.flags|=n,S.memoizedState=Zn(1|i,u,F,g)}function ld(n,i){return Ia(8390656,8,n,i)}function cd(n,i){return Yo(2048,8,n,i)}function eh(n,i){return Yo(4,2,n,i)}function dd(n,i){return Yo(4,4,n,i)}function ud(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function mx(n,i,u){return u=u!=null?u.concat([n]):null,Yo(4,4,ud.bind(null,i,n),u)}function Dm(){}function fx(n,i){var u=Gn();i=i===void 0?null:i;var g=u.memoizedState;return g!==null&&i!==null&&ad(i,g[1])?g[0]:(u.memoizedState=[n,i],n)}function px(n,i){var u=Gn();i=i===void 0?null:i;var g=u.memoizedState;return g!==null&&i!==null&&ad(i,g[1])?g[0]:(n=n(),u.memoizedState=[n,i],n)}function xx(n,i,u){return(si&21)===0?(n.baseState&&(n.baseState=!1,ha=!0),n.memoizedState=u):(Ks(u,i)||(u=Bc(),Us.lanes|=u,yc|=u,n.baseState=!0),i)}function sb(n,i){var u=ls;ls=u!==0&&4>u?u:4,n(!0);var g=nd.transition;nd.transition={};try{n(!1),i()}finally{ls=u,nd.transition=g}}function gx(){return Gn().memoizedState}function rb(n,i,u){var g=Fl(n);if(u={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null},yx(n))vx(i,u);else if(u=ks(n,i,u,g),u!==null){var S=Kn();Ti(u,n,g,S),bx(u,i,g)}}function nb(n,i,u){var g=Fl(n),S={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null};if(yx(n))vx(i,S);else{var F=n.alternate;if(n.lanes===0&&(F===null||F.lanes===0)&&(F=i.lastRenderedReducer,F!==null))try{var Z=i.lastRenderedState,fe=F(Z,u);if(S.hasEagerState=!0,S.eagerState=fe,Ks(fe,Z)){var Ne=i.interleaved;Ne===null?(S.next=S,sn(i)):(S.next=Ne.next,Ne.next=S),i.interleaved=S;return}}catch{}finally{}u=ks(n,i,S,g),u!==null&&(S=Kn(),Ti(u,n,g,S),bx(u,i,g))}}function yx(n){var i=n.alternate;return n===Us||i!==null&&i===Us}function vx(n,i){Ci=Cl=!0;var u=n.pending;u===null?i.next=i:(i.next=u.next,u.next=i),n.pending=i}function bx(n,i,u){if((u&4194240)!==0){var g=i.lanes;g&=n.pendingLanes,u|=g,i.lanes=u,ll(n,u)}}var th={readContext:er,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},ab={readContext:er,useCallback:function(n,i){return Ra().memoizedState=[n,i===void 0?null:i],n},useContext:er,useEffect:ld,useImperativeHandle:function(n,i,u){return u=u!=null?u.concat([n]):null,Ia(4194308,4,ud.bind(null,i,n),u)},useLayoutEffect:function(n,i){return Ia(4194308,4,n,i)},useInsertionEffect:function(n,i){return Ia(4,2,n,i)},useMemo:function(n,i){var u=Ra();return i=i===void 0?null:i,n=n(),u.memoizedState=[n,i],n},useReducer:function(n,i,u){var g=Ra();return i=u!==void 0?u(i):i,g.memoizedState=g.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},g.queue=n,n=n.dispatch=rb.bind(null,Us,n),[g.memoizedState,n]},useRef:function(n){var i=Ra();return n={current:n},i.memoizedState=n},useState:gc,useDebugValue:Dm,useDeferredValue:function(n){return Ra().memoizedState=n},useTransition:function(){var n=gc(!1),i=n[0];return n=sb.bind(null,n[1]),Ra().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,u){var g=Us,S=Ra();if(Ve){if(u===void 0)throw Error(r(407));u=u()}else{if(u=i(),an===null)throw Error(r(349));(si&30)!==0||Qu(g,i,u)}S.memoizedState=u;var F={value:u,getSnapshot:i};return S.queue=F,ld(Xu.bind(null,g,F,n),[n]),g.flags|=2048,Zn(9,mu.bind(null,g,F,u,i),void 0,null),u},useId:function(){var n=Ra(),i=an.identifierPrefix;if(Ve){var u=ie,g=Ee;u=(g&~(1<<32-Qr(g)-1)).toString(32)+u,i=":"+i+"R"+u,u=Al++,0<u&&(i+="H"+u.toString(32)),i+=":"}else u=Fm++,i=":"+i+"r"+u.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},ib={readContext:er,useCallback:fx,useContext:er,useEffect:cd,useImperativeHandle:mx,useInsertionEffect:eh,useLayoutEffect:dd,useMemo:px,useReducer:id,useRef:Ai,useState:function(){return id(xc)},useDebugValue:Dm,useDeferredValue:function(n){var i=Gn();return xx(i,jr.memoizedState,n)},useTransition:function(){var n=id(xc)[0],i=Gn().memoizedState;return[n,i]},useMutableSource:Ju,useSyncExternalStore:hu,useId:gx,unstable_isNewReconciler:!1},ob={readContext:er,useCallback:fx,useContext:er,useEffect:cd,useImperativeHandle:mx,useInsertionEffect:eh,useLayoutEffect:dd,useMemo:px,useReducer:so,useRef:Ai,useState:function(){return so(xc)},useDebugValue:Dm,useDeferredValue:function(n){var i=Gn();return jr===null?i.memoizedState=n:xx(i,jr.memoizedState,n)},useTransition:function(){var n=so(xc)[0],i=Gn().memoizedState;return[n,i]},useMutableSource:Ju,useSyncExternalStore:hu,useId:gx,unstable_isNewReconciler:!1};function Pi(n,i){if(n&&n.defaultProps){i=ke({},i),n=n.defaultProps;for(var u in n)i[u]===void 0&&(i[u]=n[u]);return i}return i}function Rm(n,i,u,g){i=n.memoizedState,u=u(g,i),u=u==null?i:ke({},i,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var sh={isMounted:function(n){return(n=n._reactInternals)?Br(n)===n:!1},enqueueSetState:function(n,i,u){n=n._reactInternals;var g=Kn(),S=Fl(n),F=dr(g,S);F.payload=i,u!=null&&(F.callback=u),i=ur(n,F,S),i!==null&&(Ti(i,n,S,g),rn(i,n,S))},enqueueReplaceState:function(n,i,u){n=n._reactInternals;var g=Kn(),S=Fl(n),F=dr(g,S);F.tag=1,F.payload=i,u!=null&&(F.callback=u),i=ur(n,F,S),i!==null&&(Ti(i,n,S,g),rn(i,n,S))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var u=Kn(),g=Fl(n),S=dr(u,g);S.tag=2,i!=null&&(S.callback=i),i=ur(n,S,g),i!==null&&(Ti(i,n,g,u),rn(i,n,g))}};function jx(n,i,u,g,S,F,Z){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,F,Z):i.prototype&&i.prototype.isPureReactComponent?!_n(u,g)||!_n(S,F):!0}function wx(n,i,u){var g=!1,S=eo,F=i.contextType;return typeof F=="object"&&F!==null?F=er(F):(S=An(i)?Go:Wr.current,g=i.contextTypes,F=(g=g!=null)?kl(n,S):eo),i=new i(u,F),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=sh,n.stateNode=i,i._reactInternals=n,g&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=S,n.__reactInternalMemoizedMaskedChildContext=F),i}function Nx(n,i,u,g){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,g),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,g),i.state!==n&&sh.enqueueReplaceState(i,i.state,null)}function Im(n,i,u,g){var S=n.stateNode;S.props=u,S.state=n.memoizedState,S.refs={},Hr(n);var F=i.contextType;typeof F=="object"&&F!==null?S.context=er(F):(F=An(i)?Go:Wr.current,S.context=kl(n,F)),S.state=n.memoizedState,F=i.getDerivedStateFromProps,typeof F=="function"&&(Rm(n,i,F,u),S.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(i=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),i!==S.state&&sh.enqueueReplaceState(S,S.state,null),nn(n,u,S,g),S.state=n.memoizedState),typeof S.componentDidMount=="function"&&(n.flags|=4194308)}function hd(n,i){try{var u="",g=i;do u+=ne(g),g=g.return;while(g);var S=u}catch(F){S=`
Error generating stack: `+F.message+`
`+F.stack}return{value:n,source:i,stack:S,digest:null}}function Mm(n,i,u){return{value:n,source:null,stack:u??null,digest:i??null}}function zm(n,i){try{console.error(i.value)}catch(u){setTimeout(function(){throw u})}}var lb=typeof WeakMap=="function"?WeakMap:Map;function _x(n,i,u){u=dr(-1,u),u.tag=3,u.payload={element:null};var g=i.value;return u.callback=function(){ch||(ch=!0,Xm=g),zm(n,i)},u}function kx(n,i,u){u=dr(-1,u),u.tag=3;var g=n.type.getDerivedStateFromError;if(typeof g=="function"){var S=i.value;u.payload=function(){return g(S)},u.callback=function(){zm(n,i)}}var F=n.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(u.callback=function(){zm(n,i),typeof g!="function"&&(El===null?El=new Set([this]):El.add(this));var Z=i.stack;this.componentDidCatch(i.value,{componentStack:Z!==null?Z:""})}),u}function Sx(n,i,u){var g=n.pingCache;if(g===null){g=n.pingCache=new lb;var S=new Set;g.set(i,S)}else S=g.get(i),S===void 0&&(S=new Set,g.set(i,S));S.has(u)||(S.add(u),n=wb.bind(null,n,i,u),i.then(n,n))}function Cx(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Ax(n,i,u,g,S){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(i=dr(-1,1),i.tag=2,ur(u,i,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=S,n)}var cb=w.ReactCurrentOwner,ha=!1;function Yn(n,i,u,g){i.child=n===null?Hs(i,null,u,g):vr(i,n.child,u,g)}function Px(n,i,u,g,S){u=u.render;var F=i.ref;return Xs(i,S),g=pc(n,i,u,g,F,S),u=ri(),n!==null&&!ha?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~S,Ko(n,i,S)):(Ve&&u&&$e(i),i.flags|=1,Yn(n,i,g,S),i.child)}function Lx(n,i,u,g,S){if(n===null){var F=u.type;return typeof F=="function"&&!of(F)&&F.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(i.tag=15,i.type=F,Ex(n,i,F,g,S)):(n=ph(u.type,null,g,i,i.mode,S),n.ref=i.ref,n.return=i,i.child=n)}if(F=n.child,(n.lanes&S)===0){var Z=F.memoizedProps;if(u=u.compare,u=u!==null?u:_n,u(Z,g)&&n.ref===i.ref)return Ko(n,i,S)}return i.flags|=1,n=Rl(F,g),n.ref=i.ref,n.return=i,i.child=n}function Ex(n,i,u,g,S){if(n!==null){var F=n.memoizedProps;if(_n(F,g)&&n.ref===i.ref)if(ha=!1,i.pendingProps=g=F,(n.lanes&S)!==0)(n.flags&131072)!==0&&(ha=!0);else return i.lanes=n.lanes,Ko(n,i,S)}return Om(n,i,u,g,S)}function Tx(n,i,u){var g=i.pendingProps,S=g.children,F=n!==null?n.memoizedState:null;if(g.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},_s(fd,Ma),Ma|=u;else{if((u&1073741824)===0)return n=F!==null?F.baseLanes|u:u,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,_s(fd,Ma),Ma|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=F!==null?F.baseLanes:u,_s(fd,Ma),Ma|=g}else F!==null?(g=F.baseLanes|u,i.memoizedState=null):g=u,_s(fd,Ma),Ma|=g;return Yn(n,i,S,u),i.child}function Fx(n,i){var u=i.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(i.flags|=512,i.flags|=2097152)}function Om(n,i,u,g,S){var F=An(u)?Go:Wr.current;return F=kl(i,F),Xs(i,S),u=pc(n,i,u,g,F,S),g=ri(),n!==null&&!ha?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~S,Ko(n,i,S)):(Ve&&g&&$e(i),i.flags|=1,Yn(n,i,u,S),i.child)}function Dx(n,i,u,g,S){if(An(u)){var F=!0;Zo(i)}else F=!1;if(Xs(i,S),i.stateNode===null)nh(n,i),wx(i,u,g),Im(i,u,g,S),g=!0;else if(n===null){var Z=i.stateNode,fe=i.memoizedProps;Z.props=fe;var Ne=Z.context,Me=u.contextType;typeof Me=="object"&&Me!==null?Me=er(Me):(Me=An(u)?Go:Wr.current,Me=kl(i,Me));var Xe=u.getDerivedStateFromProps,et=typeof Xe=="function"||typeof Z.getSnapshotBeforeUpdate=="function";et||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(fe!==g||Ne!==Me)&&Nx(i,Z,g,Me),br=!1;var Ke=i.memoizedState;Z.state=Ke,nn(i,g,Z,S),Ne=i.memoizedState,fe!==g||Ke!==Ne||Cn.current||br?(typeof Xe=="function"&&(Rm(i,u,Xe,g),Ne=i.memoizedState),(fe=br||jx(i,u,fe,g,Ke,Ne,Me))?(et||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(i.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=g,i.memoizedState=Ne),Z.props=g,Z.state=Ne,Z.context=Me,g=fe):(typeof Z.componentDidMount=="function"&&(i.flags|=4194308),g=!1)}else{Z=i.stateNode,Pn(n,i),fe=i.memoizedProps,Me=i.type===i.elementType?fe:Pi(i.type,fe),Z.props=Me,et=i.pendingProps,Ke=Z.context,Ne=u.contextType,typeof Ne=="object"&&Ne!==null?Ne=er(Ne):(Ne=An(u)?Go:Wr.current,Ne=kl(i,Ne));var mt=u.getDerivedStateFromProps;(Xe=typeof mt=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(fe!==et||Ke!==Ne)&&Nx(i,Z,g,Ne),br=!1,Ke=i.memoizedState,Z.state=Ke,nn(i,g,Z,S);var jt=i.memoizedState;fe!==et||Ke!==jt||Cn.current||br?(typeof mt=="function"&&(Rm(i,u,mt,g),jt=i.memoizedState),(Me=br||jx(i,u,Me,g,Ke,jt,Ne)||!1)?(Xe||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(g,jt,Ne),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(g,jt,Ne)),typeof Z.componentDidUpdate=="function"&&(i.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof Z.componentDidUpdate!="function"||fe===n.memoizedProps&&Ke===n.memoizedState||(i.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||fe===n.memoizedProps&&Ke===n.memoizedState||(i.flags|=1024),i.memoizedProps=g,i.memoizedState=jt),Z.props=g,Z.state=jt,Z.context=Ne,g=Me):(typeof Z.componentDidUpdate!="function"||fe===n.memoizedProps&&Ke===n.memoizedState||(i.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||fe===n.memoizedProps&&Ke===n.memoizedState||(i.flags|=1024),g=!1)}return qm(n,i,u,g,F,S)}function qm(n,i,u,g,S,F){Fx(n,i);var Z=(i.flags&128)!==0;if(!g&&!Z)return S&&Yu(i,u,!1),Ko(n,i,F);g=i.stateNode,cb.current=i;var fe=Z&&typeof u.getDerivedStateFromError!="function"?null:g.render();return i.flags|=1,n!==null&&Z?(i.child=vr(i,n.child,null,F),i.child=vr(i,null,fe,F)):Yn(n,i,fe,F),i.memoizedState=g.state,S&&Yu(i,u,!0),i.child}function Rx(n){var i=n.stateNode;i.pendingContext?Zu(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Zu(n,i.context,!1),Sl(n,i.containerInfo)}function Ix(n,i,u,g,S){return pt(),nt(S),i.flags|=256,Yn(n,i,u,g),i.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function Um(n){return{baseLanes:n,cachePool:null,transitions:null}}function Mx(n,i,u){var g=i.pendingProps,S=Rs.current,F=!1,Z=(i.flags&128)!==0,fe;if((fe=Z)||(fe=n!==null&&n.memoizedState===null?!1:(S&2)!==0),fe?(F=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(S|=1),_s(Rs,S&1),n===null)return bt(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(Z=g.children,n=g.fallback,F?(g=i.mode,F=i.child,Z={mode:"hidden",children:Z},(g&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=Z):F=xh(Z,g,0,null),n=wc(n,g,u,null),F.return=i,n.return=i,F.sibling=n,i.child=F,i.child.memoizedState=Um(u),i.memoizedState=$m,n):Bm(i,Z));if(S=n.memoizedState,S!==null&&(fe=S.dehydrated,fe!==null))return db(n,i,Z,g,fe,S,u);if(F){F=g.fallback,Z=i.mode,S=n.child,fe=S.sibling;var Ne={mode:"hidden",children:g.children};return(Z&1)===0&&i.child!==S?(g=i.child,g.childLanes=0,g.pendingProps=Ne,i.deletions=null):(g=Rl(S,Ne),g.subtreeFlags=S.subtreeFlags&14680064),fe!==null?F=Rl(fe,F):(F=wc(F,Z,u,null),F.flags|=2),F.return=i,g.return=i,g.sibling=F,i.child=g,g=F,F=i.child,Z=n.child.memoizedState,Z=Z===null?Um(u):{baseLanes:Z.baseLanes|u,cachePool:null,transitions:Z.transitions},F.memoizedState=Z,F.childLanes=n.childLanes&~u,i.memoizedState=$m,g}return F=n.child,n=F.sibling,g=Rl(F,{mode:"visible",children:g.children}),(i.mode&1)===0&&(g.lanes=u),g.return=i,g.sibling=null,n!==null&&(u=i.deletions,u===null?(i.deletions=[n],i.flags|=16):u.push(n)),i.child=g,i.memoizedState=null,g}function Bm(n,i){return i=xh({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function rh(n,i,u,g){return g!==null&&nt(g),vr(i,n.child,null,u),n=Bm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function db(n,i,u,g,S,F,Z){if(u)return i.flags&256?(i.flags&=-257,g=Mm(Error(r(422))),rh(n,i,Z,g)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(F=g.fallback,S=i.mode,g=xh({mode:"visible",children:g.children},S,0,null),F=wc(F,S,Z,null),F.flags|=2,g.return=i,F.return=i,g.sibling=F,i.child=g,(i.mode&1)!==0&&vr(i,n.child,null,Z),i.child.memoizedState=Um(Z),i.memoizedState=$m,F);if((i.mode&1)===0)return rh(n,i,Z,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var fe=g.dgst;return g=fe,F=Error(r(419)),g=Mm(F,g,void 0),rh(n,i,Z,g)}if(fe=(Z&n.childLanes)!==0,ha||fe){if(g=an,g!==null){switch(Z&-Z){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|Z))!==0?0:S,S!==0&&S!==F.retryLane&&(F.retryLane=S,As(n,S),Ti(g,n,S,-1))}return af(),g=Mm(Error(r(421))),rh(n,i,Z,g)}return S.data==="$?"?(i.flags|=128,i.child=n.child,i=Nb.bind(null,n),S._reactRetry=i,null):(n=F.treeContext,Oe=fn(S.nextSibling),ze=i,Ve=!0,We=null,n!==null&&(se[ae++]=Ee,se[ae++]=ie,se[ae++]=we,Ee=n.id,ie=n.overflow,we=i),i=Bm(i,g.children),i.flags|=4096,i)}function zx(n,i,u){n.lanes|=i;var g=n.alternate;g!==null&&(g.lanes|=i),fs(n.return,i,u)}function Vm(n,i,u,g,S){var F=n.memoizedState;F===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:S}:(F.isBackwards=i,F.rendering=null,F.renderingStartTime=0,F.last=g,F.tail=u,F.tailMode=S)}function Ox(n,i,u){var g=i.pendingProps,S=g.revealOrder,F=g.tail;if(Yn(n,i,g.children,u),g=Rs.current,(g&2)!==0)g=g&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zx(n,u,i);else if(n.tag===19)zx(n,u,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}if(_s(Rs,g),(i.mode&1)===0)i.memoizedState=null;else switch(S){case"forwards":for(u=i.child,S=null;u!==null;)n=u.alternate,n!==null&&Da(n)===null&&(S=u),u=u.sibling;u=S,u===null?(S=i.child,i.child=null):(S=u.sibling,u.sibling=null),Vm(i,!1,S,u,F);break;case"backwards":for(u=null,S=i.child,i.child=null;S!==null;){if(n=S.alternate,n!==null&&Da(n)===null){i.child=S;break}n=S.sibling,S.sibling=u,u=S,S=n}Vm(i,!0,u,null,F);break;case"together":Vm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nh(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ko(n,i,u){if(n!==null&&(i.dependencies=n.dependencies),yc|=i.lanes,(u&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,u=Rl(n,n.pendingProps),i.child=u,u.return=i;n.sibling!==null;)n=n.sibling,u=u.sibling=Rl(n,n.pendingProps),u.return=i;u.sibling=null}return i.child}function ub(n,i,u){switch(i.tag){case 3:Rx(i),pt();break;case 5:Ku(i);break;case 1:An(i.type)&&Zo(i);break;case 4:Sl(i,i.stateNode.containerInfo);break;case 10:var g=i.type._context,S=i.memoizedProps.value;_s(kr,g._currentValue),g._currentValue=S;break;case 13:if(g=i.memoizedState,g!==null)return g.dehydrated!==null?(_s(Rs,Rs.current&1),i.flags|=128,null):(u&i.child.childLanes)!==0?Mx(n,i,u):(_s(Rs,Rs.current&1),n=Ko(n,i,u),n!==null?n.sibling:null);_s(Rs,Rs.current&1);break;case 19:if(g=(u&i.childLanes)!==0,(n.flags&128)!==0){if(g)return Ox(n,i,u);i.flags|=128}if(S=i.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),_s(Rs,Rs.current),g)break;return null;case 22:case 23:return i.lanes=0,Tx(n,i,u)}return Ko(n,i,u)}var qx,Wm,$x,Ux;qx=function(n,i){for(var u=i.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Wm=function(){},$x=function(n,i,u,g){var S=n.memoizedProps;if(S!==g){n=i.stateNode,Si(Mr.current);var F=null;switch(u){case"input":S=De(n,S),g=De(n,g),F=[];break;case"select":S=ke({},S,{value:void 0}),g=ke({},g,{value:void 0}),F=[];break;case"textarea":S=Le(n,S),g=Le(n,g),F=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(n.onclick=wl)}is(u,g);var Z;u=null;for(Me in S)if(!g.hasOwnProperty(Me)&&S.hasOwnProperty(Me)&&S[Me]!=null)if(Me==="style"){var fe=S[Me];for(Z in fe)fe.hasOwnProperty(Z)&&(u||(u={}),u[Z]="")}else Me!=="dangerouslySetInnerHTML"&&Me!=="children"&&Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&Me!=="autoFocus"&&(o.hasOwnProperty(Me)?F||(F=[]):(F=F||[]).push(Me,null));for(Me in g){var Ne=g[Me];if(fe=S?.[Me],g.hasOwnProperty(Me)&&Ne!==fe&&(Ne!=null||fe!=null))if(Me==="style")if(fe){for(Z in fe)!fe.hasOwnProperty(Z)||Ne&&Ne.hasOwnProperty(Z)||(u||(u={}),u[Z]="");for(Z in Ne)Ne.hasOwnProperty(Z)&&fe[Z]!==Ne[Z]&&(u||(u={}),u[Z]=Ne[Z])}else u||(F||(F=[]),F.push(Me,u)),u=Ne;else Me==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,fe=fe?fe.__html:void 0,Ne!=null&&fe!==Ne&&(F=F||[]).push(Me,Ne)):Me==="children"?typeof Ne!="string"&&typeof Ne!="number"||(F=F||[]).push(Me,""+Ne):Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&(o.hasOwnProperty(Me)?(Ne!=null&&Me==="onScroll"&&Ss("scroll",n),F||fe===Ne||(F=[])):(F=F||[]).push(Me,Ne))}u&&(F=F||[]).push("style",u);var Me=F;(i.updateQueue=Me)&&(i.flags|=4)}},Ux=function(n,i,u,g){u!==g&&(i.flags|=4)};function fu(n,i){if(!Ve)switch(n.tailMode){case"hidden":i=n.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Ln(n){var i=n.alternate!==null&&n.alternate.child===n.child,u=0,g=0;if(i)for(var S=n.child;S!==null;)u|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=n,S=S.sibling;else for(S=n.child;S!==null;)u|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=n,S=S.sibling;return n.subtreeFlags|=g,n.childLanes=u,i}function hb(n,i,u){var g=i.pendingProps;switch(Fe(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(i),null;case 1:return An(i.type)&&sd(),Ln(i),null;case 3:return g=i.stateNode,ti(),vs(Cn),vs(Wr),uu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(n===null||n.child===null)&&(Qs(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,We!==null&&(sf(We),We=null))),Wm(n,i),Ln(i),null;case 5:cu(i);var S=Si(to.current);if(u=i.type,n!==null&&i.stateNode!=null)$x(n,i,u,g,S),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!g){if(i.stateNode===null)throw Error(r(166));return Ln(i),null}if(n=Si(Mr.current),Qs(i)){g=i.stateNode,u=i.type;var F=i.memoizedProps;switch(g[ei]=i,g[Nl]=F,n=(i.mode&1)!==0,u){case"dialog":Ss("cancel",g),Ss("close",g);break;case"iframe":case"object":case"embed":Ss("load",g);break;case"video":case"audio":for(S=0;S<Qi.length;S++)Ss(Qi[S],g);break;case"source":Ss("error",g);break;case"img":case"image":case"link":Ss("error",g),Ss("load",g);break;case"details":Ss("toggle",g);break;case"input":le(g,F),Ss("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!F.multiple},Ss("invalid",g);break;case"textarea":Ue(g,F),Ss("invalid",g)}is(u,F),S=null;for(var Z in F)if(F.hasOwnProperty(Z)){var fe=F[Z];Z==="children"?typeof fe=="string"?g.textContent!==fe&&(F.suppressHydrationWarning!==!0&&td(g.textContent,fe,n),S=["children",fe]):typeof fe=="number"&&g.textContent!==""+fe&&(F.suppressHydrationWarning!==!0&&td(g.textContent,fe,n),S=["children",""+fe]):o.hasOwnProperty(Z)&&fe!=null&&Z==="onScroll"&&Ss("scroll",g)}switch(u){case"input":Ie(g),ct(g,F,!0);break;case"textarea":Ie(g),qe(g);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(g.onclick=wl)}g=S,i.updateQueue=g,g!==null&&(i.flags|=4)}else{Z=S.nodeType===9?S:S.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qe(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=Z.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof g.is=="string"?n=Z.createElement(u,{is:g.is}):(n=Z.createElement(u),u==="select"&&(Z=n,g.multiple?Z.multiple=!0:g.size&&(Z.size=g.size))):n=Z.createElementNS(n,u),n[ei]=i,n[Nl]=g,qx(n,i,!1,!1),i.stateNode=n;e:{switch(Z=Tt(u,g),u){case"dialog":Ss("cancel",n),Ss("close",n),S=g;break;case"iframe":case"object":case"embed":Ss("load",n),S=g;break;case"video":case"audio":for(S=0;S<Qi.length;S++)Ss(Qi[S],n);S=g;break;case"source":Ss("error",n),S=g;break;case"img":case"image":case"link":Ss("error",n),Ss("load",n),S=g;break;case"details":Ss("toggle",n),S=g;break;case"input":le(n,g),S=De(n,g),Ss("invalid",n);break;case"option":S=g;break;case"select":n._wrapperState={wasMultiple:!!g.multiple},S=ke({},g,{value:void 0}),Ss("invalid",n);break;case"textarea":Ue(n,g),S=Le(n,g),Ss("invalid",n);break;default:S=g}is(u,S),fe=S;for(F in fe)if(fe.hasOwnProperty(F)){var Ne=fe[F];F==="style"?yt(n,Ne):F==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,Ne!=null&&ut(n,Ne)):F==="children"?typeof Ne=="string"?(u!=="textarea"||Ne!=="")&&Et(n,Ne):typeof Ne=="number"&&Et(n,""+Ne):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?Ne!=null&&F==="onScroll"&&Ss("scroll",n):Ne!=null&&j(n,F,Ne,Z))}switch(u){case"input":Ie(n),ct(n,g,!1);break;case"textarea":Ie(n),qe(n);break;case"option":g.value!=null&&n.setAttribute("value",""+_e(g.value));break;case"select":n.multiple=!!g.multiple,F=g.value,F!=null?ye(n,!!g.multiple,F,!1):g.defaultValue!=null&&ye(n,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(n.onclick=wl)}switch(u){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ln(i),null;case 6:if(n&&i.stateNode!=null)Ux(n,i,n.memoizedProps,g);else{if(typeof g!="string"&&i.stateNode===null)throw Error(r(166));if(u=Si(to.current),Si(Mr.current),Qs(i)){if(g=i.stateNode,u=i.memoizedProps,g[ei]=i,(F=g.nodeValue!==u)&&(n=ze,n!==null))switch(n.tag){case 3:td(g.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&td(g.nodeValue,u,(n.mode&1)!==0)}F&&(i.flags|=4)}else g=(u.nodeType===9?u:u.ownerDocument).createTextNode(g),g[ei]=i,i.stateNode=g}return Ln(i),null;case 13:if(vs(Rs),g=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ve&&Oe!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Gt(),pt(),i.flags|=98560,F=!1;else if(F=Qs(i),g!==null&&g.dehydrated!==null){if(n===null){if(!F)throw Error(r(318));if(F=i.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[ei]=i}else pt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ln(i),F=!1}else We!==null&&(sf(We),We=null),F=!0;if(!F)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=u,i):(g=g!==null,g!==(n!==null&&n.memoizedState!==null)&&g&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Rs.current&1)!==0?Gr===0&&(Gr=3):af())),i.updateQueue!==null&&(i.flags|=4),Ln(i),null);case 4:return ti(),Wm(n,i),n===null&&Bo(i.stateNode.containerInfo),Ln(i),null;case 10:return $s(i.type._context),Ln(i),null;case 17:return An(i.type)&&sd(),Ln(i),null;case 19:if(vs(Rs),F=i.memoizedState,F===null)return Ln(i),null;if(g=(i.flags&128)!==0,Z=F.rendering,Z===null)if(g)fu(F,!1);else{if(Gr!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(Z=Da(n),Z!==null){for(i.flags|=128,fu(F,!1),g=Z.updateQueue,g!==null&&(i.updateQueue=g,i.flags|=4),i.subtreeFlags=0,g=u,u=i.child;u!==null;)F=u,n=g,F.flags&=14680066,Z=F.alternate,Z===null?(F.childLanes=0,F.lanes=n,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=Z.childLanes,F.lanes=Z.lanes,F.child=Z.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=Z.memoizedProps,F.memoizedState=Z.memoizedState,F.updateQueue=Z.updateQueue,F.type=Z.type,n=Z.dependencies,F.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return _s(Rs,Rs.current&1|2),i.child}n=n.sibling}F.tail!==null&&Ds()>pd&&(i.flags|=128,g=!0,fu(F,!1),i.lanes=4194304)}else{if(!g)if(n=Da(Z),n!==null){if(i.flags|=128,g=!0,u=n.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),fu(F,!0),F.tail===null&&F.tailMode==="hidden"&&!Z.alternate&&!Ve)return Ln(i),null}else 2*Ds()-F.renderingStartTime>pd&&u!==1073741824&&(i.flags|=128,g=!0,fu(F,!1),i.lanes=4194304);F.isBackwards?(Z.sibling=i.child,i.child=Z):(u=F.last,u!==null?u.sibling=Z:i.child=Z,F.last=Z)}return F.tail!==null?(i=F.tail,F.rendering=i,F.tail=i.sibling,F.renderingStartTime=Ds(),i.sibling=null,u=Rs.current,_s(Rs,g?u&1|2:u&1),i):(Ln(i),null);case 22:case 23:return nf(),g=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==g&&(i.flags|=8192),g&&(i.mode&1)!==0?(Ma&1073741824)!==0&&(Ln(i),i.subtreeFlags&6&&(i.flags|=8192)):Ln(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function mb(n,i){switch(Fe(i),i.tag){case 1:return An(i.type)&&sd(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ti(),vs(Cn),vs(Wr),uu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return cu(i),null;case 13:if(vs(Rs),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));pt()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return vs(Rs),null;case 4:return ti(),null;case 10:return $s(i.type._context),null;case 22:case 23:return nf(),null;case 24:return null;default:return null}}var ah=!1,En=!1,fb=typeof WeakSet=="function"?WeakSet:Set,gt=null;function md(n,i){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(g){wr(n,i,g)}else u.current=null}function Hm(n,i,u){try{u()}catch(g){wr(n,i,g)}}var Bx=!1;function pb(n,i){if(hc=hl,n=yr(),Ea(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var S=g.anchorOffset,F=g.focusNode;g=g.focusOffset;try{u.nodeType,F.nodeType}catch{u=null;break e}var Z=0,fe=-1,Ne=-1,Me=0,Xe=0,et=n,Ke=null;t:for(;;){for(var mt;et!==u||S!==0&&et.nodeType!==3||(fe=Z+S),et!==F||g!==0&&et.nodeType!==3||(Ne=Z+g),et.nodeType===3&&(Z+=et.nodeValue.length),(mt=et.firstChild)!==null;)Ke=et,et=mt;for(;;){if(et===n)break t;if(Ke===u&&++Me===S&&(fe=Z),Ke===F&&++Xe===g&&(Ne=Z),(mt=et.nextSibling)!==null)break;et=Ke,Ke=et.parentNode}et=mt}u=fe===-1||Ne===-1?null:{start:fe,end:Ne}}else u=null}u=u||{start:0,end:0}}else u=null;for(Wo={focusedElem:n,selectionRange:u},hl=!1,gt=i;gt!==null;)if(i=gt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,gt=n;else for(;gt!==null;){i=gt;try{var jt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(jt!==null){var kt=jt.memoizedProps,Cr=jt.memoizedState,Te=i.stateNode,Ce=Te.getSnapshotBeforeUpdate(i.elementType===i.type?kt:Pi(i.type,kt),Cr);Te.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var Re=i.stateNode.containerInfo;Re.nodeType===1?Re.textContent="":Re.nodeType===9&&Re.documentElement&&Re.removeChild(Re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(st){wr(i,i.return,st)}if(n=i.sibling,n!==null){n.return=i.return,gt=n;break}gt=i.return}return jt=Bx,Bx=!1,jt}function pu(n,i,u){var g=i.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&n)===n){var F=S.destroy;S.destroy=void 0,F!==void 0&&Hm(i,u,F)}S=S.next}while(S!==g)}}function ih(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var u=i=i.next;do{if((u.tag&n)===n){var g=u.create;u.destroy=g()}u=u.next}while(u!==i)}}function Gm(n){var i=n.ref;if(i!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof i=="function"?i(n):i.current=n}}function Vx(n){var i=n.alternate;i!==null&&(n.alternate=null,Vx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[ei],delete i[Nl],delete i[Sn],delete i[Em],delete i[Tm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Wx(n){return n.tag===5||n.tag===3||n.tag===4}function Hx(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Wx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zm(n,i,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,i?u.nodeType===8?u.parentNode.insertBefore(n,i):u.insertBefore(n,i):(u.nodeType===8?(i=u.parentNode,i.insertBefore(n,u)):(i=u,i.appendChild(n)),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=wl));else if(g!==4&&(n=n.child,n!==null))for(Zm(n,i,u),n=n.sibling;n!==null;)Zm(n,i,u),n=n.sibling}function Ym(n,i,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,i?u.insertBefore(n,i):u.appendChild(n);else if(g!==4&&(n=n.child,n!==null))for(Ym(n,i,u),n=n.sibling;n!==null;)Ym(n,i,u),n=n.sibling}var pn=null,Li=!1;function Ll(n,i,u){for(u=u.child;u!==null;)Gx(n,i,u),u=u.sibling}function Gx(n,i,u){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(jo,u)}catch{}switch(u.tag){case 5:En||md(u,i);case 6:var g=pn,S=Li;pn=null,Ll(n,i,u),pn=g,Li=S,pn!==null&&(Li?(n=pn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):pn.removeChild(u.stateNode));break;case 18:pn!==null&&(Li?(n=pn,u=u.stateNode,n.nodeType===8?iu(n.parentNode,u):n.nodeType===1&&iu(n,u),Ga(n)):iu(pn,u.stateNode));break;case 4:g=pn,S=Li,pn=u.stateNode.containerInfo,Li=!0,Ll(n,i,u),pn=g,Li=S;break;case 0:case 11:case 14:case 15:if(!En&&(g=u.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var F=S,Z=F.destroy;F=F.tag,Z!==void 0&&((F&2)!==0||(F&4)!==0)&&Hm(u,i,Z),S=S.next}while(S!==g)}Ll(n,i,u);break;case 1:if(!En&&(md(u,i),g=u.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=u.memoizedProps,g.state=u.memoizedState,g.componentWillUnmount()}catch(fe){wr(u,i,fe)}Ll(n,i,u);break;case 21:Ll(n,i,u);break;case 22:u.mode&1?(En=(g=En)||u.memoizedState!==null,Ll(n,i,u),En=g):Ll(n,i,u);break;default:Ll(n,i,u)}}function Zx(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new fb),i.forEach(function(g){var S=_b.bind(null,n,g);u.has(g)||(u.add(g),g.then(S,S))})}}function Ei(n,i){var u=i.deletions;if(u!==null)for(var g=0;g<u.length;g++){var S=u[g];try{var F=n,Z=i,fe=Z;e:for(;fe!==null;){switch(fe.tag){case 5:pn=fe.stateNode,Li=!1;break e;case 3:pn=fe.stateNode.containerInfo,Li=!0;break e;case 4:pn=fe.stateNode.containerInfo,Li=!0;break e}fe=fe.return}if(pn===null)throw Error(r(160));Gx(F,Z,S),pn=null,Li=!1;var Ne=S.alternate;Ne!==null&&(Ne.return=null),S.return=null}catch(Me){wr(S,i,Me)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Yx(i,n),i=i.sibling}function Yx(n,i){var u=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ei(i,n),ro(n),g&4){try{pu(3,n,n.return),ih(3,n)}catch(kt){wr(n,n.return,kt)}try{pu(5,n,n.return)}catch(kt){wr(n,n.return,kt)}}break;case 1:Ei(i,n),ro(n),g&512&&u!==null&&md(u,u.return);break;case 5:if(Ei(i,n),ro(n),g&512&&u!==null&&md(u,u.return),n.flags&32){var S=n.stateNode;try{Et(S,"")}catch(kt){wr(n,n.return,kt)}}if(g&4&&(S=n.stateNode,S!=null)){var F=n.memoizedProps,Z=u!==null?u.memoizedProps:F,fe=n.type,Ne=n.updateQueue;if(n.updateQueue=null,Ne!==null)try{fe==="input"&&F.type==="radio"&&F.name!=null&&Nt(S,F),Tt(fe,Z);var Me=Tt(fe,F);for(Z=0;Z<Ne.length;Z+=2){var Xe=Ne[Z],et=Ne[Z+1];Xe==="style"?yt(S,et):Xe==="dangerouslySetInnerHTML"?ut(S,et):Xe==="children"?Et(S,et):j(S,Xe,et,Me)}switch(fe){case"input":At(S,F);break;case"textarea":Ge(S,F);break;case"select":var Ke=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!F.multiple;var mt=F.value;mt!=null?ye(S,!!F.multiple,mt,!1):Ke!==!!F.multiple&&(F.defaultValue!=null?ye(S,!!F.multiple,F.defaultValue,!0):ye(S,!!F.multiple,F.multiple?[]:"",!1))}S[Nl]=F}catch(kt){wr(n,n.return,kt)}}break;case 6:if(Ei(i,n),ro(n),g&4){if(n.stateNode===null)throw Error(r(162));S=n.stateNode,F=n.memoizedProps;try{S.nodeValue=F}catch(kt){wr(n,n.return,kt)}}break;case 3:if(Ei(i,n),ro(n),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Ga(i.containerInfo)}catch(kt){wr(n,n.return,kt)}break;case 4:Ei(i,n),ro(n);break;case 13:Ei(i,n),ro(n),S=n.child,S.flags&8192&&(F=S.memoizedState!==null,S.stateNode.isHidden=F,!F||S.alternate!==null&&S.alternate.memoizedState!==null||(Qm=Ds())),g&4&&Zx(n);break;case 22:if(Xe=u!==null&&u.memoizedState!==null,n.mode&1?(En=(Me=En)||Xe,Ei(i,n),En=Me):Ei(i,n),ro(n),g&8192){if(Me=n.memoizedState!==null,(n.stateNode.isHidden=Me)&&!Xe&&(n.mode&1)!==0)for(gt=n,Xe=n.child;Xe!==null;){for(et=gt=Xe;gt!==null;){switch(Ke=gt,mt=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:pu(4,Ke,Ke.return);break;case 1:md(Ke,Ke.return);var jt=Ke.stateNode;if(typeof jt.componentWillUnmount=="function"){g=Ke,u=Ke.return;try{i=g,jt.props=i.memoizedProps,jt.state=i.memoizedState,jt.componentWillUnmount()}catch(kt){wr(g,u,kt)}}break;case 5:md(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){Qx(et);continue}}mt!==null?(mt.return=Ke,gt=mt):Qx(et)}Xe=Xe.sibling}e:for(Xe=null,et=n;;){if(et.tag===5){if(Xe===null){Xe=et;try{S=et.stateNode,Me?(F=S.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(fe=et.stateNode,Ne=et.memoizedProps.style,Z=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null,fe.style.display=es("display",Z))}catch(kt){wr(n,n.return,kt)}}}else if(et.tag===6){if(Xe===null)try{et.stateNode.nodeValue=Me?"":et.memoizedProps}catch(kt){wr(n,n.return,kt)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===n)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===n)break e;for(;et.sibling===null;){if(et.return===null||et.return===n)break e;Xe===et&&(Xe=null),et=et.return}Xe===et&&(Xe=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:Ei(i,n),ro(n),g&4&&Zx(n);break;case 21:break;default:Ei(i,n),ro(n)}}function ro(n){var i=n.flags;if(i&2){try{e:{for(var u=n.return;u!==null;){if(Wx(u)){var g=u;break e}u=u.return}throw Error(r(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(Et(S,""),g.flags&=-33);var F=Hx(n);Ym(n,F,S);break;case 3:case 4:var Z=g.stateNode.containerInfo,fe=Hx(n);Zm(n,fe,Z);break;default:throw Error(r(161))}}catch(Ne){wr(n,n.return,Ne)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function xb(n,i,u){gt=n,Kx(n)}function Kx(n,i,u){for(var g=(n.mode&1)!==0;gt!==null;){var S=gt,F=S.child;if(S.tag===22&&g){var Z=S.memoizedState!==null||ah;if(!Z){var fe=S.alternate,Ne=fe!==null&&fe.memoizedState!==null||En;fe=ah;var Me=En;if(ah=Z,(En=Ne)&&!Me)for(gt=S;gt!==null;)Z=gt,Ne=Z.child,Z.tag===22&&Z.memoizedState!==null?Xx(S):Ne!==null?(Ne.return=Z,gt=Ne):Xx(S);for(;F!==null;)gt=F,Kx(F),F=F.sibling;gt=S,ah=fe,En=Me}Jx(n)}else(S.subtreeFlags&8772)!==0&&F!==null?(F.return=S,gt=F):Jx(n)}}function Jx(n){for(;gt!==null;){var i=gt;if((i.flags&8772)!==0){var u=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:En||ih(5,i);break;case 1:var g=i.stateNode;if(i.flags&4&&!En)if(u===null)g.componentDidMount();else{var S=i.elementType===i.type?u.memoizedProps:Pi(i.type,u.memoizedProps);g.componentDidUpdate(S,u.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var F=i.updateQueue;F!==null&&ua(i,F,g);break;case 3:var Z=i.updateQueue;if(Z!==null){if(u=null,i.child!==null)switch(i.child.tag){case 5:u=i.child.stateNode;break;case 1:u=i.child.stateNode}ua(i,Z,u)}break;case 5:var fe=i.stateNode;if(u===null&&i.flags&4){u=fe;var Ne=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Ne.autoFocus&&u.focus();break;case"img":Ne.src&&(u.src=Ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Me=i.alternate;if(Me!==null){var Xe=Me.memoizedState;if(Xe!==null){var et=Xe.dehydrated;et!==null&&Ga(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}En||i.flags&512&&Gm(i)}catch(Ke){wr(i,i.return,Ke)}}if(i===n){gt=null;break}if(u=i.sibling,u!==null){u.return=i.return,gt=u;break}gt=i.return}}function Qx(n){for(;gt!==null;){var i=gt;if(i===n){gt=null;break}var u=i.sibling;if(u!==null){u.return=i.return,gt=u;break}gt=i.return}}function Xx(n){for(;gt!==null;){var i=gt;try{switch(i.tag){case 0:case 11:case 15:var u=i.return;try{ih(4,i)}catch(Ne){wr(i,u,Ne)}break;case 1:var g=i.stateNode;if(typeof g.componentDidMount=="function"){var S=i.return;try{g.componentDidMount()}catch(Ne){wr(i,S,Ne)}}var F=i.return;try{Gm(i)}catch(Ne){wr(i,F,Ne)}break;case 5:var Z=i.return;try{Gm(i)}catch(Ne){wr(i,Z,Ne)}}}catch(Ne){wr(i,i.return,Ne)}if(i===n){gt=null;break}var fe=i.sibling;if(fe!==null){fe.return=i.return,gt=fe;break}gt=i.return}}var gb=Math.ceil,oh=w.ReactCurrentDispatcher,Km=w.ReactCurrentOwner,ni=w.ReactCurrentBatchConfig,ps=0,an=null,zr=null,xn=0,Ma=0,fd=Ta(0),Gr=0,xu=null,yc=0,lh=0,Jm=0,gu=null,ma=null,Qm=0,pd=1/0,Jo=null,ch=!1,Xm=null,El=null,dh=!1,Tl=null,uh=0,yu=0,ef=null,hh=-1,mh=0;function Kn(){return(ps&6)!==0?Ds():hh!==-1?hh:hh=Ds()}function Fl(n){return(n.mode&1)===0?1:(ps&2)!==0&&xn!==0?xn&-xn:cr.transition!==null?(mh===0&&(mh=Bc()),mh):(n=ls,n!==0||(n=window.event,n=n===void 0?16:Po(n.type)),n)}function Ti(n,i,u,g){if(50<yu)throw yu=0,ef=null,Error(r(185));ko(n,u,g),((ps&2)===0||n!==an)&&(n===an&&((ps&2)===0&&(lh|=u),Gr===4&&Dl(n,xn)),fa(n,g),u===1&&ps===0&&(i.mode&1)===0&&(pd=Ds()+500,fc&&M()))}function fa(n,i){var u=n.callbackNode;ir(n,i);var g=jn(n,n===an?xn:0);if(g===0)u!==null&&bo(u),n.callbackNode=null,n.callbackPriority=0;else if(i=g&-g,n.callbackPriority!==i){if(u!=null&&bo(u),i===1)n.tag===0?T(tg.bind(null,n)):v(tg.bind(null,n)),Pm(function(){(ps&6)===0&&M()}),u=null;else{switch(fi(g)){case 1:u=il;break;case 4:u=$n;break;case 16:u=Bi;break;case 536870912:u=ol;break;default:u=Bi}u=cg(u,eg.bind(null,n))}n.callbackPriority=i,n.callbackNode=u}}function eg(n,i){if(hh=-1,mh=0,(ps&6)!==0)throw Error(r(327));var u=n.callbackNode;if(xd()&&n.callbackNode!==u)return null;var g=jn(n,n===an?xn:0);if(g===0)return null;if((g&30)!==0||(g&n.expiredLanes)!==0||i)i=fh(n,g);else{i=g;var S=ps;ps|=2;var F=rg();(an!==n||xn!==i)&&(Jo=null,pd=Ds()+500,bc(n,i));do try{bb();break}catch(fe){sg(n,fe)}while(!0);ms(),oh.current=F,ps=S,zr!==null?i=0:(an=null,xn=0,i=Gr)}if(i!==0){if(i===2&&(S=_o(n),S!==0&&(g=S,i=tf(n,S))),i===1)throw u=xu,bc(n,0),Dl(n,g),fa(n,Ds()),u;if(i===6)Dl(n,g);else{if(S=n.current.alternate,(g&30)===0&&!yb(S)&&(i=fh(n,g),i===2&&(F=_o(n),F!==0&&(g=F,i=tf(n,F))),i===1))throw u=xu,bc(n,0),Dl(n,g),fa(n,Ds()),u;switch(n.finishedWork=S,n.finishedLanes=g,i){case 0:case 1:throw Error(r(345));case 2:jc(n,ma,Jo);break;case 3:if(Dl(n,g),(g&130023424)===g&&(i=Qm+500-Ds(),10<i)){if(jn(n,0)!==0)break;if(S=n.suspendedLanes,(S&g)!==g){Kn(),n.pingedLanes|=n.suspendedLanes&S;break}n.timeoutHandle=au(jc.bind(null,n,ma,Jo),i);break}jc(n,ma,Jo);break;case 4:if(Dl(n,g),(g&4194240)===g)break;for(i=n.eventTimes,S=-1;0<g;){var Z=31-Qr(g);F=1<<Z,Z=i[Z],Z>S&&(S=Z),g&=~F}if(g=S,g=Ds()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*gb(g/1960))-g,10<g){n.timeoutHandle=au(jc.bind(null,n,ma,Jo),g);break}jc(n,ma,Jo);break;case 5:jc(n,ma,Jo);break;default:throw Error(r(329))}}}return fa(n,Ds()),n.callbackNode===u?eg.bind(null,n):null}function tf(n,i){var u=gu;return n.current.memoizedState.isDehydrated&&(bc(n,i).flags|=256),n=fh(n,i),n!==2&&(i=ma,ma=u,i!==null&&sf(i)),n}function sf(n){ma===null?ma=n:ma.push.apply(ma,n)}function yb(n){for(var i=n;;){if(i.flags&16384){var u=i.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var g=0;g<u.length;g++){var S=u[g],F=S.getSnapshot;S=S.value;try{if(!Ks(F(),S))return!1}catch{return!1}}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Dl(n,i){for(i&=~Jm,i&=~lh,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var u=31-Qr(i),g=1<<u;n[u]=-1,i&=~g}}function tg(n){if((ps&6)!==0)throw Error(r(327));xd();var i=jn(n,0);if((i&1)===0)return fa(n,Ds()),null;var u=fh(n,i);if(n.tag!==0&&u===2){var g=_o(n);g!==0&&(i=g,u=tf(n,g))}if(u===1)throw u=xu,bc(n,0),Dl(n,i),fa(n,Ds()),u;if(u===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,jc(n,ma,Jo),fa(n,Ds()),null}function rf(n,i){var u=ps;ps|=1;try{return n(i)}finally{ps=u,ps===0&&(pd=Ds()+500,fc&&M())}}function vc(n){Tl!==null&&Tl.tag===0&&(ps&6)===0&&xd();var i=ps;ps|=1;var u=ni.transition,g=ls;try{if(ni.transition=null,ls=1,n)return n()}finally{ls=g,ni.transition=u,ps=i,(ps&6)===0&&M()}}function nf(){Ma=fd.current,vs(fd)}function bc(n,i){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Hu(u)),zr!==null)for(u=zr.return;u!==null;){var g=u;switch(Fe(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&sd();break;case 3:ti(),vs(Cn),vs(Wr),uu();break;case 5:cu(g);break;case 4:ti();break;case 13:vs(Rs);break;case 19:vs(Rs);break;case 10:$s(g.type._context);break;case 22:case 23:nf()}u=u.return}if(an=n,zr=n=Rl(n.current,null),xn=Ma=i,Gr=0,xu=null,Jm=lh=yc=0,ma=gu=null,Cs!==null){for(i=0;i<Cs.length;i++)if(u=Cs[i],g=u.interleaved,g!==null){u.interleaved=null;var S=g.next,F=u.pending;if(F!==null){var Z=F.next;F.next=S,g.next=Z}u.pending=g}Cs=null}return n}function sg(n,i){do{var u=zr;try{if(ms(),rd.current=th,Cl){for(var g=Us.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}Cl=!1}if(si=0,mr=jr=Us=null,Ci=!1,Al=0,Km.current=null,u===null||u.return===null){Gr=1,xu=i,zr=null;break}e:{var F=n,Z=u.return,fe=u,Ne=i;if(i=xn,fe.flags|=32768,Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var Me=Ne,Xe=fe,et=Xe.tag;if((Xe.mode&1)===0&&(et===0||et===11||et===15)){var Ke=Xe.alternate;Ke?(Xe.updateQueue=Ke.updateQueue,Xe.memoizedState=Ke.memoizedState,Xe.lanes=Ke.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var mt=Cx(Z);if(mt!==null){mt.flags&=-257,Ax(mt,Z,fe,F,i),mt.mode&1&&Sx(F,Me,i),i=mt,Ne=Me;var jt=i.updateQueue;if(jt===null){var kt=new Set;kt.add(Ne),i.updateQueue=kt}else jt.add(Ne);break e}else{if((i&1)===0){Sx(F,Me,i),af();break e}Ne=Error(r(426))}}else if(Ve&&fe.mode&1){var Cr=Cx(Z);if(Cr!==null){(Cr.flags&65536)===0&&(Cr.flags|=256),Ax(Cr,Z,fe,F,i),nt(hd(Ne,fe));break e}}F=Ne=hd(Ne,fe),Gr!==4&&(Gr=2),gu===null?gu=[F]:gu.push(F),F=Z;do{switch(F.tag){case 3:F.flags|=65536,i&=-i,F.lanes|=i;var Te=_x(F,Ne,i);Ps(F,Te);break e;case 1:fe=Ne;var Ce=F.type,Re=F.stateNode;if((F.flags&128)===0&&(typeof Ce.getDerivedStateFromError=="function"||Re!==null&&typeof Re.componentDidCatch=="function"&&(El===null||!El.has(Re)))){F.flags|=65536,i&=-i,F.lanes|=i;var st=kx(F,fe,i);Ps(F,st);break e}}F=F.return}while(F!==null)}ag(u)}catch(Pt){i=Pt,zr===u&&u!==null&&(zr=u=u.return);continue}break}while(!0)}function rg(){var n=oh.current;return oh.current=th,n===null?th:n}function af(){(Gr===0||Gr===3||Gr===2)&&(Gr=4),an===null||(yc&268435455)===0&&(lh&268435455)===0||Dl(an,xn)}function fh(n,i){var u=ps;ps|=2;var g=rg();(an!==n||xn!==i)&&(Jo=null,bc(n,i));do try{vb();break}catch(S){sg(n,S)}while(!0);if(ms(),ps=u,oh.current=g,zr!==null)throw Error(r(261));return an=null,xn=0,Gr}function vb(){for(;zr!==null;)ng(zr)}function bb(){for(;zr!==null&&!al();)ng(zr)}function ng(n){var i=lg(n.alternate,n,Ma);n.memoizedProps=n.pendingProps,i===null?ag(n):zr=i,Km.current=null}function ag(n){var i=n;do{var u=i.alternate;if(n=i.return,(i.flags&32768)===0){if(u=hb(u,i,Ma),u!==null){zr=u;return}}else{if(u=mb(u,i),u!==null){u.flags&=32767,zr=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Gr=6,zr=null;return}}if(i=i.sibling,i!==null){zr=i;return}zr=i=n}while(i!==null);Gr===0&&(Gr=5)}function jc(n,i,u){var g=ls,S=ni.transition;try{ni.transition=null,ls=1,jb(n,i,u,g)}finally{ni.transition=S,ls=g}return null}function jb(n,i,u,g){do xd();while(Tl!==null);if((ps&6)!==0)throw Error(r(327));u=n.finishedWork;var S=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var F=u.lanes|u.childLanes;if(Va(n,F),n===an&&(zr=an=null,xn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||dh||(dh=!0,cg(Bi,function(){return xd(),null})),F=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||F){F=ni.transition,ni.transition=null;var Z=ls;ls=1;var fe=ps;ps|=4,Km.current=null,pb(n,u),Yx(u,n),nc(Wo),hl=!!hc,Wo=hc=null,n.current=u,xb(u),Gd(),ps=fe,ls=Z,ni.transition=F}else n.current=u;if(dh&&(dh=!1,Tl=n,uh=S),F=n.pendingLanes,F===0&&(El=null),$c(u.stateNode),fa(n,Ds()),i!==null)for(g=n.onRecoverableError,u=0;u<i.length;u++)S=i[u],g(S.value,{componentStack:S.stack,digest:S.digest});if(ch)throw ch=!1,n=Xm,Xm=null,n;return(uh&1)!==0&&n.tag!==0&&xd(),F=n.pendingLanes,(F&1)!==0?n===ef?yu++:(yu=0,ef=n):yu=0,M(),null}function xd(){if(Tl!==null){var n=fi(uh),i=ni.transition,u=ls;try{if(ni.transition=null,ls=16>n?16:n,Tl===null)var g=!1;else{if(n=Tl,Tl=null,uh=0,(ps&6)!==0)throw Error(r(331));var S=ps;for(ps|=4,gt=n.current;gt!==null;){var F=gt,Z=F.child;if((gt.flags&16)!==0){var fe=F.deletions;if(fe!==null){for(var Ne=0;Ne<fe.length;Ne++){var Me=fe[Ne];for(gt=Me;gt!==null;){var Xe=gt;switch(Xe.tag){case 0:case 11:case 15:pu(8,Xe,F)}var et=Xe.child;if(et!==null)et.return=Xe,gt=et;else for(;gt!==null;){Xe=gt;var Ke=Xe.sibling,mt=Xe.return;if(Vx(Xe),Xe===Me){gt=null;break}if(Ke!==null){Ke.return=mt,gt=Ke;break}gt=mt}}}var jt=F.alternate;if(jt!==null){var kt=jt.child;if(kt!==null){jt.child=null;do{var Cr=kt.sibling;kt.sibling=null,kt=Cr}while(kt!==null)}}gt=F}}if((F.subtreeFlags&2064)!==0&&Z!==null)Z.return=F,gt=Z;else e:for(;gt!==null;){if(F=gt,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:pu(9,F,F.return)}var Te=F.sibling;if(Te!==null){Te.return=F.return,gt=Te;break e}gt=F.return}}var Ce=n.current;for(gt=Ce;gt!==null;){Z=gt;var Re=Z.child;if((Z.subtreeFlags&2064)!==0&&Re!==null)Re.return=Z,gt=Re;else e:for(Z=Ce;gt!==null;){if(fe=gt,(fe.flags&2048)!==0)try{switch(fe.tag){case 0:case 11:case 15:ih(9,fe)}}catch(Pt){wr(fe,fe.return,Pt)}if(fe===Z){gt=null;break e}var st=fe.sibling;if(st!==null){st.return=fe.return,gt=st;break e}gt=fe.return}}if(ps=S,M(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(jo,n)}catch{}g=!0}return g}finally{ls=u,ni.transition=i}}return!1}function ig(n,i,u){i=hd(u,i),i=_x(n,i,1),n=ur(n,i,1),i=Kn(),n!==null&&(ko(n,1,i),fa(n,i))}function wr(n,i,u){if(n.tag===3)ig(n,n,u);else for(;i!==null;){if(i.tag===3){ig(i,n,u);break}else if(i.tag===1){var g=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(El===null||!El.has(g))){n=hd(u,n),n=kx(i,n,1),i=ur(i,n,1),n=Kn(),i!==null&&(ko(i,1,n),fa(i,n));break}}i=i.return}}function wb(n,i,u){var g=n.pingCache;g!==null&&g.delete(i),i=Kn(),n.pingedLanes|=n.suspendedLanes&u,an===n&&(xn&u)===u&&(Gr===4||Gr===3&&(xn&130023424)===xn&&500>Ds()-Qm?bc(n,0):Jm|=u),fa(n,i)}function og(n,i){i===0&&((n.mode&1)===0?i=1:(i=ta,ta<<=1,(ta&130023424)===0&&(ta=4194304)));var u=Kn();n=As(n,i),n!==null&&(ko(n,i,u),fa(n,u))}function Nb(n){var i=n.memoizedState,u=0;i!==null&&(u=i.retryLane),og(n,u)}function _b(n,i){var u=0;switch(n.tag){case 13:var g=n.stateNode,S=n.memoizedState;S!==null&&(u=S.retryLane);break;case 19:g=n.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(i),og(n,u)}var lg;lg=function(n,i,u){if(n!==null)if(n.memoizedProps!==i.pendingProps||Cn.current)ha=!0;else{if((n.lanes&u)===0&&(i.flags&128)===0)return ha=!1,ub(n,i,u);ha=(n.flags&131072)!==0}else ha=!1,Ve&&(i.flags&1048576)!==0&&Pe(i,ee,i.index);switch(i.lanes=0,i.tag){case 2:var g=i.type;nh(n,i),n=i.pendingProps;var S=kl(i,Wr.current);Xs(i,u),S=pc(null,i,g,n,S,u);var F=ri();return i.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,An(g)?(F=!0,Zo(i)):F=!1,i.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Hr(i),S.updater=sh,i.stateNode=S,S._reactInternals=i,Im(i,g,n,u),i=qm(null,i,g,!0,F,u)):(i.tag=0,Ve&&F&&$e(i),Yn(null,i,S,u),i=i.child),i;case 16:g=i.elementType;e:{switch(nh(n,i),n=i.pendingProps,S=g._init,g=S(g._payload),i.type=g,S=i.tag=Sb(g),n=Pi(g,n),S){case 0:i=Om(null,i,g,n,u);break e;case 1:i=Dx(null,i,g,n,u);break e;case 11:i=Px(null,i,g,n,u);break e;case 14:i=Lx(null,i,g,Pi(g.type,n),u);break e}throw Error(r(306,g,""))}return i;case 0:return g=i.type,S=i.pendingProps,S=i.elementType===g?S:Pi(g,S),Om(n,i,g,S,u);case 1:return g=i.type,S=i.pendingProps,S=i.elementType===g?S:Pi(g,S),Dx(n,i,g,S,u);case 3:e:{if(Rx(i),n===null)throw Error(r(387));g=i.pendingProps,F=i.memoizedState,S=F.element,Pn(n,i),nn(i,g,null,u);var Z=i.memoizedState;if(g=Z.element,F.isDehydrated)if(F={element:g,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},i.updateQueue.baseState=F,i.memoizedState=F,i.flags&256){S=hd(Error(r(423)),i),i=Ix(n,i,g,u,S);break e}else if(g!==S){S=hd(Error(r(424)),i),i=Ix(n,i,g,u,S);break e}else for(Oe=fn(i.stateNode.containerInfo.firstChild),ze=i,Ve=!0,We=null,u=Hs(i,null,g,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(pt(),g===S){i=Ko(n,i,u);break e}Yn(n,i,g,u)}i=i.child}return i;case 5:return Ku(i),n===null&&bt(i),g=i.type,S=i.pendingProps,F=n!==null?n.memoizedProps:null,Z=S.children,nu(g,S)?Z=null:F!==null&&nu(g,F)&&(i.flags|=32),Fx(n,i),Yn(n,i,Z,u),i.child;case 6:return n===null&&bt(i),null;case 13:return Mx(n,i,u);case 4:return Sl(i,i.stateNode.containerInfo),g=i.pendingProps,n===null?i.child=vr(i,null,g,u):Yn(n,i,g,u),i.child;case 11:return g=i.type,S=i.pendingProps,S=i.elementType===g?S:Pi(g,S),Px(n,i,g,S,u);case 7:return Yn(n,i,i.pendingProps,u),i.child;case 8:return Yn(n,i,i.pendingProps.children,u),i.child;case 12:return Yn(n,i,i.pendingProps.children,u),i.child;case 10:e:{if(g=i.type._context,S=i.pendingProps,F=i.memoizedProps,Z=S.value,_s(kr,g._currentValue),g._currentValue=Z,F!==null)if(Ks(F.value,Z)){if(F.children===S.children&&!Cn.current){i=Ko(n,i,u);break e}}else for(F=i.child,F!==null&&(F.return=i);F!==null;){var fe=F.dependencies;if(fe!==null){Z=F.child;for(var Ne=fe.firstContext;Ne!==null;){if(Ne.context===g){if(F.tag===1){Ne=dr(-1,u&-u),Ne.tag=2;var Me=F.updateQueue;if(Me!==null){Me=Me.shared;var Xe=Me.pending;Xe===null?Ne.next=Ne:(Ne.next=Xe.next,Xe.next=Ne),Me.pending=Ne}}F.lanes|=u,Ne=F.alternate,Ne!==null&&(Ne.lanes|=u),fs(F.return,u,i),fe.lanes|=u;break}Ne=Ne.next}}else if(F.tag===10)Z=F.type===i.type?null:F.child;else if(F.tag===18){if(Z=F.return,Z===null)throw Error(r(341));Z.lanes|=u,fe=Z.alternate,fe!==null&&(fe.lanes|=u),fs(Z,u,i),Z=F.sibling}else Z=F.child;if(Z!==null)Z.return=F;else for(Z=F;Z!==null;){if(Z===i){Z=null;break}if(F=Z.sibling,F!==null){F.return=Z.return,Z=F;break}Z=Z.return}F=Z}Yn(n,i,S.children,u),i=i.child}return i;case 9:return S=i.type,g=i.pendingProps.children,Xs(i,u),S=er(S),g=g(S),i.flags|=1,Yn(n,i,g,u),i.child;case 14:return g=i.type,S=Pi(g,i.pendingProps),S=Pi(g.type,S),Lx(n,i,g,S,u);case 15:return Ex(n,i,i.type,i.pendingProps,u);case 17:return g=i.type,S=i.pendingProps,S=i.elementType===g?S:Pi(g,S),nh(n,i),i.tag=1,An(g)?(n=!0,Zo(i)):n=!1,Xs(i,u),wx(i,g,S),Im(i,g,S,u),qm(null,i,g,!0,n,u);case 19:return Ox(n,i,u);case 22:return Tx(n,i,u)}throw Error(r(156,i.tag))};function cg(n,i){return vo(n,i)}function kb(n,i,u,g){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(n,i,u,g){return new kb(n,i,u,g)}function of(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Sb(n){if(typeof n=="function")return of(n)?1:0;if(n!=null){if(n=n.$$typeof,n===R)return 11;if(n===Q)return 14}return 2}function Rl(n,i){var u=n.alternate;return u===null?(u=ai(n.tag,i,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=i,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,i=n.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function ph(n,i,u,g,S,F){var Z=2;if(g=n,typeof n=="function")of(n)&&(Z=1);else if(typeof n=="string")Z=5;else e:switch(n){case U:return wc(u.children,S,F,i);case X:Z=8,S|=8;break;case E:return n=ai(12,u,i,S|2),n.elementType=E,n.lanes=F,n;case $:return n=ai(13,u,i,S),n.elementType=$,n.lanes=F,n;case q:return n=ai(19,u,i,S),n.elementType=q,n.lanes=F,n;case be:return xh(u,S,F,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:Z=10;break e;case I:Z=9;break e;case R:Z=11;break e;case Q:Z=14;break e;case he:Z=16,g=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return i=ai(Z,u,i,S),i.elementType=n,i.type=g,i.lanes=F,i}function wc(n,i,u,g){return n=ai(7,n,g,i),n.lanes=u,n}function xh(n,i,u,g){return n=ai(22,n,g,i),n.elementType=be,n.lanes=u,n.stateNode={isHidden:!1},n}function lf(n,i,u){return n=ai(6,n,null,i),n.lanes=u,n}function cf(n,i,u){return i=ai(4,n.children!==null?n.children:[],n.key,i),i.lanes=u,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Cb(n,i,u,g,S){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function df(n,i,u,g,S,F,Z,fe,Ne){return n=new Cb(n,i,u,fe,Ne),i===1?(i=1,F===!0&&(i|=8)):i=0,F=ai(3,null,null,i),n.current=F,F.stateNode=n,F.memoizedState={element:g,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hr(F),n}function Ab(n,i,u){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:g==null?null:""+g,children:n,containerInfo:i,implementation:u}}function dg(n){if(!n)return eo;n=n._reactInternals;e:{if(Br(n)!==n||n.tag!==1)throw Error(r(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(An(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(n.tag===1){var u=n.type;if(An(u))return lu(n,u,i)}return i}function ug(n,i,u,g,S,F,Z,fe,Ne){return n=df(u,g,!0,n,S,F,Z,fe,Ne),n.context=dg(null),u=n.current,g=Kn(),S=Fl(u),F=dr(g,S),F.callback=i??null,ur(u,F,S),n.current.lanes=S,ko(n,S,g),fa(n,g),n}function gh(n,i,u,g){var S=i.current,F=Kn(),Z=Fl(S);return u=dg(u),i.context===null?i.context=u:i.pendingContext=u,i=dr(F,Z),i.payload={element:n},g=g===void 0?null:g,g!==null&&(i.callback=g),n=ur(S,i,Z),n!==null&&(Ti(n,S,Z,F),rn(n,S,Z)),Z}function yh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<i?u:i}}function uf(n,i){hg(n,i),(n=n.alternate)&&hg(n,i)}function Pb(){return null}var mg=typeof reportError=="function"?reportError:function(n){console.error(n)};function hf(n){this._internalRoot=n}vh.prototype.render=hf.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));gh(n,i,null,null)},vh.prototype.unmount=hf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;vc(function(){gh(null,n,null,null)}),i[tn]=null}};function vh(n){this._internalRoot=n}vh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Wc();n={blockedOn:null,target:n,priority:i};for(var u=0;u<Ha.length&&i!==0&&i<Ha[u].priority;u++);Ha.splice(u,0,n),u===0&&Gc(n)}};function mf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function bh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fg(){}function Lb(n,i,u,g,S){if(S){if(typeof g=="function"){var F=g;g=function(){var Me=yh(Z);F.call(Me)}}var Z=ug(i,g,n,0,null,!1,!1,"",fg);return n._reactRootContainer=Z,n[tn]=Z.current,Bo(n.nodeType===8?n.parentNode:n),vc(),Z}for(;S=n.lastChild;)n.removeChild(S);if(typeof g=="function"){var fe=g;g=function(){var Me=yh(Ne);fe.call(Me)}}var Ne=df(n,0,!1,null,null,!1,!1,"",fg);return n._reactRootContainer=Ne,n[tn]=Ne.current,Bo(n.nodeType===8?n.parentNode:n),vc(function(){gh(i,Ne,u,g)}),Ne}function jh(n,i,u,g,S){var F=u._reactRootContainer;if(F){var Z=F;if(typeof S=="function"){var fe=S;S=function(){var Ne=yh(Z);fe.call(Ne)}}gh(i,Z,n,S)}else Z=Lb(u,i,n,S,g);return yh(Z)}cl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var u=ka(i.pendingLanes);u!==0&&(ll(i,u|1),fa(i,Ds()),(ps&6)===0&&(pd=Ds()+500,M()))}break;case 13:vc(function(){var g=As(n,1);if(g!==null){var S=Kn();Ti(g,n,1,S)}}),uf(n,1)}},Kl=function(n){if(n.tag===13){var i=As(n,134217728);if(i!==null){var u=Kn();Ti(i,n,134217728,u)}uf(n,134217728)}},Vc=function(n){if(n.tag===13){var i=Fl(n),u=As(n,i);if(u!==null){var g=Kn();Ti(u,n,i,g)}uf(n,i)}},Wc=function(){return ls},dl=function(n,i){var u=ls;try{return ls=n,i()}finally{ls=u}},Vs=function(n,i,u){switch(i){case"input":if(At(n,u),i=u.name,u.type==="radio"&&i!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<u.length;i++){var g=u[i];if(g!==n&&g.form===n.form){var S=mc(g);if(!S)throw Error(r(90));He(g),At(g,S)}}}break;case"textarea":Ge(n,u);break;case"select":i=u.value,i!=null&&ye(n,!!u.multiple,i,!1)}},Ur=rf,Ua=vc;var Eb={usingClientEntryPoint:!1,Events:[_l,Ho,mc,ds,qi,rf]},vu={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tb={bundleType:vu.bundleType,version:vu.version,rendererPackageName:vu.rendererPackageName,rendererConfig:vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_a(n),n===null?null:n.stateNode},findFiberByHostInstance:vu.findFiberByHostInstance||Pb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{jo=wh.inject(Tb),Un=wh}catch{}}return pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eb,pa.createPortal=function(n,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(i))throw Error(r(200));return Ab(n,i,null,u)},pa.createRoot=function(n,i){if(!mf(n))throw Error(r(299));var u=!1,g="",S=mg;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=df(n,1,!1,null,null,u,!1,g,S),n[tn]=i.current,Bo(n.nodeType===8?n.parentNode:n),new hf(i)},pa.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=_a(i),n=n===null?null:n.stateNode,n},pa.flushSync=function(n){return vc(n)},pa.hydrate=function(n,i,u){if(!bh(i))throw Error(r(200));return jh(null,n,i,!0,u)},pa.hydrateRoot=function(n,i,u){if(!mf(n))throw Error(r(405));var g=u!=null&&u.hydratedSources||null,S=!1,F="",Z=mg;if(u!=null&&(u.unstable_strictMode===!0&&(S=!0),u.identifierPrefix!==void 0&&(F=u.identifierPrefix),u.onRecoverableError!==void 0&&(Z=u.onRecoverableError)),i=ug(i,null,n,1,u??null,S,!1,F,Z),n[tn]=i.current,Bo(n),g)for(n=0;n<g.length;n++)u=g[n],S=u._getVersion,S=S(u._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[u,S]:i.mutableSourceEagerHydrationData.push(u,S);return new vh(i)},pa.render=function(n,i,u){if(!bh(i))throw Error(r(200));return jh(null,n,i,!1,u)},pa.unmountComponentAtNode=function(n){if(!bh(n))throw Error(r(40));return n._reactRootContainer?(vc(function(){jh(null,null,n,!1,function(){n._reactRootContainer=null,n[tn]=null})}),!0):!1},pa.unstable_batchedUpdates=rf,pa.unstable_renderSubtreeIntoContainer=function(n,i,u,g){if(!bh(u))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return jh(n,i,u,!1,g)},pa.version="18.3.1-next-f1338f8080-20240426",pa}var wg;function Jy(){if(wg)return xf.exports;wg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),xf.exports=$b(),xf.exports}var Ng;function Ub(){if(Ng)return Nh;Ng=1;var t=Jy();return Nh.createRoot=t.createRoot,Nh.hydrateRoot=t.hydrateRoot,Nh}var Bb=Ub(),L=Lp();const xs=Ky(L),Vb=Db({__proto__:null,default:xs},[L]);Jy();function Cu(){return Cu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Cu.apply(this,arguments)}var $l;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($l||($l={}));const _g="popstate";function Wb(t){t===void 0&&(t={});function s(a,o){let{pathname:l,search:d,hash:c}=a.location;return ep("",{pathname:l,search:d,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(a,o){return typeof o=="string"?o:Kh(o)}return Gb(s,r,null,t)}function Tr(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Ep(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Hb(){return Math.random().toString(36).substr(2,8)}function kg(t,s){return{usr:t.state,key:t.key,idx:s}}function ep(t,s,r,a){return r===void 0&&(r=null),Cu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Ud(s):s,{state:r,key:s&&s.key||a||Hb()})}function Kh(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Ud(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function Gb(t,s,r,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:l=!1}=a,d=o.history,c=$l.Pop,h=null,f=p();f==null&&(f=0,d.replaceState(Cu({},d.state,{idx:f}),""));function p(){return(d.state||{idx:null}).idx}function y(){c=$l.Pop;let P=p(),_=P==null?null:P-f;f=P,h&&h({action:c,location:N.location,delta:_})}function b(P,_){c=$l.Push;let C=ep(N.location,P,_);f=p()+1;let j=kg(C,f),w=N.createHref(C);try{d.pushState(j,"",w)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;o.location.assign(w)}l&&h&&h({action:c,location:N.location,delta:1})}function x(P,_){c=$l.Replace;let C=ep(N.location,P,_);f=p();let j=kg(C,f),w=N.createHref(C);d.replaceState(j,"",w),l&&h&&h({action:c,location:N.location,delta:0})}function A(P){let _=o.location.origin!=="null"?o.location.origin:o.location.href,C=typeof P=="string"?P:Kh(P);return C=C.replace(/ $/,"%20"),Tr(_,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,_)}let N={get action(){return c},get location(){return t(o,d)},listen(P){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(_g,y),h=P,()=>{o.removeEventListener(_g,y),h=null}},createHref(P){return s(o,P)},createURL:A,encodeLocation(P){let _=A(P);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:b,replace:x,go(P){return d.go(P)}};return N}var Sg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sg||(Sg={}));function Zb(t,s,r){return r===void 0&&(r="/"),Yb(t,s,r)}function Yb(t,s,r,a){let o=typeof s=="string"?Ud(s):s,l=Tp(o.pathname||"/",r);if(l==null)return null;let d=Qy(t);Kb(d);let c=null;for(let h=0;c==null&&h<d.length;++h){let f=l1(l);c=a1(d[h],f)}return c}function Qy(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let o=(l,d,c)=>{let h={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};h.relativePath.startsWith("/")&&(Tr(h.relativePath.startsWith(a),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(a.length));let f=Vl([a,h.relativePath]),p=r.concat(h);l.children&&l.children.length>0&&(Tr(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Qy(l.children,s,p,f)),!(l.path==null&&!l.index)&&s.push({path:f,score:r1(f,l.index),routesMeta:p})};return t.forEach((l,d)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))o(l,d);else for(let h of Xy(l.path))o(l,d,h)}),s}function Xy(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let d=Xy(a.join("/")),c=[];return c.push(...d.map(h=>h===""?l:[l,h].join("/"))),o&&c.push(...d),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function Kb(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:n1(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Jb=/^:[\w-]+$/,Qb=3,Xb=2,e1=1,t1=10,s1=-2,Cg=t=>t==="*";function r1(t,s){let r=t.split("/"),a=r.length;return r.some(Cg)&&(a+=s1),s&&(a+=Xb),r.filter(o=>!Cg(o)).reduce((o,l)=>o+(Jb.test(l)?Qb:l===""?e1:t1),a)}function n1(t,s){return t.length===s.length&&t.slice(0,-1).every((a,o)=>a===s[o])?t[t.length-1]-s[s.length-1]:0}function a1(t,s,r){let{routesMeta:a}=t,o={},l="/",d=[];for(let c=0;c<a.length;++c){let h=a[c],f=c===a.length-1,p=l==="/"?s:s.slice(l.length)||"/",y=i1({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),b=h.route;if(!y)return null;Object.assign(o,y.params),d.push({params:o,pathname:Vl([l,y.pathname]),pathnameBase:m1(Vl([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=Vl([l,y.pathnameBase]))}return d}function i1(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=o1(t.path,t.caseSensitive,t.end),o=s.match(r);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((f,p,y)=>{let{paramName:b,isOptional:x}=p;if(b==="*"){let N=c[y]||"";d=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const A=c[y];return x&&!A?f[b]=void 0:f[b]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:d,pattern:t}}function o1(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Ep(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,c,h)=>(a.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,s?void 0:"i"),a]}function l1(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ep(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Tp(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}const c1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d1=t=>c1.test(t);function u1(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:o=""}=typeof t=="string"?Ud(t):t,l;if(r)if(d1(r))l=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),Ep(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+r))}r.startsWith("/")?l=Ag(r.substring(1),"/"):l=Ag(r,s)}else l=s;return{pathname:l,search:f1(a),hash:p1(o)}}function Ag(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function vf(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function h1(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Fp(t,s){let r=h1(t);return s?r.map((a,o)=>o===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Dp(t,s,r,a){a===void 0&&(a=!1);let o;typeof t=="string"?o=Ud(t):(o=Cu({},t),Tr(!o.pathname||!o.pathname.includes("?"),vf("?","pathname","search",o)),Tr(!o.pathname||!o.pathname.includes("#"),vf("#","pathname","hash",o)),Tr(!o.search||!o.search.includes("#"),vf("#","search","hash",o)));let l=t===""||o.pathname==="",d=l?"/":o.pathname,c;if(d==null)c=r;else{let y=s.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),y-=1;o.pathname=b.join("/")}c=y>=0?s[y]:"/"}let h=u1(o,c),f=d&&d!=="/"&&d.endsWith("/"),p=(l||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const Vl=t=>t.join("/").replace(/\/\/+/g,"/"),m1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),f1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,p1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function x1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ev=["post","put","patch","delete"];new Set(ev);const g1=["get",...ev];new Set(g1);function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Au.apply(this,arguments)}const Rp=L.createContext(null),y1=L.createContext(null),Gl=L.createContext(null),dm=L.createContext(null),po=L.createContext({outlet:null,matches:[],isDataRoute:!1}),tv=L.createContext(null);function v1(t,s){let{relative:r}=s===void 0?{}:s;Bd()||Tr(!1);let{basename:a,navigator:o}=L.useContext(Gl),{hash:l,pathname:d,search:c}=rv(t,{relative:r}),h=d;return a!=="/"&&(h=d==="/"?a:Vl([a,d])),o.createHref({pathname:h,search:c,hash:l})}function Bd(){return L.useContext(dm)!=null}function Rc(){return Bd()||Tr(!1),L.useContext(dm).location}function sv(t){L.useContext(Gl).static||L.useLayoutEffect(t)}function cs(){let{isDataRoute:t}=L.useContext(po);return t?D1():b1()}function b1(){Bd()||Tr(!1);let t=L.useContext(Rp),{basename:s,future:r,navigator:a}=L.useContext(Gl),{matches:o}=L.useContext(po),{pathname:l}=Rc(),d=JSON.stringify(Fp(o,r.v7_relativeSplatPath)),c=L.useRef(!1);return sv(()=>{c.current=!0}),L.useCallback(function(f,p){if(p===void 0&&(p={}),!c.current)return;if(typeof f=="number"){a.go(f);return}let y=Dp(f,JSON.parse(d),l,p.relative==="path");t==null&&s!=="/"&&(y.pathname=y.pathname==="/"?s:Vl([s,y.pathname])),(p.replace?a.replace:a.push)(y,p.state,p)},[s,a,d,l,t])}const j1=L.createContext(null);function w1(t){let s=L.useContext(po).outlet;return s&&L.createElement(j1.Provider,{value:t},s)}function Mi(){let{matches:t}=L.useContext(po),s=t[t.length-1];return s?s.params:{}}function rv(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=L.useContext(Gl),{matches:o}=L.useContext(po),{pathname:l}=Rc(),d=JSON.stringify(Fp(o,a.v7_relativeSplatPath));return L.useMemo(()=>Dp(t,JSON.parse(d),l,r==="path"),[t,d,l,r])}function N1(t,s){return _1(t,s)}function _1(t,s,r,a){Bd()||Tr(!1);let{navigator:o}=L.useContext(Gl),{matches:l}=L.useContext(po),d=l[l.length-1],c=d?d.params:{};d&&d.pathname;let h=d?d.pathnameBase:"/";d&&d.route;let f=Rc(),p;if(s){var y;let P=typeof s=="string"?Ud(s):s;h==="/"||(y=P.pathname)!=null&&y.startsWith(h)||Tr(!1),p=P}else p=f;let b=p.pathname||"/",x=b;if(h!=="/"){let P=h.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(P.length).join("/")}let A=Zb(t,{pathname:x}),N=P1(A&&A.map(P=>Object.assign({},P,{params:Object.assign({},c,P.params),pathname:Vl([h,o.encodeLocation?o.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?h:Vl([h,o.encodeLocation?o.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),l,r,a);return s&&N?L.createElement(dm.Provider,{value:{location:Au({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:$l.Pop}},N):N}function k1(){let t=F1(),s=x1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},s),r?L.createElement("pre",{style:o},r):null,null)}const S1=L.createElement(k1,null);class C1 extends L.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?L.createElement(po.Provider,{value:this.props.routeContext},L.createElement(tv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A1(t){let{routeContext:s,match:r,children:a}=t,o=L.useContext(Rp);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),L.createElement(po.Provider,{value:s},a)}function P1(t,s,r,a){var o;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=a)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let d=t,c=(o=r)==null?void 0:o.errors;if(c!=null){let p=d.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);p>=0||Tr(!1),d=d.slice(0,Math.min(d.length,p+1))}let h=!1,f=-1;if(r&&a&&a.v7_partialHydration)for(let p=0;p<d.length;p++){let y=d[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:b,errors:x}=r,A=y.route.loader&&b[y.route.id]===void 0&&(!x||x[y.route.id]===void 0);if(y.route.lazy||A){h=!0,f>=0?d=d.slice(0,f+1):d=[d[0]];break}}}return d.reduceRight((p,y,b)=>{let x,A=!1,N=null,P=null;r&&(x=c&&y.route.id?c[y.route.id]:void 0,N=y.route.errorElement||S1,h&&(f<0&&b===0?(R1("route-fallback"),A=!0,P=null):f===b&&(A=!0,P=y.route.hydrateFallbackElement||null)));let _=s.concat(d.slice(0,b+1)),C=()=>{let j;return x?j=N:A?j=P:y.route.Component?j=L.createElement(y.route.Component,null):y.route.element?j=y.route.element:j=p,L.createElement(A1,{match:y,routeContext:{outlet:p,matches:_,isDataRoute:r!=null},children:j})};return r&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?L.createElement(C1,{location:r.location,revalidation:r.revalidation,component:N,error:x,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}var nv=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(nv||{}),av=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(av||{});function L1(t){let s=L.useContext(Rp);return s||Tr(!1),s}function E1(t){let s=L.useContext(y1);return s||Tr(!1),s}function T1(t){let s=L.useContext(po);return s||Tr(!1),s}function iv(t){let s=T1(),r=s.matches[s.matches.length-1];return r.route.id||Tr(!1),r.route.id}function F1(){var t;let s=L.useContext(tv),r=E1(),a=iv();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function D1(){let{router:t}=L1(nv.UseNavigateStable),s=iv(av.UseNavigateStable),r=L.useRef(!1);return sv(()=>{r.current=!0}),L.useCallback(function(o,l){l===void 0&&(l={}),r.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Au({fromRouteId:s},l)))},[t,s])}const Pg={};function R1(t,s,r){Pg[t]||(Pg[t]=!0)}function I1(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function M1(t){let{to:s,replace:r,state:a,relative:o}=t;Bd()||Tr(!1);let{future:l,static:d}=L.useContext(Gl),{matches:c}=L.useContext(po),{pathname:h}=Rc(),f=cs(),p=Dp(s,Fp(c,l.v7_relativeSplatPath),h,o==="path"),y=JSON.stringify(p);return L.useEffect(()=>f(JSON.parse(y),{replace:r,state:a,relative:o}),[f,y,o,r,a]),null}function ov(t){return w1(t.context)}function at(t){Tr(!1)}function z1(t){let{basename:s="/",children:r=null,location:a,navigationType:o=$l.Pop,navigator:l,static:d=!1,future:c}=t;Bd()&&Tr(!1);let h=s.replace(/^\/*/,"/"),f=L.useMemo(()=>({basename:h,navigator:l,static:d,future:Au({v7_relativeSplatPath:!1},c)}),[h,c,l,d]);typeof a=="string"&&(a=Ud(a));let{pathname:p="/",search:y="",hash:b="",state:x=null,key:A="default"}=a,N=L.useMemo(()=>{let P=Tp(p,h);return P==null?null:{location:{pathname:P,search:y,hash:b,state:x,key:A},navigationType:o}},[h,p,y,b,x,A,o]);return N==null?null:L.createElement(Gl.Provider,{value:f},L.createElement(dm.Provider,{children:r,value:N}))}function O1(t){let{children:s,location:r}=t;return N1(tp(s),r)}new Promise(()=>{});function tp(t,s){s===void 0&&(s=[]);let r=[];return L.Children.forEach(t,(a,o)=>{if(!L.isValidElement(a))return;let l=[...s,o];if(a.type===L.Fragment){r.push.apply(r,tp(a.props.children,l));return}a.type!==at&&Tr(!1),!a.props.index||!a.props.children||Tr(!1);let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=tp(a.props.children,l)),r.push(d)}),r}function sp(){return sp=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},sp.apply(this,arguments)}function q1(t,s){if(t==null)return{};var r={},a=Object.keys(t),o,l;for(l=0;l<a.length;l++)o=a[l],!(s.indexOf(o)>=0)&&(r[o]=t[o]);return r}function $1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function U1(t,s){return t.button===0&&(!s||s==="_self")&&!$1(t)}function rp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let a=t[r];return s.concat(Array.isArray(a)?a.map(o=>[r,o]):[[r,a]])},[]))}function B1(t,s){let r=rp(t);return s&&s.forEach((a,o)=>{r.has(o)||s.getAll(o).forEach(l=>{r.append(o,l)})}),r}const V1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],W1="6";try{window.__reactRouterVersion=W1}catch{}const H1="startTransition",Lg=Vb[H1];function G1(t){let{basename:s,children:r,future:a,window:o}=t,l=L.useRef();l.current==null&&(l.current=Wb({window:o,v5Compat:!0}));let d=l.current,[c,h]=L.useState({action:d.action,location:d.location}),{v7_startTransition:f}=a||{},p=L.useCallback(y=>{f&&Lg?Lg(()=>h(y)):h(y)},[h,f]);return L.useLayoutEffect(()=>d.listen(p),[d,p]),L.useEffect(()=>I1(a),[a]),L.createElement(z1,{basename:s,children:r,location:c.location,navigationType:c.action,navigator:d,future:a})}const Z1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=L.forwardRef(function(s,r){let{onClick:a,relative:o,reloadDocument:l,replace:d,state:c,target:h,to:f,preventScrollReset:p,viewTransition:y}=s,b=q1(s,V1),{basename:x}=L.useContext(Gl),A,N=!1;if(typeof f=="string"&&Y1.test(f)&&(A=f,Z1))try{let j=new URL(window.location.href),w=f.startsWith("//")?new URL(j.protocol+f):new URL(f),D=Tp(w.pathname,x);w.origin===j.origin&&D!=null?f=D+w.search+w.hash:N=!0}catch{}let P=v1(f,{relative:o}),_=K1(f,{replace:d,state:c,target:h,preventScrollReset:p,relative:o,viewTransition:y});function C(j){a&&a(j),j.defaultPrevented||_(j)}return L.createElement("a",sp({},b,{href:A||P,onClick:N||l?a:C,ref:r,target:h}))});var Eg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Eg||(Eg={}));var Tg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Tg||(Tg={}));function K1(t,s){let{target:r,replace:a,state:o,preventScrollReset:l,relative:d,viewTransition:c}=s===void 0?{}:s,h=cs(),f=Rc(),p=rv(t,{relative:d});return L.useCallback(y=>{if(U1(y,r)){y.preventDefault();let b=a!==void 0?a:Kh(f)===Kh(p);h(t,{replace:b,state:o,preventScrollReset:l,relative:d,viewTransition:c})}},[f,h,p,a,o,r,t,l,d,c])}function Iu(t){let s=L.useRef(rp(t)),r=L.useRef(!1),a=Rc(),o=L.useMemo(()=>B1(a.search,r.current?null:s.current),[a.search]),l=cs(),d=L.useCallback((c,h)=>{const f=rp(typeof c=="function"?c(o):c);r.current=!0,l("?"+f,h)},[l,o]);return[o,d]}var ln={},gd={},yd={},vd={},bd={},jd={},J1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zd=J1();const Q1=zd.fetch,X1=zd.fetch.bind(zd),ej=zd.Headers,tj=zd.Request,sj=zd.Response,rj=Object.freeze(Object.defineProperty({__proto__:null,Headers:ej,Request:tj,Response:sj,default:X1,fetch:Q1},Symbol.toStringTag,{value:"Module"})),nj=Rb(rj);var _h={},Fg;function lv(){if(Fg)return _h;Fg=1,Object.defineProperty(_h,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return _h.default=t,_h}var Dg;function cv(){if(Dg)return jd;Dg=1;var t=jd&&jd.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(jd,"__esModule",{value:!0});const s=t(nj),r=t(lv());class a{constructor(l){var d,c;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(d=l.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=l.signal,this.isMaybeSingle=(c=l.isMaybeSingle)!==null&&c!==void 0?c:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,d){return this.headers=new Headers(this.headers),this.headers.set(l,d),this}then(l,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var p,y,b,x;let A=null,N=null,P=null,_=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const z=await f.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?N=z:N=JSON.parse(z))}const w=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),D=(b=f.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");w&&D&&D.length>1&&(P=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(A={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,P=null,_=406,C="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const w=await f.text();try{A=JSON.parse(w),Array.isArray(A)&&f.status===404&&(N=[],A=null,_=200,C="OK")}catch{f.status===404&&w===""?(_=204,C="No Content"):A={message:w}}if(A&&this.isMaybeSingle&&(!((x=A?.details)===null||x===void 0)&&x.includes("0 rows"))&&(A=null,_=200,C="OK"),A&&this.shouldThrowOnError)throw new r.default(A)}return{error:A,data:N,count:P,status:_,statusText:C}});return this.shouldThrowOnError||(h=h.catch(f=>{var p,y,b;return{error:{message:`${(p=f?.name)!==null&&p!==void 0?p:"FetchError"}: ${f?.message}`,details:`${(y=f?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(b=f?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),h.then(l,d)}returns(){return this}overrideTypes(){return this}}return jd.default=a,jd}var Rg;function dv(){if(Rg)return bd;Rg=1;var t=bd&&bd.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(bd,"__esModule",{value:!0});const s=t(cv());class r extends s.default{select(o){let l=!1;const d=(o??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:d,foreignTable:c,referencedTable:h=c}={}){const f=h?`${h}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${o}.${l?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:d=l}={}){const c=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(c,`${o}`),this}range(o,l,{foreignTable:d,referencedTable:c=d}={}){const h=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(f,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:d=!1,buffers:c=!1,wal:h=!1,format:f="text"}={}){var p;const y=[o?"analyze":null,l?"verbose":null,d?"settings":null,c?"buffers":null,h?"wal":null].filter(Boolean).join("|"),b=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${b}"; options=${y};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return bd.default=r,bd}var Ig;function Ip(){if(Ig)return vd;Ig=1;var t=vd&&vd.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(vd,"__esModule",{value:!0});const s=t(dv());class r extends s.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const d=Array.from(new Set(l)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:d,type:c}={}){let h="";c==="plain"?h="pl":c==="phrase"?h="ph":c==="websearch"&&(h="w");const f=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${h}fts${f}.${l}`),this}match(o){return Object.entries(o).forEach(([l,d])=>{this.url.searchParams.append(l,`eq.${d}`)}),this}not(o,l,d){return this.url.searchParams.append(o,`not.${l}.${d}`),this}or(o,{foreignTable:l,referencedTable:d=l}={}){const c=d?`${d}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,l,d){return this.url.searchParams.append(o,`${l}.${d}`),this}}return vd.default=r,vd}var Mg;function uv(){if(Mg)return yd;Mg=1;var t=yd&&yd.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yd,"__esModule",{value:!0});const s=t(Ip());class r{constructor(o,{headers:l={},schema:d,fetch:c}){this.url=o,this.headers=new Headers(l),this.schema=d,this.fetch=c}select(o,{head:l=!1,count:d}={}){const c=l?"HEAD":"GET";let h=!1;const f=(o??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",f),d&&this.headers.append("Prefer",`count=${d}`),new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:d=!0}={}){var c;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const f=o.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(f.length>0){const p=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",p.join(","))}}return new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:d=!1,count:c,defaultToNull:h=!0}={}){var f;const p="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((b,x)=>b.concat(Object.keys(x)),[]);if(y.length>0){const b=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",b.join(","))}}return new s.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(o,{count:l}={}){var d;const c="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var l;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new s.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return yd.default=r,yd}var zg;function aj(){if(zg)return gd;zg=1;var t=gd&&gd.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(gd,"__esModule",{value:!0});const s=t(uv()),r=t(Ip());class a{constructor(l,{headers:d={},schema:c,fetch:h}={}){this.url=l,this.headers=new Headers(d),this.schemaName=c,this.fetch=h}from(l){const d=new URL(`${this.url}/${l}`);return new s.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,d={},{head:c=!1,get:h=!1,count:f}={}){var p;let y;const b=new URL(`${this.url}/rpc/${l}`);let x;c||h?(y=c?"HEAD":"GET",Object.entries(d).filter(([N,P])=>P!==void 0).map(([N,P])=>[N,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([N,P])=>{b.searchParams.append(N,P)})):(y="POST",x=d);const A=new Headers(this.headers);return f&&A.set("Prefer",`count=${f}`),new r.default({method:y,url:b,headers:A,schema:this.schemaName,body:x,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return gd.default=a,gd}var Og;function ij(){if(Og)return ln;Og=1;var t=ln&&ln.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ln,"__esModule",{value:!0}),ln.PostgrestError=ln.PostgrestBuilder=ln.PostgrestTransformBuilder=ln.PostgrestFilterBuilder=ln.PostgrestQueryBuilder=ln.PostgrestClient=void 0;const s=t(aj());ln.PostgrestClient=s.default;const r=t(uv());ln.PostgrestQueryBuilder=r.default;const a=t(Ip());ln.PostgrestFilterBuilder=a.default;const o=t(dv());ln.PostgrestTransformBuilder=o.default;const l=t(cv());ln.PostgrestBuilder=l.default;const d=t(lv());return ln.PostgrestError=d.default,ln.default={PostgrestClient:s.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:d.default},ln}var oj=ij();const lj=Ky(oj),{PostgrestClient:cj,PostgrestQueryBuilder:jA,PostgrestFilterBuilder:wA,PostgrestTransformBuilder:NA,PostgrestBuilder:_A,PostgrestError:kA}=lj;var Yt=class hv extends Error{constructor(s,r,a,o){super(s),this.name="InsForgeError",this.statusCode=r,this.error=a,this.nextActions=o}static fromApiError(s){return new hv(s.message,s.statusCode,s.error,s.nextActions)}},dj=class{constructor(t){if(this.userToken=null,this.baseUrl=t.baseUrl||"http://localhost:7130",this.fetch=t.fetch||(globalThis.fetch?globalThis.fetch.bind(globalThis):void 0),this.anonKey=t.anonKey,this.defaultHeaders={...t.headers},!this.fetch)throw new Error("Fetch is not available. Please provide a fetch implementation in the config.")}buildUrl(t,s){const r=new URL(t,this.baseUrl);return s&&Object.entries(s).forEach(([a,o])=>{if(a==="select"){let l=o.replace(/\s+/g," ").trim();l=l.replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\(\s+/g,"(").replace(/\s+\)/g,")").replace(/,\s+(?=[^()]*\))/g,","),r.searchParams.append(a,l)}else r.searchParams.append(a,o)}),r.toString()}async request(t,s,r={}){const{params:a,headers:o={},body:l,...d}=r,c=this.buildUrl(s,a),h={...this.defaultHeaders},f=this.userToken||this.anonKey;f&&(h.Authorization=`Bearer ${f}`);let p;l!==void 0&&(typeof FormData<"u"&&l instanceof FormData?p=l:(t!=="GET"&&(h["Content-Type"]="application/json;charset=UTF-8"),p=JSON.stringify(l))),Object.assign(h,o);const y=await this.fetch(c,{method:t,headers:h,body:p,...d});if(y.status===204)return;let b;if(y.headers.get("content-type")?.includes("json")?b=await y.json():b=await y.text(),!y.ok){if(b&&typeof b=="object"&&"error"in b){!b.statusCode&&!b.status&&(b.statusCode=y.status);const A=Yt.fromApiError(b);throw Object.keys(b).forEach(N=>{N!=="error"&&N!=="message"&&N!=="statusCode"&&(A[N]=b[N])}),A}throw new Yt(`Request failed: ${y.statusText}`,y.status,"REQUEST_FAILED")}return b}get(t,s){return this.request("GET",t,s)}post(t,s,r){return this.request("POST",t,{...r,body:s})}put(t,s,r){return this.request("PUT",t,{...r,body:s})}patch(t,s,r){return this.request("PATCH",t,{...r,body:s})}delete(t,s){return this.request("DELETE",t,s)}setAuthToken(t){this.userToken=t}getHeaders(){const t={...this.defaultHeaders},s=this.userToken||this.anonKey;return s&&(t.Authorization=`Bearer ${s}`),t}},kh="insforge-auth-token",bf="insforge-auth-user",uj=class{constructor(t){if(t)this.storage=t;else if(typeof window<"u"&&window.localStorage)this.storage=window.localStorage;else{const s=new Map;this.storage={getItem:r=>s.get(r)||null,setItem:(r,a)=>{s.set(r,a)},removeItem:r=>{s.delete(r)}}}}saveSession(t){this.storage.setItem(kh,t.accessToken),this.storage.setItem(bf,JSON.stringify(t.user))}getSession(){const t=this.storage.getItem(kh),s=this.storage.getItem(bf);if(!t||!s)return null;try{const r=JSON.parse(s);return{accessToken:t,user:r}}catch{return this.clearSession(),null}}getAccessToken(){const t=this.storage.getItem(kh);return typeof t=="string"?t:null}clearSession(){this.storage.removeItem(kh),this.storage.removeItem(bf)}};function hj(t,s){return async(r,a)=>{const o=typeof r=="string"?r:r.toString(),l=new URL(o),d=l.pathname.slice(1),c=`${t.baseUrl}/api/database/records/${d}${l.search}`,h=s.getAccessToken(),f=t.getHeaders(),p=h||f.Authorization?.replace("Bearer ",""),y=new Headers(a?.headers);return p&&!y.has("Authorization")&&y.set("Authorization",`Bearer ${p}`),await fetch(c,{...a,headers:y})}}var mv=class{constructor(s,r){this.postgrest=new cj("http://dummy",{fetch:hj(s,r),headers:{}})}from(s){return this.postgrest.from(s)}};function jf(t){const s={id:t.id};return Object.keys(t).forEach(r=>{if(s[r]=t[r],r.includes("_")){const a=r.replace(/_([a-z])/g,(o,l)=>l.toUpperCase());s[a]=t[r]}}),s}function mj(t){const s={};return Object.keys(t).forEach(r=>{if(t[r]===void 0)return;const a=r.replace(/[A-Z]/g,o=>`_${o.toLowerCase()}`);s[a]=t[r]}),s}function qg(){if(typeof window>"u")return!1;const{hostname:t,port:s,protocol:r}=window.location;return!!(t==="localhost"&&s==="7130"||r==="https:"&&t.endsWith(".insforge.app"))}var fj=class{constructor(t,s){this.http=t,this.tokenManager=s,this.database=new mv(t,s),this.detectAuthCallback()}detectAuthCallback(){if(!(typeof window>"u"))try{const t=new URLSearchParams(window.location.search),s=t.get("access_token"),r=t.get("user_id"),a=t.get("email"),o=t.get("name");if(s&&r&&a){const l={accessToken:s,user:{id:r,email:a,name:o||"",emailVerified:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}};this.tokenManager.saveSession(l),this.http.setAuthToken(s);const d=new URL(window.location.href);d.searchParams.delete("access_token"),d.searchParams.delete("user_id"),d.searchParams.delete("email"),d.searchParams.delete("name"),t.has("error")&&d.searchParams.delete("error"),window.history.replaceState({},document.title,d.toString())}}catch(t){console.debug("OAuth callback detection skipped:",t)}}async signUp(t){try{const s=await this.http.post("/api/auth/users",t);if(s.accessToken&&s.user){const r={accessToken:s.accessToken,user:s.user};qg()||this.tokenManager.saveSession(r),this.http.setAuthToken(s.accessToken)}return{data:s,error:null}}catch(s){return s instanceof Yt?{data:null,error:s}:{data:null,error:new Yt(s instanceof Error?s.message:"An unexpected error occurred during sign up",500,"UNEXPECTED_ERROR")}}}async signInWithPassword(t){try{const s=await this.http.post("/api/auth/sessions",t),r={accessToken:s.accessToken||"",user:s.user||{id:"",email:"",name:"",emailVerified:!1,createdAt:"",updatedAt:""}};return qg()||this.tokenManager.saveSession(r),this.http.setAuthToken(s.accessToken||""),{data:s,error:null}}catch(s){return s instanceof Yt?{data:null,error:s}:{data:null,error:new Yt("An unexpected error occurred during sign in",500,"UNEXPECTED_ERROR")}}}async signInWithOAuth(t){try{const{provider:s,redirectTo:r,skipBrowserRedirect:a}=t,o=r?{redirect_uri:r}:void 0,l=`/api/auth/oauth/${s}`,d=await this.http.get(l,{params:o});return typeof window<"u"&&!a?(window.location.href=d.authUrl,{data:{},error:null}):{data:{url:d.authUrl,provider:s},error:null}}catch(s){return s instanceof Yt?{data:{},error:s}:{data:{},error:new Yt("An unexpected error occurred during OAuth initialization",500,"UNEXPECTED_ERROR")}}}async signOut(){try{return this.tokenManager.clearSession(),this.http.setAuthToken(null),{error:null}}catch{return{error:new Yt("Failed to sign out",500,"SIGNOUT_ERROR")}}}async getPublicAuthConfig(){try{return{data:await this.http.get("/api/auth/public-config"),error:null}}catch(t){return t instanceof Yt?{data:null,error:t}:{data:null,error:new Yt("An unexpected error occurred while fetching public authentication configuration",500,"UNEXPECTED_ERROR")}}}async getCurrentUser(){try{const t=this.tokenManager.getSession();if(!t?.accessToken)return{data:null,error:null};this.http.setAuthToken(t.accessToken);const s=await this.http.get("/api/auth/sessions/current"),{data:r,error:a}=await this.database.from("users").select("*").eq("id",s.user.id).single();return a&&a.code!=="PGRST116"?{data:null,error:a}:{data:{user:s.user,profile:r?jf(r):null},error:null}}catch(t){return t instanceof Yt&&t.statusCode===401?(await this.signOut(),{data:null,error:null}):t instanceof Yt?{data:null,error:t}:{data:null,error:new Yt("An unexpected error occurred while fetching user",500,"UNEXPECTED_ERROR")}}}async getProfile(t){const{data:s,error:r}=await this.database.from("users").select("*").eq("id",t).single();return r&&r.code==="PGRST116"?{data:null,error:null}:s?{data:jf(s),error:null}:{data:null,error:r}}getCurrentSession(){try{const t=this.tokenManager.getSession();return t?.accessToken?(this.http.setAuthToken(t.accessToken),{data:{session:t},error:null}):{data:{session:null},error:null}}catch(t){return t instanceof Yt?{data:{session:null},error:t}:{data:{session:null},error:new Yt("An unexpected error occurred while getting session",500,"UNEXPECTED_ERROR")}}}async setProfile(t){const s=this.tokenManager.getSession();if(!s?.accessToken)return{data:null,error:new Yt("No authenticated user found",401,"UNAUTHENTICATED")};if(!s.user?.id){const{data:l,error:d}=await this.getCurrentUser();if(d)return{data:null,error:d};l?.user&&(s.user={id:l.user.id,email:l.user.email,name:"",emailVerified:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},this.tokenManager.saveSession(s))}const r=mj(t),{data:a,error:o}=await this.database.from("users").update(r).eq("id",s.user.id).select().single();return a?{data:jf(a),error:null}:{data:null,error:o}}async sendVerificationEmail(t){try{return{data:await this.http.post("/api/auth/email/send-verification",t),error:null}}catch(s){return s instanceof Yt?{data:null,error:s}:{data:null,error:new Yt("An unexpected error occurred while sending verification code",500,"UNEXPECTED_ERROR")}}}async sendResetPasswordEmail(t){try{return{data:await this.http.post("/api/auth/email/send-reset-password",t),error:null}}catch(s){return s instanceof Yt?{data:null,error:s}:{data:null,error:new Yt("An unexpected error occurred while sending password reset code",500,"UNEXPECTED_ERROR")}}}async exchangeResetPasswordToken(t){try{return{data:await this.http.post("/api/auth/email/exchange-reset-password-token",t),error:null}}catch(s){return s instanceof Yt?{data:null,error:s}:{data:null,error:new Yt("An unexpected error occurred while verifying reset code",500,"UNEXPECTED_ERROR")}}}async resetPassword(t){try{return{data:await this.http.post("/api/auth/email/reset-password",t),error:null}}catch(s){return s instanceof Yt?{data:null,error:s}:{data:null,error:new Yt("An unexpected error occurred while resetting password",500,"UNEXPECTED_ERROR")}}}async verifyEmail(t){try{const s=await this.http.post("/api/auth/email/verify",t);if(s.accessToken){const r={accessToken:s.accessToken,user:s.user||{}};this.tokenManager.saveSession(r),this.http.setAuthToken(s.accessToken)}return{data:s,error:null}}catch(s){return s instanceof Yt?{data:null,error:s}:{data:null,error:new Yt("An unexpected error occurred while verifying email",500,"UNEXPECTED_ERROR")}}}},pj=class{constructor(t,s){this.bucketName=t,this.http=s}async upload(t,s){try{const r=await this.http.post(`/api/storage/buckets/${this.bucketName}/upload-strategy`,{filename:t,contentType:s.type||"application/octet-stream",size:s.size});if(r.method==="presigned")return await this.uploadWithPresignedUrl(r,s);if(r.method==="direct"){const a=new FormData;return a.append("file",s),{data:await this.http.request("PUT",`/api/storage/buckets/${this.bucketName}/objects/${encodeURIComponent(t)}`,{body:a,headers:{}}),error:null}}throw new Yt(`Unsupported upload method: ${r.method}`,500,"STORAGE_ERROR")}catch(r){return{data:null,error:r instanceof Yt?r:new Yt("Upload failed",500,"STORAGE_ERROR")}}}async uploadAuto(t){try{const s=t instanceof File?t.name:"file",r=await this.http.post(`/api/storage/buckets/${this.bucketName}/upload-strategy`,{filename:s,contentType:t.type||"application/octet-stream",size:t.size});if(r.method==="presigned")return await this.uploadWithPresignedUrl(r,t);if(r.method==="direct"){const a=new FormData;return a.append("file",t),{data:await this.http.request("POST",`/api/storage/buckets/${this.bucketName}/objects`,{body:a,headers:{}}),error:null}}throw new Yt(`Unsupported upload method: ${r.method}`,500,"STORAGE_ERROR")}catch(s){return{data:null,error:s instanceof Yt?s:new Yt("Upload failed",500,"STORAGE_ERROR")}}}async uploadWithPresignedUrl(t,s){try{const r=new FormData;t.fields&&Object.entries(t.fields).forEach(([o,l])=>{r.append(o,l)}),r.append("file",s);const a=await fetch(t.uploadUrl,{method:"POST",body:r});if(!a.ok)throw new Yt(`Upload to storage failed: ${a.statusText}`,a.status,"STORAGE_ERROR");return t.confirmRequired&&t.confirmUrl?{data:await this.http.post(t.confirmUrl,{size:s.size,contentType:s.type||"application/octet-stream"}),error:null}:{data:{key:t.key,bucket:this.bucketName,size:s.size,mimeType:s.type||"application/octet-stream",uploadedAt:new Date().toISOString(),url:this.getPublicUrl(t.key)},error:null}}catch(r){throw r instanceof Yt?r:new Yt("Presigned upload failed",500,"STORAGE_ERROR")}}async download(t){try{const s=await this.http.post(`/api/storage/buckets/${this.bucketName}/objects/${encodeURIComponent(t)}/download-strategy`,{expiresIn:3600}),r=s.url,a={};s.method==="direct"&&Object.assign(a,this.http.getHeaders());const o=await fetch(r,{method:"GET",headers:a});if(!o.ok)try{const d=await o.json();throw Yt.fromApiError(d)}catch{throw new Yt(`Download failed: ${o.statusText}`,o.status,"STORAGE_ERROR")}return{data:await o.blob(),error:null}}catch(s){return{data:null,error:s instanceof Yt?s:new Yt("Download failed",500,"STORAGE_ERROR")}}}getPublicUrl(t){return`${this.http.baseUrl}/api/storage/buckets/${this.bucketName}/objects/${encodeURIComponent(t)}`}async list(t){try{const s={};return t?.prefix&&(s.prefix=t.prefix),t?.search&&(s.search=t.search),t?.limit&&(s.limit=t.limit.toString()),t?.offset&&(s.offset=t.offset.toString()),{data:await this.http.get(`/api/storage/buckets/${this.bucketName}/objects`,{params:s}),error:null}}catch(s){return{data:null,error:s instanceof Yt?s:new Yt("List failed",500,"STORAGE_ERROR")}}}async remove(t){try{return{data:await this.http.delete(`/api/storage/buckets/${this.bucketName}/objects/${encodeURIComponent(t)}`),error:null}}catch(s){return{data:null,error:s instanceof Yt?s:new Yt("Delete failed",500,"STORAGE_ERROR")}}}},xj=class{constructor(t){this.http=t}from(t){return new pj(t,this.http)}},gj=class{constructor(t){this.http=t,this.chat=new yj(t),this.images=new bj(t)}},yj=class{constructor(t){this.completions=new vj(t)}},vj=class{constructor(t){this.http=t}async create(t){const s={model:t.model,messages:t.messages,temperature:t.temperature,maxTokens:t.maxTokens,topP:t.topP,stream:t.stream};if(t.stream){const o=this.http.getHeaders();o["Content-Type"]="application/json";const l=await this.http.fetch(`${this.http.baseUrl}/api/ai/chat/completion`,{method:"POST",headers:o,body:JSON.stringify(s)});if(!l.ok){const d=await l.json();throw new Error(d.error||"Stream request failed")}return this.parseSSEStream(l,t.model)}const r=await this.http.post("/api/ai/chat/completion",s),a=r.text||"";return{id:`chatcmpl-${Date.now()}`,object:"chat.completion",created:Math.floor(Date.now()/1e3),model:r.metadata?.model,choices:[{index:0,message:{role:"assistant",content:a},finish_reason:"stop"}],usage:r.metadata?.usage||{prompt_tokens:0,completion_tokens:0,total_tokens:0}}}async*parseSSEStream(t,s){const r=t.body.getReader(),a=new TextDecoder;let o="";try{for(;;){const{done:l,value:d}=await r.read();if(l)break;o+=a.decode(d,{stream:!0});const c=o.split(`
`);o=c.pop()||"";for(const h of c)if(h.startsWith("data: ")){const f=h.slice(6).trim();if(f)try{const p=JSON.parse(f);if((p.chunk||p.content)&&(yield{id:`chatcmpl-${Date.now()}`,object:"chat.completion.chunk",created:Math.floor(Date.now()/1e3),model:s,choices:[{index:0,delta:{content:p.chunk||p.content},finish_reason:p.done?"stop":null}]}),p.done){r.releaseLock();return}}catch{console.warn("Failed to parse SSE data:",f)}}}}finally{r.releaseLock()}}},bj=class{constructor(t){this.http=t}async generate(t){const s=await this.http.post("/api/ai/image/generation",t);let r=[];return s.images&&s.images.length>0?r=s.images.map(a=>({b64_json:a.imageUrl.replace(/^data:image\/\w+;base64,/,""),content:s.text})):s.text&&(r=[{content:s.text}]),{created:Math.floor(Date.now()/1e3),data:r,...s.metadata?.usage&&{usage:{total_tokens:s.metadata.usage.totalTokens||0,input_tokens:s.metadata.usage.promptTokens||0,output_tokens:s.metadata.usage.completionTokens||0}}}}},jj=class{constructor(t){this.http=t}async invoke(t,s={}){try{const{method:r="POST",body:a,headers:o={}}=s,l=`/functions/${t}`;return{data:await this.http.request(r,l,{body:a,headers:o}),error:null}}catch(r){return{data:null,error:r}}}},wj=class{constructor(t={}){this.http=new dj(t),this.tokenManager=new uj(t.storage),t.edgeFunctionToken&&(this.http.setAuthToken(t.edgeFunctionToken),this.tokenManager.saveSession({accessToken:t.edgeFunctionToken,user:{}}));const s=this.tokenManager.getSession();s?.accessToken&&this.http.setAuthToken(s.accessToken),this.auth=new fj(this.http,this.tokenManager),this.database=new mv(this.http,this.tokenManager),this.storage=new xj(this.http),this.ai=new gj(this.http),this.functions=new jj(this.http)}getHttpClient(){return this.http}};function fv(t){return new wj(t)}var Mp=L.createContext(void 0);Mp.displayName="InsforgeContext";function tt(t,s,r){function a(c,h){var f;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(f=c._zod).traits??(f.traits=new Set),c._zod.traits.add(t),s(c,h);for(const p in d.prototype)p in c||Object.defineProperty(c,p,{value:d.prototype[p].bind(c)});c._zod.constr=d,c._zod.def=h}const o=r?.Parent??Object;class l extends o{}Object.defineProperty(l,"name",{value:t});function d(c){var h;const f=r?.Parent?new l:this;a(f,c),(h=f._zod).deferred??(h.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(d,"init",{value:a}),Object.defineProperty(d,Symbol.hasInstance,{value:c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(d,"name",{value:t}),d}class Td extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class pv extends Error{constructor(s){super(`Encountered unidirectional transform during encode: ${s}`),this.name="ZodEncodeError"}}const Nj={};function Pc(t){return Nj}function np(t,s){return typeof s=="bigint"?s.toString():s}function zp(t){return t==null}function Op(t){const s=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(s,r)}const $g=Symbol("evaluating");function rr(t,s,r){let a;Object.defineProperty(t,s,{get(){if(a!==$g)return a===void 0&&(a=$g,a=r()),a},set(o){Object.defineProperty(t,s,{value:o})},configurable:!0})}function _j(...t){const s={};for(const r of t){const a=Object.getOwnPropertyDescriptors(r);Object.assign(s,a)}return Object.defineProperties({},s)}const xv="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ug(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function ap(t){if(Ug(t)===!1)return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(Ug(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function gv(t){return ap(t)?{...t}:Array.isArray(t)?[...t]:t}function qp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function kj(t,s,r){const a=new t._zod.constr(s??t._zod.def);return(!s||r?.parent)&&(a._zod.parent=t),a}function Jt(t){const s=t;if(!s)return{};if(typeof s=="string")return{error:()=>s};if(s?.message!==void 0){if(s?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");s.error=s.message}return delete s.message,typeof s.error=="string"?{...s,error:()=>s.error}:s}function Pd(t,s=0){if(t.aborted===!0)return!0;for(let r=s;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function Sj(t,s){return s.map(r=>{var a;return(a=r).path??(a.path=[]),r.path.unshift(t),r})}function Sh(t){return typeof t=="string"?t:t?.message}function Lc(t,s,r){const a={...t,path:t.path??[]};if(!t.message){const o=Sh(t.inst?._zod.def?.error?.(t))??Sh(s?.error?.(t))??Sh(r.customError?.(t))??Sh(r.localeError?.(t))??"Invalid input";a.message=o}return delete a.inst,delete a.continue,s?.reportInput||delete a.input,a}function $p(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Pu(...t){const[s,r,a]=t;return typeof s=="string"?{message:s,code:"custom",input:r,inst:a}:{...s}}const yv=(t,s)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:s,enumerable:!1}),t.message=JSON.stringify(s,np,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},vv=tt("$ZodError",yv),bv=tt("$ZodError",yv,{Parent:Error});function Cj(t,s=r=>r.message){const r={},a=[];for(const o of t.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(s(o))):a.push(s(o));return{formErrors:a,fieldErrors:r}}function Aj(t,s=r=>r.message){const r={_errors:[]},a=o=>{for(const l of o.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>a({issues:d}));else if(l.code==="invalid_key")a({issues:l.issues});else if(l.code==="invalid_element")a({issues:l.issues});else if(l.path.length===0)r._errors.push(s(l));else{let d=r,c=0;for(;c<l.path.length;){const h=l.path[c];c===l.path.length-1?(d[h]=d[h]||{_errors:[]},d[h]._errors.push(s(l))):d[h]=d[h]||{_errors:[]},d=d[h],c++}}};return a(t),r}const Up=t=>(s,r,a,o)=>{const l=a?Object.assign(a,{async:!1}):{async:!1},d=s._zod.run({value:r,issues:[]},l);if(d instanceof Promise)throw new Td;if(d.issues.length){const c=new(o?.Err??t)(d.issues.map(h=>Lc(h,l,Pc())));throw xv(c,o?.callee),c}return d.value},Bp=t=>async(s,r,a,o)=>{const l=a?Object.assign(a,{async:!0}):{async:!0};let d=s._zod.run({value:r,issues:[]},l);if(d instanceof Promise&&(d=await d),d.issues.length){const c=new(o?.Err??t)(d.issues.map(h=>Lc(h,l,Pc())));throw xv(c,o?.callee),c}return d.value},um=t=>(s,r,a)=>{const o=a?{...a,async:!1}:{async:!1},l=s._zod.run({value:r,issues:[]},o);if(l instanceof Promise)throw new Td;return l.issues.length?{success:!1,error:new(t??vv)(l.issues.map(d=>Lc(d,o,Pc())))}:{success:!0,data:l.value}},Pj=um(bv),hm=t=>async(s,r,a)=>{const o=a?Object.assign(a,{async:!0}):{async:!0};let l=s._zod.run({value:r,issues:[]},o);return l instanceof Promise&&(l=await l),l.issues.length?{success:!1,error:new t(l.issues.map(d=>Lc(d,o,Pc())))}:{success:!0,data:l.value}},Lj=hm(bv),Ej=t=>(s,r,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return Up(t)(s,r,o)},Tj=t=>(s,r,a)=>Up(t)(s,r,a),Fj=t=>async(s,r,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return Bp(t)(s,r,o)},Dj=t=>async(s,r,a)=>Bp(t)(s,r,a),Rj=t=>(s,r,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return um(t)(s,r,o)},Ij=t=>(s,r,a)=>um(t)(s,r,a),Mj=t=>async(s,r,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return hm(t)(s,r,o)},zj=t=>async(s,r,a)=>hm(t)(s,r,a),Oj=/^[cC][^\s-]{8,}$/,qj=/^[0-9a-z]+$/,$j=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Uj=/^[0-9a-vA-V]{20}$/,Bj=/^[A-Za-z0-9]{27}$/,Vj=/^[a-zA-Z0-9_-]{21}$/,Wj=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Hj=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Bg=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Gj=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Zj="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Yj(){return new RegExp(Zj,"u")}const Kj=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Jj=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Qj=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Xj=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ew=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,jv=/^[A-Za-z0-9_-]*$/,tw=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,sw=/^\+(?:[0-9]){6,14}[0-9]$/,wv="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rw=new RegExp(`^${wv}$`);function Nv(t){const s="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${s}`:t.precision===0?`${s}:[0-5]\\d`:`${s}:[0-5]\\d\\.\\d{${t.precision}}`:`${s}(?::[0-5]\\d(?:\\.\\d+)?)?`}function nw(t){return new RegExp(`^${Nv(t)}$`)}function aw(t){const s=Nv({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const a=`${s}(?:${r.join("|")})`;return new RegExp(`^${wv}T(?:${a})$`)}const iw=t=>{const s=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${s}$`)},ow=/^[^A-Z]*$/,lw=/^[^a-z]*$/,xo=tt("$ZodCheck",(t,s)=>{var r;t._zod??(t._zod={}),t._zod.def=s,(r=t._zod).onattach??(r.onattach=[])}),cw=tt("$ZodCheckMaxLength",(t,s)=>{var r;xo.init(t,s),(r=t._zod.def).when??(r.when=a=>{const o=a.value;return!zp(o)&&o.length!==void 0}),t._zod.onattach.push(a=>{const o=a._zod.bag.maximum??Number.POSITIVE_INFINITY;s.maximum<o&&(a._zod.bag.maximum=s.maximum)}),t._zod.check=a=>{const o=a.value;if(o.length<=s.maximum)return;const d=$p(o);a.issues.push({origin:d,code:"too_big",maximum:s.maximum,inclusive:!0,input:o,inst:t,continue:!s.abort})}}),dw=tt("$ZodCheckMinLength",(t,s)=>{var r;xo.init(t,s),(r=t._zod.def).when??(r.when=a=>{const o=a.value;return!zp(o)&&o.length!==void 0}),t._zod.onattach.push(a=>{const o=a._zod.bag.minimum??Number.NEGATIVE_INFINITY;s.minimum>o&&(a._zod.bag.minimum=s.minimum)}),t._zod.check=a=>{const o=a.value;if(o.length>=s.minimum)return;const d=$p(o);a.issues.push({origin:d,code:"too_small",minimum:s.minimum,inclusive:!0,input:o,inst:t,continue:!s.abort})}}),uw=tt("$ZodCheckLengthEquals",(t,s)=>{var r;xo.init(t,s),(r=t._zod.def).when??(r.when=a=>{const o=a.value;return!zp(o)&&o.length!==void 0}),t._zod.onattach.push(a=>{const o=a._zod.bag;o.minimum=s.length,o.maximum=s.length,o.length=s.length}),t._zod.check=a=>{const o=a.value,l=o.length;if(l===s.length)return;const d=$p(o),c=l>s.length;a.issues.push({origin:d,...c?{code:"too_big",maximum:s.length}:{code:"too_small",minimum:s.length},inclusive:!0,exact:!0,input:a.value,inst:t,continue:!s.abort})}}),mm=tt("$ZodCheckStringFormat",(t,s)=>{var r,a;xo.init(t,s),t._zod.onattach.push(o=>{const l=o._zod.bag;l.format=s.format,s.pattern&&(l.patterns??(l.patterns=new Set),l.patterns.add(s.pattern))}),s.pattern?(r=t._zod).check??(r.check=o=>{s.pattern.lastIndex=0,!s.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:s.format,input:o.value,...s.pattern?{pattern:s.pattern.toString()}:{},inst:t,continue:!s.abort})}):(a=t._zod).check??(a.check=()=>{})}),hw=tt("$ZodCheckRegex",(t,s)=>{mm.init(t,s),t._zod.check=r=>{s.pattern.lastIndex=0,!s.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:s.pattern.toString(),inst:t,continue:!s.abort})}}),mw=tt("$ZodCheckLowerCase",(t,s)=>{s.pattern??(s.pattern=ow),mm.init(t,s)}),fw=tt("$ZodCheckUpperCase",(t,s)=>{s.pattern??(s.pattern=lw),mm.init(t,s)}),pw=tt("$ZodCheckIncludes",(t,s)=>{xo.init(t,s);const r=qp(s.includes),a=new RegExp(typeof s.position=="number"?`^.{${s.position}}${r}`:r);s.pattern=a,t._zod.onattach.push(o=>{const l=o._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(a)}),t._zod.check=o=>{o.value.includes(s.includes,s.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:s.includes,input:o.value,inst:t,continue:!s.abort})}}),xw=tt("$ZodCheckStartsWith",(t,s)=>{xo.init(t,s);const r=new RegExp(`^${qp(s.prefix)}.*`);s.pattern??(s.pattern=r),t._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=a=>{a.value.startsWith(s.prefix)||a.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:s.prefix,input:a.value,inst:t,continue:!s.abort})}}),gw=tt("$ZodCheckEndsWith",(t,s)=>{xo.init(t,s);const r=new RegExp(`.*${qp(s.suffix)}$`);s.pattern??(s.pattern=r),t._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=a=>{a.value.endsWith(s.suffix)||a.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:s.suffix,input:a.value,inst:t,continue:!s.abort})}}),yw=tt("$ZodCheckOverwrite",(t,s)=>{xo.init(t,s),t._zod.check=r=>{r.value=s.tx(r.value)}}),vw={major:4,minor:1,patch:12},Jn=tt("$ZodType",(t,s)=>{var r;t??(t={}),t._zod.def=s,t._zod.bag=t._zod.bag||{},t._zod.version=vw;const a=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&a.unshift(t);for(const o of a)for(const l of o._zod.onattach)l(t);if(a.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const o=(d,c,h)=>{let f=Pd(d),p;for(const y of c){if(y._zod.def.when){if(!y._zod.def.when(d))continue}else if(f)continue;const b=d.issues.length,x=y._zod.check(d);if(x instanceof Promise&&h?.async===!1)throw new Td;if(p||x instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await x,d.issues.length!==b&&(f||(f=Pd(d,b)))});else{if(d.issues.length===b)continue;f||(f=Pd(d,b))}}return p?p.then(()=>d):d},l=(d,c,h)=>{if(Pd(d))return d.aborted=!0,d;const f=o(c,a,h);if(f instanceof Promise){if(h.async===!1)throw new Td;return f.then(p=>t._zod.parse(p,h))}return t._zod.parse(f,h)};t._zod.run=(d,c)=>{if(c.skipChecks)return t._zod.parse(d,c);if(c.direction==="backward"){const f=t._zod.parse({value:d.value,issues:[]},{...c,skipChecks:!0});return f instanceof Promise?f.then(p=>l(p,d,c)):l(f,d,c)}const h=t._zod.parse(d,c);if(h instanceof Promise){if(c.async===!1)throw new Td;return h.then(f=>o(f,a,c))}return o(h,a,c)}}t["~standard"]={validate:o=>{try{const l=Pj(t,o);return l.success?{value:l.data}:{issues:l.error?.issues}}catch{return Lj(t,o).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}}),Vp=tt("$ZodString",(t,s)=>{Jn.init(t,s),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??iw(t._zod.bag),t._zod.parse=(r,a)=>{if(s.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),nr=tt("$ZodStringFormat",(t,s)=>{mm.init(t,s),Vp.init(t,s)}),bw=tt("$ZodGUID",(t,s)=>{s.pattern??(s.pattern=Hj),nr.init(t,s)}),jw=tt("$ZodUUID",(t,s)=>{if(s.version){const a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[s.version];if(a===void 0)throw new Error(`Invalid UUID version: "${s.version}"`);s.pattern??(s.pattern=Bg(a))}else s.pattern??(s.pattern=Bg());nr.init(t,s)}),ww=tt("$ZodEmail",(t,s)=>{s.pattern??(s.pattern=Gj),nr.init(t,s)}),Nw=tt("$ZodURL",(t,s)=>{nr.init(t,s),t._zod.check=r=>{try{const a=r.value.trim(),o=new URL(a);s.hostname&&(s.hostname.lastIndex=0,s.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:tw.source,input:r.value,inst:t,continue:!s.abort})),s.protocol&&(s.protocol.lastIndex=0,s.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:s.protocol.source,input:r.value,inst:t,continue:!s.abort})),s.normalize?r.value=o.href:r.value=a;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!s.abort})}}}),_w=tt("$ZodEmoji",(t,s)=>{s.pattern??(s.pattern=Yj()),nr.init(t,s)}),kw=tt("$ZodNanoID",(t,s)=>{s.pattern??(s.pattern=Vj),nr.init(t,s)}),Sw=tt("$ZodCUID",(t,s)=>{s.pattern??(s.pattern=Oj),nr.init(t,s)}),Cw=tt("$ZodCUID2",(t,s)=>{s.pattern??(s.pattern=qj),nr.init(t,s)}),Aw=tt("$ZodULID",(t,s)=>{s.pattern??(s.pattern=$j),nr.init(t,s)}),Pw=tt("$ZodXID",(t,s)=>{s.pattern??(s.pattern=Uj),nr.init(t,s)}),Lw=tt("$ZodKSUID",(t,s)=>{s.pattern??(s.pattern=Bj),nr.init(t,s)}),Ew=tt("$ZodISODateTime",(t,s)=>{s.pattern??(s.pattern=aw(s)),nr.init(t,s)}),Tw=tt("$ZodISODate",(t,s)=>{s.pattern??(s.pattern=rw),nr.init(t,s)}),Fw=tt("$ZodISOTime",(t,s)=>{s.pattern??(s.pattern=nw(s)),nr.init(t,s)}),Dw=tt("$ZodISODuration",(t,s)=>{s.pattern??(s.pattern=Wj),nr.init(t,s)}),Rw=tt("$ZodIPv4",(t,s)=>{s.pattern??(s.pattern=Kj),nr.init(t,s),t._zod.onattach.push(r=>{const a=r._zod.bag;a.format="ipv4"})}),Iw=tt("$ZodIPv6",(t,s)=>{s.pattern??(s.pattern=Jj),nr.init(t,s),t._zod.onattach.push(r=>{const a=r._zod.bag;a.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!s.abort})}}}),Mw=tt("$ZodCIDRv4",(t,s)=>{s.pattern??(s.pattern=Qj),nr.init(t,s)}),zw=tt("$ZodCIDRv6",(t,s)=>{s.pattern??(s.pattern=Xj),nr.init(t,s),t._zod.check=r=>{const a=r.value.split("/");try{if(a.length!==2)throw new Error;const[o,l]=a;if(!l)throw new Error;const d=Number(l);if(`${d}`!==l)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${o}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!s.abort})}}});function _v(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Ow=tt("$ZodBase64",(t,s)=>{s.pattern??(s.pattern=ew),nr.init(t,s),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{_v(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!s.abort})}});function qw(t){if(!jv.test(t))return!1;const s=t.replace(/[-_]/g,a=>a==="-"?"+":"/"),r=s.padEnd(Math.ceil(s.length/4)*4,"=");return _v(r)}const $w=tt("$ZodBase64URL",(t,s)=>{s.pattern??(s.pattern=jv),nr.init(t,s),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{qw(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!s.abort})}}),Uw=tt("$ZodE164",(t,s)=>{s.pattern??(s.pattern=sw),nr.init(t,s)});function Bw(t,s=null){try{const r=t.split(".");if(r.length!==3)return!1;const[a]=r;if(!a)return!1;const o=JSON.parse(atob(a));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||s&&(!("alg"in o)||o.alg!==s))}catch{return!1}}const Vw=tt("$ZodJWT",(t,s)=>{nr.init(t,s),t._zod.check=r=>{Bw(r.value,s.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!s.abort})}});function Vg(t,s,r){t.issues.length&&s.issues.push(...Sj(r,t.issues)),s.value[r]=t.value}const Ww=tt("$ZodArray",(t,s)=>{Jn.init(t,s),t._zod.parse=(r,a)=>{const o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:t}),r;r.value=Array(o.length);const l=[];for(let d=0;d<o.length;d++){const c=o[d],h=s.element._zod.run({value:c,issues:[]},a);h instanceof Promise?l.push(h.then(f=>Vg(f,r,d))):Vg(h,r,d)}return l.length?Promise.all(l).then(()=>r):r}});function Wg(t,s,r,a){for(const l of t)if(l.issues.length===0)return s.value=l.value,s;const o=t.filter(l=>!Pd(l));return o.length===1?(s.value=o[0].value,o[0]):(s.issues.push({code:"invalid_union",input:s.value,inst:r,errors:t.map(l=>l.issues.map(d=>Lc(d,a,Pc())))}),s)}const Hw=tt("$ZodUnion",(t,s)=>{Jn.init(t,s),rr(t._zod,"optin",()=>s.options.some(o=>o._zod.optin==="optional")?"optional":void 0),rr(t._zod,"optout",()=>s.options.some(o=>o._zod.optout==="optional")?"optional":void 0),rr(t._zod,"values",()=>{if(s.options.every(o=>o._zod.values))return new Set(s.options.flatMap(o=>Array.from(o._zod.values)))}),rr(t._zod,"pattern",()=>{if(s.options.every(o=>o._zod.pattern)){const o=s.options.map(l=>l._zod.pattern);return new RegExp(`^(${o.map(l=>Op(l.source)).join("|")})$`)}});const r=s.options.length===1,a=s.options[0]._zod.run;t._zod.parse=(o,l)=>{if(r)return a(o,l);let d=!1;const c=[];for(const h of s.options){const f=h._zod.run({value:o.value,issues:[]},l);if(f instanceof Promise)c.push(f),d=!0;else{if(f.issues.length===0)return f;c.push(f)}}return d?Promise.all(c).then(h=>Wg(h,o,t,l)):Wg(c,o,t,l)}}),Gw=tt("$ZodIntersection",(t,s)=>{Jn.init(t,s),t._zod.parse=(r,a)=>{const o=r.value,l=s.left._zod.run({value:o,issues:[]},a),d=s.right._zod.run({value:o,issues:[]},a);return l instanceof Promise||d instanceof Promise?Promise.all([l,d]).then(([h,f])=>Hg(r,h,f)):Hg(r,l,d)}});function ip(t,s){if(t===s)return{valid:!0,data:t};if(t instanceof Date&&s instanceof Date&&+t==+s)return{valid:!0,data:t};if(ap(t)&&ap(s)){const r=Object.keys(s),a=Object.keys(t).filter(l=>r.indexOf(l)!==-1),o={...t,...s};for(const l of a){const d=ip(t[l],s[l]);if(!d.valid)return{valid:!1,mergeErrorPath:[l,...d.mergeErrorPath]};o[l]=d.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(s)){if(t.length!==s.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let a=0;a<t.length;a++){const o=t[a],l=s[a],d=ip(o,l);if(!d.valid)return{valid:!1,mergeErrorPath:[a,...d.mergeErrorPath]};r.push(d.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Hg(t,s,r){if(s.issues.length&&t.issues.push(...s.issues),r.issues.length&&t.issues.push(...r.issues),Pd(t))return t;const a=ip(s.value,r.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return t.value=a.data,t}const Zw=tt("$ZodTransform",(t,s)=>{Jn.init(t,s),t._zod.parse=(r,a)=>{if(a.direction==="backward")throw new pv(t.constructor.name);const o=s.transform(r.value,r);if(a.async)return(o instanceof Promise?o:Promise.resolve(o)).then(d=>(r.value=d,r));if(o instanceof Promise)throw new Td;return r.value=o,r}});function Gg(t,s){return t.issues.length&&s===void 0?{issues:[],value:void 0}:t}const Yw=tt("$ZodOptional",(t,s)=>{Jn.init(t,s),t._zod.optin="optional",t._zod.optout="optional",rr(t._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,void 0]):void 0),rr(t._zod,"pattern",()=>{const r=s.innerType._zod.pattern;return r?new RegExp(`^(${Op(r.source)})?$`):void 0}),t._zod.parse=(r,a)=>{if(s.innerType._zod.optin==="optional"){const o=s.innerType._zod.run(r,a);return o instanceof Promise?o.then(l=>Gg(l,r.value)):Gg(o,r.value)}return r.value===void 0?r:s.innerType._zod.run(r,a)}}),Kw=tt("$ZodNullable",(t,s)=>{Jn.init(t,s),rr(t._zod,"optin",()=>s.innerType._zod.optin),rr(t._zod,"optout",()=>s.innerType._zod.optout),rr(t._zod,"pattern",()=>{const r=s.innerType._zod.pattern;return r?new RegExp(`^(${Op(r.source)}|null)$`):void 0}),rr(t._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,null]):void 0),t._zod.parse=(r,a)=>r.value===null?r:s.innerType._zod.run(r,a)}),Jw=tt("$ZodDefault",(t,s)=>{Jn.init(t,s),t._zod.optin="optional",rr(t._zod,"values",()=>s.innerType._zod.values),t._zod.parse=(r,a)=>{if(a.direction==="backward")return s.innerType._zod.run(r,a);if(r.value===void 0)return r.value=s.defaultValue,r;const o=s.innerType._zod.run(r,a);return o instanceof Promise?o.then(l=>Zg(l,s)):Zg(o,s)}});function Zg(t,s){return t.value===void 0&&(t.value=s.defaultValue),t}const Qw=tt("$ZodPrefault",(t,s)=>{Jn.init(t,s),t._zod.optin="optional",rr(t._zod,"values",()=>s.innerType._zod.values),t._zod.parse=(r,a)=>(a.direction==="backward"||r.value===void 0&&(r.value=s.defaultValue),s.innerType._zod.run(r,a))}),Xw=tt("$ZodNonOptional",(t,s)=>{Jn.init(t,s),rr(t._zod,"values",()=>{const r=s.innerType._zod.values;return r?new Set([...r].filter(a=>a!==void 0)):void 0}),t._zod.parse=(r,a)=>{const o=s.innerType._zod.run(r,a);return o instanceof Promise?o.then(l=>Yg(l,t)):Yg(o,t)}});function Yg(t,s){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:s}),t}const eN=tt("$ZodCatch",(t,s)=>{Jn.init(t,s),rr(t._zod,"optin",()=>s.innerType._zod.optin),rr(t._zod,"optout",()=>s.innerType._zod.optout),rr(t._zod,"values",()=>s.innerType._zod.values),t._zod.parse=(r,a)=>{if(a.direction==="backward")return s.innerType._zod.run(r,a);const o=s.innerType._zod.run(r,a);return o instanceof Promise?o.then(l=>(r.value=l.value,l.issues.length&&(r.value=s.catchValue({...r,error:{issues:l.issues.map(d=>Lc(d,a,Pc()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=s.catchValue({...r,error:{issues:o.issues.map(l=>Lc(l,a,Pc()))},input:r.value}),r.issues=[]),r)}}),tN=tt("$ZodPipe",(t,s)=>{Jn.init(t,s),rr(t._zod,"values",()=>s.in._zod.values),rr(t._zod,"optin",()=>s.in._zod.optin),rr(t._zod,"optout",()=>s.out._zod.optout),rr(t._zod,"propValues",()=>s.in._zod.propValues),t._zod.parse=(r,a)=>{if(a.direction==="backward"){const l=s.out._zod.run(r,a);return l instanceof Promise?l.then(d=>Ch(d,s.in,a)):Ch(l,s.in,a)}const o=s.in._zod.run(r,a);return o instanceof Promise?o.then(l=>Ch(l,s.out,a)):Ch(o,s.out,a)}});function Ch(t,s,r){return t.issues.length?(t.aborted=!0,t):s._zod.run({value:t.value,issues:t.issues},r)}const sN=tt("$ZodReadonly",(t,s)=>{Jn.init(t,s),rr(t._zod,"propValues",()=>s.innerType._zod.propValues),rr(t._zod,"values",()=>s.innerType._zod.values),rr(t._zod,"optin",()=>s.innerType._zod.optin),rr(t._zod,"optout",()=>s.innerType._zod.optout),t._zod.parse=(r,a)=>{if(a.direction==="backward")return s.innerType._zod.run(r,a);const o=s.innerType._zod.run(r,a);return o instanceof Promise?o.then(Kg):Kg(o)}});function Kg(t){return t.value=Object.freeze(t.value),t}const rN=tt("$ZodCustom",(t,s)=>{xo.init(t,s),Jn.init(t,s),t._zod.parse=(r,a)=>r,t._zod.check=r=>{const a=r.value,o=s.fn(a);if(o instanceof Promise)return o.then(l=>Jg(l,r,a,t));Jg(o,r,a,t)}});function Jg(t,s,r,a){if(!t){const o={code:"custom",input:r,inst:a,path:[...a._zod.def.path??[]],continue:!a._zod.def.abort};a._zod.def.params&&(o.params=a._zod.def.params),s.issues.push(Pu(o))}}class nN{constructor(){this._map=new WeakMap,this._idmap=new Map}add(s,...r){const a=r[0];if(this._map.set(s,a),a&&typeof a=="object"&&"id"in a){if(this._idmap.has(a.id))throw new Error(`ID ${a.id} already exists in the registry`);this._idmap.set(a.id,s)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(s){const r=this._map.get(s);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(s),this}get(s){const r=s._zod.parent;if(r){const a={...this.get(r)??{}};delete a.id;const o={...a,...this._map.get(s)};return Object.keys(o).length?o:void 0}return this._map.get(s)}has(s){return this._map.has(s)}}function aN(){return new nN}const Ah=aN();function iN(t,s){return new t({type:"string",...Jt(s)})}function oN(t,s){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Jt(s)})}function Qg(t,s){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Jt(s)})}function lN(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Jt(s)})}function cN(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Jt(s)})}function dN(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Jt(s)})}function uN(t,s){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Jt(s)})}function hN(t,s){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Jt(s)})}function mN(t,s){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Jt(s)})}function fN(t,s){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Jt(s)})}function pN(t,s){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Jt(s)})}function xN(t,s){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Jt(s)})}function gN(t,s){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Jt(s)})}function yN(t,s){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Jt(s)})}function vN(t,s){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Jt(s)})}function bN(t,s){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Jt(s)})}function jN(t,s){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Jt(s)})}function wN(t,s){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Jt(s)})}function NN(t,s){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Jt(s)})}function _N(t,s){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Jt(s)})}function kN(t,s){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Jt(s)})}function SN(t,s){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Jt(s)})}function CN(t,s){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Jt(s)})}function AN(t,s){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Jt(s)})}function PN(t,s){return new t({type:"string",format:"date",check:"string_format",...Jt(s)})}function LN(t,s){return new t({type:"string",format:"time",check:"string_format",precision:null,...Jt(s)})}function EN(t,s){return new t({type:"string",format:"duration",check:"string_format",...Jt(s)})}function kv(t,s){return new cw({check:"max_length",...Jt(s),maximum:t})}function Jh(t,s){return new dw({check:"min_length",...Jt(s),minimum:t})}function Sv(t,s){return new uw({check:"length_equals",...Jt(s),length:t})}function TN(t,s){return new hw({check:"string_format",format:"regex",...Jt(s),pattern:t})}function FN(t){return new mw({check:"string_format",format:"lowercase",...Jt(t)})}function DN(t){return new fw({check:"string_format",format:"uppercase",...Jt(t)})}function RN(t,s){return new pw({check:"string_format",format:"includes",...Jt(s),includes:t})}function IN(t,s){return new xw({check:"string_format",format:"starts_with",...Jt(s),prefix:t})}function MN(t,s){return new gw({check:"string_format",format:"ends_with",...Jt(s),suffix:t})}function Mu(t){return new yw({check:"overwrite",tx:t})}function zN(t){return Mu(s=>s.normalize(t))}function ON(){return Mu(t=>t.trim())}function qN(){return Mu(t=>t.toLowerCase())}function $N(){return Mu(t=>t.toUpperCase())}function UN(t,s,r){return new t({type:"array",element:s,...Jt(r)})}function BN(t,s,r){return new t({type:"custom",check:"custom",fn:s,...Jt(r)})}function VN(t){const s=WN(r=>(r.addIssue=a=>{if(typeof a=="string")r.issues.push(Pu(a,r.value,s._zod.def));else{const o=a;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=s),o.continue??(o.continue=!s._zod.def.abort),r.issues.push(Pu(o))}},t(r.value,r)));return s}function WN(t,s){const r=new xo({check:"custom",...Jt(s)});return r._zod.check=t,r}const HN=tt("ZodISODateTime",(t,s)=>{Ew.init(t,s),fr.init(t,s)});function GN(t){return AN(HN,t)}const ZN=tt("ZodISODate",(t,s)=>{Tw.init(t,s),fr.init(t,s)});function YN(t){return PN(ZN,t)}const KN=tt("ZodISOTime",(t,s)=>{Fw.init(t,s),fr.init(t,s)});function JN(t){return LN(KN,t)}const QN=tt("ZodISODuration",(t,s)=>{Dw.init(t,s),fr.init(t,s)});function XN(t){return EN(QN,t)}const e5=(t,s)=>{vv.init(t,s),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>Aj(t,r)},flatten:{value:r=>Cj(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,np,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,np,2)}},isEmpty:{get(){return t.issues.length===0}}})},hi=tt("ZodError",e5,{Parent:Error}),t5=Up(hi),s5=Bp(hi),r5=um(hi),n5=hm(hi),a5=Ej(hi),i5=Tj(hi),o5=Fj(hi),l5=Dj(hi),c5=Rj(hi),d5=Ij(hi),u5=Mj(hi),h5=zj(hi),ba=tt("ZodType",(t,s)=>(Jn.init(t,s),t.def=s,t.type=s.type,Object.defineProperty(t,"_def",{value:s}),t.check=(...r)=>t.clone(_j(s,{checks:[...s.checks??[],...r.map(a=>typeof a=="function"?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),t.clone=(r,a)=>kj(t,r,a),t.brand=()=>t,t.register=((r,a)=>(r.add(t,a),t)),t.parse=(r,a)=>t5(t,r,a,{callee:t.parse}),t.safeParse=(r,a)=>r5(t,r,a),t.parseAsync=async(r,a)=>s5(t,r,a,{callee:t.parseAsync}),t.safeParseAsync=async(r,a)=>n5(t,r,a),t.spa=t.safeParseAsync,t.encode=(r,a)=>a5(t,r,a),t.decode=(r,a)=>i5(t,r,a),t.encodeAsync=async(r,a)=>o5(t,r,a),t.decodeAsync=async(r,a)=>l5(t,r,a),t.safeEncode=(r,a)=>c5(t,r,a),t.safeDecode=(r,a)=>d5(t,r,a),t.safeEncodeAsync=async(r,a)=>u5(t,r,a),t.safeDecodeAsync=async(r,a)=>h5(t,r,a),t.refine=(r,a)=>t.check(X5(r,a)),t.superRefine=r=>t.check(e4(r)),t.overwrite=r=>t.check(Mu(r)),t.optional=()=>e0(t),t.nullable=()=>t0(t),t.nullish=()=>e0(t0(t)),t.nonoptional=r=>H5(t,r),t.array=()=>T5(t),t.or=r=>D5([t,r]),t.and=r=>I5(t,r),t.transform=r=>s0(t,z5(r)),t.default=r=>U5(t,r),t.prefault=r=>V5(t,r),t.catch=r=>Z5(t,r),t.pipe=r=>s0(t,r),t.readonly=()=>J5(t),t.describe=r=>{const a=t.clone();return Ah.add(a,{description:r}),a},Object.defineProperty(t,"description",{get(){return Ah.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Ah.get(t);const a=t.clone();return Ah.add(a,r[0]),a},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Cv=tt("_ZodString",(t,s)=>{Vp.init(t,s),ba.init(t,s);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...a)=>t.check(TN(...a)),t.includes=(...a)=>t.check(RN(...a)),t.startsWith=(...a)=>t.check(IN(...a)),t.endsWith=(...a)=>t.check(MN(...a)),t.min=(...a)=>t.check(Jh(...a)),t.max=(...a)=>t.check(kv(...a)),t.length=(...a)=>t.check(Sv(...a)),t.nonempty=(...a)=>t.check(Jh(1,...a)),t.lowercase=a=>t.check(FN(a)),t.uppercase=a=>t.check(DN(a)),t.trim=()=>t.check(ON()),t.normalize=(...a)=>t.check(zN(...a)),t.toLowerCase=()=>t.check(qN()),t.toUpperCase=()=>t.check($N())}),m5=tt("ZodString",(t,s)=>{Vp.init(t,s),Cv.init(t,s),t.email=r=>t.check(oN(f5,r)),t.url=r=>t.check(hN(p5,r)),t.jwt=r=>t.check(CN(L5,r)),t.emoji=r=>t.check(mN(x5,r)),t.guid=r=>t.check(Qg(Xg,r)),t.uuid=r=>t.check(lN(Ph,r)),t.uuidv4=r=>t.check(cN(Ph,r)),t.uuidv6=r=>t.check(dN(Ph,r)),t.uuidv7=r=>t.check(uN(Ph,r)),t.nanoid=r=>t.check(fN(g5,r)),t.guid=r=>t.check(Qg(Xg,r)),t.cuid=r=>t.check(pN(y5,r)),t.cuid2=r=>t.check(xN(v5,r)),t.ulid=r=>t.check(gN(b5,r)),t.base64=r=>t.check(_N(C5,r)),t.base64url=r=>t.check(kN(A5,r)),t.xid=r=>t.check(yN(j5,r)),t.ksuid=r=>t.check(vN(w5,r)),t.ipv4=r=>t.check(bN(N5,r)),t.ipv6=r=>t.check(jN(_5,r)),t.cidrv4=r=>t.check(wN(k5,r)),t.cidrv6=r=>t.check(NN(S5,r)),t.e164=r=>t.check(SN(P5,r)),t.datetime=r=>t.check(GN(r)),t.date=r=>t.check(YN(r)),t.time=r=>t.check(JN(r)),t.duration=r=>t.check(XN(r))});function Av(t){return iN(m5,t)}const fr=tt("ZodStringFormat",(t,s)=>{nr.init(t,s),Cv.init(t,s)}),f5=tt("ZodEmail",(t,s)=>{ww.init(t,s),fr.init(t,s)}),Xg=tt("ZodGUID",(t,s)=>{bw.init(t,s),fr.init(t,s)}),Ph=tt("ZodUUID",(t,s)=>{jw.init(t,s),fr.init(t,s)}),p5=tt("ZodURL",(t,s)=>{Nw.init(t,s),fr.init(t,s)}),x5=tt("ZodEmoji",(t,s)=>{_w.init(t,s),fr.init(t,s)}),g5=tt("ZodNanoID",(t,s)=>{kw.init(t,s),fr.init(t,s)}),y5=tt("ZodCUID",(t,s)=>{Sw.init(t,s),fr.init(t,s)}),v5=tt("ZodCUID2",(t,s)=>{Cw.init(t,s),fr.init(t,s)}),b5=tt("ZodULID",(t,s)=>{Aw.init(t,s),fr.init(t,s)}),j5=tt("ZodXID",(t,s)=>{Pw.init(t,s),fr.init(t,s)}),w5=tt("ZodKSUID",(t,s)=>{Lw.init(t,s),fr.init(t,s)}),N5=tt("ZodIPv4",(t,s)=>{Rw.init(t,s),fr.init(t,s)}),_5=tt("ZodIPv6",(t,s)=>{Iw.init(t,s),fr.init(t,s)}),k5=tt("ZodCIDRv4",(t,s)=>{Mw.init(t,s),fr.init(t,s)}),S5=tt("ZodCIDRv6",(t,s)=>{zw.init(t,s),fr.init(t,s)}),C5=tt("ZodBase64",(t,s)=>{Ow.init(t,s),fr.init(t,s)}),A5=tt("ZodBase64URL",(t,s)=>{$w.init(t,s),fr.init(t,s)}),P5=tt("ZodE164",(t,s)=>{Uw.init(t,s),fr.init(t,s)}),L5=tt("ZodJWT",(t,s)=>{Vw.init(t,s),fr.init(t,s)}),E5=tt("ZodArray",(t,s)=>{Ww.init(t,s),ba.init(t,s),t.element=s.element,t.min=(r,a)=>t.check(Jh(r,a)),t.nonempty=r=>t.check(Jh(1,r)),t.max=(r,a)=>t.check(kv(r,a)),t.length=(r,a)=>t.check(Sv(r,a)),t.unwrap=()=>t.element});function T5(t,s){return UN(E5,t,s)}const F5=tt("ZodUnion",(t,s)=>{Hw.init(t,s),ba.init(t,s),t.options=s.options});function D5(t,s){return new F5({type:"union",options:t,...Jt(s)})}const R5=tt("ZodIntersection",(t,s)=>{Gw.init(t,s),ba.init(t,s)});function I5(t,s){return new R5({type:"intersection",left:t,right:s})}const M5=tt("ZodTransform",(t,s)=>{Zw.init(t,s),ba.init(t,s),t._zod.parse=(r,a)=>{if(a.direction==="backward")throw new pv(t.constructor.name);r.addIssue=l=>{if(typeof l=="string")r.issues.push(Pu(l,r.value,s));else{const d=l;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=r.value),d.inst??(d.inst=t),r.issues.push(Pu(d))}};const o=s.transform(r.value,r);return o instanceof Promise?o.then(l=>(r.value=l,r)):(r.value=o,r)}});function z5(t){return new M5({type:"transform",transform:t})}const O5=tt("ZodOptional",(t,s)=>{Yw.init(t,s),ba.init(t,s),t.unwrap=()=>t._zod.def.innerType});function e0(t){return new O5({type:"optional",innerType:t})}const q5=tt("ZodNullable",(t,s)=>{Kw.init(t,s),ba.init(t,s),t.unwrap=()=>t._zod.def.innerType});function t0(t){return new q5({type:"nullable",innerType:t})}const $5=tt("ZodDefault",(t,s)=>{Jw.init(t,s),ba.init(t,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function U5(t,s){return new $5({type:"default",innerType:t,get defaultValue(){return typeof s=="function"?s():gv(s)}})}const B5=tt("ZodPrefault",(t,s)=>{Qw.init(t,s),ba.init(t,s),t.unwrap=()=>t._zod.def.innerType});function V5(t,s){return new B5({type:"prefault",innerType:t,get defaultValue(){return typeof s=="function"?s():gv(s)}})}const W5=tt("ZodNonOptional",(t,s)=>{Xw.init(t,s),ba.init(t,s),t.unwrap=()=>t._zod.def.innerType});function H5(t,s){return new W5({type:"nonoptional",innerType:t,...Jt(s)})}const G5=tt("ZodCatch",(t,s)=>{eN.init(t,s),ba.init(t,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Z5(t,s){return new G5({type:"catch",innerType:t,catchValue:typeof s=="function"?s:()=>s})}const Y5=tt("ZodPipe",(t,s)=>{tN.init(t,s),ba.init(t,s),t.in=s.in,t.out=s.out});function s0(t,s){return new Y5({type:"pipe",in:t,out:s})}const K5=tt("ZodReadonly",(t,s)=>{sN.init(t,s),ba.init(t,s),t.unwrap=()=>t._zod.def.innerType});function J5(t){return new K5({type:"readonly",innerType:t})}const Q5=tt("ZodCustom",(t,s)=>{rN.init(t,s),ba.init(t,s)});function X5(t,s={}){return BN(Q5,t,s)}function e4(t){return VN(t)}if(typeof document<"u"&&typeof window<"u"){const t="insforge-react-styles";if(!document.getElementById(t)){const s=document.createElement("style");s.id=t,s.textContent=`/**
 * InsForge React Component Library Styles
 * Traditional CSS with scoped class names (no Tailwind)
 */

/* ============================================
   FONTS
   ============================================ */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap');

/* ============================================
   CSS VARIABLES
   ============================================ */
:root {
  /* Colors */
  --if-color-primary: #000000;
  --if-color-primary-hover: #1f1f1f;
  --if-color-text: #000000;
  --if-color-text-secondary: #828282;
  --if-color-text-muted: #a3a3a3;
  --if-color-border: #d4d4d4;
  --if-color-border-focus: #000000;
  --if-color-bg-white: #ffffff;
  --if-color-bg-light: #fafafa;
  --if-color-bg-hover: #f9fafb;
  --if-color-error: #dc2626;
  --if-color-error-bg: #fee2e2;
  --if-color-success: #16a34a;

  /* Spacing */
  --if-space-1: 0.25rem; /* 4px */
  --if-space-2: 0.5rem; /* 8px */
  --if-space-3: 0.75rem; /* 12px */
  --if-space-4: 1rem; /* 16px */
  --if-space-6: 1.5rem; /* 24px */
  --if-space-8: 2rem; /* 32px */

  /* Border Radius */
  --if-radius-xs: 0.125rem; /* 2px */
  --if-radius-sm: 0.25rem; /* 4px */
  --if-radius-md: 0.375rem; /* 6px */
  --if-radius-lg: 0.5rem; /* 8px */
  --if-radius-xl: 0.75rem; /* 12px */

  /* Typography */
  --if-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  --if-font-family-manrope:
    'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  --if-font-size-xs: 0.75rem; /* 12px */
  --if-font-size-sm: 0.875rem; /* 14px */
  --if-font-size-base: 1rem; /* 16px */
  --if-font-size-lg: 1.125rem; /* 18px */
  --if-font-size-xl: 1.25rem; /* 20px */
  --if-font-size-2xl: 1.5rem; /* 24px */

  /* Shadows */
  --if-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --if-shadow-md: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
  --if-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  /* Transitions */
  --if-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --if-transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* ============================================
   AUTH CONTAINER
   ============================================ */
.if-authContainer {
  width: 100%;
  max-width: 400px;
  border-radius: var(--if-radius-xl);
  overflow: hidden;
  box-shadow: var(--if-shadow-lg);
}

.if-authCard {
  background-color: var(--if-color-bg-white);
  padding: var(--if-space-6);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  gap: var(--if-space-6);
}

/* ============================================
   AUTH HEADER
   ============================================ */
.if-authHeader {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
  gap: var(--if-space-2);
}

.if-authHeader-title {
  font-size: var(--if-font-size-2xl);
  font-weight: 600;
  color: var(--if-color-text);
  line-height: 2rem;
  margin: 0;
  font-family: var(--if-font-family);
}

.if-authHeader-subtitle {
  font-size: var(--if-font-size-sm);
  font-weight: 400;
  color: var(--if-color-text-secondary);
  line-height: 1.5rem;
  margin: 0;
  font-family: var(--if-font-family);
}

/* ============================================
   FORM FIELD
   ============================================ */
.if-formField {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  gap: var(--if-space-1);
}

.if-formField-label {
  font-size: var(--if-font-size-sm);
  font-weight: 400;
  color: var(--if-color-text);
  line-height: 1.5rem;
  font-family: var(--if-font-family);
}

.if-formField-input {
  width: 100%;
  display: flex;
  align-items: center;
  gap: var(--if-space-2);
  align-self: stretch;
  padding: var(--if-space-2) var(--if-space-3);
  border-radius: var(--if-radius-sm);
  border: 1px solid var(--if-color-border);
  background-color: var(--if-color-bg-white);
  font-size: var(--if-font-size-sm);
  font-weight: 400;
  line-height: 1.25rem;
  color: var(--if-color-text);
  font-family: var(--if-font-family);
  transition: border-color var(--if-transition-base);
}

.if-formField-input::placeholder {
  color: var(--if-color-text-muted);
  font-size: var(--if-font-size-sm);
  font-weight: 400;
}

.if-formField-input:focus {
  outline: none;
  border-color: var(--if-color-border-focus);
}

/* ============================================
   PASSWORD FIELD
   ============================================ */
.if-passwordField {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  gap: var(--if-space-1);
}

.if-passwordField-labelRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.if-passwordField-label {
  font-size: var(--if-font-size-sm);
  font-weight: 400;
  color: var(--if-color-text);
  line-height: 1.5rem;
  font-family: var(--if-font-family);
}

.if-passwordField-forgotLink {
  font-size: var(--if-font-size-sm);
  font-weight: 400;
  color: var(--if-color-text-secondary);
  text-decoration: none;
  transition: color var(--if-transition-fast);
  font-family: var(--if-font-family);
}

.if-passwordField-inputWrapper {
  position: relative;
  width: 100%;
}

.if-passwordField-input {
  width: 100%;
  display: flex;
  align-items: center;
  align-self: stretch;
  padding: var(--if-space-2) var(--if-space-3);
  padding-right: 2.5rem; /* Space for toggle button */
  border-radius: var(--if-radius-sm);
  border: 1px solid var(--if-color-border);
  background-color: var(--if-color-bg-white);
  font-size: var(--if-font-size-sm);
  font-weight: 400;
  line-height: 1.25rem;
  color: var(--if-color-text);
  font-family: var(--if-font-family);
  transition: border-color var(--if-transition-base);
}

.if-passwordField-input::placeholder {
  color: var(--if-color-text-muted);
}

.if-passwordField-input:focus {
  outline: none;
  border-color: var(--if-color-border-focus);
}

.if-passwordField-toggleButton {
  position: absolute;
  right: var(--if-space-1);
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  padding: var(--if-space-1);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--if-color-text-secondary);
  transition: color var(--if-transition-fast);
}

/* ============================================
   SUBMIT BUTTON
   ============================================ */
.if-submitButton {
  border-radius: var(--if-radius-sm);
  background-color: var(--if-color-primary);
  height: 2.5rem;
  width: 100%;
  display: flex;
  margin-top: var(--if-space-4);
  padding: var(--if-space-2) var(--if-space-4);
  justify-content: center;
  align-items: center;
  gap: 0.625rem;
  align-self: stretch;
  color: var(--if-color-bg-white);
  font-weight: 600;
  font-family: var(--if-font-family-manrope);
  font-size: var(--if-font-size-base);
  line-height: normal;
  border: none;
  cursor: pointer;
  transition: background-color var(--if-transition-base);
}

.if-submitButton:hover:not(:disabled) {
  background-color: var(--if-color-primary-hover);
}

.if-submitButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.if-submitButton-icon {
  width: 1.25rem;
  height: 1.25rem;
}

/* Spinner animation */
@keyframes if-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.if-submitButton-spinner {
  animation: if-spin 1s linear infinite;
}

/* ============================================
   OAUTH BUTTON
   ============================================ */
.if-oauthButton {
  display: flex;
  width: 100%;
  height: 2.25rem;
  padding: var(--if-space-2) var(--if-space-3);
  flex-direction: row;
  justify-content: center;
  align-items: center;
  gap: var(--if-space-3);
  border-radius: var(--if-radius-md);
  border: 1px solid #e4e4e7;
  background-color: var(--if-color-bg-white);
  box-shadow: var(--if-shadow-md);
  color: #09090b;
  text-align: center;
  font-size: var(--if-font-size-sm);
  font-weight: 500;
  line-height: 1.25rem;
  cursor: pointer;
  transition: all var(--if-transition-base);
  font-family: var(--if-font-family);
}

.if-oauthButton:hover:not(:disabled) {
  background-color: var(--if-color-bg-hover);
  border-color: #9ca3af;
}

.if-oauthButton:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.if-oauthButton-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 1.125rem;
  height: 1.125rem;
}

.if-oauthButton-full {
  justify-content: center;
}

.if-oauthButton-short {
  justify-content: center;
  padding: var(--if-space-2);
  gap: var(--if-space-2);
}

.if-oauthButton-icon-only {
  justify-content: center;
  gap: 0;
}

/* ============================================
   OAUTH PROVIDERS CONTAINER
   ============================================ */
.if-oauthProviders {
  display: flex;
  flex-direction: column;
  gap: var(--if-space-3);
  width: 100%;
}

/* ============================================
   AUTH LINK
   ============================================ */
.if-authLink {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--if-space-1);
  font-size: var(--if-font-size-sm);
  color: var(--if-color-text-secondary);
  font-family: var(--if-font-family);
}

.if-authLink-text {
  font-weight: 400;
}

.if-authLink-link {
  font-weight: 600;
  color: var(--if-color-text);
  text-decoration: none;
  transition: opacity var(--if-transition-fast);
}

/* ============================================
   AUTH DIVIDER
   ============================================ */
.if-authDivider {
  display: flex;
  align-items: center;
  text-align: center;
  width: 100%;
  gap: var(--if-space-3);
}

.if-authDivider-line {
  flex: 1;
  border-top: 1px solid var(--if-color-border);
}

.if-authDivider-text {
  font-size: var(--if-font-size-sm);
  color: var(--if-color-text-secondary);
  font-weight: 400;
  font-family: var(--if-font-family-manrope);
}

/* ============================================
   ERROR BANNER
   ============================================ */
.if-errorBanner {
  padding: var(--if-space-3);
  background-color: var(--if-color-error-bg);
  border-radius: var(--if-radius-md);
  border: 1px solid var(--if-color-error);
}

.if-errorBanner-content {
  display: flex;
  align-items: center;
  gap: var(--if-space-2);
}

.if-errorBanner-icon {
  width: 1.5rem;
  height: 1.5rem;
  flex-shrink: 0;
  color: var(--if-color-error);
}

.if-errorBanner-text {
  font-size: var(--if-font-size-sm);
  color: var(--if-color-error);
  font-weight: 400;
  font-family: var(--if-font-family);
  margin: 0;
}

/* ============================================
   AUTH BRANDING
   ============================================ */
.if-authBranding {
  background-color: var(--if-color-bg-light);
  padding: var(--if-space-4) var(--if-space-2);
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  gap: var(--if-space-1);
}

.if-authBranding-text {
  font-size: var(--if-font-size-xs);
  font-weight: 500;
  color: var(--if-color-text);
  font-family: var(--if-font-family-manrope);
  margin: 0;
}

/* ============================================
   VERIFICATION CODE INPUT
   ============================================ */
.if-verificationCode-inputContainer {
  display: flex;
  gap: var(--if-space-3);
  justify-content: center;
}

.if-verificationCode-input {
  width: 3rem;
  height: 3rem;
  text-align: center;
  font-size: var(--if-font-size-base);
  font-weight: 600;
  border: 1px solid var(--if-color-border);
  border-radius: var(--if-radius-sm);
  transition: border-color var(--if-transition-base);
  font-family: var(--if-font-family-manrope);
}

.if-verificationCode-input:focus {
  outline: none;
  border-color: var(--if-color-border-focus);
}

/* ============================================
   VERIFICATION STEP
   ============================================ */
.if-verificationStep {
  display: flex;
  flex-direction: column;
  gap: var(--if-space-6);
  align-items: stretch;
}

.if-verificationStep-descriptionContainer {
  width: 100%;
  background-color: #f5f5f5;
  border-radius: var(--if-radius-lg);
  padding: var(--if-space-3) var(--if-space-3) var(--if-space-6) var(--if-space-3);
  display: flex;
  flex-direction: column;
  gap: var(--if-space-3);
}

.if-verificationStep-descriptionTitle {
  color: var(--black, #000);
  font-family: var(--if-font-family);
  font-size: var(--if-font-size-base);
  font-style: normal;
  font-weight: 600;
  line-height: 24px;
}

.if-verificationStep-description,
.if-verificationStep-codeDescription {
  font-size: var(--if-font-size-sm);
  color: #525252;
  text-align: left;
  font-family: var(--if-font-family);
  margin: 0;
}

.if-verificationLink-email,
.if-verificationCode-email {
  font-weight: 500;
  color: var(--if-color-text);
}

.if-verificationStep-codeContainer {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 40px;
}

.if-verificationStep-codeInputWrapper {
  display: flex;
  flex-direction: column;
  gap: var(--if-space-6);
}

.if-verificationStep-verifyingText {
  font-size: var(--if-font-size-sm);
  color: var(--if-color-text-secondary);
  text-align: center;
  font-family: var(--if-font-family);
}

.if-verificationStep-resendContainer {
  width: 100%;
  font-size: var(--if-font-size-sm);
  text-align: center;
  color: var(--if-color-text-secondary);
  font-family: var(--if-font-family);
}

.if-verificationStep-resendButton {
  color: var(--if-color-text);
  font-weight: 500;
  transition: all var(--if-transition-base);
  background: none;
  border: none;
  padding: 0;
  font-family: var(--if-font-family);
  font-size: var(--if-font-size-sm);
}

.if-verificationStep-resendButton:not(:disabled) {
  cursor: pointer;
}

.if-verificationStep-resendButton:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* ============================================
   PASSWORD STRENGTH INDICATOR
   ============================================ */
.if-passwordStrength {
  margin-top: var(--if-space-2);
}

.if-passwordStrength-fill {
  height: 100%;
  transition:
    width var(--if-transition-base),
    background-color var(--if-transition-base);
}

.if-passwordStrength-text {
  font-size: var(--if-font-size-xs);
  color: var(--if-color-text-secondary);
  font-family: var(--if-font-family);
}

.if-passwordStrength-requirements {
  display: flex;
  flex-direction: column;
  gap: var(--if-space-2);
  font-size: var(--if-font-size-sm);
  color: #525252;
  font-family: var(--if-font-family);
}

.if-passwordStrength-requirement {
  display: flex;
  align-items: center;
  gap: var(--if-space-2);
}

/* ============================================
   FORM CONTAINER
   ============================================ */
.if-form {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: center;
  gap: var(--if-space-6);
}

/* ============================================
   USER BUTTON
   ============================================ */
.if-userButton-container {
  position: relative;
  display: inline-block;
}

.if-userButton {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--if-space-2);
  padding: var(--if-space-2);
  border-radius: 9999px;
  background-color: transparent;
  border: none;
  cursor: pointer;
  transition: all var(--if-transition-base);
}

.if-userButton:hover {
  opacity: 0.8;
}

.if-userButton-detailed {
  background-color: var(--if-color-bg-white);
  border: 1px solid var(--if-color-border);
  border-radius: var(--if-radius-sm);
  padding: var(--if-space-2);
}

.if-userButton-detailed:hover {
  background-color: var(--if-color-bg-light);
  opacity: 1;
}

.if-userButton-avatar {
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  background-color: var(--if-color-primary);
  color: var(--if-color-bg-white);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: var(--if-font-size-sm);
  font-family: var(--if-font-family);
  overflow: hidden;
}

.if-userButton-avatarImage {
  border-radius: 9999px;
  object-fit: cover;
  width: 100%;
  height: 100%;
}

.if-userButton-avatarInitials {
  color: var(--if-color-bg-white);
  font-weight: 600;
  font-size: var(--if-font-size-sm);
}

.if-userButton-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.125rem;
}

.if-userButton-name {
  font-size: var(--if-font-size-sm);
  font-weight: 600;
  color: var(--if-color-text);
  line-height: 1.25rem;
  text-align: left;
  font-family: var(--if-font-family);
}

.if-userButton-email {
  font-size: var(--if-font-size-xs);
  color: var(--if-color-text-secondary);
  line-height: 1rem;
  text-align: left;
  font-family: var(--if-font-family);
}

.if-userButton-menu {
  position: absolute;
  margin-top: var(--if-space-2);
  background-color: var(--if-color-bg-white);
  border: 1px solid var(--if-color-border);
  border-radius: var(--if-radius-md);
  box-shadow: var(--if-shadow-lg);
  padding: var(--if-space-2);
  min-width: 200px;
  z-index: 50;
}

.if-userButton-menuItem {
  display: flex;
  align-items: center;
  gap: var(--if-space-2);
  padding: var(--if-space-2);
  border-radius: var(--if-radius-sm);
  cursor: pointer;
  transition: background-color var(--if-transition-fast);
  font-size: var(--if-font-size-sm);
  color: var(--if-color-text);
  font-family: var(--if-font-family);
  background: none;
  border: none;
  width: 100%;
  text-align: left;
}

.if-userButton-menuItem:hover {
  background-color: var(--if-color-bg-light);
}

.if-userButton-menuItem-signout {
  color: var(--if-color-error);
}

.if-userButton-menuItem-icon {
  width: 1.25rem;
  height: 1.25rem;
}

/* ============================================
   EMAIL VERIFICATION STATUS
   ============================================ */
.if-verifyStatus-container {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--if-space-6);
}

.if-verifyStatus-container-stretch {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: center;
  gap: var(--if-space-6);
}

.if-verifyStatus-spinner {
  border-radius: 9999px;
  height: 3rem;
  width: 3rem;
  border-bottom: 2px solid var(--if-color-primary);
}

.if-verifyStatus-successContent {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--if-space-4);
}

.if-verifyStatus-successIcon {
  width: 4rem;
  height: 4rem;
  border-radius: 9999px;
  background-color: #d1fae5;
  display: flex;
  align-items: center;
  justify-content: center;
}

.if-verifyStatus-successIconSvg {
  width: 2rem;
  height: 2rem;
  color: #059669;
}

.if-verifyStatus-textCenter {
  text-align: center;
}

/* ============================================
   UTILITY CLASSES
   ============================================ */
.if-hidden {
  display: none;
}

.if-visuallyHidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
`,document.head&&document.head.appendChild(s)}}var t4=Object.create,Pv=Object.defineProperty,s4=Object.getOwnPropertyDescriptor,Lv=Object.getOwnPropertyNames,r4=Object.getPrototypeOf,n4=Object.prototype.hasOwnProperty,fm=(t,s)=>function(){return s||(0,t[Lv(t)[0]])((s={exports:{}}).exports,s),s.exports},a4=(t,s,r,a)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of Lv(s))!n4.call(t,o)&&o!==r&&Pv(t,o,{get:()=>s[o],enumerable:!(a=s4(s,o))||a.enumerable});return t},Wp=(t,s,r)=>(r=t!=null?t4(r4(t)):{},a4(!t||!t.__esModule?Pv(r,"default",{value:t,enumerable:!0}):r,t)),i4=fm({"../node_modules/react-is/cjs/react-is.production.min.js"(t){var s=typeof Symbol=="function"&&Symbol.for,r=s?Symbol.for("react.element"):60103,a=s?Symbol.for("react.portal"):60106,o=s?Symbol.for("react.fragment"):60107,l=s?Symbol.for("react.strict_mode"):60108,d=s?Symbol.for("react.profiler"):60114,c=s?Symbol.for("react.provider"):60109,h=s?Symbol.for("react.context"):60110,f=s?Symbol.for("react.async_mode"):60111,p=s?Symbol.for("react.concurrent_mode"):60111,y=s?Symbol.for("react.forward_ref"):60112,b=s?Symbol.for("react.suspense"):60113,x=s?Symbol.for("react.suspense_list"):60120,A=s?Symbol.for("react.memo"):60115,N=s?Symbol.for("react.lazy"):60116,P=s?Symbol.for("react.block"):60121,_=s?Symbol.for("react.fundamental"):60117,C=s?Symbol.for("react.responder"):60118,j=s?Symbol.for("react.scope"):60119;function w(z){if(typeof z=="object"&&z!==null){var U=z.$$typeof;switch(U){case r:switch(z=z.type,z){case f:case p:case o:case d:case l:case b:return z;default:switch(z=z&&z.$$typeof,z){case h:case y:case N:case A:case c:return z;default:return U}}case a:return U}}}function D(z){return w(z)===p}t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=h,t.ContextProvider=c,t.Element=r,t.ForwardRef=y,t.Fragment=o,t.Lazy=N,t.Memo=A,t.Portal=a,t.Profiler=d,t.StrictMode=l,t.Suspense=b,t.isAsyncMode=function(z){return D(z)||w(z)===f},t.isConcurrentMode=D,t.isContextConsumer=function(z){return w(z)===h},t.isContextProvider=function(z){return w(z)===c},t.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===r},t.isForwardRef=function(z){return w(z)===y},t.isFragment=function(z){return w(z)===o},t.isLazy=function(z){return w(z)===N},t.isMemo=function(z){return w(z)===A},t.isPortal=function(z){return w(z)===a},t.isProfiler=function(z){return w(z)===d},t.isStrictMode=function(z){return w(z)===l},t.isSuspense=function(z){return w(z)===b},t.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===o||z===p||z===d||z===l||z===b||z===x||typeof z=="object"&&z!==null&&(z.$$typeof===N||z.$$typeof===A||z.$$typeof===c||z.$$typeof===h||z.$$typeof===y||z.$$typeof===_||z.$$typeof===C||z.$$typeof===j||z.$$typeof===P)},t.typeOf=w}}),o4=fm({"../node_modules/react-is/index.js"(t,s){s.exports=i4()}}),l4=fm({"../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js"(t,s){var r=o4(),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},d={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[r.ForwardRef]=l,c[r.Memo]=d;function h(P){return r.isMemo(P)?d:c[P.$$typeof]||a}var f=Object.defineProperty,p=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,b=Object.getOwnPropertyDescriptor,x=Object.getPrototypeOf,A=Object.prototype;function N(P,_,C){if(typeof _!="string"){if(A){var j=x(_);j&&j!==A&&N(P,j,C)}var w=p(_);y&&(w=w.concat(y(_)));for(var D=h(P),z=h(_),U=0;U<w.length;++U){var X=w[U];if(!o[X]&&!(C&&C[X])&&!(z&&z[X])&&!(D&&D[X])){var E=b(_,X);try{f(P,X,E)}catch{}}}}return P}s.exports=N}}),Ev=fm({"../node_modules/@babel/runtime/helpers/extends.js"(t,s){function r(){return s.exports=r=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var d in l)({}).hasOwnProperty.call(l,d)&&(a[d]=l[d])}return a},s.exports.__esModule=!0,s.exports.default=s.exports,r.apply(null,arguments)}s.exports=r,s.exports.__esModule=!0,s.exports.default=s.exports}}),c4=L.createContext(null);function d4({adapter:t,children:s}){return e.jsx(c4.Provider,{value:t,children:s})}var u4={useSearchParams(){const[t]=L.useState(()=>typeof window>"u"?new URLSearchParams:new URLSearchParams(window.location.search));return t},Link({href:t,className:s,children:r}){return e.jsx("a",{href:t,className:s,children:r})}},h4=class ao{static instance=null;user=void 0;isLoaded=!1;isInitializing=!1;sdk;listeners=new Set;config;refreshIntervalRef=null;constructor(s){this.config=s,this.sdk=fv({baseUrl:s.baseUrl}),this.user=void 0,this.isLoaded=!1}static getInstance(s){return typeof window<"u"&&ao.instance?(ao.instance.updateConfig(s),ao.instance):(ao.instance=new ao(s),ao.instance)}static clearInstance(){ao.instance&&ao.instance.cleanup(),ao.instance=null}updateConfig(s){this.config={...this.config,...s}}async initialize(){if(!this.isInitializing){this.isInitializing=!0;try{!!this.sdk.auth.getCurrentSession().data?.session?.accessToken?await this.loadAuthState():this.user===void 0&&(this.user=null,this.isLoaded=!0,this.notifyListeners())}finally{this.isInitializing=!1}}}getState(){const s=this.user===void 0?void 0:this.user===null?null:this.user.id,r=this.user===void 0?void 0:this.user!==null;return{user:this.user,userId:s,isLoaded:this.isLoaded,isSignedIn:r}}subscribe(s){return this.listeners.add(s),()=>this.listeners.delete(s)}notifyListeners(){const s=this.getState();this.listeners.forEach(r=>r(s))}async loadAuthState(){try{if(!(this.sdk.auth.getCurrentSession().data?.session?.accessToken||null))return this.user=null,this.config.onAuthChange&&this.config.onAuthChange(null),this.isLoaded=!0,this.notifyListeners(),{success:!1,error:"no_session"};const o=await this.sdk.auth.getCurrentUser();if(o.data){const l=o.data.profile,d={id:o.data.user.id,email:o.data.user.email,name:l?.nickname||"",avatarUrl:l?.avatarUrl||""};return this.user=d,this.config.onAuthChange&&this.config.onAuthChange(d),this.isLoaded=!0,this.notifyListeners(),{success:!0}}else{if(await this.sdk.auth.signOut(),this.config.onSignOut)try{await this.config.onSignOut()}catch(l){l instanceof Error&&console.error("[InsforgeManager] Error clearing cookie:",l.message)}return this.user=null,this.config.onAuthChange&&this.config.onAuthChange(null),this.isLoaded=!0,this.notifyListeners(),{success:!1,error:"invalid_token"}}}catch(s){if(console.error("[InsforgeManager] Token validation failed:",s),await this.sdk.auth.signOut(),this.config.onSignOut)try{await this.config.onSignOut()}catch(r){r instanceof Error&&console.error("[InsforgeManager] Error clearing cookie:",r.message)}return this.user=null,this.config.onAuthChange&&this.config.onAuthChange(null),this.isLoaded=!0,this.notifyListeners(),{success:!1,error:s instanceof Error?s.message:"Authentication failed"}}}async handleAuthSuccess(s,r){const a=await this.sdk.auth.getCurrentUser();if(a.data){const o=a.data.profile,l={id:a.data.user.id,email:a.data.user.email,name:o?.nickname||"",avatarUrl:o?.avatarUrl||""};if(this.user=l,this.notifyListeners(),this.config.onAuthChange&&this.config.onAuthChange(l),this.config.onSignIn)try{await this.config.onSignIn(s)}catch(d){d instanceof Error&&console.error("[InsforgeManager] Error syncing token to cookie:",d.message)}}else if(r){const o={id:r.id||"",email:r.email||"",name:r.name||"",avatarUrl:""};this.user=o,this.notifyListeners(),this.config.onAuthChange&&this.config.onAuthChange(o)}}async signIn(s,r){const a=await this.sdk.auth.signInWithPassword({email:s,password:r});return a.data?(await this.handleAuthSuccess(a.data.accessToken||"",a.data.user?{id:a.data.user.id,email:a.data.user.email,name:a.data.user.name}:void 0),a.data):{error:a.error?.message||"Invalid email or password",statusCode:a.error?.statusCode,errorCode:a.error?.error}}async signUp(s,r){const a=await this.sdk.auth.signUp({email:s,password:r});return a.data?(a.data.accessToken&&await this.handleAuthSuccess(a.data.accessToken,a.data.user?{id:a.data.user.id,email:a.data.user.email,name:a.data.user.name}:void 0),a.data):{error:a.error?.message||"Sign up failed",statusCode:a.error?.statusCode,errorCode:a.error?.error}}async signOut(){if(await this.sdk.auth.signOut(),this.config.onSignOut)try{await this.config.onSignOut()}catch(s){s instanceof Error&&console.error("[InsforgeManager] Error clearing cookie:",s.message)}this.refreshIntervalRef&&(clearInterval(this.refreshIntervalRef),this.refreshIntervalRef=null),this.user=null,this.config.onAuthChange&&this.config.onAuthChange(null),this.notifyListeners()}async updateUser(s){if(!this.user)return{error:"No user signed in"};const r={nickname:s.name,avatarUrl:s.avatarUrl},a=await this.sdk.auth.setProfile(r);if(a.data){const l=await this.sdk.auth.getCurrentUser();if(l.data){const d=l.data.profile,c={id:l.data.user.id,email:l.data.user.email,name:d?.nickname||"",avatarUrl:d?.avatarUrl||""};this.user=c,this.config.onAuthChange&&this.config.onAuthChange(c),this.notifyListeners()}return null}return{error:a.error?.message||"Failed to update user"}}async reloadAuth(){return await this.loadAuthState()}async sendVerificationEmail(s){return(await this.sdk.auth.sendVerificationEmail({email:s})).data}async sendResetPasswordEmail(s){return(await this.sdk.auth.sendResetPasswordEmail({email:s})).data}async resetPassword(s,r){return(await this.sdk.auth.resetPassword({newPassword:r,otp:s})).data}async verifyEmail(s,r){const a=await this.sdk.auth.verifyEmail({otp:s,email:r||void 0});return a.data?a.data:{accessToken:"",error:{message:a.error?.message||"Email verification failed"}}}async exchangeResetPasswordToken(s,r){const a=await this.sdk.auth.exchangeResetPasswordToken({email:s,code:r});return a.data?a.data:{error:{message:a.error?.message||"Failed to exchange reset password token"}}}async loginWithOAuth(s,r){const a=await this.sdk.auth.signInWithOAuth({provider:s,redirectTo:r||window.location.origin+(this.config.afterSignInUrl||"/")});if(a.error)throw new Error(a.error.message)}async getPublicAuthConfig(){try{const s=await this.sdk.auth.getPublicAuthConfig();return s.data?s.data:(console.error("[InsforgeManager] Failed to get public auth config:",s.error),null)}catch(s){return console.error("[InsforgeManager] Failed to get public auth config:",s),null}}setUser(s){this.user=s,this.config.onAuthChange&&this.config.onAuthChange(s),this.notifyListeners()}setInitialState(s){if(this.user===void 0){if(s.userId){const r=a=>a&&a!=="null"?a:"";this.user={id:s.userId,email:r(s.user?.email),name:r(s.user?.name),avatarUrl:r(s.user?.avatarUrl)}}else this.user=null;this.isLoaded=!0,this.notifyListeners()}}getConfig(){return this.config}getSDK(){return this.sdk}cleanup(){this.refreshIntervalRef&&(clearInterval(this.refreshIntervalRef),this.refreshIntervalRef=null),this.listeners.clear()}};function m4(t){if(t.sheet)return t.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===t)return document.styleSheets[s]}function f4(t){var s=document.createElement("style");return s.setAttribute("data-emotion",t.key),t.nonce!==void 0&&s.setAttribute("nonce",t.nonce),s.appendChild(document.createTextNode("")),s.setAttribute("data-s",""),s}var p4=(function(){function t(r){var a=this;this._insertTag=function(o){var l;a.tags.length===0?a.insertionPoint?l=a.insertionPoint.nextSibling:a.prepend?l=a.container.firstChild:l=a.before:l=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(o,l),a.tags.push(o)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var s=t.prototype;return s.hydrate=function(a){a.forEach(this._insertTag)},s.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(f4(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var l=m4(o);try{l.insertRule(a,l.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(a));this.ctr++},s.flush=function(){this.tags.forEach(function(a){var o;return(o=a.parentNode)==null?void 0:o.removeChild(a)}),this.tags=[],this.ctr=0},t})(),In="-ms-",Qh="-moz-",bs="-webkit-",Tv="comm",Hp="rule",Gp="decl",x4="@import",Fv="@keyframes",g4="@layer",y4=Math.abs,pm=String.fromCharCode,v4=Object.assign;function b4(t,s){return gn(t,0)^45?(((s<<2^gn(t,0))<<2^gn(t,1))<<2^gn(t,2))<<2^gn(t,3):0}function Dv(t){return t.trim()}function j4(t,s){return(t=s.exec(t))?t[0]:t}function js(t,s,r){return t.replace(s,r)}function op(t,s){return t.indexOf(s)}function gn(t,s){return t.charCodeAt(s)|0}function Lu(t,s,r){return t.slice(s,r)}function lo(t){return t.length}function Zp(t){return t.length}function Lh(t,s){return s.push(t),t}function w4(t,s){return t.map(s).join("")}var xm=1,Od=1,Rv=0,ya=0,Or=0,Vd="";function gm(t,s,r,a,o,l,d){return{value:t,root:s,parent:r,type:a,props:o,children:l,line:xm,column:Od,length:d,return:""}}function ju(t,s){return v4(gm("",null,null,"",null,null,0),t,{length:-t.length},s)}function N4(){return Or}function _4(){return Or=ya>0?gn(Vd,--ya):0,Od--,Or===10&&(Od=1,xm--),Or}function $a(){return Or=ya<Rv?gn(Vd,ya++):0,Od++,Or===10&&(Od=1,xm++),Or}function ho(){return gn(Vd,ya)}function qh(){return ya}function zu(t,s){return Lu(Vd,t,s)}function Eu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Iv(t){return xm=Od=1,Rv=lo(Vd=t),ya=0,[]}function Mv(t){return Vd="",t}function $h(t){return Dv(zu(ya-1,lp(t===91?t+2:t===40?t+1:t)))}function k4(t){for(;(Or=ho())&&Or<33;)$a();return Eu(t)>2||Eu(Or)>3?"":" "}function S4(t,s){for(;--s&&$a()&&!(Or<48||Or>102||Or>57&&Or<65||Or>70&&Or<97););return zu(t,qh()+(s<6&&ho()==32&&$a()==32))}function lp(t){for(;$a();)switch(Or){case t:return ya;case 34:case 39:t!==34&&t!==39&&lp(Or);break;case 40:t===41&&lp(t);break;case 92:$a();break}return ya}function C4(t,s){for(;$a()&&t+Or!==57;)if(t+Or===84&&ho()===47)break;return"/*"+zu(s,ya-1)+"*"+pm(t===47?t:$a())}function A4(t){for(;!Eu(ho());)$a();return zu(t,ya)}function r0(t){return Mv(Uh("",null,null,null,[""],t=Iv(t),0,[0],t))}function Uh(t,s,r,a,o,l,d,c,h){for(var f=0,p=0,y=d,b=0,x=0,A=0,N=1,P=1,_=1,C=0,j="",w=o,D=l,z=a,U=j;P;)switch(A=C,C=$a()){case 40:if(A!=108&&gn(U,y-1)==58){op(U+=js($h(C),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:U+=$h(C);break;case 9:case 10:case 13:case 32:U+=k4(A);break;case 92:U+=S4(qh()-1,7);continue;case 47:switch(ho()){case 42:case 47:Lh(P4(C4($a(),qh()),s,r),h);break;default:U+="/"}break;case 123*N:c[f++]=lo(U)*_;case 125*N:case 59:case 0:switch(C){case 0:case 125:P=0;case 59+p:_==-1&&(U=js(U,/\f/g,"")),x>0&&lo(U)-y&&Lh(x>32?a0(U+";",a,r,y-1):a0(js(U," ","")+";",a,r,y-2),h);break;case 59:U+=";";default:if(Lh(z=n0(U,s,r,f,p,o,c,j,w=[],D=[],y),l),C===123)if(p===0)Uh(U,s,z,z,w,l,y,c,D);else switch(b===99&&gn(U,3)===110?100:b){case 100:case 108:case 109:case 115:Uh(t,z,z,a&&Lh(n0(t,z,z,0,0,o,c,j,o,w=[],y),D),o,D,y,c,a?w:D);break;default:Uh(U,z,z,z,[""],D,0,c,D)}}f=p=x=0,N=_=1,j=U="",y=d;break;case 58:y=1+lo(U),x=A;default:if(N<1){if(C==123)--N;else if(C==125&&N++==0&&_4()==125)continue}switch(U+=pm(C),C*N){case 38:_=p>0?1:(U+="\f",-1);break;case 44:c[f++]=(lo(U)-1)*_,_=1;break;case 64:ho()===45&&(U+=$h($a())),b=ho(),p=y=lo(j=U+=A4(qh())),C++;break;case 45:A===45&&lo(U)==2&&(N=0)}}return l}function n0(t,s,r,a,o,l,d,c,h,f,p){for(var y=o-1,b=o===0?l:[""],x=Zp(b),A=0,N=0,P=0;A<a;++A)for(var _=0,C=Lu(t,y+1,y=y4(N=d[A])),j=t;_<x;++_)(j=Dv(N>0?b[_]+" "+C:js(C,/&\f/g,b[_])))&&(h[P++]=j);return gm(t,s,r,o===0?Hp:c,h,f,p)}function P4(t,s,r){return gm(t,s,r,Tv,pm(N4()),Lu(t,2,-2),0)}function a0(t,s,r,a){return gm(t,s,r,Gp,Lu(t,0,a),Lu(t,a+1,-1),a)}function Sc(t,s){for(var r="",a=Zp(t),o=0;o<a;o++)r+=s(t[o],o,t,s)||"";return r}function i0(t,s,r,a){switch(t.type){case g4:if(t.children.length)break;case x4:case Gp:return t.return=t.return||t.value;case Tv:return"";case Fv:return t.return=t.value+"{"+Sc(t.children,a)+"}";case Hp:t.value=t.props.join(",")}return lo(r=Sc(t.children,a))?t.return=t.value+"{"+r+"}":""}function o0(t){var s=Zp(t);return function(r,a,o,l){for(var d="",c=0;c<s;c++)d+=t[c](r,a,o,l)||"";return d}}function L4(t){return function(s){s.root||(s=s.return)&&t(s)}}var E4=function(s){var r=new WeakMap;return function(a){if(r.has(a))return r.get(a);var o=s(a);return r.set(a,o),o}};function Yp(t){var s=Object.create(null);return function(r){return s[r]===void 0&&(s[r]=t(r)),s[r]}}var cp=typeof document<"u",T4=function(s,r,a){for(var o=0,l=0;o=l,l=ho(),o===38&&l===12&&(r[a]=1),!Eu(l);)$a();return zu(s,ya)},F4=function(s,r){var a=-1,o=44;do switch(Eu(o)){case 0:o===38&&ho()===12&&(r[a]=1),s[a]+=T4(ya-1,r,a);break;case 2:s[a]+=$h(o);break;case 4:if(o===44){s[++a]=ho()===58?"&\f":"",r[a]=s[a].length;break}default:s[a]+=pm(o)}while(o=$a());return s},D4=function(s,r){return Mv(F4(Iv(s),r))},l0=new WeakMap,R4=function(s){if(!(s.type!=="rule"||!s.parent||s.length<1)){for(var r=s.value,a=s.parent,o=s.column===a.column&&s.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(s.props.length===1&&r.charCodeAt(0)!==58&&!l0.get(a))&&!o){l0.set(s,!0);for(var l=[],d=D4(r,l),c=a.props,h=0,f=0;h<d.length;h++)for(var p=0;p<c.length;p++,f++)s.props[f]=l[h]?d[h].replace(/&\f/g,c[p]):c[p]+" "+d[h]}}},I4=function(s){if(s.type==="decl"){var r=s.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(s.return="",s.value="")}};function zv(t,s){switch(b4(t,s)){case 5103:return bs+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return bs+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return bs+t+Qh+t+In+t+t;case 6828:case 4268:return bs+t+In+t+t;case 6165:return bs+t+In+"flex-"+t+t;case 5187:return bs+t+js(t,/(\w+).+(:[^]+)/,bs+"box-$1$2"+In+"flex-$1$2")+t;case 5443:return bs+t+In+"flex-item-"+js(t,/flex-|-self/,"")+t;case 4675:return bs+t+In+"flex-line-pack"+js(t,/align-content|flex-|-self/,"")+t;case 5548:return bs+t+In+js(t,"shrink","negative")+t;case 5292:return bs+t+In+js(t,"basis","preferred-size")+t;case 6060:return bs+"box-"+js(t,"-grow","")+bs+t+In+js(t,"grow","positive")+t;case 4554:return bs+js(t,/([^-])(transform)/g,"$1"+bs+"$2")+t;case 6187:return js(js(js(t,/(zoom-|grab)/,bs+"$1"),/(image-set)/,bs+"$1"),t,"")+t;case 5495:case 3959:return js(t,/(image-set\([^]*)/,bs+"$1$`$1");case 4968:return js(js(t,/(.+:)(flex-)?(.*)/,bs+"box-pack:$3"+In+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+bs+t+t;case 4095:case 3583:case 4068:case 2532:return js(t,/(.+)-inline(.+)/,bs+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lo(t)-1-s>6)switch(gn(t,s+1)){case 109:if(gn(t,s+4)!==45)break;case 102:return js(t,/(.+:)(.+)-([^]+)/,"$1"+bs+"$2-$3$1"+Qh+(gn(t,s+3)==108?"$3":"$2-$3"))+t;case 115:return~op(t,"stretch")?zv(js(t,"stretch","fill-available"),s)+t:t}break;case 4949:if(gn(t,s+1)!==115)break;case 6444:switch(gn(t,lo(t)-3-(~op(t,"!important")&&10))){case 107:return js(t,":",":"+bs)+t;case 101:return js(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+bs+(gn(t,14)===45?"inline-":"")+"box$3$1"+bs+"$2$3$1"+In+"$2box$3")+t}break;case 5936:switch(gn(t,s+11)){case 114:return bs+t+In+js(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return bs+t+In+js(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return bs+t+In+js(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return bs+t+In+t+t}return t}var M4=function(s,r,a,o){if(s.length>-1&&!s.return)switch(s.type){case Gp:s.return=zv(s.value,s.length);break;case Fv:return Sc([ju(s,{value:js(s.value,"@","@"+bs)})],o);case Hp:if(s.length)return w4(s.props,function(l){switch(j4(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sc([ju(s,{props:[js(l,/:(read-\w+)/,":"+Qh+"$1")]})],o);case"::placeholder":return Sc([ju(s,{props:[js(l,/:(plac\w+)/,":"+bs+"input-$1")]}),ju(s,{props:[js(l,/:(plac\w+)/,":"+Qh+"$1")]}),ju(s,{props:[js(l,/:(plac\w+)/,In+"input-$1")]})],o)}return""})}},c0=cp?void 0:E4(function(){return Yp(function(){return{}})}),z4=[M4],Kp=function(s){var r=s.key;if(cp&&r==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(w){var D=w.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var o=s.stylisPlugins||z4,l={},d,c=[];cp&&(d=s.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(w){for(var D=w.getAttribute("data-emotion").split(" "),z=1;z<D.length;z++)l[D[z]]=!0;c.push(w)}));var h,f=[R4,I4];if(c0){var A=[i0],N=o0(f.concat(o,A)),P=function(D){return Sc(r0(D),N)},_=c0(o)(r),C=function(D,z){var U=z.name;return _[U]===void 0&&(_[U]=P(D?D+"{"+z.styles+"}":z.styles)),_[U]};h=function(D,z,U,X){var E=z.name,G=C(D,z);if(j.compat===void 0)return X&&(j.inserted[E]=!0),G;if(X)j.inserted[E]=G;else return G}}else{var p,y=[i0,L4(function(w){p.insert(w)})],b=o0(f.concat(o,y)),x=function(D){return Sc(r0(D),b)};h=function(D,z,U,X){p=U,x(D?D+"{"+z.styles+"}":z.styles),X&&(j.inserted[z.name]=!0)}}var j={key:r,sheet:new p4({key:r,container:d,nonce:s.nonce,speedy:s.speedy,prepend:s.prepend,insertionPoint:s.insertionPoint}),nonce:s.nonce,inserted:l,registered:{},insert:h};return j.sheet.hydrate(c),j};function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},dp.apply(null,arguments)}var up=typeof document<"u";function Ov(t,s,r){var a="";return r.split(" ").forEach(function(o){t[o]!==void 0?s.push(t[o]+";"):o&&(a+=o+" ")}),a}var Jp=function(s,r,a){var o=s.key+"-"+r.name;(a===!1||up===!1&&s.compat!==void 0)&&s.registered[o]===void 0&&(s.registered[o]=r.styles)},qv=function(s,r,a){Jp(s,r,a);var o=s.key+"-"+r.name;if(s.inserted[r.name]===void 0){var l="",d=r;do{var c=s.insert(r===d?"."+o:"",d,s.sheet,!0);!up&&c!==void 0&&(l+=c),d=d.next}while(d!==void 0);if(!up&&l.length!==0)return l}};function O4(t){for(var s=0,r,a=0,o=t.length;o>=4;++a,o-=4)r=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,s=(r&65535)*1540483477+((r>>>16)*59797<<16)^(s&65535)*1540483477+((s>>>16)*59797<<16);switch(o){case 3:s^=(t.charCodeAt(a+2)&255)<<16;case 2:s^=(t.charCodeAt(a+1)&255)<<8;case 1:s^=t.charCodeAt(a)&255,s=(s&65535)*1540483477+((s>>>16)*59797<<16)}return s^=s>>>13,s=(s&65535)*1540483477+((s>>>16)*59797<<16),((s^s>>>15)>>>0).toString(36)}var q4={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$4=/[A-Z]|^ms/g,U4=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$v=function(s){return s.charCodeAt(1)===45},d0=function(s){return s!=null&&typeof s!="boolean"},wf=Yp(function(t){return $v(t)?t:t.replace($4,"-$&").toLowerCase()}),u0=function(s,r){switch(s){case"animation":case"animationName":if(typeof r=="string")return r.replace(U4,function(a,o,l){return co={name:o,styles:l,next:co},o})}return q4[s]!==1&&!$v(s)&&typeof r=="number"&&r!==0?r+"px":r};function Tu(t,s,r){if(r==null)return"";var a=r;if(a.__emotion_styles!==void 0)return a;switch(typeof r){case"boolean":return"";case"object":{var o=r;if(o.anim===1)return co={name:o.name,styles:o.styles,next:co},o.name;var l=r;if(l.styles!==void 0){var d=l.next;if(d!==void 0)for(;d!==void 0;)co={name:d.name,styles:d.styles,next:co},d=d.next;var c=l.styles+";";return c}return B4(t,s,r)}case"function":{if(t!==void 0){var h=co,f=r(t);return co=h,Tu(t,s,f)}break}}var p=r;if(s==null)return p;var y=s[p];return y!==void 0?y:p}function B4(t,s,r){var a="";if(Array.isArray(r))for(var o=0;o<r.length;o++)a+=Tu(t,s,r[o])+";";else for(var l in r){var d=r[l];if(typeof d!="object"){var c=d;s!=null&&s[c]!==void 0?a+=l+"{"+s[c]+"}":d0(c)&&(a+=wf(l)+":"+u0(l,c)+";")}else if(Array.isArray(d)&&typeof d[0]=="string"&&(s==null||s[d[0]]===void 0))for(var h=0;h<d.length;h++)d0(d[h])&&(a+=wf(l)+":"+u0(l,d[h])+";");else{var f=Tu(t,s,d);switch(l){case"animation":case"animationName":{a+=wf(l)+":"+f+";";break}default:a+=l+"{"+f+"}"}}}return a}var h0=/label:\s*([^\s;{]+)\s*(;|$)/g,co;function Qp(t,s,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,o="";co=void 0;var l=t[0];if(l==null||l.raw===void 0)a=!1,o+=Tu(r,s,l);else{var d=l;o+=d[0]}for(var c=1;c<t.length;c++)if(o+=Tu(r,s,t[c]),a){var h=l;o+=h[c]}h0.lastIndex=0;for(var f="",p;(p=h0.exec(o))!==null;)f+="-"+p[1];var y=O4(o)+f;return{name:y,styles:o,next:co}}var V4=typeof document<"u",m0=function(s){return s()},W4=L.useInsertionEffect?L.useInsertionEffect:!1,Uv=V4&&W4||m0,Bv=typeof document<"u",Xh=L.createContext(typeof HTMLElement<"u"?Kp({key:"css"}):null),H4=Xh.Provider,Xp=function(s){return L.forwardRef(function(r,a){var o=L.useContext(Xh);return s(r,o,a)})};Bv||(Xp=function(s){return function(r){var a=L.useContext(Xh);return a===null?(a=Kp({key:"css"}),L.createElement(Xh.Provider,{value:a},s(r,a))):s(r,a)}});var Vv=L.createContext({}),ex={}.hasOwnProperty,hp="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",G4=function(s,r){var a={};for(var o in r)ex.call(r,o)&&(a[o]=r[o]);return a[hp]=s,a},Z4=function(s){var r=s.cache,a=s.serialized,o=s.isStringTag;Jp(r,a,o);var l=Uv(function(){return qv(r,a,o)});if(!Bv&&l!==void 0){for(var d,c=a.name,h=a.next;h!==void 0;)c+=" "+h.name,h=h.next;return L.createElement("style",(d={},d["data-emotion"]=r.key+" "+c,d.dangerouslySetInnerHTML={__html:l},d.nonce=r.sheet.nonce,d))}return null},Y4=Xp(function(t,s,r){var a=t.css;typeof a=="string"&&s.registered[a]!==void 0&&(a=s.registered[a]);var o=t[hp],l=[a],d="";typeof t.className=="string"?d=Ov(s.registered,l,t.className):t.className!=null&&(d=t.className+" ");var c=Qp(l,void 0,L.useContext(Vv));d+=s.key+"-"+c.name;var h={};for(var f in t)ex.call(t,f)&&f!=="css"&&f!==hp&&(h[f]=t[f]);return h.className=d,r&&(h.ref=r),L.createElement(L.Fragment,null,L.createElement(Z4,{cache:s,serialized:c,isStringTag:typeof o=="string"}),L.createElement(o,h))}),K4=Y4;Wp(Ev());Wp(l4());var f0=function(s,r){var a=arguments;if(r==null||!ex.call(r,"css"))return L.createElement.apply(void 0,a);var o=a.length,l=new Array(o);l[0]=K4,l[1]=G4(s,r);for(var d=2;d<o;d++)l[d]=a[d];return L.createElement.apply(null,l)};(function(t){var s;s||(s=t.JSX||(t.JSX={}))})(f0||(f0={}));function J4(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return Qp(s)}function Q4(){var t=J4.apply(void 0,arguments),s="animation-"+t.name;return{name:s,styles:"@keyframes "+s+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function X4({children:t,nonce:s}){const r=L.useMemo(()=>Kp({key:"if-styles",prepend:!0,nonce:s}),[s]);return e.jsx(H4,{value:r,children:t})}function e_({children:t,baseUrl:s,afterSignInUrl:r="/",onAuthChange:a,onSignIn:o,onSignOut:l,initialState:d}){const c=L.useMemo(()=>h4.getInstance({baseUrl:s,afterSignInUrl:r,onAuthChange:a,onSignIn:o,onSignOut:l}),[s,r,a,o,l]);d&&c.getState().userId===void 0&&d.userId!==void 0&&c.setInitialState(d);const[h,f]=L.useState(()=>c.getState());L.useEffect(()=>{const y=c.subscribe(b=>{f(b)});return c.initialize(),()=>{y()}},[c]);const p=L.useMemo(()=>({user:h.user,userId:h.userId,isLoaded:h.isLoaded,isSignedIn:h.isSignedIn,setUser:y=>c.setUser(y),signIn:(y,b)=>c.signIn(y,b),signUp:(y,b)=>c.signUp(y,b),signOut:()=>c.signOut(),updateUser:y=>c.updateUser(y),reloadAuth:()=>c.reloadAuth(),sendVerificationEmail:y=>c.sendVerificationEmail(y),sendResetPasswordEmail:y=>c.sendResetPasswordEmail(y),resetPassword:(y,b)=>c.resetPassword(y,b),verifyEmail:(y,b)=>c.verifyEmail(y,b),exchangeResetPasswordToken:(y,b)=>c.exchangeResetPasswordToken(y,b),loginWithOAuth:(y,b)=>c.loginWithOAuth(y,b),getPublicAuthConfig:()=>c.getPublicAuthConfig(),baseUrl:c.getConfig().baseUrl,afterSignInUrl:c.getConfig().afterSignInUrl||"/"}),[h,c]);return e.jsx(Mp.Provider,{value:p,children:t})}function t_(t){return e.jsx(X4,{children:e.jsx(d4,{adapter:u4,children:e.jsx(e_,{...t})})})}function Wv(){const t=L.useContext(Mp);return t||{user:void 0,userId:void 0,isLoaded:!1,isSignedIn:void 0,setUser:()=>{},signIn:()=>Promise.resolve({error:"SSR mode"}),signUp:()=>Promise.resolve({error:"SSR mode"}),signOut:()=>Promise.resolve(),updateUser:()=>Promise.resolve({error:"SSR mode"}),reloadAuth:()=>Promise.resolve({success:!1,error:"SSR mode"}),sendVerificationEmail:()=>Promise.resolve(null),sendResetPasswordEmail:()=>Promise.resolve(null),resetPassword:()=>Promise.resolve(null),verifyEmail:()=>Promise.resolve(null),exchangeResetPasswordToken:()=>Promise.resolve({error:{message:"SSR mode"}}),loginWithOAuth:()=>Promise.resolve(),getPublicAuthConfig:()=>Promise.resolve(null),baseUrl:"",afterSignInUrl:"/"}}var s_=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,r_=Yp(function(t){return s_.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),n_=typeof document<"u",a_=r_,i_=function(s){return s!=="theme"},p0=function(s){return typeof s=="string"&&s.charCodeAt(0)>96?a_:i_},x0=function(s,r,a){var o;if(r){var l=r.shouldForwardProp;o=s.__emotion_forwardProp&&l?function(d){return s.__emotion_forwardProp(d)&&l(d)}:l}return typeof o!="function"&&a&&(o=s.__emotion_forwardProp),o},o_=function(s){var r=s.cache,a=s.serialized,o=s.isStringTag;Jp(r,a,o);var l=Uv(function(){return qv(r,a,o)});if(!n_&&l!==void 0){for(var d,c=a.name,h=a.next;h!==void 0;)c+=" "+h.name,h=h.next;return L.createElement("style",(d={},d["data-emotion"]=r.key+" "+c,d.dangerouslySetInnerHTML={__html:l},d.nonce=r.sheet.nonce,d))}return null},l_=function t(s,r){var a=s.__emotion_real===s,o=a&&s.__emotion_base||s,l,d;r!==void 0&&(l=r.label,d=r.target);var c=x0(s,r,a),h=c||p0(o),f=!h("as");return function(){var p=arguments,y=a&&s.__emotion_styles!==void 0?s.__emotion_styles.slice(0):[];if(l!==void 0&&y.push("label:"+l+";"),p[0]==null||p[0].raw===void 0)y.push.apply(y,p);else{var b=p[0];y.push(b[0]);for(var x=p.length,A=1;A<x;A++)y.push(p[A],b[A])}var N=Xp(function(P,_,C){var j=f&&P.as||o,w="",D=[],z=P;if(P.theme==null){z={};for(var U in P)z[U]=P[U];z.theme=L.useContext(Vv)}typeof P.className=="string"?w=Ov(_.registered,D,P.className):P.className!=null&&(w=P.className+" ");var X=Qp(y.concat(D),_.registered,z);w+=_.key+"-"+X.name,d!==void 0&&(w+=" "+d);var E=f&&c===void 0?p0(j):h,G={};for(var I in P)f&&I==="as"||E(I)&&(G[I]=P[I]);return G.className=w,C&&(G.ref=C),L.createElement(L.Fragment,null,L.createElement(o_,{cache:_,serialized:X,isStringTag:typeof j=="string"}),L.createElement(j,G))});return N.displayName=l!==void 0?l:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",N.defaultProps=s.defaultProps,N.__emotion_real=N,N.__emotion_base=o,N.__emotion_styles=y,N.__emotion_forwardProp=c,Object.defineProperty(N,"toString",{value:function(){return"."+d}}),N.withComponent=function(P,_){var C=t(P,dp({},r,_,{shouldForwardProp:x0(N,_,!0)}));return C.apply(void 0,y)},N}};Wp(Ev());var c_=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],dt=l_.bind(null);c_.forEach(function(t){dt[t]=dt(t)});var ge={colors:{primary:"#000000",primaryHover:"#1f1f1f",text:"#000000",textSecondary:"#828282",textMuted:"#a3a3a3",textGray:"#525252",border:"#d4d4d4",borderGray:"#e4e4e7",borderHover:"#9ca3af",borderFocus:"#000000",bgWhite:"#ffffff",bgLight:"#fafafa",bgGray:"#f5f5f5",bgHover:"#f9fafb",error:"#dc2626",errorBg:"#fee2e2",successBg:"#d1fae5",successDark:"#059669",black:"#000000",zinc900:"#09090b"},spacing:{1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",6:"1.5rem",10:"2.5rem"},radius:{sm:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem",full:"9999px"},fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem","2xl":"1.5rem"},lineHeight:{normal:"1.25rem",relaxed:"1.5rem",loose:"2rem"},fontFamily:{base:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif",manrope:"'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif"},fontWeight:{normal:400,medium:500,semibold:600},shadow:{md:"0 1px 2px 0 rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:{fast:"150ms cubic-bezier(0.4, 0, 0.2, 1)",base:"200ms cubic-bezier(0.4, 0, 0.2, 1)"},sizes:{button:{height:"2.5rem",heightOAuth:"2.25rem"},icon:"1.25rem",iconSm:"1.125rem",iconLg:"1.5rem",verifyCode:"3rem",verifyIcon:"4rem",verifyIconInner:"2rem"}},d_={spin:`
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  `},u_=Q4`${d_.spin}`;dt.div`
  width: 100%;
  max-width: 400px;
  border-radius: ${ge.radius.xl};
  overflow: hidden;
  box-shadow: ${ge.shadow.lg};
`;dt.div`
  background-color: ${ge.colors.bgWhite};
  padding: ${ge.spacing[6]};
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  gap: ${ge.spacing[6]};
`;dt.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
  gap: ${ge.spacing[2]};
`;dt.h1`
  font-size: ${ge.fontSize["2xl"]};
  font-weight: ${ge.fontWeight.semibold};
  color: ${ge.colors.text};
  line-height: ${ge.lineHeight.loose};
  margin: 0;
  font-family: ${ge.fontFamily.base};
`;dt.p`
  font-size: ${ge.fontSize.sm};
  font-weight: ${ge.fontWeight.normal};
  color: ${ge.colors.textSecondary};
  line-height: ${ge.lineHeight.relaxed};
  margin: 0;
  font-family: ${ge.fontFamily.base};
`;dt.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  gap: ${ge.spacing[1]};
`;dt.label`
  font-size: ${ge.fontSize.sm};
  font-weight: ${ge.fontWeight.normal};
  color: ${ge.colors.text};
  line-height: ${ge.lineHeight.relaxed};
  font-family: ${ge.fontFamily.base};
`;dt.input`
  width: 100%;
  display: flex;
  align-items: center;
  gap: ${ge.spacing[2]};
  align-self: stretch;
  padding: ${ge.spacing[2]} ${ge.spacing[3]};
  border-radius: ${ge.radius.sm};
  border: 1px solid ${ge.colors.border};
  background-color: ${ge.colors.bgWhite};
  font-size: ${ge.fontSize.sm};
  font-weight: ${ge.fontWeight.normal};
  line-height: ${ge.lineHeight.normal};
  color: ${ge.colors.text};
  font-family: ${ge.fontFamily.base};
  transition: border-color ${ge.transition.base};

  &::placeholder {
    color: ${ge.colors.textMuted};
    font-size: ${ge.fontSize.sm};
    font-weight: ${ge.fontWeight.normal};
  }

  &:focus {
    outline: none;
    border-color: ${ge.colors.borderFocus};
  }
`;dt.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  gap: ${ge.spacing[1]};
`;dt.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`;dt.label`
  font-size: ${ge.fontSize.sm};
  font-weight: ${ge.fontWeight.normal};
  color: ${ge.colors.text};
  line-height: ${ge.lineHeight.relaxed};
  font-family: ${ge.fontFamily.base};
`;dt.a`
  font-size: ${ge.fontSize.sm};
  font-weight: ${ge.fontWeight.normal};
  color: ${ge.colors.textSecondary};
  text-decoration: none;
  transition: color ${ge.transition.fast};
  font-family: ${ge.fontFamily.base};
  cursor: pointer;
`;dt.div`
  position: relative;
  width: 100%;
`;dt.input`
  width: 100%;
  display: flex;
  align-items: center;
  align-self: stretch;
  padding: ${ge.spacing[2]} ${ge.spacing[3]};
  padding-right: 2.5rem;
  border-radius: ${ge.radius.sm};
  border: 1px solid ${ge.colors.border};
  background-color: ${ge.colors.bgWhite};
  font-size: ${ge.fontSize.sm};
  font-weight: ${ge.fontWeight.normal};
  line-height: ${ge.lineHeight.normal};
  color: ${ge.colors.text};
  font-family: ${ge.fontFamily.base};
  transition: border-color ${ge.transition.base};

  &::placeholder {
    color: ${ge.colors.textMuted};
  }

  &:focus {
    outline: none;
    border-color: ${ge.colors.borderFocus};
  }
`;dt.button`
  position: absolute;
  right: ${ge.spacing[1]};
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  padding: ${ge.spacing[1]};
  display: flex;
  align-items: center;
  justify-content: center;
  color: ${ge.colors.textSecondary};
  transition: color ${ge.transition.fast};
`;dt.button`
  border-radius: ${ge.radius.sm};
  background-color: ${ge.colors.primary};
  height: ${ge.sizes.button.height};
  width: 100%;
  display: flex;
  margin-top: ${ge.spacing[4]};
  padding: ${ge.spacing[2]} ${ge.spacing[4]};
  justify-content: center;
  align-items: center;
  gap: 0.625rem;
  align-self: stretch;
  color: ${ge.colors.bgWhite};
  font-weight: ${ge.fontWeight.semibold};
  font-family: ${ge.fontFamily.manrope};
  font-size: ${ge.fontSize.base};
  line-height: normal;
  border: none;
  cursor: pointer;
  transition: background-color ${ge.transition.base};

  &:hover:not(:disabled) {
    background-color: ${ge.colors.primaryHover};
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;dt.div`
  width: ${ge.sizes.icon};
  height: ${ge.sizes.icon};
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    width: 100%;
    height: 100%;
  }
`;dt.div`
  width: ${ge.sizes.icon};
  height: ${ge.sizes.icon};
  display: flex;
  align-items: center;
  justify-content: center;
  animation: ${u_} 1s linear infinite;

  svg {
    width: 100%;
    height: 100%;
  }
`;dt.button`
  display: flex;
  width: 100%;
  height: ${ge.sizes.button.heightOAuth};
  padding: ${t=>t.$variant==="short"||t.$variant==="iconOnly"?ge.spacing[2]:`${ge.spacing[2]} ${ge.spacing[3]}`};
  flex-direction: row;
  justify-content: center;
  align-items: center;
  gap: ${t=>t.$variant==="iconOnly"?"0":t.$variant==="short"?ge.spacing[2]:ge.spacing[3]};
  border-radius: ${ge.radius.md};
  border: 1px solid ${ge.colors.borderGray};
  background-color: ${ge.colors.bgWhite};
  box-shadow: ${ge.shadow.md};
  color: ${ge.colors.zinc900};
  text-align: center;
  font-size: ${ge.fontSize.sm};
  font-weight: ${ge.fontWeight.medium};
  line-height: ${ge.lineHeight.normal};
  cursor: pointer;
  transition: all ${ge.transition.base};
  font-family: ${ge.fontFamily.base};

  &:hover:not(:disabled) {
    background-color: ${ge.colors.bgHover};
    border-color: ${ge.colors.borderHover};
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
`;dt.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: ${ge.sizes.iconSm};
  height: ${ge.sizes.iconSm};

  svg {
    width: 100%;
    height: 100%;
  }
`;dt.div`
  display: flex;
  flex-direction: column;
  gap: ${ge.spacing[3]};
  width: 100%;
`;dt.div`
  display: flex;
  justify-content: center;
  align-items: center;
  gap: ${ge.spacing[1]};
  font-size: ${ge.fontSize.sm};
  color: ${ge.colors.textSecondary};
  font-family: ${ge.fontFamily.base};
`;dt.span`
  font-weight: ${ge.fontWeight.normal};
`;dt.a`
  font-weight: ${ge.fontWeight.semibold};
  color: ${ge.colors.text};
  text-decoration: none;
  transition: opacity ${ge.transition.fast};
  cursor: pointer;
`;dt.div`
  display: flex;
  align-items: center;
  text-align: center;
  width: 100%;
  gap: ${ge.spacing[3]};
`;dt.div`
  flex: 1;
  border-top: 1px solid ${ge.colors.border};
`;dt.span`
  font-size: ${ge.fontSize.sm};
  color: ${ge.colors.textSecondary};
  font-weight: ${ge.fontWeight.normal};
  font-family: ${ge.fontFamily.manrope};
`;dt.div`
  padding: ${ge.spacing[3]};
  background-color: ${ge.colors.errorBg};
  border-radius: ${ge.radius.md};
  border: 1px solid ${ge.colors.error};
`;dt.div`
  display: flex;
  align-items: center;
  gap: ${ge.spacing[2]};
`;dt.div`
  width: ${ge.sizes.iconLg};
  height: ${ge.sizes.iconLg};
  flex-shrink: 0;
  color: ${ge.colors.error};
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    width: 100%;
    height: 100%;
  }
`;dt.p`
  font-size: ${ge.fontSize.sm};
  color: ${ge.colors.error};
  font-weight: ${ge.fontWeight.normal};
  font-family: ${ge.fontFamily.base};
  margin: 0;
`;dt.div`
  background-color: ${ge.colors.bgLight};
  padding: ${ge.spacing[4]} ${ge.spacing[2]};
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  gap: ${ge.spacing[1]};
`;dt.p`
  font-size: ${ge.fontSize.xs};
  font-weight: ${ge.fontWeight.medium};
  color: ${ge.colors.text};
  font-family: ${ge.fontFamily.manrope};
  margin: 0;
`;dt.div`
  display: flex;
  gap: ${ge.spacing[3]};
  justify-content: center;
`;dt.input`
  width: ${ge.sizes.verifyCode};
  height: ${ge.sizes.verifyCode};
  text-align: center;
  font-size: ${ge.fontSize.base};
  font-weight: ${ge.fontWeight.semibold};
  border: 1px solid ${ge.colors.border};
  border-radius: ${ge.radius.sm};
  transition: border-color ${ge.transition.base};
  font-family: ${ge.fontFamily.manrope};

  &:focus {
    outline: none;
    border-color: ${ge.colors.borderFocus};
  }
`;dt.div`
  margin-top: ${ge.spacing[2]};
`;dt.div`
  height: 100%;
  transition:
    width ${ge.transition.base},
    background-color ${ge.transition.base};
`;dt.span`
  font-size: ${ge.fontSize.xs};
  color: ${ge.colors.textSecondary};
  font-family: ${ge.fontFamily.base};
`;dt.div`
  display: flex;
  flex-direction: column;
  gap: ${ge.spacing[2]};
  font-size: ${ge.fontSize.sm};
  color: ${ge.colors.textGray};
  font-family: ${ge.fontFamily.base};
`;dt.div`
  display: flex;
  align-items: center;
  gap: ${ge.spacing[2]};
`;dt.form`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: center;
  gap: ${ge.spacing[6]};
`;dt.div`
  display: flex;
  flex-direction: column;
  gap: ${ge.spacing[6]};
  align-items: stretch;
`;dt.div`
  width: 100%;
  background-color: ${ge.colors.bgGray};
  border-radius: ${ge.radius.lg};
  padding: ${ge.spacing[3]} ${ge.spacing[3]} ${ge.spacing[6]} ${ge.spacing[3]};
  display: flex;
  flex-direction: column;
  gap: ${ge.spacing[3]};
`;dt.h3`
  color: ${ge.colors.black};
  font-family: ${ge.fontFamily.base};
  font-size: ${ge.fontSize.base};
  font-style: normal;
  font-weight: ${ge.fontWeight.semibold};
  line-height: 24px;
  margin: 0;
`;dt.p`
  font-size: ${ge.fontSize.sm};
  color: ${ge.colors.textGray};
  text-align: left;
  font-family: ${ge.fontFamily.base};
  margin: 0;
`;dt.span`
  font-weight: ${ge.fontWeight.medium};
  color: ${ge.colors.text};
`;dt.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: ${ge.spacing[10]};
`;dt.div`
  display: flex;
  flex-direction: column;
  gap: ${ge.spacing[6]};
`;dt.p`
  font-size: ${ge.fontSize.sm};
  color: ${ge.colors.textSecondary};
  text-align: center;
  font-family: ${ge.fontFamily.base};
  margin: 0;
`;dt.div`
  width: 100%;
  font-size: ${ge.fontSize.sm};
  text-align: center;
  color: ${ge.colors.textSecondary};
  font-family: ${ge.fontFamily.base};
`;dt.button`
  color: ${ge.colors.text};
  font-weight: ${ge.fontWeight.medium};
  transition: all ${ge.transition.base};
  background: none;
  border: none;
  padding: 0;
  font-family: ${ge.fontFamily.base};
  font-size: ${ge.fontSize.sm};

  &:not(:disabled) {
    cursor: pointer;
  }

  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }
`;dt.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: ${t=>t.$stretch?"stretch":"center"};
  justify-content: center;
  gap: ${ge.spacing[6]};
`;dt.div`
  border-radius: ${ge.radius.full};
  height: ${ge.sizes.verifyCode};
  width: ${ge.sizes.verifyCode};
  border-bottom: 2px solid ${ge.colors.primary};
`;dt.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: ${ge.spacing[4]};
`;dt.div`
  width: ${ge.sizes.verifyIcon};
  height: ${ge.sizes.verifyIcon};
  border-radius: ${ge.radius.full};
  background-color: ${ge.colors.successBg};
  display: flex;
  align-items: center;
  justify-content: center;
`;dt.div`
  width: ${ge.sizes.verifyIconInner};
  height: ${ge.sizes.verifyIconInner};
  color: ${ge.colors.successDark};
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    width: 100%;
    height: 100%;
  }
`;dt.p`
  text-align: center;
  font-family: ${ge.fontFamily.base};
  font-size: ${ge.fontSize.sm};
  color: ${ge.colors.text};
  margin: 0;
`;dt.div`
  display: none;
`;dt.span`
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
`;Av().min(1,"Email is required").email("Invalid email address");function h_(t){const{minLength:s=6,requireUppercase:r=!1,requireLowercase:a=!1,requireNumber:o=!1,requireSpecialChar:l=!1}={};let d=Av().min(s,`Password must be at least ${s} characters`);return r&&(d=d.regex(/[A-Z]/,"Password must contain at least one uppercase letter")),a&&(d=d.regex(/[a-z]/,"Password must contain at least one lowercase letter")),o&&(d=d.regex(/\d/,"Password must contain at least one number")),l&&(d=d.regex(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/,"Password must contain at least one special character")),d}h_();dt.div`
  position: relative;
  display: inline-block;
`;dt.button`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: ${ge.spacing[2]};
  padding: ${ge.spacing[2]};
  border-radius: ${t=>t.$detailed?ge.radius.sm:ge.radius.full};
  background-color: ${t=>t.$detailed?ge.colors.bgWhite:"transparent"};
  border: ${t=>t.$detailed?`1px solid ${ge.colors.border}`:"none"};
  cursor: pointer;
  transition: all ${ge.transition.base};

  &:hover {
    ${t=>t.$detailed?`
      background-color: ${ge.colors.bgLight};
      opacity: 1;
    `:`
      opacity: 0.8;
    `}
  }
`;dt.div`
  width: 2rem;
  height: 2rem;
  border-radius: ${ge.radius.full};
  background-color: ${ge.colors.primary};
  color: ${ge.colors.bgWhite};
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: ${ge.fontSize.sm};
  font-family: ${ge.fontFamily.base};
  overflow: hidden;
`;dt.img`
  border-radius: ${ge.radius.full};
  object-fit: cover;
  width: 100%;
  height: 100%;
`;dt.span`
  color: ${ge.colors.bgWhite};
  font-weight: 600;
  font-size: ${ge.fontSize.sm};
`;dt.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.125rem;
`;dt.div`
  font-size: ${ge.fontSize.sm};
  font-weight: 600;
  color: ${ge.colors.text};
  line-height: 1.25rem;
  text-align: left;
  font-family: ${ge.fontFamily.base};
`;dt.div`
  font-size: ${ge.fontSize.xs};
  color: ${ge.colors.textSecondary};
  line-height: 1rem;
  text-align: left;
  font-family: ${ge.fontFamily.base};
`;dt.div`
  position: absolute;
  ${t=>t.$openUpward?`
    bottom: 100%;
    margin-bottom: ${ge.spacing[2]};
  `:`
    top: 100%;
    margin-top: ${ge.spacing[2]};
  `}
  left: 0;
  ${t=>t.$horizontalOffset?`
    transform: translateX(${t.$horizontalOffset}px);
  `:""}
  background-color: ${ge.colors.bgWhite};
  border: 1px solid ${ge.colors.border};
  border-radius: ${ge.radius.md};
  box-shadow: ${ge.shadow.lg};
  padding: ${ge.spacing[2]};
  min-width: 200px;
  z-index: 50;
`;dt.button`
  display: flex;
  align-items: center;
  gap: ${ge.spacing[2]};
  padding: ${ge.spacing[2]};
  border-radius: ${ge.radius.sm};
  cursor: pointer;
  transition: background-color ${ge.transition.fast};
  font-size: ${ge.fontSize.sm};
  color: ${t=>t.$signout?ge.colors.error:ge.colors.text};
  font-family: ${ge.fontFamily.base};
  background: none;
  border: none;
  width: 100%;
  text-align: left;

  &:hover {
    background-color: ${ge.colors.bgLight};
  }
`;dt.div`
  width: 1.25rem;
  height: 1.25rem;
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    width: 100%;
    height: 100%;
  }
`;function ym(){const{signIn:t,signUp:s,signOut:r,isLoaded:a,isSignedIn:o}=Wv();return{signIn:t,signUp:s,signOut:r,isLoaded:a,isSignedIn:o}}function Mt(){const{user:t,isLoaded:s,updateUser:r,setUser:a}=Wv();return{user:t,isLoaded:s,updateUser:r,setUser:a}}function Ou(){return"https://93cnqxr3.us-east.insforge.app"}function vm(){return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3OC0xMjM0LTU2NzgtOTBhYi1jZGVmMTIzNDU2NzgiLCJlbWFpbCI6ImFub25AaW5zZm9yZ2UuY29tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0OTg5NDh9.Kvnq_t1yyvCuFLYkALTzRujxHytO2_qDmVTmNnI1bcE"}function Hv(t,s){const r=Ou(),o=(s.startsWith("/")?s.slice(1):s).split("/").map(l=>encodeURIComponent(l)).join("/");return`${r}/api/storage/buckets/${t}/objects/${o}`}const Gv=L.createContext(void 0);function m_({children:t}){const[s,r]=L.useState(()=>{const o=localStorage.getItem("theme");return o||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});L.useEffect(()=>{s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",s)},[s]);const a=()=>{r(o=>o==="light"?"dark":"light")};return e.jsx(Gv.Provider,{value:{theme:s,toggleTheme:a},children:t})}function f_(){const t=L.useContext(Gv);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const p_={en:{"nav.home":"Home","nav.about":"About","nav.courses":"Courses","nav.events":"Events","nav.donate":"Donate","nav.login":"Login","nav.dashboard":"Dashboard","nav.logout":"Logout","common.loading":"Loading...","common.error":"Error","common.save":"Save","common.cancel":"Cancel","common.delete":"Delete","common.edit":"Edit","common.create":"Create","common.search":"Search","common.filter":"Filter","common.actions":"Actions","common.status":"Status","common.date":"Date","common.name":"Name","common.email":"Email","common.phone":"Phone","common.address":"Address","common.submit":"Submit","common.back":"Back","common.next":"Next","common.previous":"Previous","common.close":"Close","common.confirm":"Confirm","common.yes":"Yes","common.no":"No"},af:{"nav.home":"Tuis","nav.about":"Oor","nav.courses":"Kursusse","nav.events":"Gebeurtenisse","nav.donate":"Skenk","nav.login":"Teken In","nav.dashboard":"Dashboard","nav.logout":"Teken Uit","common.loading":"Laai...","common.error":"Fout","common.save":"Stoor","common.cancel":"Kanselleer","common.delete":"Verwyder","common.edit":"Wysig","common.create":"Skep","common.search":"Soek","common.filter":"Filter","common.actions":"Aksies","common.status":"Status","common.date":"Datum","common.name":"Naam","common.email":"E-pos","common.phone":"Telefoon","common.address":"Adres","common.submit":"Dien In","common.back":"Terug","common.next":"Volgende","common.previous":"Vorige","common.close":"Sluit","common.confirm":"Bevestig","common.yes":"Ja","common.no":"Nee"},zu:{"nav.home":"Ikhaya","nav.about":"Mayelana","nav.courses":"Izifundo","nav.events":"Imicimbi","nav.donate":"Nika","nav.login":"Ngena","nav.dashboard":"Ideshibhodi","nav.logout":"Phuma","common.loading":"Iyalayisha...","common.error":"Iphutha","common.save":"Gcina","common.cancel":"Khansela","common.delete":"Susa","common.edit":"Hlela","common.create":"Dala","common.search":"Sesha","common.filter":"Hlunga","common.actions":"Izenzo","common.status":"Isimo","common.date":"Usuku","common.name":"Igama","common.email":"I-imeyili","common.phone":"Ucingo","common.address":"Ikheli","common.submit":"Thumela","common.back":"Emuva","common.next":"Okulandelayo","common.previous":"Okwedlule","common.close":"Vala","common.confirm":"Qinisekisa","common.yes":"Yebo","common.no":"Cha"},xh:{"nav.home":"Indlu","nav.about":"Malunga","nav.courses":"Izifundo","nav.events":"Iimeko","nav.donate":"Nika","nav.login":"Ngena","nav.dashboard":"Ideshibhodi","nav.logout":"Phuma","common.loading":"Iyalayisha...","common.error":"Impazamo","common.save":"Gcina","common.cancel":"Rhoxisa","common.delete":"Cima","common.edit":"Hlela","common.create":"Yenza","common.search":"Khangela","common.filter":"Coca","common.actions":"Izenzo","common.status":"Imeko","common.date":"Umhla","common.name":"Igama","common.email":"I-imeyili","common.phone":"Umnxeba","common.address":"Idilesi","common.submit":"Thumela","common.back":"Emva","common.next":"Okulandelayo","common.previous":"Okwangaphambili","common.close":"Vala","common.confirm":"Qinisekisa","common.yes":"Ewe","common.no":"Hayi"}},Zv=L.createContext(void 0);function x_({children:t}){const[s,r]=L.useState(()=>localStorage.getItem("language")||"en");L.useEffect(()=>{localStorage.setItem("language",s),document.documentElement.lang=s},[s]);const a=l=>{r(l)},o=l=>p_[s][l]||l;return e.jsx(Zv.Provider,{value:{language:s,setLanguage:a,t:o},children:t})}function g_(){const t=L.useContext(Zv);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t}const y_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v_=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,a)=>a?a.toUpperCase():r.toLowerCase()),g0=t=>{const s=v_(t);return s.charAt(0).toUpperCase()+s.slice(1)},Yv=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim(),b_=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};var j_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const w_=L.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...c},h)=>L.createElement("svg",{ref:h,...j_,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:Yv("lucide",o),...!l&&!b_(c)&&{"aria-hidden":"true"},...c},[...d.map(([f,p])=>L.createElement(f,p)),...Array.isArray(l)?l:[l]]));const it=(t,s)=>{const r=L.forwardRef(({className:a,...o},l)=>L.createElement(w_,{ref:l,iconNode:s,className:Yv(`lucide-${y_(g0(t))}`,`lucide-${t}`,a),...o}));return r.displayName=g0(t),r};const N_=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],__=it("archive",N_);const k_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zn=it("arrow-left",k_);const S_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],yn=it("arrow-right",S_);const C_=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ms=it("award",C_);const A_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sl=it("bell",A_);const P_=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],as=it("book-open",P_);const L_=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],E_=it("book",L_);const T_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ns=it("calendar",T_);const F_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],y0=it("chart-column",F_);const D_=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],R_=it("check-check",D_);const I_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ec=it("check",I_);const M_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mp=it("circle-alert",M_);const z_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rt=it("circle-check-big",z_);const O_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],q_=it("circle-user",O_);const $_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rl=it("circle-x",$_);const U_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],$r=it("clock",U_);const B_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],em=it("copy",B_);const V_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],W_=it("credit-card",V_);const H_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],G_=it("database",H_);const Z_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],fo=it("dollar-sign",Z_);const Y_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ci=it("download",Y_);const K_=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],J_=it("external-link",K_);const Q_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Tc=it("eye-off",Q_);const X_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],di=it("eye",X_);const e6=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],t6=it("facebook",e6);const s6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ys=it("file-text",s6);const r6=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],n6=it("folder-open",r6);const a6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Kv=it("funnel",a6);const i6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],v0=it("gift",i6);const o6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qu=it("globe",o6);const l6=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],mo=it("graduation-cap",l6);const c6=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Jv=it("headphones",c6);const d6=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],qd=it("heart",d6);const u6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Fu=it("house",u6);const h6=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],m6=it("instagram",h6);const f6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],p6=it("key",f6);const x6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],va=it("layout-dashboard",x6);const g6=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],y6=it("link",g6);const v6=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],b6=it("loader",v6);const j6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Qv=it("lock-open",j6);const w6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Yr=it("lock",w6);const N6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tm=it("log-out",N6);const _6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vn=it("mail",_6);const k6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zl=it("map-pin",k6);const S6=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],tx=it("menu",S6);const C6=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Zr=it("message-square",C6);const A6=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],P6=it("moon",A6);const L6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],bm=it("phone",L6);const E6=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],T6=it("pin-off",E6);const F6=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],sm=it("pin",F6);const D6=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Cc=it("play",D6);const R6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dr=it("plus",R6);const I6=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],M6=it("receipt",I6);const z6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],li=it("save",z6);const O6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Kr=it("search",O6);const q6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ic=it("send",q6);const $6=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rm=it("settings",$6);const U6=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],B6=it("share-2",U6);const V6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wd=it("shield",V6);const W6=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Xv=it("smartphone",W6);const H6=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],G6=it("square-check-big",H6);const Z6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bn=it("square-pen",Z6);const Y6=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],K6=it("star-off",Y6);const J6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Bh=it("star",J6);const Q6=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],X6=it("sun",Q6);const e3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],fp=it("tag",e3);const t3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$d=it("target",t3);const s3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zs=it("trash-2",s3);const r3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ul=it("trending-up",r3);const n3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jm=it("upload",n3);const a3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sx=it("user-check",a3);const i3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],o3=it("user-plus",i3);const l3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nl=it("user",l3);const c3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qt=it("users",c3);const d3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Wl=it("video",d3);const u3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fr=it("x",u3);const h3=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],m3=it("youtube",h3);function f3(){const{theme:t,toggleTheme:s}=f_();return e.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Toggle theme",children:t==="dark"?e.jsx(X6,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}):e.jsx(P6,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})})}const b0=[{code:"en",name:"English"},{code:"af",name:"Afrikaans"},{code:"zu",name:"Zulu"},{code:"xh",name:"Xhosa"}];function p3(){const{language:t,setLanguage:s}=g_(),[r,a]=xs.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(qu,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:b0.find(o=>o.code===t)?.name||"English"})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-20",children:b0.map(o=>e.jsx("button",{onClick:()=>{s(o.code),a(!1)},className:`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${t===o.code?"bg-gold/10 text-gold font-semibold":"text-gray-700 dark:text-gray-300"}`,children:o.name},o.code))})]})]})}const x3=Ou(),g3=vm(),B=fv({baseUrl:x3,anonKey:g3});async function e2(t){try{const{data:s,error:r}=await B.database.from("user_profiles").select("role").eq("user_id",t).single();return r||!s?!1:s.role==="admin"||s.role==="super_admin"}catch(s){return console.error("Error checking admin access:",s),!1}}async function y3(t){try{const{data:s,error:r}=await B.database.from("user_profiles").select("role").eq("user_id",t).single();return r||!s?null:s.role||"user"}catch(s){return console.error("Error getting user role:",s),null}}function dn(){const[t,s]=L.useState(!1),[r,a]=L.useState(!1),{user:o,isLoaded:l}=Mt(),{signOut:d}=ym(),c=cs();L.useEffect(()=>{o&&l?e2(o.id).then(a):a(!1)},[o,l]);const h=()=>{s(!t)},f=async()=>{await d(),c("/"),s(!1)};return e.jsxs("nav",{className:"sticky top-0 z-50 bg-white shadow-soft",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs(ot,{to:"/",className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/assets/images/hero.jpeg",alt:"CLM Logo",className:"h-10 w-auto"}),e.jsx("span",{className:"text-brand-dark-blue font-bold text-xl",children:"Christian Leadership Movement"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[e.jsx(ot,{to:"/",className:"text-navy-ink hover:text-gold transition-colors",children:"Home"}),e.jsx(ot,{to:"/blog",className:"text-navy-ink hover:text-gold transition-colors",children:"News"}),e.jsxs(ot,{to:"/courses",className:"text-navy-ink hover:text-gold transition-colors flex items-center gap-1",children:[e.jsx(as,{size:16}),"Courses"]}),e.jsx(ot,{to:"/resources",className:"text-navy-ink hover:text-gold transition-colors",children:"Resources"}),e.jsx(ot,{to:"/prayer-requests",className:"text-navy-ink hover:text-gold transition-colors",children:"Prayer Wall"}),e.jsx(ot,{to:"/forum",className:"text-navy-ink hover:text-gold transition-colors",children:"Forum"}),e.jsx(ot,{to:"/groups",className:"text-navy-ink hover:text-gold transition-colors",children:"Groups"}),e.jsx(ot,{to:"/mentorship",className:"text-navy-ink hover:text-gold transition-colors",children:"Mentorship"}),e.jsx(ot,{to:"/donations",className:"text-navy-ink hover:text-gold transition-colors",children:"Donate"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx(f3,{}),e.jsx(p3,{}),l&&o?e.jsxs(e.Fragment,{children:[r&&e.jsxs(ot,{to:"/admin",className:"bg-brand-dark-blue hover:bg-opacity-90 text-white px-4 py-2 rounded-card font-medium transition-all flex items-center",children:[e.jsx(va,{size:18,className:"mr-2"}),"Admin Dashboard"]}),e.jsxs(ot,{to:"/dashboard",className:"text-navy-ink hover:text-gold transition-colors font-medium flex items-center",children:[e.jsx(nl,{size:18,className:"mr-2"}),o.name||o.email||"Dashboard"]}),e.jsxs("button",{onClick:f,className:"text-navy-ink hover:text-gold transition-colors font-medium flex items-center",children:[e.jsx(tm,{size:18,className:"mr-2"}),"Logout"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{to:"/login",className:"text-navy-ink hover:text-gold transition-colors font-medium",children:"Login"}),e.jsx(ot,{to:"/apply",className:"bg-gold hover:bg-opacity-90 text-white px-4 py-2 rounded-card font-medium transition-all",children:"Apply Now"})]})]}),e.jsx("button",{className:"md:hidden text-navy-ink",onClick:h,children:t?e.jsx(Fr,{size:24}):e.jsx(tx,{size:24})})]}),t&&e.jsx("div",{className:"md:hidden bg-white border-t border-gray-100",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex flex-col space-y-4",children:[e.jsx(ot,{to:"/",className:"text-navy-ink py-2",onClick:h,children:"Home"}),e.jsx(ot,{to:"/blog",className:"text-navy-ink py-2",onClick:h,children:"News"}),e.jsxs(ot,{to:"/courses",className:"text-navy-ink py-2 flex items-center gap-2",onClick:h,children:[e.jsx(as,{size:16}),"Courses"]}),e.jsx(ot,{to:"/resources",className:"text-navy-ink py-2",onClick:h,children:"Resources"}),e.jsx(ot,{to:"/prayer-requests",className:"text-navy-ink py-2",onClick:h,children:"Prayer Wall"}),e.jsx(ot,{to:"/forum",className:"text-navy-ink py-2",onClick:h,children:"Forum"}),e.jsx(ot,{to:"/groups",className:"text-navy-ink py-2",onClick:h,children:"Groups"}),e.jsx(ot,{to:"/mentorship",className:"text-navy-ink py-2",onClick:h,children:"Mentorship"}),e.jsx(ot,{to:"/donations",className:"text-navy-ink py-2",onClick:h,children:"Donate"}),e.jsx("div",{className:"flex flex-col space-y-3 pt-4 border-t border-gray-100",children:l&&o?e.jsxs(e.Fragment,{children:[r&&e.jsxs(ot,{to:"/admin",className:"bg-brand-dark-blue text-white px-4 py-2 rounded-card font-medium text-center flex items-center justify-center",onClick:h,children:[e.jsx(va,{size:18,className:"mr-2"}),"Admin Dashboard"]}),e.jsxs(ot,{to:"/dashboard",className:"text-navy-ink font-medium py-2 flex items-center",onClick:h,children:[e.jsx(nl,{size:18,className:"mr-2"}),o.name||o.email||"Dashboard"]}),e.jsxs("button",{onClick:()=>{f(),h()},className:"text-navy-ink font-medium py-2 flex items-center text-left",children:[e.jsx(tm,{size:18,className:"mr-2"}),"Logout"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{to:"/login",className:"text-navy-ink font-medium py-2",onClick:h,children:"Login"}),e.jsx(ot,{to:"/apply",className:"bg-gold text-white px-4 py-2 rounded-card font-medium text-center",onClick:h,children:"Apply Now"})]})})]})})]})}function un(){return e.jsx("footer",{className:"bg-brand-dark-blue text-white pt-12 pb-6",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Christian Leadership Movement"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Transforming Leaders Transforming the Nations."}),e.jsx("p",{className:"text-gold font-bold text-lg mb-2",children:"TRANSFORM LEADERS!!!!!!!!TRANSFORM THE NATIONS!!!!!!!!"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://facebook.com",className:"text-white hover:text-gold",children:e.jsx(t6,{size:20})}),e.jsx("a",{href:"https://instagram.com",className:"text-white hover:text-gold",children:e.jsx(m6,{size:20})}),e.jsx("a",{href:"https://youtube.com",className:"text-white hover:text-gold",children:e.jsx(m3,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(ot,{to:"/about",className:"text-gray-300 hover:text-gold",children:"About Us"})}),e.jsx("li",{children:e.jsx(ot,{to:"/programs",className:"text-gray-300 hover:text-gold",children:"Programs"})}),e.jsx("li",{children:e.jsx(ot,{to:"/events",className:"text-gray-300 hover:text-gold",children:"Events"})}),e.jsx("li",{children:e.jsx(ot,{to:"/partners",className:"text-gray-300 hover:text-gold",children:"Partners"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Contact Us"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(bm,{size:16,className:"mr-2"}),e.jsx("a",{href:"tel:+27732047642",className:"text-gray-300 hover:text-gold",children:"073 204 7642"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(vn,{size:16,className:"mr-2"}),e.jsx("a",{href:"mailto:kenstraining04@gmail.com",className:"text-gray-300 hover:text-gold",children:"kenstraining04@gmail.com"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Zl,{size:16,className:"mr-2 mt-1"}),e.jsx("span",{className:"text-gray-300",children:"Dwarsloop phase 2 house no 1717"})]}),e.jsx("li",{className:"flex items-center",children:e.jsx("a",{href:"https://www.kenstraining.co.za",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-gold",children:"www.kenstraining.co.za"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stay Updated"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Subscribe to our newsletter"}),e.jsxs("form",{className:"flex flex-col space-y-3",children:[e.jsx("input",{type:"email",placeholder:"Your email",className:"px-4 py-2 rounded-card text-navy-ink focus:outline-none focus:ring-2 focus:ring-gold"}),e.jsx("button",{type:"submit",className:"bg-gold hover:bg-opacity-90 text-white px-4 py-2 rounded-card font-medium transition-all",children:"Subscribe"})]})]})]}),e.jsx("div",{className:"border-t border-gray-700 mt-8 pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:[" ",new Date().getFullYear()," Christian Leadership Movement. All rights reserved."]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(ot,{to:"/privacy-policy",className:"text-gray-400 hover:text-gold text-sm",children:"Privacy Policy"}),e.jsx(ot,{to:"/terms-of-service",className:"text-gray-400 hover:text-gold text-sm",children:"Terms of Service"})]})]})})]})})}function me({children:t,variant:s="primary",size:r="md",className:a="",onClick:o,href:l,type:d="button",disabled:c=!1}){const h={primary:"bg-gold hover:bg-opacity-90 text-white",secondary:"bg-soft-gold hover:bg-opacity-90 text-navy-ink",outline:"bg-transparent border border-gold text-gold hover:bg-gold hover:text-white"},f={sm:"px-3 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},p="rounded-card font-medium transition-all focus:outline-none focus:ring-2 focus:ring-gold focus:ring-opacity-50",y=c?"opacity-50 cursor-not-allowed":"",b=`${p} ${h[s]} ${f[r]} ${y} ${a}`;return l?e.jsx(ot,{to:l,className:b,children:t}):e.jsx("button",{type:d,className:b,onClick:o,disabled:c,children:t})}function v3(){return e.jsxs("section",{className:"relative bg-gradient-to-br from-[#1B1C5F] via-[#2C2E78] to-[#1B1C5F] text-white py-20 overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-100px] left-[-100px] w-72 h-72 bg-yellow-500 opacity-10 rounded-full animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-[-150px] right-[-150px] w-96 h-96 bg-blue-500 opacity-10 rounded-full animate-pulse-slow"}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsxs("div",{className:"md:w-1/2 space-y-6",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight opacity-0 animate-fade-in-up",children:"Transforming Leaders Transforming the Nations."}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 opacity-0 animate-fade-in-up delay-200",children:"Developing servant leaders who transform communities through faith and action."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 opacity-0 animate-fade-in-up delay-400",children:[e.jsx(me,{href:"/apply",variant:"primary",size:"lg",children:"Apply Now  Join the Movement"}),e.jsx(me,{href:"/about",variant:"outline",size:"lg",children:"Learn More"})]})]}),e.jsx("div",{className:"md:w-1/2 relative flex justify-center",children:e.jsxs("div",{className:"relative w-full max-w-md rounded-xl overflow-hidden shadow-xl",children:[e.jsx("img",{src:"/assets/images/hero.jpeg",alt:"CLM Logo",className:"w-full h-full object-contain animate-fade-in-up"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-yellow-400 to-blue-500 opacity-20 rounded-xl blur-3xl animate-pulse-slow"})]})})]})})]})}const j0=[as,Qt,Ms,qu,E_,sx,Wd];function b3(){const[t,s]=L.useState(""),[r,a]=L.useState(""),[o,l]=L.useState([]),[d,c]=L.useState(!0);return L.useEffect(()=>{(async()=>{try{const f=new Promise((x,A)=>setTimeout(()=>A(new Error("Request timeout")),1e4)),p=B.database.from("content_sections").select("*"),{data:y,error:b}=await Promise.race([p,f]);if(b)throw b;y?.forEach(x=>{if(x.section_type==="vision")s(x.content);else if(x.section_type==="mission")a(x.content);else if(x.section_type==="strategic_objectives"){const A=x.content.split(`
`).filter(N=>N.trim()).map(N=>{const P=N.split(":");return P.length>=2?{title:P[0].trim(),description:P.slice(1).join(":").trim()}:{title:N.trim(),description:""}});l(A)}})}catch(f){console.error("Error fetching content:",f),s("To raise, equip, and empower Christ-centered leaders who transform their communities and nations through servant leadership, integrity, and the power of the Holy Spirit."),a("To develop and empower Christian leaders who transform communities through faith, integrity, and servant leadership."),l([{title:"Leadership Development and Training",description:"Establish training programs, workshops, and schools that equip emerging and established leaders in biblical leadership, character formation, and ministry excellence."},{title:"Mentorship and Discipleship Networks",description:"Build mentorship platforms connecting seasoned leaders with the next generation for spiritual, moral, and practical growth."},{title:"Community Transformation Initiatives",description:"Launch community-based projects that address spiritual, social, and economic needs through the application of godly leadership principles."},{title:"Global Kingdom Partnerships",description:"Create alliances with local and international ministries, educational institutions, and mission organizations to advance the cause of Christ globally."},{title:"Leadership Resources and Publications",description:"Develop books, manuals, devotionals, and online content that promote biblical leadership and inspire ongoing personal development."},{title:"Empowering the Next Generation",description:"Focus on youth and emerging leaders through leadership academies, conferences, and mentorship movements that raise future Kingdom influencers."},{title:"Advocacy for Godly Governance and Ethics",description:"Encourage ethical leadership and moral integrity in public life and governance guided by biblical truth."}])}finally{c(!1)}})()},[]),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:d?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading content..."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-navy-ink mb-4",children:"Our Vision"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto mb-6",children:t||"To raise, equip, and empower Christ-centered leaders who transform their communities and nations through servant leadership, integrity, and the power of the Holy Spirit."}),e.jsxs("p",{className:"text-md italic text-gray-500 max-w-2xl mx-auto",children:[e.jsx("strong",{children:"Scriptural Foundation:"}),' 2 Timothy 2:2  "And the things that you have heard from me among many witnesses, commit these to faithful men who will be able to teach others also."']}),e.jsx("div",{className:"mt-8 p-6 bg-gold/10 rounded-card border-2 border-gold",children:e.jsx("p",{className:"text-xl font-bold text-navy-ink text-center",children:"OUR MOTTO: TRANSFORM LEADERS!!!!!!!!TRANSFORM THE NATIONS!!!!!!!!"})})]}),o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-navy-ink mb-4",children:"Strategic Objectives"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((h,f)=>{const p=j0[f%j0.length];return e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft hover:shadow-lg transition-shadow border-l-4 border-gold",children:e.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[e.jsx("div",{className:"bg-gold/10 p-3 rounded-full w-14 h-14 flex items-center justify-center flex-shrink-0",children:e.jsx(p,{size:28,className:"text-gold"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-2",children:h.title}),h.description&&e.jsx("p",{className:"text-gray-600 leading-relaxed",children:h.description})]})]})},f)})})]})]})})})}const w0=[as,Qt,qd,Fu,sx,mo,qu];function j3(){const[t,s]=L.useState([]),[r,a]=L.useState(!0);return L.useEffect(()=>{(async()=>{try{const l=new Promise((f,p)=>setTimeout(()=>p(new Error("Request timeout")),1e4)),d=B.database.from("strategic_objectives").select("*").order("created_at",{ascending:!0}),{data:c,error:h}=await Promise.race([d,l]);if(h)throw h;s(c||[])}catch(l){console.error("Error fetching objectives:",l),s([])}finally{a(!1)}})()},[]),r?e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading objectives..."})})})}):e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-semibold text-navy-ink mb-4",children:"Strategic Objectives"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Our comprehensive approach to transforming leaders and communities through faith-based initiatives"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:t.map((o,l)=>{const d=w0[l%w0.length];return e.jsx(ot,{to:`/objectives/${o.slug}`,className:"group",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 h-full flex flex-col",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("div",{className:"bg-gold/10 p-4 rounded-2xl group-hover:bg-gold/20 transition-colors",children:e.jsx(d,{className:"text-gold",size:40})})}),e.jsx("h3",{className:"text-2xl font-semibold text-navy-ink mb-4 text-center",children:o.title}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed mb-6 flex-grow text-center",children:o.short_description}),e.jsx("div",{className:"flex justify-center mt-auto",children:e.jsxs("span",{className:"inline-flex items-center text-gold font-medium group-hover:text-gold/80 transition-colors",children:["View Details",e.jsx(yn,{className:"ml-2 group-hover:translate-x-1 transition-transform",size:20})]})})]})},o.id)})}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No strategic objectives available yet."})})]})})}function w3(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(!1),[h,f]=L.useState(!0);return L.useEffect(()=>{(async()=>{try{const y=B.database.from("programs").select("*").in("type",["bible_school","membership"]).order("created_at",{ascending:!1}),b=B.database.from("courses").select("id, title, description, is_up_endorsed, category").eq("is_up_endorsed",!0).order("created_at",{ascending:!1}).limit(1),[x,A]=await Promise.all([y,b]);if(x.error)throw x.error;if(a(x.data||[]),A.error)throw A.error;if(l(A.data||[]),s){const{data:N}=await B.database.from("applications").select("status").eq("user_id",s.id).eq("program_type","membership").eq("status","approved").eq("payment_status","confirmed").maybeSingle();c(!!N)}}catch(y){console.error("Error fetching data:",y),a([]),l([])}finally{f(!1)}})()},[s]),e.jsx("section",{className:"py-16 bg-muted-gray",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-navy-ink mb-4",children:"Our Programs"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Transformative educational experiences designed to equip and empower Christian leaders."})]}),h?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading programs..."})}):r.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No programs available at the moment."})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.length>0&&e.jsxs("div",{className:"bg-white rounded-card overflow-hidden shadow-soft hover:shadow-lg transition-all border-2 border-blue-200",children:[e.jsxs("div",{className:"h-48 overflow-hidden bg-gradient-to-r from-navy-ink to-brand-dark-blue relative",children:[e.jsx(Ms,{className:"absolute top-3 right-3 w-6 h-6 text-gold"}),e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(mo,{className:"w-16 h-16 text-white/30"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("span",{className:"px-3 py-1 bg-gold text-white rounded-full text-xs font-semibold flex items-center gap-1 w-fit",children:[e.jsx(Ms,{className:"w-3 h-3"}),"UP Endorsed"]})}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:"University of Pretoria Courses"}),e.jsxs("p",{className:"text-gray-600 mb-4 text-sm",children:["Endorsed by Enterprises@UP and facilitated by the Centre for Faith and Community.",!d&&e.jsxs("span",{className:"block mt-2 text-amber-600 font-medium",children:[e.jsx(Yr,{className:"w-3 h-3 inline mr-1"}),"CLM Membership Required"]})]}),e.jsx(me,{href:"/programs?up_courses=true",variant:"primary",onClick:p=>{p.preventDefault(),t("/programs?up_courses=true")},children:"View Courses"})]})]}),r.find(p=>p.type==="bible_school")&&e.jsxs("div",{className:"bg-white rounded-card overflow-hidden shadow-soft hover:shadow-lg transition-all",children:[e.jsx("div",{className:"h-48 overflow-hidden bg-gradient-to-r from-brand-dark-blue to-navy-ink relative",children:e.jsx(mo,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 text-white/30"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-3",children:"Bible School Program"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm leading-relaxed",children:"Comprehensive theological education and leadership training designed to equip Christian leaders for effective ministry and service. This program provides in-depth biblical studies, practical ministry skills, and leadership development."}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ys,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-amber-800",children:[e.jsx("strong",{children:"Application Required:"})," You need to complete the application form to enroll."]})]})}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t("/programs/bible-school"),children:["View Program",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})]})]}),r.find(p=>p.type==="membership")&&e.jsxs("div",{className:"bg-white rounded-card overflow-hidden shadow-soft hover:shadow-lg transition-all",children:[e.jsx("div",{className:"h-48 overflow-hidden bg-gradient-to-r from-gold to-amber-500 relative",children:e.jsx(Qt,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 text-white/30"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-3",children:"CLM Membership Program"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm leading-relaxed",children:"Join the Christian Leadership Movement and gain access to all resources, courses, and community benefits. Membership provides exclusive access to educational materials, UP-endorsed courses, mentorship programs, and a supportive community."}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ys,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-amber-800",children:[e.jsx("strong",{children:"Application Required:"})," You need to complete the membership application form to join."]})]})}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t("/programs/membership"),children:["View Program",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card overflow-hidden shadow-soft hover:shadow-lg transition-all",children:[e.jsx("div",{className:"h-48 overflow-hidden bg-gradient-to-r from-purple-600 to-indigo-600 relative",children:e.jsx($d,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 text-white/30"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-3",children:"Mentorship Program"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm leading-relaxed",children:"Connect with experienced mentors and grow in your leadership journey. Our mentorship program pairs you with seasoned Christian leaders who provide guidance, support, and wisdom to help you develop your calling and ministry skills."}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t("/mentorship"),children:["View Mentorship Program",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})]})]})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx(me,{href:"/programs",variant:"secondary",size:"lg",children:"View All Programs"})})]})})}function N3({title:t,date:s,time:r,location:a,isOnline:o,capacity:l,registered:d,image:c,description:h}){const f=d/l*100,p=f>=80,y=d>=l;return e.jsxs("div",{className:"bg-white rounded-card overflow-hidden shadow-soft hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:c,alt:t,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 left-4 bg-brand-dark-blue text-white px-3 py-1 rounded-md font-medium",children:s}),o&&e.jsx("div",{className:"absolute top-4 right-4 bg-gold text-white px-3 py-1 rounded-md font-medium",children:"Online"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:t}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:h}),e.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx($r,{size:16,className:"mr-2"}),e.jsx("span",{children:r})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Zl,{size:16,className:"mr-2"}),e.jsx("span",{children:a})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Qt,{size:16,className:"mr-2"}),e.jsxs("span",{children:[d," / ",l," registered"]})]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full mb-4",children:e.jsx("div",{className:`h-full rounded-full ${y?"bg-red-500":p?"bg-amber-500":"bg-green-500"}`,style:{width:`${Math.min(f,100)}%`}})}),e.jsx(me,{variant:"primary",className:"w-full",disabled:y,children:y?"Event Full":"Register Now"})]})]})}function _3(){const[t,s]=L.useState([]),[r,a]=L.useState(!0),[o,l]=L.useState({});return L.useEffect(()=>{(async()=>{try{const c=new Promise((b,x)=>setTimeout(()=>x(new Error("Request timeout")),1e4)),h=new Date().toISOString(),f=B.database.from("events").select("*").gte("event_date",h).order("event_date",{ascending:!0}).limit(3),{data:p,error:y}=await Promise.race([f,c]);if(y)throw y;if(s(p||[]),p&&p.length>0)try{const b=p.map(N=>N.id),{data:x}=await B.database.from("event_registrations").select("event_id").in("event_id",b),A={};x?.forEach(N=>{A[N.event_id]=(A[N.event_id]||0)+1}),l(A)}catch(b){console.warn("Error fetching registrations (non-fatal):",b)}}catch(c){console.error("Error fetching events:",c),s([])}finally{a(!1)}})()},[]),e.jsx("section",{className:"py-16 bg-muted-gray",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-navy-ink mb-4",children:"Upcoming Events"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Join us for these transformative gatherings designed to equip and inspire Christian leaders."})]}),r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading events..."})}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No upcoming events at the moment."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(d=>{const c=new Date(d.event_date),h=d.location?.toLowerCase().includes("online")||d.location?.toLowerCase().includes("zoom");return e.jsx(N3,{id:d.id,title:d.title,date:c.toLocaleDateString("en-US",{month:"short",day:"numeric"}),time:c.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),location:d.location||"TBA",isOnline:h,capacity:d.capacity||0,registered:o[d.id]||0,image:d.image_url||"",description:d.description||""},d.id)})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx(me,{href:"/events",variant:"secondary",size:"lg",children:"View All Events"})})]})})}function k3(){const[t,s]=L.useState([]),[r,a]=L.useState(!0);return L.useEffect(()=>{(async()=>{try{const l=new Promise((f,p)=>setTimeout(()=>p(new Error("Request timeout")),1e4)),d=B.database.from("gallery").select("*").order("created_at",{ascending:!1}).limit(6),{data:c,error:h}=await Promise.race([d,l]);if(h)throw h;s(c||[])}catch(l){console.error("Error fetching gallery:",l),s([{id:"1",image_url:"/assets/images/gallery1.jpeg",caption:"CLM Program Event 1"},{id:"2",image_url:"/assets/images/gallery2.jpeg",caption:"Bible School Workshop"},{id:"3",image_url:"/assets/images/gallery3.jpeg",caption:"Leadership Training"},{id:"4",image_url:"/assets/images/gallery4.jpeg",caption:"Community Outreach"},{id:"5",image_url:"/assets/images/gallery5.jpeg",caption:"Youth Leadership Conference"},{id:"6",image_url:"/assets/images/gallery6.jpeg",caption:"Ministry Event"}])}finally{a(!1)}})()},[]),e.jsx("section",{className:"py-16 bg-brand-dark-blue text-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Our Gallery"}),e.jsx("p",{className:"text-lg text-gray-300 max-w-3xl mx-auto",children:"A glimpse into our programs, events, and leadership initiatives."})]}),r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-300",children:"Loading gallery..."})}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-300",children:"No gallery images available."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map(o=>e.jsx("div",{className:"overflow-hidden rounded-card border border-white/10 shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:e.jsx("img",{src:o.image_url,alt:o.caption||"Gallery image",className:"w-full h-64 object-cover"})},o.id))})]})})}const S3=[{id:1,name:"ACRP (Association of Christian Religious Practitioners)",logo:"https://placehold.co/200x100/1B1C5F/FFFFFF?text=ACRP"},{id:2,name:"SAQA Recognized Center for Faith Community Enterprise @ University of Pretoria",logo:"https://placehold.co/200x100/1B1C5F/FFFFFF?text=SAQA"},{id:3,name:"Department of Social Development Mpumalanga Province - Screening Child Protection Register Act No. 38 of 2005",logo:"https://placehold.co/200x100/1B1C5F/FFFFFF?text=DSD"},{id:4,name:"Criminal offence Registry (NARSO) National Registry for Sex offenders License",logo:"https://placehold.co/200x100/1B1C5F/FFFFFF?text=NARSO"}];function C3(){return e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-navy-ink mb-4",children:"Our Partners"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"We collaborate with churches, ministries, educational institutions, and government organizations to maximize our impact."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:S3.map(t=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-100 p-6 rounded-2xl shadow-soft hover:shadow-lg transform hover:scale-105 transition-transform transition-shadow duration-300 flex flex-col items-center text-center",children:[e.jsx("img",{src:t.logo,alt:t.name,className:"max-h-16 mb-4 object-contain"}),e.jsx("h3",{className:"text-lg font-semibold text-navy-ink",children:t.name})]},t.id))}),e.jsx("div",{className:"text-center",children:e.jsx(me,{href:"/partners",variant:"secondary",children:"View All Partners"})})]})})}function A3(){return e.jsx("section",{className:"py-16 bg-brand-dark-blue",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"bg-gradient-to-r from-brand-dark-blue to-navy-ink p-8 md:p-12 rounded-hero relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gold/10 rounded-full -translate-y-1/2 translate-x-1/3"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-gold/5 rounded-full translate-y-1/3 -translate-x-1/4"}),e.jsxs("div",{className:"relative z-10 text-center max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Grow as a Christian Leader?"}),e.jsx("p",{className:"text-lg text-gray-300 mb-8",children:"Join the Christian Leadership Movement today and be equipped to transform your community through faith and action."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx(me,{href:"/apply",variant:"primary",size:"lg",children:"Apply Now"}),e.jsx(me,{href:"/contact",variant:"outline",size:"lg",children:"Contact Us"})]})]})]})})})}async function P3(){console.log(" Testing InsForge Connection..."),console.log("Base URL:","https://93cnqxr3.us-east.insforge.app"),console.log("Has Anon Key:",!0);try{console.log(`
 Test 1: Querying users table...`);const{data:t,error:s}=await B.database.from("users").select("id, email").limit(1);s?console.error(" Users query failed:",s):console.log(" Users query successful:",t),console.log(`
 Test 2: Querying programs table...`);const{data:r,error:a}=await B.database.from("programs").select("*").limit(3);a?console.error(" Programs query failed:",a):console.log(" Programs query successful:",r),console.log(`
 Test 3: Querying content_sections table...`);const{data:o,error:l}=await B.database.from("content_sections").select("*");l?console.error(" Content sections query failed:",l):console.log(" Content sections query successful:",o),console.log(`
 Test 4: Querying strategic_objectives table...`);const{data:d,error:c}=await B.database.from("strategic_objectives").select("*");return c?console.error(" Strategic objectives query failed:",c):console.log(" Strategic objectives query successful:",d),console.log(`
 Connection test complete!`),{success:!0}}catch(t){return console.error(" Connection test failed:",t),{success:!1,error:t.message}}}typeof window<"u"&&(window.testInsForgeConnection=P3);function L3(){return L.useEffect(()=>{},[]),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsxs("main",{className:"flex-grow",children:[e.jsx(v3,{}),e.jsx(b3,{}),e.jsx(j3,{}),e.jsx(w3,{}),e.jsx(_3,{}),e.jsx(k3,{}),e.jsx(C3,{}),e.jsx(A3,{})]}),e.jsx(un,{})]})}var $u=t=>t.type==="checkbox",kc=t=>t instanceof Date,xa=t=>t==null;const t2=t=>typeof t=="object";var qr=t=>!xa(t)&&!Array.isArray(t)&&t2(t)&&!kc(t),E3=t=>qr(t)&&t.target?$u(t.target)?t.target.checked:t.target.value:t,T3=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,F3=(t,s)=>t.has(T3(s)),D3=t=>{const s=t.constructor&&t.constructor.prototype;return qr(s)&&s.hasOwnProperty("isPrototypeOf")},rx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function sr(t){let s;const r=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(rx&&(t instanceof Blob||a))&&(r||qr(t)))if(s=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!D3(t))s=t;else for(const o in t)t.hasOwnProperty(o)&&(s[o]=sr(t[o]));else return t;return s}var wm=t=>/^\w*$/.test(t),Gs=t=>t===void 0,Nm=t=>Array.isArray(t)?t.filter(Boolean):[],nx=t=>Nm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),xt=(t,s,r)=>{if(!s||!qr(t))return r;const a=(wm(s)?[s]:nx(s)).reduce((o,l)=>xa(o)?o:o[l],t);return Gs(a)||a===t?Gs(t[s])?r:t[s]:a},oo=t=>typeof t=="boolean",Bs=(t,s,r)=>{let a=-1;const o=wm(s)?[s]:nx(s),l=o.length,d=l-1;for(;++a<l;){const c=o[a];let h=r;if(a!==d){const f=t[c];h=qr(f)||Array.isArray(f)?f:isNaN(+o[a+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=h,t=t[c]}};const N0={BLUR:"blur",FOCUS_OUT:"focusout"},oi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Qo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},s2=xs.createContext(null);s2.displayName="HookFormContext";const R3=()=>xs.useContext(s2);var I3=(t,s,r,a=!0)=>{const o={defaultValues:s._defaultValues};for(const l in t)Object.defineProperty(o,l,{get:()=>{const d=l;return s._proxyFormState[d]!==oi.all&&(s._proxyFormState[d]=!a||oi.all),t[d]}});return o};const r2=typeof window<"u"?xs.useLayoutEffect:xs.useEffect;var Oa=t=>typeof t=="string",M3=(t,s,r,a,o)=>Oa(t)?(a&&s.watch.add(t),xt(r,t,o)):Array.isArray(t)?t.map(l=>(a&&s.watch.add(l),xt(r,l))):(a&&(s.watchAll=!0),r),pp=t=>xa(t)||!t2(t);function ql(t,s,r=new WeakSet){if(pp(t)||pp(s))return t===s;if(kc(t)&&kc(s))return t.getTime()===s.getTime();const a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;if(r.has(t)||r.has(s))return!0;r.add(t),r.add(s);for(const l of a){const d=t[l];if(!o.includes(l))return!1;if(l!=="ref"){const c=s[l];if(kc(d)&&kc(c)||qr(d)&&qr(c)||Array.isArray(d)&&Array.isArray(c)?!ql(d,c,r):d!==c)return!1}}return!0}var z3=(t,s,r,a,o)=>s?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[a]:o||!0}}:{},ga=t=>Array.isArray(t)?t:[t],_0=()=>{let t=[];return{get observers(){return t},next:o=>{for(const l of t)l.next&&l.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(l=>l!==o)}}),unsubscribe:()=>{t=[]}}};function n2(t,s){const r={};for(const a in t)if(t.hasOwnProperty(a)){const o=t[a],l=s[a];if(o&&qr(o)&&l){const d=n2(o,l);qr(d)&&(r[a]=d)}else t[a]&&(r[a]=l)}return r}var Mn=t=>qr(t)&&!Object.keys(t).length,ax=t=>t.type==="file",Di=t=>typeof t=="function",nm=t=>{if(!rx)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},a2=t=>t.type==="select-multiple",ix=t=>t.type==="radio",O3=t=>ix(t)||$u(t),Nf=t=>nm(t)&&t.isConnected;function q3(t,s){const r=s.slice(0,-1).length;let a=0;for(;a<r;)t=Gs(t)?a++:t[s[a++]];return t}function $3(t){for(const s in t)if(t.hasOwnProperty(s)&&!Gs(t[s]))return!1;return!0}function Ar(t,s){const r=Array.isArray(s)?s:wm(s)?[s]:nx(s),a=r.length===1?t:q3(t,r),o=r.length-1,l=r[o];return a&&delete a[l],o!==0&&(qr(a)&&Mn(a)||Array.isArray(a)&&$3(a))&&Ar(t,r.slice(0,-1)),t}var U3=t=>{for(const s in t)if(Di(t[s]))return!0;return!1};function i2(t){return Array.isArray(t)||qr(t)&&!U3(t)}function xp(t,s={}){for(const r in t)i2(t[r])?(s[r]=Array.isArray(t[r])?[]:{},xp(t[r],s[r])):Gs(t[r])||(s[r]=!0);return s}function Sd(t,s,r){r||(r=xp(s));for(const a in t)i2(t[a])?Gs(s)||pp(r[a])?r[a]=xp(t[a],Array.isArray(t[a])?[]:{}):Sd(t[a],xa(s)?{}:s[a],r[a]):r[a]=!ql(t[a],s[a]);return r}const k0={value:!1,isValid:!1},S0={value:!0,isValid:!0};var o2=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Gs(t[0].attributes.value)?Gs(t[0].value)||t[0].value===""?S0:{value:t[0].value,isValid:!0}:S0:k0}return k0},l2=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:a})=>Gs(t)?t:s?t===""?NaN:t&&+t:r&&Oa(t)?new Date(t):a?a(t):t;const C0={isValid:!1,value:null};var c2=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,C0):C0;function A0(t){const s=t.ref;return ax(s)?s.files:ix(s)?c2(t.refs).value:a2(s)?[...s.selectedOptions].map(({value:r})=>r):$u(s)?o2(t.refs).value:l2(Gs(s.value)?t.ref.value:s.value,t)}var B3=(t,s,r,a)=>{const o={};for(const l of t){const d=xt(s,l);d&&Bs(o,l,d._f)}return{criteriaMode:r,names:[...t],fields:o,shouldUseNativeValidation:a}},am=t=>t instanceof RegExp,wu=t=>Gs(t)?t:am(t)?t.source:qr(t)?am(t.value)?t.value.source:t.value:t,Ld=t=>({isOnSubmit:!t||t===oi.onSubmit,isOnBlur:t===oi.onBlur,isOnChange:t===oi.onChange,isOnAll:t===oi.all,isOnTouch:t===oi.onTouched});const P0="AsyncFunction";var V3=t=>!!t&&!!t.validate&&!!(Di(t.validate)&&t.validate.constructor.name===P0||qr(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===P0)),W3=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),gp=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const Fd=(t,s,r,a)=>{for(const o of r||Object.keys(t)){const l=xt(t,o);if(l){const{_f:d,...c}=l;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],o)&&!a)return!0;if(d.ref&&s(d.ref,d.name)&&!a)return!0;if(Fd(c,s))break}else if(qr(c)&&Fd(c,s))break}}};function L0(t,s,r){const a=xt(t,r);if(a||wm(r))return{error:a,name:r};const o=r.split(".");for(;o.length;){const l=o.join("."),d=xt(s,l),c=xt(t,l);if(d&&!Array.isArray(d)&&r!==l)return{name:r};if(c&&c.type)return{name:l,error:c};if(c&&c.root&&c.root.type)return{name:`${l}.root`,error:c.root};o.pop()}return{name:r}}var H3=(t,s,r,a)=>{r(t);const{name:o,...l}=t;return Mn(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(d=>s[d]===(!a||oi.all))},G3=(t,s,r)=>!t||!s||t===s||ga(t).some(a=>a&&(r?a===s:a.startsWith(s)||s.startsWith(a))),Z3=(t,s,r,a,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(s||t):(r?a.isOnBlur:o.isOnBlur)?!t:(r?a.isOnChange:o.isOnChange)?t:!0,Y3=(t,s)=>!Nm(xt(t,s)).length&&Ar(t,s),d2=(t,s,r)=>{const a=ga(xt(t,r));return Bs(a,"root",s[r]),Bs(t,r,a),t};function E0(t,s,r="validate"){if(Oa(t)||Array.isArray(t)&&t.every(Oa)||oo(t)&&!t)return{type:r,message:Oa(t)?t:"",ref:s}}var wd=t=>qr(t)&&!am(t)?t:{value:t,message:""},yp=async(t,s,r,a,o,l)=>{const{ref:d,refs:c,required:h,maxLength:f,minLength:p,min:y,max:b,pattern:x,validate:A,name:N,valueAsNumber:P,mount:_}=t._f,C=xt(r,N);if(!_||s.has(N))return{};const j=c?c[0]:d,w=R=>{o&&j.reportValidity&&(j.setCustomValidity(oo(R)?"":R||""),j.reportValidity())},D={},z=ix(d),U=$u(d),X=z||U,E=(P||ax(d))&&Gs(d.value)&&Gs(C)||nm(d)&&d.value===""||C===""||Array.isArray(C)&&!C.length,G=z3.bind(null,N,a,D),I=(R,$,q,Q=Qo.maxLength,he=Qo.minLength)=>{const be=R?$:q;D[N]={type:R?Q:he,message:be,ref:d,...G(R?Q:he,be)}};if(l?!Array.isArray(C)||!C.length:h&&(!X&&(E||xa(C))||oo(C)&&!C||U&&!o2(c).isValid||z&&!c2(c).isValid)){const{value:R,message:$}=Oa(h)?{value:!!h,message:h}:wd(h);if(R&&(D[N]={type:Qo.required,message:$,ref:j,...G(Qo.required,$)},!a))return w($),D}if(!E&&(!xa(y)||!xa(b))){let R,$;const q=wd(b),Q=wd(y);if(!xa(C)&&!isNaN(C)){const he=d.valueAsNumber||C&&+C;xa(q.value)||(R=he>q.value),xa(Q.value)||($=he<Q.value)}else{const he=d.valueAsDate||new Date(C),be=ke=>new Date(new Date().toDateString()+" "+ke),V=d.type=="time",de=d.type=="week";Oa(q.value)&&C&&(R=V?be(C)>be(q.value):de?C>q.value:he>new Date(q.value)),Oa(Q.value)&&C&&($=V?be(C)<be(Q.value):de?C<Q.value:he<new Date(Q.value))}if((R||$)&&(I(!!R,q.message,Q.message,Qo.max,Qo.min),!a))return w(D[N].message),D}if((f||p)&&!E&&(Oa(C)||l&&Array.isArray(C))){const R=wd(f),$=wd(p),q=!xa(R.value)&&C.length>+R.value,Q=!xa($.value)&&C.length<+$.value;if((q||Q)&&(I(q,R.message,$.message),!a))return w(D[N].message),D}if(x&&!E&&Oa(C)){const{value:R,message:$}=wd(x);if(am(R)&&!C.match(R)&&(D[N]={type:Qo.pattern,message:$,ref:d,...G(Qo.pattern,$)},!a))return w($),D}if(A){if(Di(A)){const R=await A(C,r),$=E0(R,j);if($&&(D[N]={...$,...G(Qo.validate,$.message)},!a))return w($.message),D}else if(qr(A)){let R={};for(const $ in A){if(!Mn(R)&&!a)break;const q=E0(await A[$](C,r),j,$);q&&(R={...q,...G($,q.message)},w(q.message),a&&(D[N]=R))}if(!Mn(R)&&(D[N]={ref:j,...R},!a))return D}}return w(!0),D};const K3={mode:oi.onSubmit,reValidateMode:oi.onChange,shouldFocusError:!0};function J3(t={}){let s={...K3,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Di(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},o=qr(s.defaultValues)||qr(s.values)?sr(s.defaultValues||s.values)||{}:{},l=s.shouldUnregister?{}:sr(o),d={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...p};const b={array:_0(),state:_0()},x=s.criteriaMode===oi.all,A=ce=>ye=>{clearTimeout(f),f=setTimeout(ce,ye)},N=async ce=>{if(!s.disabled&&(p.isValid||y.isValid||ce)){const ye=s.resolver?Mn((await U()).errors):await E(a,!0);ye!==r.isValid&&b.state.next({isValid:ye})}},P=(ce,ye)=>{!s.disabled&&(p.isValidating||p.validatingFields||y.isValidating||y.validatingFields)&&((ce||Array.from(c.mount)).forEach(Le=>{Le&&(ye?Bs(r.validatingFields,Le,ye):Ar(r.validatingFields,Le))}),b.state.next({validatingFields:r.validatingFields,isValidating:!Mn(r.validatingFields)}))},_=(ce,ye=[],Le,Ue,Ge=!0,qe=!0)=>{if(Ue&&Le&&!s.disabled){if(d.action=!0,qe&&Array.isArray(xt(a,ce))){const Qe=Le(xt(a,ce),Ue.argA,Ue.argB);Ge&&Bs(a,ce,Qe)}if(qe&&Array.isArray(xt(r.errors,ce))){const Qe=Le(xt(r.errors,ce),Ue.argA,Ue.argB);Ge&&Bs(r.errors,ce,Qe),Y3(r.errors,ce)}if((p.touchedFields||y.touchedFields)&&qe&&Array.isArray(xt(r.touchedFields,ce))){const Qe=Le(xt(r.touchedFields,ce),Ue.argA,Ue.argB);Ge&&Bs(r.touchedFields,ce,Qe)}(p.dirtyFields||y.dirtyFields)&&(r.dirtyFields=Sd(o,l)),b.state.next({name:ce,isDirty:I(ce,ye),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Bs(l,ce,ye)},C=(ce,ye)=>{Bs(r.errors,ce,ye),b.state.next({errors:r.errors})},j=ce=>{r.errors=ce,b.state.next({errors:r.errors,isValid:!1})},w=(ce,ye,Le,Ue)=>{const Ge=xt(a,ce);if(Ge){const qe=xt(l,ce,Gs(Le)?xt(o,ce):Le);Gs(qe)||Ue&&Ue.defaultChecked||ye?Bs(l,ce,ye?qe:A0(Ge._f)):q(ce,qe),d.mount&&N()}},D=(ce,ye,Le,Ue,Ge)=>{let qe=!1,Qe=!1;const _t={name:ce};if(!s.disabled){if(!Le||Ue){(p.isDirty||y.isDirty)&&(Qe=r.isDirty,r.isDirty=_t.isDirty=I(),qe=Qe!==_t.isDirty);const lt=ql(xt(o,ce),ye);Qe=!!xt(r.dirtyFields,ce),lt?Ar(r.dirtyFields,ce):Bs(r.dirtyFields,ce,!0),_t.dirtyFields=r.dirtyFields,qe=qe||(p.dirtyFields||y.dirtyFields)&&Qe!==!lt}if(Le){const lt=xt(r.touchedFields,ce);lt||(Bs(r.touchedFields,ce,Le),_t.touchedFields=r.touchedFields,qe=qe||(p.touchedFields||y.touchedFields)&&lt!==Le)}qe&&Ge&&b.state.next(_t)}return qe?_t:{}},z=(ce,ye,Le,Ue)=>{const Ge=xt(r.errors,ce),qe=(p.isValid||y.isValid)&&oo(ye)&&r.isValid!==ye;if(s.delayError&&Le?(h=A(()=>C(ce,Le)),h(s.delayError)):(clearTimeout(f),h=null,Le?Bs(r.errors,ce,Le):Ar(r.errors,ce)),(Le?!ql(Ge,Le):Ge)||!Mn(Ue)||qe){const Qe={...Ue,...qe&&oo(ye)?{isValid:ye}:{},errors:r.errors,name:ce};r={...r,...Qe},b.state.next(Qe)}},U=async ce=>{P(ce,!0);const ye=await s.resolver(l,s.context,B3(ce||c.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return P(ce),ye},X=async ce=>{const{errors:ye}=await U(ce);if(ce)for(const Le of ce){const Ue=xt(ye,Le);Ue?Bs(r.errors,Le,Ue):Ar(r.errors,Le)}else r.errors=ye;return ye},E=async(ce,ye,Le={valid:!0})=>{for(const Ue in ce){const Ge=ce[Ue];if(Ge){const{_f:qe,...Qe}=Ge;if(qe){const _t=c.array.has(qe.name),lt=Ge._f&&V3(Ge._f);lt&&p.validatingFields&&P([qe.name],!0);const ut=await yp(Ge,c.disabled,l,x,s.shouldUseNativeValidation&&!ye,_t);if(lt&&p.validatingFields&&P([qe.name]),ut[qe.name]&&(Le.valid=!1,ye))break;!ye&&(xt(ut,qe.name)?_t?d2(r.errors,ut,qe.name):Bs(r.errors,qe.name,ut[qe.name]):Ar(r.errors,qe.name))}!Mn(Qe)&&await E(Qe,ye,Le)}}return Le.valid},G=()=>{for(const ce of c.unMount){const ye=xt(a,ce);ye&&(ye._f.refs?ye._f.refs.every(Le=>!Nf(Le)):!Nf(ye._f.ref))&&je(ce)}c.unMount=new Set},I=(ce,ye)=>!s.disabled&&(ce&&ye&&Bs(l,ce,ye),!ql(ke(),o)),R=(ce,ye,Le)=>M3(ce,c,{...d.mount?l:Gs(ye)?o:Oa(ce)?{[ce]:ye}:ye},Le,ye),$=ce=>Nm(xt(d.mount?l:o,ce,s.shouldUnregister?xt(o,ce,[]):[])),q=(ce,ye,Le={})=>{const Ue=xt(a,ce);let Ge=ye;if(Ue){const qe=Ue._f;qe&&(!qe.disabled&&Bs(l,ce,l2(ye,qe)),Ge=nm(qe.ref)&&xa(ye)?"":ye,a2(qe.ref)?[...qe.ref.options].forEach(Qe=>Qe.selected=Ge.includes(Qe.value)):qe.refs?$u(qe.ref)?qe.refs.forEach(Qe=>{(!Qe.defaultChecked||!Qe.disabled)&&(Array.isArray(Ge)?Qe.checked=!!Ge.find(_t=>_t===Qe.value):Qe.checked=Ge===Qe.value||!!Ge)}):qe.refs.forEach(Qe=>Qe.checked=Qe.value===Ge):ax(qe.ref)?qe.ref.value="":(qe.ref.value=Ge,qe.ref.type||b.state.next({name:ce,values:sr(l)})))}(Le.shouldDirty||Le.shouldTouch)&&D(ce,Ge,Le.shouldTouch,Le.shouldDirty,!0),Le.shouldValidate&&de(ce)},Q=(ce,ye,Le)=>{for(const Ue in ye){if(!ye.hasOwnProperty(Ue))return;const Ge=ye[Ue],qe=ce+"."+Ue,Qe=xt(a,qe);(c.array.has(ce)||qr(Ge)||Qe&&!Qe._f)&&!kc(Ge)?Q(qe,Ge,Le):q(qe,Ge,Le)}},he=(ce,ye,Le={})=>{const Ue=xt(a,ce),Ge=c.array.has(ce),qe=sr(ye);Bs(l,ce,qe),Ge?(b.array.next({name:ce,values:sr(l)}),(p.isDirty||p.dirtyFields||y.isDirty||y.dirtyFields)&&Le.shouldDirty&&b.state.next({name:ce,dirtyFields:Sd(o,l),isDirty:I(ce,qe)})):Ue&&!Ue._f&&!xa(qe)?Q(ce,qe,Le):q(ce,qe,Le),gp(ce,c)&&b.state.next({...r,name:ce}),b.state.next({name:d.mount?ce:void 0,values:sr(l)})},be=async ce=>{d.mount=!0;const ye=ce.target;let Le=ye.name,Ue=!0;const Ge=xt(a,Le),qe=lt=>{Ue=Number.isNaN(lt)||kc(lt)&&isNaN(lt.getTime())||ql(lt,xt(l,Le,lt))},Qe=Ld(s.mode),_t=Ld(s.reValidateMode);if(Ge){let lt,ut;const Et=ye.type?A0(Ge._f):E3(ce),ht=ce.type===N0.BLUR||ce.type===N0.FOCUS_OUT,ws=!W3(Ge._f)&&!s.resolver&&!xt(r.errors,Le)&&!Ge._f.deps||Z3(ht,xt(r.touchedFields,Le),r.isSubmitted,_t,Qe),es=gp(Le,c,ht);Bs(l,Le,Et),ht?(!ye||!ye.readOnly)&&(Ge._f.onBlur&&Ge._f.onBlur(ce),h&&h(0)):Ge._f.onChange&&Ge._f.onChange(ce);const yt=D(Le,Et,ht),Ut=!Mn(yt)||es;if(!ht&&b.state.next({name:Le,type:ce.type,values:sr(l)}),ws)return(p.isValid||y.isValid)&&(s.mode==="onBlur"?ht&&N():ht||N()),Ut&&b.state.next({name:Le,...es?{}:yt});if(!ht&&es&&b.state.next({...r}),s.resolver){const{errors:is}=await U([Le]);if(qe(Et),Ue){const Tt=L0(r.errors,a,Le),Kt=L0(is,a,Tt.name||Le);lt=Kt.error,Le=Kt.name,ut=Mn(is)}}else P([Le],!0),lt=(await yp(Ge,c.disabled,l,x,s.shouldUseNativeValidation))[Le],P([Le]),qe(Et),Ue&&(lt?ut=!1:(p.isValid||y.isValid)&&(ut=await E(a,!0)));Ue&&(Ge._f.deps&&(!Array.isArray(Ge._f.deps)||Ge._f.deps.length>0)&&de(Ge._f.deps),z(Le,ut,lt,yt))}},V=(ce,ye)=>{if(xt(r.errors,ye)&&ce.focus)return ce.focus(),1},de=async(ce,ye={})=>{let Le,Ue;const Ge=ga(ce);if(s.resolver){const qe=await X(Gs(ce)?ce:Ge);Le=Mn(qe),Ue=ce?!Ge.some(Qe=>xt(qe,Qe)):Le}else ce?(Ue=(await Promise.all(Ge.map(async qe=>{const Qe=xt(a,qe);return await E(Qe&&Qe._f?{[qe]:Qe}:Qe)}))).every(Boolean),!(!Ue&&!r.isValid)&&N()):Ue=Le=await E(a);return b.state.next({...!Oa(ce)||(p.isValid||y.isValid)&&Le!==r.isValid?{}:{name:ce},...s.resolver||!ce?{isValid:Le}:{},errors:r.errors}),ye.shouldFocus&&!Ue&&Fd(a,V,ce?Ge:c.mount),Ue},ke=(ce,ye)=>{let Le={...d.mount?l:o};return ye&&(Le=n2(ye.dirtyFields?r.dirtyFields:r.touchedFields,Le)),Gs(ce)?Le:Oa(ce)?xt(Le,ce):ce.map(Ue=>xt(Le,Ue))},te=(ce,ye)=>({invalid:!!xt((ye||r).errors,ce),isDirty:!!xt((ye||r).dirtyFields,ce),error:xt((ye||r).errors,ce),isValidating:!!xt(r.validatingFields,ce),isTouched:!!xt((ye||r).touchedFields,ce)}),O=ce=>{ce&&ga(ce).forEach(ye=>Ar(r.errors,ye)),b.state.next({errors:ce?r.errors:{}})},re=(ce,ye,Le)=>{const Ue=(xt(a,ce,{_f:{}})._f||{}).ref,Ge=xt(r.errors,ce)||{},{ref:qe,message:Qe,type:_t,...lt}=Ge;Bs(r.errors,ce,{...lt,...ye,ref:Ue}),b.state.next({name:ce,errors:r.errors,isValid:!1}),Le&&Le.shouldFocus&&Ue&&Ue.focus&&Ue.focus()},K=(ce,ye)=>Di(ce)?b.state.subscribe({next:Le=>"values"in Le&&ce(R(void 0,ye),Le)}):R(ce,ye,!0),ne=ce=>b.state.subscribe({next:ye=>{G3(ce.name,ye.name,ce.exact)&&H3(ye,ce.formState||p,At,ce.reRenderRoot)&&ce.callback({values:{...l},...r,...ye,defaultValues:o})}}).unsubscribe,pe=ce=>(d.mount=!0,y={...y,...ce.formState},ne({...ce,formState:y})),je=(ce,ye={})=>{for(const Le of ce?ga(ce):c.mount)c.mount.delete(Le),c.array.delete(Le),ye.keepValue||(Ar(a,Le),Ar(l,Le)),!ye.keepError&&Ar(r.errors,Le),!ye.keepDirty&&Ar(r.dirtyFields,Le),!ye.keepTouched&&Ar(r.touchedFields,Le),!ye.keepIsValidating&&Ar(r.validatingFields,Le),!s.shouldUnregister&&!ye.keepDefaultValue&&Ar(o,Le);b.state.next({values:sr(l)}),b.state.next({...r,...ye.keepDirty?{isDirty:I()}:{}}),!ye.keepIsValid&&N()},_e=({disabled:ce,name:ye})=>{(oo(ce)&&d.mount||ce||c.disabled.has(ye))&&(ce?c.disabled.add(ye):c.disabled.delete(ye))},ue=(ce,ye={})=>{let Le=xt(a,ce);const Ue=oo(ye.disabled)||oo(s.disabled);return Bs(a,ce,{...Le||{},_f:{...Le&&Le._f?Le._f:{ref:{name:ce}},name:ce,mount:!0,...ye}}),c.mount.add(ce),Le?_e({disabled:oo(ye.disabled)?ye.disabled:s.disabled,name:ce}):w(ce,!0,ye.value),{...Ue?{disabled:ye.disabled||s.disabled}:{},...s.progressive?{required:!!ye.required,min:wu(ye.min),max:wu(ye.max),minLength:wu(ye.minLength),maxLength:wu(ye.maxLength),pattern:wu(ye.pattern)}:{},name:ce,onChange:be,onBlur:be,ref:Ge=>{if(Ge){ue(ce,ye),Le=xt(a,ce);const qe=Gs(Ge.value)&&Ge.querySelectorAll&&Ge.querySelectorAll("input,select,textarea")[0]||Ge,Qe=O3(qe),_t=Le._f.refs||[];if(Qe?_t.find(lt=>lt===qe):qe===Le._f.ref)return;Bs(a,ce,{_f:{...Le._f,...Qe?{refs:[..._t.filter(Nf),qe,...Array.isArray(xt(o,ce))?[{}]:[]],ref:{type:qe.type,name:ce}}:{ref:qe}}}),w(ce,!1,void 0,qe)}else Le=xt(a,ce,{}),Le._f&&(Le._f.mount=!1),(s.shouldUnregister||ye.shouldUnregister)&&!(F3(c.array,ce)&&d.action)&&c.unMount.add(ce)}}},xe=()=>s.shouldFocusError&&Fd(a,V,c.mount),Ie=ce=>{oo(ce)&&(b.state.next({disabled:ce}),Fd(a,(ye,Le)=>{const Ue=xt(a,Le);Ue&&(ye.disabled=Ue._f.disabled||ce,Array.isArray(Ue._f.refs)&&Ue._f.refs.forEach(Ge=>{Ge.disabled=Ue._f.disabled||ce}))},0,!1))},He=(ce,ye)=>async Le=>{let Ue;Le&&(Le.preventDefault&&Le.preventDefault(),Le.persist&&Le.persist());let Ge=sr(l);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:qe,values:Qe}=await U();r.errors=qe,Ge=sr(Qe)}else await E(a);if(c.disabled.size)for(const qe of c.disabled)Ar(Ge,qe);if(Ar(r.errors,"root"),Mn(r.errors)){b.state.next({errors:{}});try{await ce(Ge,Le)}catch(qe){Ue=qe}}else ye&&await ye({...r.errors},Le),xe(),setTimeout(xe);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(r.errors)&&!Ue,submitCount:r.submitCount+1,errors:r.errors}),Ue)throw Ue},Je=(ce,ye={})=>{xt(a,ce)&&(Gs(ye.defaultValue)?he(ce,sr(xt(o,ce))):(he(ce,ye.defaultValue),Bs(o,ce,sr(ye.defaultValue))),ye.keepTouched||Ar(r.touchedFields,ce),ye.keepDirty||(Ar(r.dirtyFields,ce),r.isDirty=ye.defaultValue?I(ce,sr(xt(o,ce))):I()),ye.keepError||(Ar(r.errors,ce),p.isValid&&N()),b.state.next({...r}))},De=(ce,ye={})=>{const Le=ce?sr(ce):o,Ue=sr(Le),Ge=Mn(ce),qe=Ge?o:Ue;if(ye.keepDefaultValues||(o=Le),!ye.keepValues){if(ye.keepDirtyValues){const Qe=new Set([...c.mount,...Object.keys(Sd(o,l))]);for(const _t of Array.from(Qe))xt(r.dirtyFields,_t)?Bs(qe,_t,xt(l,_t)):he(_t,xt(qe,_t))}else{if(rx&&Gs(ce))for(const Qe of c.mount){const _t=xt(a,Qe);if(_t&&_t._f){const lt=Array.isArray(_t._f.refs)?_t._f.refs[0]:_t._f.ref;if(nm(lt)){const ut=lt.closest("form");if(ut){ut.reset();break}}}}if(ye.keepFieldsRef)for(const Qe of c.mount)he(Qe,xt(qe,Qe));else a={}}l=s.shouldUnregister?ye.keepDefaultValues?sr(o):{}:sr(qe),b.array.next({values:{...qe}}),b.state.next({values:{...qe}})}c={mount:ye.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!p.isValid||!!ye.keepIsValid||!!ye.keepDirtyValues||!s.shouldUnregister&&!Mn(qe),d.watch=!!s.shouldUnregister,b.state.next({submitCount:ye.keepSubmitCount?r.submitCount:0,isDirty:Ge?!1:ye.keepDirty?r.isDirty:!!(ye.keepDefaultValues&&!ql(ce,o)),isSubmitted:ye.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ge?{}:ye.keepDirtyValues?ye.keepDefaultValues&&l?Sd(o,l):r.dirtyFields:ye.keepDefaultValues&&ce?Sd(o,ce):ye.keepDirty?r.dirtyFields:{},touchedFields:ye.keepTouched?r.touchedFields:{},errors:ye.keepErrors?r.errors:{},isSubmitSuccessful:ye.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},le=(ce,ye)=>De(Di(ce)?ce(l):ce,ye),Nt=(ce,ye={})=>{const Le=xt(a,ce),Ue=Le&&Le._f;if(Ue){const Ge=Ue.refs?Ue.refs[0]:Ue.ref;Ge.focus&&(Ge.focus(),ye.shouldSelect&&Di(Ge.select)&&Ge.select())}},At=ce=>{r={...r,...ce}},Ye={control:{register:ue,unregister:je,getFieldState:te,handleSubmit:He,setError:re,_subscribe:ne,_runSchema:U,_focusError:xe,_getWatch:R,_getDirty:I,_setValid:N,_setFieldArray:_,_setDisabledField:_e,_setErrors:j,_getFieldArray:$,_reset:De,_resetDefaultValues:()=>Di(s.defaultValues)&&s.defaultValues().then(ce=>{le(ce,s.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:G,_disableForm:Ie,_subjects:b,_proxyFormState:p,get _fields(){return a},get _formValues(){return l},get _state(){return d},set _state(ce){d=ce},get _defaultValues(){return o},get _names(){return c},set _names(ce){c=ce},get _formState(){return r},get _options(){return s},set _options(ce){s={...s,...ce}}},subscribe:pe,trigger:de,register:ue,handleSubmit:He,watch:K,setValue:he,getValues:ke,reset:le,resetField:Je,clearErrors:O,unregister:je,setError:re,setFocus:Nt,getFieldState:te};return{...Ye,formControl:Ye}}var Ml=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(Math.random()*16+t)%16|0;return(s=="x"?r:r&3|8).toString(16)})},_f=(t,s,r={})=>r.shouldFocus||Gs(r.shouldFocus)?r.focusName||`${t}.${Gs(r.focusIndex)?s:r.focusIndex}.`:"",kf=(t,s)=>[...t,...ga(s)],Sf=t=>Array.isArray(t)?t.map(()=>{}):void 0;function Cf(t,s,r){return[...t.slice(0,s),...ga(r),...t.slice(s)]}var Af=(t,s,r)=>Array.isArray(t)?(Gs(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(s,1)[0]),t):[],Pf=(t,s)=>[...ga(s),...ga(t)];function Q3(t,s){let r=0;const a=[...t];for(const o of s)a.splice(o-r,1),r++;return Nm(a).length?a:[]}var Lf=(t,s)=>Gs(s)?[]:Q3(t,ga(s).sort((r,a)=>r-a)),Ef=(t,s,r)=>{[t[s],t[r]]=[t[r],t[s]]},T0=(t,s,r)=>(t[s]=r,t);function X3(t){const s=R3(),{control:r=s.control,name:a,keyName:o="id",shouldUnregister:l,rules:d}=t,[c,h]=xs.useState(r._getFieldArray(a)),f=xs.useRef(r._getFieldArray(a).map(Ml)),p=xs.useRef(!1);r._names.array.add(a),xs.useMemo(()=>d&&c.length>=0&&r.register(a,d),[r,a,c.length,d]),r2(()=>r._subjects.array.subscribe({next:({values:w,name:D})=>{if(D===a||!D){const z=xt(w,a);Array.isArray(z)&&(h(z),f.current=z.map(Ml))}}}).unsubscribe,[r,a]);const y=xs.useCallback(w=>{p.current=!0,r._setFieldArray(a,w)},[r,a]),b=(w,D)=>{const z=ga(sr(w)),U=kf(r._getFieldArray(a),z);r._names.focus=_f(a,U.length-1,D),f.current=kf(f.current,z.map(Ml)),y(U),h(U),r._setFieldArray(a,U,kf,{argA:Sf(w)})},x=(w,D)=>{const z=ga(sr(w)),U=Pf(r._getFieldArray(a),z);r._names.focus=_f(a,0,D),f.current=Pf(f.current,z.map(Ml)),y(U),h(U),r._setFieldArray(a,U,Pf,{argA:Sf(w)})},A=w=>{const D=Lf(r._getFieldArray(a),w);f.current=Lf(f.current,w),y(D),h(D),!Array.isArray(xt(r._fields,a))&&Bs(r._fields,a,void 0),r._setFieldArray(a,D,Lf,{argA:w})},N=(w,D,z)=>{const U=ga(sr(D)),X=Cf(r._getFieldArray(a),w,U);r._names.focus=_f(a,w,z),f.current=Cf(f.current,w,U.map(Ml)),y(X),h(X),r._setFieldArray(a,X,Cf,{argA:w,argB:Sf(D)})},P=(w,D)=>{const z=r._getFieldArray(a);Ef(z,w,D),Ef(f.current,w,D),y(z),h(z),r._setFieldArray(a,z,Ef,{argA:w,argB:D},!1)},_=(w,D)=>{const z=r._getFieldArray(a);Af(z,w,D),Af(f.current,w,D),y(z),h(z),r._setFieldArray(a,z,Af,{argA:w,argB:D},!1)},C=(w,D)=>{const z=sr(D),U=T0(r._getFieldArray(a),w,z);f.current=[...U].map((X,E)=>!X||E===w?Ml():f.current[E]),y(U),h([...U]),r._setFieldArray(a,U,T0,{argA:w,argB:z},!0,!1)},j=w=>{const D=ga(sr(w));f.current=D.map(Ml),y([...D]),h([...D]),r._setFieldArray(a,[...D],z=>z,{},!0,!1)};return xs.useEffect(()=>{if(r._state.action=!1,gp(a,r._names)&&r._subjects.state.next({...r._formState}),p.current&&(!Ld(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Ld(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([a]).then(w=>{const D=xt(w.errors,a),z=xt(r._formState.errors,a);(z?!D&&z.type||D&&(z.type!==D.type||z.message!==D.message):D&&D.type)&&(D?Bs(r._formState.errors,a,D):Ar(r._formState.errors,a),r._subjects.state.next({errors:r._formState.errors}))});else{const w=xt(r._fields,a);w&&w._f&&!(Ld(r._options.reValidateMode).isOnSubmit&&Ld(r._options.mode).isOnSubmit)&&yp(w,r._names.disabled,r._formValues,r._options.criteriaMode===oi.all,r._options.shouldUseNativeValidation,!0).then(D=>!Mn(D)&&r._subjects.state.next({errors:d2(r._formState.errors,D,a)}))}r._subjects.state.next({name:a,values:sr(r._formValues)}),r._names.focus&&Fd(r._fields,(w,D)=>{if(r._names.focus&&D.startsWith(r._names.focus)&&w.focus)return w.focus(),1}),r._names.focus="",r._setValid(),p.current=!1},[c,a,r]),xs.useEffect(()=>(!xt(r._formValues,a)&&r._setFieldArray(a),()=>{const w=(D,z)=>{const U=xt(r._fields,D);U&&U._f&&(U._f.mount=z)};r._options.shouldUnregister||l?r.unregister(a):w(a,!1)}),[a,r,o,l]),{swap:xs.useCallback(P,[y,a,r]),move:xs.useCallback(_,[y,a,r]),prepend:xs.useCallback(x,[y,a,r]),append:xs.useCallback(b,[y,a,r]),remove:xs.useCallback(A,[y,a,r]),insert:xs.useCallback(N,[y,a,r]),update:xs.useCallback(C,[y,a,r]),replace:xs.useCallback(j,[y,a,r]),fields:xs.useMemo(()=>c.map((w,D)=>({...w,[o]:f.current[D]||Ml()})),[c,o])}}function hn(t={}){const s=xs.useRef(void 0),r=xs.useRef(void 0),[a,o]=xs.useState({isDirty:!1,isValidating:!1,isLoading:Di(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Di(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:a},t.defaultValues&&!Di(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:d,...c}=J3(t);s.current={...c,formState:a}}const l=s.current.control;return l._options=t,r2(()=>{const d=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(c=>({...c,isReady:!0})),l._formState.isReady=!0,d},[l]),xs.useEffect(()=>l._disableForm(t.disabled),[l,t.disabled]),xs.useEffect(()=>{t.mode&&(l._options.mode=t.mode),t.reValidateMode&&(l._options.reValidateMode=t.reValidateMode)},[l,t.mode,t.reValidateMode]),xs.useEffect(()=>{t.errors&&(l._setErrors(t.errors),l._focusError())},[l,t.errors]),xs.useEffect(()=>{t.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,t.shouldUnregister]),xs.useEffect(()=>{if(l._proxyFormState.isDirty){const d=l._getDirty();d!==a.isDirty&&l._subjects.state.next({isDirty:d})}},[l,a.isDirty]),xs.useEffect(()=>{t.values&&!ql(t.values,r.current)?(l._reset(t.values,{keepFieldsRef:!0,...l._options.resetOptions}),r.current=t.values,o(d=>({...d}))):l._resetDefaultValues()},[l,t.values]),xs.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),s.current.formState=I3(a,l),s.current}function ek(){const t=cs(),s=Rc(),{signIn:r}=ym(),[a,o]=L.useState(!1),[l,d]=L.useState(!1),[c,h]=L.useState(null),[f,p]=L.useState(null);L.useEffect(()=>{s.state?.message&&(p(s.state.message),window.history.replaceState({},document.title))},[s]);const{register:y,handleSubmit:b,formState:{errors:x}}=hn(),A=async N=>{d(!0),h(null);try{console.log("Attempting sign in with email:",N.email),console.log("Base URL:","https://93cnqxr3.us-east.insforge.app"),console.log("Anon Key present:",!0);const P=await r(N.email,N.password);if(console.log("Sign in result:",P),console.log("Result type:",typeof P),console.log("Result keys:",Object.keys(P||{})),P&&"error"in P&&P.error){const _=typeof P.error=="string"?P.error:P.error?.message||"Failed to sign in. Please check your credentials.";console.error("Sign in error:",_),h(_),d(!1);return}if(P&&"user"in P&&P.user){try{const{data:_,error:C}=await B.database.from("user_profiles").select("*").eq("user_id",P.user.id).maybeSingle();if(C&&console.error("Error fetching profile:",C),!_)try{const{error:j}=await B.database.from("user_profiles").insert([{user_id:P.user.id,role:"user"}]);j&&console.error("Error creating profile:",j)}catch(j){console.error("Exception creating profile:",j)}}catch(_){console.error("Exception fetching/creating profile:",_)}try{const{data:_}=await B.database.from("user_profiles").select("role").eq("user_id",P.user.id).maybeSingle();_&&(_.role==="admin"||_.role==="super_admin")?t("/admin"):t("/dashboard")}catch(_){console.error("Error checking user role for redirect:",_),t("/dashboard")}}else console.error("Unexpected result structure:",P),h("Unexpected error: No user returned from sign in. Please check your credentials or try registering a new account."),d(!1)}catch(P){console.error("Login exception:",P),console.error("Error details:",{message:P?.message,stack:P?.stack,name:P?.name,toString:P?.toString(),cause:P?.cause});let _=P?.message||P?.toString()||"An unexpected error occurred.";(_.includes("Failed to fetch")||_.includes("NetworkError"))&&(_=`Connection failed. Please check:
1. Your internet connection
2. That you restarted the dev server after updating .env
3. That your InsForge project is active (not paused)
4. Browser console for more details`),h(`Sign in failed: ${_}. Please check your credentials or try registering a new account.`),d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:"/assets/images/hero.jpeg",alt:"Logo",className:"mx-auto h-16 w-auto mb-4 animate-fadeIn"}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to access your dashboard"})]}),e.jsxs("form",{onSubmit:b(A),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(vn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"email",...y("email",{required:"Email is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"your@email.com"})]}),x.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:a?"text":"password",...y("password",{required:"Password is required"}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:a?e.jsx(Tc,{size:20}):e.jsx(di,{size:20})})]}),x.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.password.message})]}),f&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 text-green-800 px-5 py-4 rounded-xl text-sm font-medium shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{children:f})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",...y("rememberMe"),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Remember me"})]}),e.jsx(ot,{to:"/forgot-password",className:"text-sm text-gold hover:underline",children:"Forgot password?"})]}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:c}),e.jsx(me,{type:"submit",variant:"primary",className:"w-full py-3 rounded-xl",disabled:l,children:l?"Signing In...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx(ot,{to:"/register",className:"text-gold hover:underline font-medium",children:"Register here"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(ot,{to:"/",className:"text-sm text-gray-600 hover:text-gold flex items-center justify-center",children:" Back to home"})})]})})})}function tk(){const t=cs(),{signUp:s}=ym(),[r,a]=L.useState(!1),[o,l]=L.useState(!1),[d,c]=L.useState(!1),[h,f]=L.useState(null),{register:p,handleSubmit:y,watch:b,formState:{errors:x}}=hn(),A=b("password"),N=async P=>{c(!0),f(null);try{console.log("Attempting to sign up user:",P.email);const _=await s(P.email,P.password);if(console.log("SignUp result:",_),"error"in _&&_.error){console.error("SignUp error:",_.error);const C=typeof _.error=="string"?_.error:_.error.message||"Failed to create account. Please try again.";f(C),c(!1);return}if(!("user"in _)||!_.user){console.log("Account created successfully, navigating to login"),t("/login",{state:{message:" Your account has been created successfully! Please log in with your email and password to continue."}});return}console.log("User created, ID:",_.user.id);try{const{error:C}=await B.database.from("users").insert([{id:_.user.id,email:P.email,nickname:`${P.firstName} ${P.lastName}`}]);C?C.code!=="23505"&&!C.message?.includes("duplicate")?console.error("Error creating user record:",C):(console.log("User record already exists, updating..."),await B.database.from("users").update({email:P.email,nickname:`${P.firstName} ${P.lastName}`}).eq("id",_.user.id)):console.log("User record created in public.users"),await new Promise(j=>setTimeout(j,300))}catch(C){console.error("Exception creating user record:",C)}try{const{error:C}=await B.database.from("user_profiles").insert([{user_id:_.user.id,phone:P.phone,role:"user"}]);C&&console.error("Error creating profile:",C)}catch(C){console.error("Exception creating profile:",C)}f(null),c(!1),t("/login",{state:{message:" Welcome to Christian Leadership Movement! Your account has been created successfully. You can now log in with your email and password to access all features."}});return}catch(_){console.error("Registration exception:",_);const C=_?.message||_?.toString()||"An error occurred. Please try again.";f(C)}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-muted-gray flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"max-w-2xl w-full",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/assets/images/hero.jpeg",alt:"CLM Logo",className:"mx-auto h-16 w-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-gray-600",children:"Join the Christian Leadership Movement"})]}),e.jsxs("form",{onSubmit:y(N),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",...p("firstName",{required:"First name is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"John"})]}),x.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.firstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",...p("lastName",{required:"Last name is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Doe"})]}),x.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.lastName.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(vn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"email",...p("email",{required:"Email is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"your@email.com"})]}),x.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(bm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"tel",...p("phone",{required:"Phone number is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"+27 12 345 6789"})]}),x.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.phone.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:r?"text":"password",...p("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:""}),e.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:r?e.jsx(Tc,{size:20}):e.jsx(di,{size:20})})]}),x.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:o?"text":"password",...p("confirmPassword",{required:"Please confirm your password",validate:P=>P===A||"Passwords do not match"}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:""}),e.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:o?e.jsx(Tc,{size:20}):e.jsx(di,{size:20})})]}),x.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.confirmPassword.message})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",...p("agreeToTerms",{required:"You must agree to the terms"}),className:"mr-2 mt-1"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["I agree to the"," ",e.jsx(ot,{to:"/terms-of-service",className:"text-gold hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx(ot,{to:"/privacy-policy",className:"text-gold hover:underline",children:"Privacy Policy"})]})]}),x.agreeToTerms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.agreeToTerms.message})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:h}),e.jsx(me,{type:"submit",variant:"primary",className:"w-full",disabled:d,children:d?"Creating Account...":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx(ot,{to:"/login",className:"text-gold hover:underline font-medium",children:"Sign in here"})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(ot,{to:"/",className:"text-sm text-gray-600 hover:text-gold flex items-center justify-center",children:" Back to home"})})]})})})}function sk(){const t=cs(),[s,r]=L.useState(!1),[a,o]=L.useState(null),[l,d]=L.useState(!1),{register:c,handleSubmit:h,formState:{errors:f}}=hn(),p=async y=>{r(!0),o(null),d(!1);try{const b=Ou(),x=vm(),A=await fetch(`${b}/api/auth/v1/recover`,{method:"POST",headers:{"Content-Type":"application/json",apikey:x,Authorization:`Bearer ${x}`},body:JSON.stringify({email:y.email})}),N=await A.json();if(!A.ok)throw new Error(N.error?.message||N.message||"Failed to send reset email");d(!0)}catch(b){console.error("Password reset error:",b);const x=b?.message||b?.toString()||"An error occurred. Please try again.";o(x)}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:"/assets/images/hero.jpeg",alt:"Logo",className:"mx-auto h-16 w-auto mb-4 animate-fadeIn"}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600",children:"Enter your email to receive a password reset link"})]}),l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center",children:[e.jsx(rt,{className:"mx-auto text-green-600 mb-4",size:48}),e.jsx("h2",{className:"text-xl font-bold text-green-800 mb-2",children:"Check Your Email"}),e.jsx("p",{className:"text-green-700",children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions to reset your password."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{variant:"primary",className:"w-full",onClick:()=>t("/login"),children:"Back to Login"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Didn't receive the email?"," ",e.jsx("button",{onClick:()=>d(!1),className:"text-gold hover:underline font-medium",children:"Try again"})]})})]})]}):e.jsxs("form",{onSubmit:h(p),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(vn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"email",...c("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"your@email.com"})]}),f.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.email.message})]}),a&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:a}),e.jsx(me,{type:"submit",variant:"primary",className:"w-full py-3 rounded-xl",disabled:s,children:s?"Sending Reset Link...":"Send Reset Link"}),e.jsx("div",{className:"text-center",children:e.jsxs(ot,{to:"/login",className:"text-sm text-gray-600 hover:text-gold flex items-center justify-center",children:[e.jsx(zn,{size:16,className:"mr-2"}),"Back to Login"]})})]})]})})})}function rk(){const t=cs(),[s]=Iu(),[r,a]=L.useState(!1),[o,l]=L.useState(!1),[d,c]=L.useState(!1),[h,f]=L.useState(null),[p,y]=L.useState(!1),[b,x]=L.useState(null);L.useEffect(()=>{const w=s.get("token")||s.get("access_token")||s.get("type");if(w)x(w);else{const D=window.location.hash,U=new URLSearchParams(D.substring(1)).get("access_token");U?x(U):f("Invalid or missing reset token. Please request a new password reset link.")}},[s]);const{register:A,handleSubmit:N,watch:P,formState:{errors:_}}=hn(),C=P("password"),j=async w=>{c(!0),f(null);try{const D=Ou(),z=vm(),U=b||s.get("access_token")||window.location.hash.split("access_token=")[1]?.split("&")[0];if(!U)throw new Error("Reset token is missing. Please use the link from your email.");const X=await fetch(`${D}/api/auth/v1/user`,{method:"PUT",headers:{"Content-Type":"application/json",apikey:z,Authorization:`Bearer ${U}`},body:JSON.stringify({password:w.password})}),E=await X.json();if(!X.ok)throw new Error(E.error?.message||E.message||"Failed to reset password");y(!0),setTimeout(()=>{t("/login")},3e3)}catch(D){console.error("Password reset error:",D);const z=D?.message||D?.toString()||"An error occurred. Please try again.";f(z),c(!1)}};return!b&&!h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-10 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading..."})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:"/assets/images/hero.jpeg",alt:"Logo",className:"mx-auto h-16 w-auto mb-4 animate-fadeIn"}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600",children:"Enter your new password"})]}),p?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center",children:[e.jsx(rt,{className:"mx-auto text-green-600 mb-4",size:48}),e.jsx("h2",{className:"text-xl font-bold text-green-800 mb-2",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-green-700",children:"Your password has been reset successfully. You will be redirected to the login page shortly."})]}),e.jsx(me,{variant:"primary",className:"w-full",onClick:()=>t("/login"),children:"Go to Login"})]}):e.jsxs("form",{onSubmit:N(j),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:r?"text":"password",...A("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:r?e.jsx(Tc,{size:20}):e.jsx(di,{size:20})})]}),_.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:o?"text":"password",...A("confirmPassword",{required:"Please confirm your password",validate:w=>w===C||"Passwords do not match"}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:o?e.jsx(Tc,{size:20}):e.jsx(di,{size:20})})]}),_.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.confirmPassword.message})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:h}),e.jsx(me,{type:"submit",variant:"primary",className:"w-full py-3 rounded-xl",disabled:d,children:d?"Resetting Password...":"Reset Password"}),e.jsx("div",{className:"text-center",children:e.jsxs(ot,{to:"/login",className:"text-sm text-gray-600 hover:text-gold flex items-center justify-center",children:[e.jsx(zn,{size:16,className:"mr-2"}),"Back to Login"]})})]})]})})})}function nk(){const t=cs(),{user:s}=Mt(),{signOut:r}=ym(),[a,o]=L.useState(!1),l=async()=>{await r(),t("/login")},d=[{icon:Fu,label:"Dashboard",path:"/dashboard"},{icon:nl,label:"Profile",path:"/dashboard/profile"},{icon:ys,label:"Applications",path:"/dashboard/applications"},{icon:as,label:"My Courses",path:"/dashboard/courses"},{icon:ns,label:"Events",path:"/dashboard/events"},{icon:sl,label:"Notifications",path:"/dashboard/notifications"},{icon:Ms,label:"Certificates",path:"/dashboard/certificates"},{icon:vn,label:"Messages",path:"/dashboard/messages"},{icon:Qt,label:"Volunteer",path:"/dashboard/volunteer"},{icon:G6,label:"Attendance",path:"/dashboard/attendance"},{icon:Wd,label:"Security",path:"/dashboard/security"}];return e.jsxs("div",{className:"min-h-screen bg-muted-gray flex",children:[e.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-64 bg-brand-dark-blue text-white transform transition-transform
        ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-8",children:"CLM Portal"}),e.jsx("div",{className:"mb-4",children:e.jsxs(ot,{to:"/",className:"flex items-center space-x-3 p-3 rounded-card hover:bg-white/10 transition-colors bg-white/5",children:[e.jsx(Fu,{size:20}),e.jsx("span",{children:"Back to Home"})]})}),e.jsx("nav",{className:"space-y-2",children:d.map(c=>e.jsxs(ot,{to:c.path,className:"flex items-center space-x-3 p-3 rounded-card hover:bg-white/10 transition-colors",onClick:()=>o(!1),children:[e.jsx(c.icon,{size:20}),e.jsx("span",{children:c.label})]},c.path))})]}),e.jsx("div",{className:"absolute bottom-0 w-full p-6",children:e.jsxs("button",{onClick:l,className:"flex items-center space-x-3 p-3 rounded-card hover:bg-white/10 transition-colors w-full",children:[e.jsx(tm,{size:20}),e.jsx("span",{children:"Logout"})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"bg-white shadow-soft p-4 flex items-center justify-between lg:justify-end",children:[e.jsx("button",{onClick:()=>o(!a),className:"lg:hidden text-navy-ink",children:a?e.jsx(Fr,{size:24}):e.jsx(tx,{size:24})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ot,{to:"/dashboard/notifications",className:"relative",children:e.jsx(sl,{className:"text-navy-ink",size:24})}),e.jsx("span",{className:"text-navy-ink font-medium",children:s?.name||s?.email||"User"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold flex items-center justify-center text-white font-bold",children:s?.name?.charAt(0)||s?.email?.charAt(0)||"U"})]})]}),e.jsx("main",{className:"flex-1 p-6",children:e.jsx(ov,{})})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)})]})}function ak(){const{user:t,isLoaded:s}=Mt(),[r,a]=L.useState({courses:0,events:0,applications:0,notifications:0}),[o,l]=L.useState(!0),[d,c]=L.useState([]);L.useEffect(()=>{if(!s||!t)return;(async()=>{try{const{data:p}=await B.database.from("user_course_progress").select("course_id").eq("user_id",t.id),y=new Date().toISOString(),{data:b}=await B.database.from("event_registrations").select("event_id, events(*)").eq("user_id",t.id).gte("events.event_date",y),{data:x}=await B.database.from("applications").select("*").eq("user_id",t.id),{data:A}=await B.database.from("notifications").select("*").eq("user_id",t.id).eq("read",!1);a({courses:p?.length||0,events:b?.length||0,applications:x?.length||0,notifications:A?.length||0});const{data:N}=await B.database.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(5);c(N?.map(P=>({id:P.id,type:P.type,title:P.title,date:new Date(P.created_at).toLocaleString()}))||[])}catch(p){console.error("Error fetching dashboard data:",p)}finally{l(!1)}})()},[t,s]);const h=[{icon:as,label:"Active Courses",value:r.courses.toString(),color:"bg-blue-500"},{icon:ns,label:"Upcoming Events",value:r.events.toString(),color:"bg-green-500"},{icon:ys,label:"Applications",value:r.applications.toString(),color:"bg-amber-500"},{icon:Ms,label:"Notifications",value:r.notifications.toString(),color:"bg-purple-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:["Welcome Back, ",t?.name||t?.email||"User","!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your learning journey"})]}),o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map(f=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:`${f.color} w-12 h-12 rounded-card flex items-center justify-center mb-4`,children:e.jsx(f.icon,{className:"text-white",size:24})}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:f.label}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:f.value})]},f.label))})}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(me,{href:"/dashboard/courses",variant:"primary",className:"w-full",children:"Continue Learning"}),e.jsx(me,{href:"/dashboard/events",variant:"secondary",className:"w-full",children:"Browse Events"}),e.jsx(me,{href:"/dashboard/applications",variant:"outline",className:"w-full",children:"View Applications"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Recent Activity"}),d.length===0?e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No recent activity"}):e.jsx("div",{className:"space-y-4",children:d.map(f=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-muted-gray rounded-card",children:[e.jsx("div",{className:"w-2 h-2 bg-gold rounded-full mt-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-navy-ink",children:f.title}),e.jsx("p",{className:"text-sm text-gray-600",children:f.date})]})]},f.id))})]})]})}async function ox(t,s,r){try{const{data:a,error:o}=await B.database.from("users").select("id").eq("id",t).maybeSingle();if(o&&o.code!=="PGRST116")throw console.error("Error checking user:",o),o;if(a)console.log("User record exists:",a.id);else{console.log("User not found in users table, creating record...");try{const{data:l,error:d}=await B.database.from("users").insert([{id:t,email:s||null,nickname:r||null}]).select().single();if(d)if(d.code==="23505"||d.message?.includes("duplicate")||d.message?.includes("unique"))console.log("User record already exists (race condition), continuing...");else throw console.error("Error creating user record:",d),new Error(`Failed to create user record: ${d.message}`);else l&&console.log("User record created successfully:",l.id)}catch(l){if(l.code==="23505"||l.message?.includes("duplicate")||l.message?.includes("unique"))console.log("User record already exists, continuing...");else throw l}await new Promise(l=>setTimeout(l,200))}await new Promise(l=>setTimeout(l,100))}catch(a){throw console.error("Error ensuring user exists:",a),new Error(`Failed to verify user account: ${a.message||"Unknown error"}`)}}async function _m(t,s,r,a,o,l){await ox(a,o,l),await new Promise(h=>setTimeout(h,200));let d=null;const c=3;for(let h=1;h<=c;h++)try{console.log(`Upload attempt ${h}/${c} for user ${a}`);const{data:f,error:p}=await B.storage.from(t).upload(s,r);if(p)if(d=p,p.message?.includes("foreign key")||p.message?.includes("uploaded_by")||p.message?.includes("_storage")){console.log(`Foreign key error on attempt ${h}, ensuring user exists...`);try{const{error:b}=await B.database.from("users").upsert([{id:a,email:o||null,nickname:l||null}],{onConflict:"id"});b&&console.warn("Upsert error (may be non-fatal):",b)}catch(b){console.warn("Upsert exception (non-fatal):",b)}const y=h*500;if(console.log(`Waiting ${y}ms for database sync...`),await new Promise(b=>setTimeout(b,y)),h<c){const b=s.split("/"),x=b[b.length-1];s=`${b.slice(0,-1).join("/")}/${Date.now()}_${x}`,console.log(`Retrying with new path: ${s}`);continue}}else throw p;else{if(f)return console.log("Upload succeeded!"),f;throw new Error("Upload completed but no data returned")}}catch(f){if(d=f,!f.message?.includes("foreign key")&&!f.message?.includes("uploaded_by")&&!f.message?.includes("_storage"))throw f;if(h===c)throw console.error("All upload attempts failed"),new Error(`Failed to upload file after ${c} attempts: ${f.message}`)}throw new Error(`Failed to upload file: ${d?.message||"Unknown error"}`)}function F0(t){if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))return t;const s=t.startsWith("/")?t.slice(1):t;return Hv("avatars",s)}function ik(){const{user:t,isLoaded:s}=Mt(),[r,a]=L.useState(!0),[o,l]=L.useState(!1),[d,c]=L.useState(null),[h,f]=L.useState(null),[p,y]=L.useState(null),{register:b,handleSubmit:x,formState:{errors:A},reset:N}=hn();L.useEffect(()=>{if(!s||!t)return;(async()=>{try{const{data:j}=await B.database.from("users").select("*").eq("id",t.id).single(),{data:w}=await B.database.from("user_profiles").select("*").eq("user_id",t.id).maybeSingle(),D=(j?.nickname||t.name||"").split(" ")||[],z=D[0]||"",U=D.slice(1).join(" ")||"";if(N({firstName:z,lastName:U,email:t.email||"",phone:w?.phone||"",dateOfBirth:w?.date_of_birth||"",address:w?.address||"",city:w?.city||"",province:w?.province||"",postalCode:w?.postal_code||"",bio:j?.bio||""}),j?.avatar_url){const X=F0(j.avatar_url);X&&y(X)}}catch(j){console.error("Error fetching profile:",j)}finally{a(!1)}})()},[t,s,N]);const P=C=>{const j=C.target.files?.[0];if(j){f(j);const w=new FileReader;w.onloadend=()=>{y(w.result)},w.readAsDataURL(j)}},_=async C=>{if(t){l(!0),c(null);try{await ox(t.id,t.email||null,t.name||null);let j=null;const{data:w}=await B.database.from("users").select("avatar_url").eq("id",t.id).maybeSingle();if(j=w?.avatar_url||null,h){console.log("Starting avatar upload for user:",t.id);try{const{data:he}=await B.database.from("users").select("id").eq("id",t.id).maybeSingle();if(!he){console.log("User not in public.users, creating record...");const{error:be}=await B.database.from("users").insert([{id:t.id,email:t.email||null,nickname:t.name||null}]);be&&be.code!=="23505"?console.warn("Could not create user record (may already exist):",be):(console.log("User record created, waiting for commit..."),await new Promise(V=>setTimeout(V,300)))}}catch(he){console.warn("Error checking/creating user (non-fatal):",he)}const Q=`${t.id}/avatar_${Date.now()}_${h.name}`;try{j=(await _m("avatars",Q,h,t.id,t.email||null,t.name||null)).key,console.log("Avatar uploaded successfully - key:",j)}catch(he){throw console.error("Avatar upload exception:",he),new Error(`Failed to upload avatar: ${he.message||"Unknown error"}`)}}const{error:D}=await B.database.from("users").update({nickname:`${C.firstName} ${C.lastName}`,bio:C.bio||null,avatar_url:j}).eq("id",t.id);if(D)throw console.error("User update error:",D),new Error(`Failed to update user information: ${D.message}`);const z={user_id:t.id,phone:C.phone||null,address:C.address||null,city:C.city||null,province:C.province||null,postal_code:C.postalCode||null,date_of_birth:C.dateOfBirth||null};let U=null;try{const{data:Q,error:he}=await B.database.from("user_profiles").select("user_id").eq("user_id",t.id).maybeSingle();he?he.code==="PGRST116"||he.message?.includes("No rows")?U=null:console.warn("Error checking profile (non-fatal):",he):U=Q}catch(Q){console.warn("Exception checking profile (non-fatal):",Q)}let X;if(U){const{error:Q}=await B.database.from("user_profiles").update(z).eq("user_id",t.id);X=Q}else{const{error:Q}=await B.database.from("user_profiles").insert([{...z,role:"user"}]);X=Q}if(X)throw console.error("Profile save error:",X),new Error(`Failed to save profile: ${X.message}`);const{data:E,error:G}=await B.database.from("users").select("nickname, bio, avatar_url").eq("id",t.id).single(),{data:I,error:R}=await B.database.from("user_profiles").select("phone, address, city, province, postal_code, date_of_birth").eq("user_id",t.id).single();(G||R)&&console.warn("Verification fetch had errors, but save may have succeeded:",G,R),N({firstName:C.firstName,lastName:C.lastName,email:C.email,phone:I?.phone||C.phone||"",dateOfBirth:I?.date_of_birth||C.dateOfBirth||"",address:I?.address||C.address||"",city:I?.city||C.city||"",province:I?.province||C.province||"",postalCode:I?.postal_code||C.postalCode||"",bio:E?.bio||C.bio||""});const $=E?.avatar_url||j,q=$?F0($):null;q?(y(q),console.log("Avatar preview updated to:",q)):p&&p.startsWith("data:")?console.log("Keeping data URL preview"):y(null),c({type:"success",text:"Profile updated successfully and saved!"}),h&&f(null)}catch(j){console.error("Profile save error:",j),c({type:"error",text:j.message||"Failed to update profile. Please try again."})}finally{l(!1)}}};return!s||r?e.jsx("div",{className:"text-center py-12",children:"Loading profile..."}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"My Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your personal information"})]}),d&&e.jsx("div",{className:`p-4 rounded-card mb-6 ${d.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:d.text}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center space-x-6 mb-8 pb-6 border-b",children:[e.jsxs("div",{className:"relative",children:[p?e.jsx("img",{src:p,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-2 border-gray-200",onError:C=>{console.error("Avatar image failed to load:",p);const j=C.target;j.style.display="none"},onLoad:()=>{console.log("Avatar image loaded successfully:",p)}}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gold flex items-center justify-center text-white text-3xl font-bold",children:t.name?.charAt(0)||t.email?.charAt(0)||"U"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-gold text-white p-2 rounded-full cursor-pointer hover:bg-opacity-90",children:[e.jsx(jm,{size:16}),e.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink",children:t.name||t.email}),e.jsx("p",{className:"text-gray-600",children:"Member"})]})]}),e.jsxs("form",{onSubmit:x(_),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",...b("firstName",{required:"First name is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",...b("lastName",{required:"Last name is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(vn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"email",...b("email",{required:"Email is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(bm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"tel",...b("phone",{required:"Phone is required"}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Date of Birth"}),e.jsxs("div",{className:"relative",children:[e.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",...b("dateOfBirth"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Zl,{className:"absolute left-3 top-3 text-gray-400",size:20}),e.jsx("input",{type:"text",...b("address"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"City"}),e.jsx("input",{type:"text",...b("city"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Province"}),e.jsxs("select",{...b("province"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"Gauteng",children:"Gauteng"}),e.jsx("option",{value:"Western Cape",children:"Western Cape"}),e.jsx("option",{value:"KwaZulu-Natal",children:"KwaZulu-Natal"}),e.jsx("option",{value:"Eastern Cape",children:"Eastern Cape"}),e.jsx("option",{value:"Free State",children:"Free State"}),e.jsx("option",{value:"Limpopo",children:"Limpopo"}),e.jsx("option",{value:"Mpumalanga",children:"Mpumalanga"}),e.jsx("option",{value:"Northern Cape",children:"Northern Cape"}),e.jsx("option",{value:"North West",children:"North West"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",...b("postalCode"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Bio"}),e.jsx("textarea",{...b("bio"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Tell us about yourself..."})]}),e.jsx("div",{className:"flex justify-end space-x-4",children:e.jsx(me,{type:"submit",variant:"primary",disabled:o,children:o?"Saving...":"Save Changes"})})]})]})]}):e.jsx("div",{className:"text-center py-12",children:"Please log in to view your profile."})}function ok(){const{user:t,isLoaded:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState(!0),[d,c]=L.useState({});L.useEffect(()=>{if(!s||!t)return;(async()=>{try{const{data:y,error:b}=await B.database.from("applications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(b)throw b;if(a(y||[]),y&&y.length>0){const x=y.filter(A=>A.program_id).map(A=>A.program_id);if(x.length>0){const{data:A}=await B.database.from("programs").select("*").in("id",x),N={};A?.forEach(P=>{N[P.id]=P}),c(N)}}}catch(y){console.error("Error fetching applications:",y)}finally{l(!1)}})()},[t,s]);const h=p=>{switch(p){case"approved":return e.jsx(rt,{className:"text-green-500",size:24});case"pending":return e.jsx($r,{className:"text-amber-500",size:24});case"rejected":return e.jsx(rl,{className:"text-red-500",size:24});default:return e.jsx(ys,{className:"text-gray-500",size:24})}},f=p=>{const y={approved:"bg-green-100 text-green-800",pending:"bg-amber-100 text-amber-800",rejected:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${y[p]}`,children:p.charAt(0).toUpperCase()+p.slice(1)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"My Applications"}),e.jsx("p",{className:"text-gray-600",children:"Track the status of your program applications"})]}),e.jsx(me,{href:"/apply",variant:"primary",children:"New Application"})]}),o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading applications..."})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't submitted any applications yet."}),e.jsx(me,{href:"/apply",variant:"primary",children:"Start New Application"})]}):e.jsx("div",{className:"space-y-4",children:r.map(p=>{const b=(p.program_id?d[p.program_id]:null)?.title||p.program_type.replace("_"," ").replace(/\b\w/g,x=>x.toUpperCase());return e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[h(p.status),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-1",children:b}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted on"," ",new Date(p.created_at).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Payment Status: ",e.jsx("span",{className:`font-medium ${p.payment_status==="confirmed"?"text-green-600":p.payment_status==="pending"?"text-amber-600":"text-red-600"}`,children:p.payment_status.charAt(0).toUpperCase()+p.payment_status.slice(1)})]})]})]}),f(p.status)]}),p.updated_at&&e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Last updated: ",new Date(p.updated_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(me,{variant:"outline",size:"sm",children:"View Details"}),p.status==="approved"&&e.jsx(me,{variant:"primary",size:"sm",children:"Accept Offer"})]})]},p.id)})})]})}function lk(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState(!1),[o,l]=L.useState("Admin"),[d,c]=L.useState("Admin User"),[h,f]=L.useState(null);L.useEffect(()=>{s&&(y3(s.id).then(x=>{x&&l(x==="admin"?"Admin":x==="super_admin"?"Super Admin":"Admin")}),(async()=>{try{const{data:x}=await B.database.from("users").select("nickname, avatar_url").eq("id",s.id).maybeSingle();x?(c(x.nickname||s.name||s.email||"Admin User"),x.avatar_url&&f(x.avatar_url)):c(s.name||s.email||"Admin User")}catch(x){console.error("Error fetching admin info:",x),c(s.name||s.email||"Admin User")}})())},[s]);const p=async()=>{t("/login")},y=[{icon:Fu,label:"Home",path:"/"},{icon:va,label:"Dashboard",path:"/admin"},{icon:q_,label:"Profile",path:"/admin/profile"},{icon:Qt,label:"User Management",path:"/admin/users"},{icon:ys,label:"Applications",path:"/admin/applications"},{icon:as,label:"Courses",path:"/admin/courses"},{icon:ns,label:"Events",path:"/admin/events"},{icon:Ms,label:"Certificates",path:"/admin/certificates"},{icon:fo,label:"Financial Reports",path:"/admin/financial-reports"},{icon:Zr,label:"Prayer Requests",path:"/admin/prayer-requests"},{icon:as,label:"Quizzes",path:"/admin/quizzes"},{icon:Qt,label:"Volunteers",path:"/admin/volunteers"},{icon:y0,label:"Analytics",path:"/admin/analytics"},{icon:y0,label:"Advanced Analytics",path:"/admin/advanced-analytics"},{icon:ys,label:"Custom Reports",path:"/admin/reports"},{icon:vn,label:"Email Templates",path:"/admin/email-templates"},{icon:Wd,label:"Audit Logs",path:"/admin/audit-logs"},{icon:Zr,label:"SMS Notifications",path:"/admin/sms"},{icon:sl,label:"Push Notifications",path:"/admin/push"},{icon:M6,label:"Giving Statements",path:"/admin/giving-statements"},{icon:Zr,label:"Communication",path:"/admin/communication"},{icon:rm,label:"Content Management",path:"/admin/content"},{icon:ys,label:"Blog Management",path:"/admin/blog"},{icon:sx,label:"Mentorship",path:"/admin/mentorship"},{icon:Zr,label:"Forum",path:"/admin/forum"},{icon:Qt,label:"Groups",path:"/admin/groups"},{icon:n6,label:"Resources",path:"/admin/resources"},{icon:Wl,label:"Live Streams",path:"/admin/streams"},{icon:fo,label:"Fee Management",path:"/admin/fees"},{icon:$d,label:"Strategic Objectives",path:"/admin/objectives"},{icon:rm,label:"Settings",path:"/admin/settings"}];return e.jsxs("div",{className:"min-h-screen bg-muted-gray flex",children:[e.jsx("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-64 bg-brand-dark-blue text-white transform transition-transform
        ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 pb-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"CLM Admin"}),e.jsx("div",{className:"text-sm text-gray-300",children:o})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto px-6 pb-4 space-y-2",children:y.map(b=>e.jsxs(ot,{to:b.path,className:"flex items-center space-x-3 p-3 rounded-card hover:bg-white/10 transition-colors",onClick:()=>a(!1),children:[e.jsx(b.icon,{size:20}),e.jsx("span",{children:b.label})]},b.path))}),e.jsx("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-white/10",children:e.jsxs("button",{onClick:p,className:"flex items-center space-x-3 p-3 rounded-card hover:bg-white/10 transition-colors w-full text-white",children:[e.jsx(tm,{size:20}),e.jsx("span",{children:"Logout"})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"bg-white shadow-soft p-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>a(!r),className:"lg:hidden text-navy-ink",children:r?e.jsx(Fr,{size:24}):e.jsx(tx,{size:24})}),e.jsxs("div",{className:"flex items-center space-x-4 ml-auto",children:[e.jsxs(ot,{to:"/",className:"text-navy-ink hover:text-gold transition-colors flex items-center space-x-2",children:[e.jsx(Fu,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Home"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-navy-ink font-medium",children:d}),e.jsx("p",{className:"text-sm text-gray-600",children:o})]}),h?e.jsx("img",{src:h,alt:d,className:"w-10 h-10 rounded-full object-cover border-2 border-gold"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold flex items-center justify-center text-white font-bold",children:d.charAt(0).toUpperCase()})]})]}),e.jsx("main",{className:"flex-1 p-6",children:e.jsx(ov,{})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>a(!1)})]})}function ck(){const[t,s]=L.useState({totalUsers:0,pendingApplications:0,activeCourses:0,upcomingEvents:0,totalDonations:0,totalPayments:0}),[r,a]=L.useState([]),[o,l]=L.useState(!0);L.useEffect(()=>{(async()=>{try{const[f,p,y,b,x,A]=await Promise.all([B.database.from("user_profiles").select("*",{count:"exact"}),B.database.from("applications").select("*",{count:"exact"}),B.database.from("courses").select("*",{count:"exact"}),B.database.from("events").select("*",{count:"exact"}).gte("event_date",new Date().toISOString()),B.database.from("donations").select("amount").eq("status","confirmed"),B.database.from("payments").select("amount").eq("status","confirmed")]),N=p.data?.filter(_=>_.status==="pending")||[];s({totalUsers:f.count||0,pendingApplications:N.length,activeCourses:y.count||0,upcomingEvents:b.count||0,totalDonations:x.data?.reduce((_,C)=>_+parseFloat(C.amount||0),0)||0,totalPayments:A.data?.reduce((_,C)=>_+parseFloat(C.amount||0),0)||0});const{data:P}=await B.database.from("applications").select("*, programs(title)").order("created_at",{ascending:!1}).limit(5);a(P?.map(_=>({id:_.id,name:_.full_name,program:_.programs?.title||_.program_type,date:new Date(_.created_at).toLocaleString(),status:_.status}))||[])}catch(f){console.error("Error fetching admin data:",f)}finally{l(!1)}})()},[]);const d=[{icon:Qt,label:"Total Users",value:t.totalUsers.toString(),change:"",color:"bg-blue-500"},{icon:ys,label:"Pending Applications",value:t.pendingApplications.toString(),change:"",color:"bg-amber-500"},{icon:as,label:"Active Courses",value:t.activeCourses.toString(),change:"",color:"bg-green-500"},{icon:ns,label:"Upcoming Events",value:t.upcomingEvents.toString(),change:"",color:"bg-purple-500"},{icon:fo,label:"Total Donations",value:`R${t.totalDonations.toFixed(2)}`,change:"",color:"bg-gold"},{icon:Ul,label:"Total Payments",value:`R${t.totalPayments.toFixed(2)}`,change:"",color:"bg-pink-500"}],c=[{title:"Review Applications",description:`${t.pendingApplications} ${t.pendingApplications===1?"application":"applications"} awaiting review`,link:"/admin/applications",color:"bg-amber-500"},{title:"Manage Users",description:`${t.totalUsers} ${t.totalUsers===1?"user":"users"} registered`,link:"/admin/users",color:"bg-blue-500"},{title:"Create Event",description:`${t.upcomingEvents} ${t.upcomingEvents===1?"event":"events"} scheduled`,link:"/admin/events",color:"bg-green-500"},{title:"Issue Certificates",description:"Generate and send certificates",link:"/admin/certificates",color:"bg-gold"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Overview of system activity and key metrics"})]}),o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(h=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`${h.color} w-12 h-12 rounded-card flex items-center justify-center`,children:e.jsx(h.icon,{className:"text-white",size:24})}),h.change&&e.jsx("span",{className:"text-green-600 text-sm font-medium",children:h.change})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:h.label}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:h.value})]},h.label))})}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(h=>e.jsxs(ot,{to:h.link,className:"p-4 border border-gray-200 rounded-card hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`${h.color} w-10 h-10 rounded-card flex items-center justify-center mb-3`,children:e.jsx("span",{className:"text-white text-xl",children:""})}),e.jsx("h3",{className:"font-bold text-navy-ink mb-1",children:h.title}),e.jsx("p",{className:"text-sm text-gray-600",children:h.description})]},h.title))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Recent Applications"}),e.jsx(ot,{to:"/admin/applications",className:"text-gold hover:underline text-sm font-medium",children:"View All"})]}),r.length===0?e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No recent applications"}):e.jsx("div",{className:"space-y-3",children:r.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted-gray rounded-card",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold flex items-center justify-center text-white font-bold",children:h.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-navy-ink",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.program})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:h.date}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${h.status==="approved"?"bg-green-100 text-green-800":h.status==="rejected"?"bg-red-100 text-red-800":"bg-amber-100 text-amber-800"}`,children:h.status})]})]},h.id))})]})]})}function dk(t){if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))return t;const s=t.startsWith("/")?t.slice(1):t;return Hv("avatars",s)}function uk(){const{user:t,isLoaded:s}=Mt(),[r,a]=L.useState(!0),[o,l]=L.useState(!1),[d,c]=L.useState(null),[h,f]=L.useState(null),[p,y]=L.useState(null),{register:b,handleSubmit:x,formState:{errors:A},reset:N}=hn();L.useEffect(()=>{if(!s||!t)return;(async()=>{try{const{data:j}=await B.database.from("users").select("*").eq("id",t.id).single(),{data:w}=await B.database.from("user_profiles").select("*").eq("user_id",t.id).maybeSingle(),D=(j?.nickname||t.name||"").split(" ")||[],z=D[0]||"",U=D.slice(1).join(" ")||"";if(N({firstName:z,lastName:U,email:t.email||"",phone:w?.phone||"",dateOfBirth:w?.date_of_birth||"",address:w?.address||"",city:w?.city||"",province:w?.province||"",postalCode:w?.postal_code||"",bio:j?.bio||""}),j?.avatar_url){const X=dk(j.avatar_url);X&&y(X)}}catch(j){console.error("Error fetching profile:",j),c({type:"error",text:"Failed to load profile data"})}finally{a(!1)}})()},[t,s,N]);const P=C=>{const j=C.target.files?.[0];if(j){f(j);const w=new FileReader;w.onloadend=()=>{y(w.result)},w.readAsDataURL(j)}},_=async C=>{if(t){l(!0),c(null);try{await ox(t.id,t.email||null,t.name||null);let j=null;const{data:w}=await B.database.from("users").select("avatar_url").eq("id",t.id).maybeSingle();if(j=w?.avatar_url||null,h){const E=`${t.id}/avatar_${Date.now()}_${h.name}`;try{j=(await _m("avatars",E,h,t.id,t.email||null,t.name||null)).key}catch(G){throw console.error("Avatar upload exception:",G),new Error(`Failed to upload avatar: ${G.message||"Unknown error"}`)}}const{error:D}=await B.database.from("users").update({nickname:`${C.firstName} ${C.lastName}`,bio:C.bio||null,avatar_url:j}).eq("id",t.id);if(D)throw new Error(`Failed to update user information: ${D.message}`);const z={user_id:t.id,phone:C.phone||null,address:C.address||null,city:C.city||null,province:C.province||null,postal_code:C.postalCode||null,date_of_birth:C.dateOfBirth||null},{data:U}=await B.database.from("user_profiles").select("user_id").eq("user_id",t.id).maybeSingle();let X;if(U){const{error:E}=await B.database.from("user_profiles").update(z).eq("user_id",t.id);X=E}else{const{error:E}=await B.database.from("user_profiles").insert([z]);X=E}if(X)throw new Error(`Failed to save profile: ${X.message}`);c({type:"success",text:"Profile updated successfully!"}),f(null)}catch(j){console.error("Error saving profile:",j),c({type:"error",text:j.message||"Failed to save profile"})}finally{l(!1)}}};return r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading profile..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Admin Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your profile information"})]}),d&&e.jsx("div",{className:`p-4 rounded-card ${d.type==="success"?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:d.text}),e.jsxs("form",{onSubmit:x(_),className:"bg-white rounded-card shadow-soft p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6 pb-6 border-b",children:[e.jsxs("div",{className:"relative",children:[p?e.jsx("img",{src:p,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-gold"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gold flex items-center justify-center text-white text-2xl font-bold border-4 border-gold",children:t?.name?.charAt(0)?.toUpperCase()||t?.email?.charAt(0)?.toUpperCase()||"A"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-gold text-white p-2 rounded-full cursor-pointer hover:bg-opacity-90 transition-colors",children:[e.jsx(jm,{size:16}),e.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink",children:"Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload a new profile picture"})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center",children:[e.jsx(nl,{className:"w-5 h-5 mr-2 text-gold"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",...b("firstName",{required:"First name is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"}),A.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:A.firstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",...b("lastName",{required:"Last name is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"}),A.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:A.lastName.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(vn,{className:"w-4 h-4 mr-1"}),"Email"]}),e.jsx("input",{type:"email",...b("email"),disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-card bg-gray-100 text-gray-600"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(bm,{className:"w-4 h-4 mr-1"}),"Phone Number"]}),e.jsx("input",{type:"tel",...b("phone"),placeholder:"+27 12 345 6789",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ns,{className:"w-4 h-4 mr-1"}),"Date of Birth"]}),e.jsx("input",{type:"date",...b("dateOfBirth"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center",children:[e.jsx(Zl,{className:"w-5 h-5 mr-2 text-gold"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",...b("address"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",...b("city"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),e.jsx("input",{type:"text",...b("province"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",...b("postalCode"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Bio"}),e.jsx("textarea",{...b("bio"),rows:4,placeholder:"Tell us about yourself...",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:ring-2 focus:ring-gold focus:border-transparent"})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(me,{type:"submit",variant:"primary",disabled:o,children:[e.jsx(li,{className:"w-4 h-4 mr-2"}),o?"Saving...":"Save Changes"]})})]})]})}function hk(){const{user:t}=Mt(),[s,r]=L.useState(""),[a,o]=L.useState("all"),[l,d]=L.useState([]),[c,h]=L.useState(!0),[f,p]=L.useState(null),[y,b]=L.useState({}),[x,A]=L.useState(null);L.useEffect(()=>{N()},[a]);const N=async()=>{h(!0);try{const{data:z,error:U}=await B.database.from("user_profiles").select(`
          *,
          users!inner(id, nickname, avatar_url, bio, created_at)
        `).order("created_at",{ascending:!1});if(U)throw U;const X=(z||[]).map(E=>({id:E.id,user_id:E.user_id,nickname:E.users?.nickname||null,email:null,phone:E.phone,city:E.city,province:E.province,postal_code:E.postal_code,address:E.address,date_of_birth:E.date_of_birth,role:E.role||"user",created_at:E.created_at,updated_at:E.updated_at}));d(X)}catch(z){console.error("Error fetching users:",z),A({type:"error",text:z.message||"Failed to fetch users"})}finally{h(!1)}},P=z=>{p(z.user_id),b({role:z.role,phone:z.phone||"",city:z.city||"",province:z.province||"",postal_code:z.postal_code||"",address:z.address||"",date_of_birth:z.date_of_birth||""})},_=async z=>{try{const{error:U}=await B.database.from("user_profiles").update({role:y.role,phone:y.phone||null,city:y.city||null,province:y.province||null,postal_code:y.postal_code||null,address:y.address||null,date_of_birth:y.date_of_birth||null,updated_at:new Date().toISOString()}).eq("user_id",z);if(U)throw U;y.nickname&&await B.database.from("users").update({nickname:y.nickname}).eq("id",z),A({type:"success",text:"User updated successfully!"}),p(null),b({}),N()}catch(U){console.error("Error updating user:",U),A({type:"error",text:U.message||"Failed to update user"})}},C=()=>{p(null),b({})},j=async z=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const{error:U}=await B.database.from("user_profiles").delete().eq("user_id",z);if(U)throw U;A({type:"success",text:"User deleted successfully!"}),N()}catch(U){console.error("Error deleting user:",U),A({type:"error",text:U.message||"Failed to delete user"})}},w=l.filter(z=>{const U=!s||z.nickname?.toLowerCase().includes(s.toLowerCase())||z.phone?.toLowerCase().includes(s.toLowerCase())||z.city?.toLowerCase().includes(s.toLowerCase())||z.province?.toLowerCase().includes(s.toLowerCase()),X=a==="all"||z.role===a;return U&&X}),D=z=>{switch(z){case"admin":case"super_admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]})}),x&&e.jsx("div",{className:`p-4 rounded-card ${x.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:x.text}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search users...",value:s,onChange:z=>r(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:a,onChange:z=>o(z.target.value),className:"px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"super_admin",children:"Super Admin"})]}),e.jsxs(me,{variant:"outline",onClick:N,children:[e.jsx(Kv,{size:20,className:"mr-2"}),"Refresh"]})]})}),e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Join Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-600",children:"Loading users..."})}):w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-600",children:"No users found"})}):w.map(z=>e.jsxs("tr",{className:"hover:bg-muted-gray/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold flex items-center justify-center text-white font-bold mr-3",children:z.nickname?.charAt(0)||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-navy-ink",children:z.nickname||"No name"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",z.user_id.substring(0,8),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-600",children:z.phone||"No phone"}),z.date_of_birth&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["DOB: ",new Date(z.date_of_birth).toLocaleDateString()]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-gray-600",children:[z.city||"N/A",", ",z.province||"N/A"]}),z.postal_code&&e.jsx("p",{className:"text-gray-500 text-xs",children:z.postal_code})]})}),e.jsx("td",{className:"px-6 py-4",children:f===z.user_id?e.jsxs("select",{value:y.role||"user",onChange:U=>b({...y,role:U.target.value}),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"super_admin",children:"Super Admin"})]}):e.jsxs("span",{className:`inline-flex items-center px-2 py-1 ${D(z.role)} text-sm rounded-full`,children:[e.jsx(Wd,{size:14,className:"mr-1"}),z.role]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:new Date(z.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:f===z.user_id?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>_(z.user_id),className:"p-2 text-green-600 hover:bg-green-50 rounded-card",title:"Save",children:e.jsx(li,{size:18})}),e.jsx("button",{onClick:C,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-card",title:"Cancel",children:e.jsx(Fr,{size:18})})]}):e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>P(z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",title:"Edit",children:e.jsx(bn,{size:18})}),z.user_id!==t?.id&&e.jsx("button",{onClick:()=>j(z.user_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-card",title:"Delete",children:e.jsx(zs,{size:18})})]})})]},z.user_id))})]})})})]})}async function Ri(t,s){try{const{data:r}=await B.database.from("users").select("email").eq("id",t).single();if(!r?.email)return;console.log("Email notification:",{to:r.email,subject:s.subject,message:s.message});try{await B.functions.invoke("send-email",{body:{to:r.email,subject:s.subject,html:s.html||`<p>${s.message}</p>`,text:s.message}})}catch{console.log("Email function not available, notification created in database")}}catch(r){console.error("Error sending email notification:",r)}}const mk="modulepreload",fk=function(t){return"/"+t},D0={},Tf=function(s,r,a){let o=Promise.resolve();if(r&&r.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=d?.nonce||d?.getAttribute("nonce");o=h(r.map(f=>{if(f=fk(f),f in D0)return;D0[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":mk,p||(b.as="script"),b.crossOrigin="",b.href=f,c&&b.setAttribute("nonce",c),document.head.appendChild(b),p)return new Promise((x,A)=>{b.addEventListener("load",x),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return o.then(d=>{for(const c of d||[])c.status==="rejected"&&l(c.reason);return s().catch(l)})};function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ls(t)}var Ii=Uint8Array,qa=Uint16Array,lx=Int32Array,cx=new Ii([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dx=new Ii([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),R0=new Ii([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u2=function(t,s){for(var r=new qa(31),a=0;a<31;++a)r[a]=s+=1<<t[a-1];for(var o=new lx(r[30]),a=1;a<30;++a)for(var l=r[a];l<r[a+1];++l)o[l]=l-r[a]<<5|a;return{b:r,r:o}},h2=u2(cx,2),pk=h2.b,vp=h2.r;pk[28]=258,vp[258]=28;var xk=u2(dx,0),I0=xk.r,bp=new qa(32768);for(var Zs=0;Zs<32768;++Zs){var zl=(Zs&43690)>>1|(Zs&21845)<<1;zl=(zl&52428)>>2|(zl&13107)<<2,zl=(zl&61680)>>4|(zl&3855)<<4,bp[Zs]=((zl&65280)>>8|(zl&255)<<8)>>1}var ku=(function(t,s,r){for(var a=t.length,o=0,l=new qa(s);o<a;++o)t[o]&&++l[t[o]-1];var d=new qa(s);for(o=1;o<s;++o)d[o]=d[o-1]+l[o-1]<<1;var c;if(r){c=new qa(1<<s);var h=15-s;for(o=0;o<a;++o)if(t[o])for(var f=o<<4|t[o],p=s-t[o],y=d[t[o]-1]++<<p,b=y|(1<<p)-1;y<=b;++y)c[bp[y]>>h]=f}else for(c=new qa(a),o=0;o<a;++o)t[o]&&(c[o]=bp[d[t[o]-1]++]>>15-t[o]);return c}),Fc=new Ii(288);for(var Zs=0;Zs<144;++Zs)Fc[Zs]=8;for(var Zs=144;Zs<256;++Zs)Fc[Zs]=9;for(var Zs=256;Zs<280;++Zs)Fc[Zs]=7;for(var Zs=280;Zs<288;++Zs)Fc[Zs]=8;var im=new Ii(32);for(var Zs=0;Zs<32;++Zs)im[Zs]=5;var gk=ku(Fc,9,0),yk=ku(im,5,0),m2=function(t){return(t+7)/8|0},vk=function(t,s,r){return(r==null||r>t.length)&&(r=t.length),new Ii(t.subarray(s,r))},Xo=function(t,s,r){r<<=s&7;var a=s/8|0;t[a]|=r,t[a+1]|=r>>8},Nu=function(t,s,r){r<<=s&7;var a=s/8|0;t[a]|=r,t[a+1]|=r>>8,t[a+2]|=r>>16},Ff=function(t,s){for(var r=[],a=0;a<t.length;++a)t[a]&&r.push({s:a,f:t[a]});var o=r.length,l=r.slice();if(!o)return{t:p2,l:0};if(o==1){var d=new Ii(r[0].s+1);return d[r[0].s]=1,{t:d,l:1}}r.sort(function(D,z){return D.f-z.f}),r.push({s:-1,f:25001});var c=r[0],h=r[1],f=0,p=1,y=2;for(r[0]={s:-1,f:c.f+h.f,l:c,r:h};p!=o-1;)c=r[r[f].f<r[y].f?f++:y++],h=r[f!=p&&r[f].f<r[y].f?f++:y++],r[p++]={s:-1,f:c.f+h.f,l:c,r:h};for(var b=l[0].s,a=1;a<o;++a)l[a].s>b&&(b=l[a].s);var x=new qa(b+1),A=jp(r[p-1],x,0);if(A>s){var a=0,N=0,P=A-s,_=1<<P;for(l.sort(function(z,U){return x[U.s]-x[z.s]||z.f-U.f});a<o;++a){var C=l[a].s;if(x[C]>s)N+=_-(1<<A-x[C]),x[C]=s;else break}for(N>>=P;N>0;){var j=l[a].s;x[j]<s?N-=1<<s-x[j]++-1:++a}for(;a>=0&&N;--a){var w=l[a].s;x[w]==s&&(--x[w],++N)}A=s}return{t:new Ii(x),l:A}},jp=function(t,s,r){return t.s==-1?Math.max(jp(t.l,s,r+1),jp(t.r,s,r+1)):s[t.s]=r},M0=function(t){for(var s=t.length;s&&!t[--s];);for(var r=new qa(++s),a=0,o=t[0],l=1,d=function(h){r[a++]=h},c=1;c<=s;++c)if(t[c]==o&&c!=s)++l;else{if(!o&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(o),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(o);l=1,o=t[c]}return{c:r.subarray(0,a),n:s}},_u=function(t,s){for(var r=0,a=0;a<s.length;++a)r+=t[a]*s[a];return r},f2=function(t,s,r){var a=r.length,o=m2(s+2);t[o]=a&255,t[o+1]=a>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<a;++l)t[o+l+4]=r[l];return(o+4+a)*8},z0=function(t,s,r,a,o,l,d,c,h,f,p){Xo(s,p++,r),++o[256];for(var y=Ff(o,15),b=y.t,x=y.l,A=Ff(l,15),N=A.t,P=A.l,_=M0(b),C=_.c,j=_.n,w=M0(N),D=w.c,z=w.n,U=new qa(19),X=0;X<C.length;++X)++U[C[X]&31];for(var X=0;X<D.length;++X)++U[D[X]&31];for(var E=Ff(U,7),G=E.t,I=E.l,R=19;R>4&&!G[R0[R-1]];--R);var $=f+5<<3,q=_u(o,Fc)+_u(l,im)+d,Q=_u(o,b)+_u(l,N)+d+14+3*R+_u(U,G)+2*U[16]+3*U[17]+7*U[18];if(h>=0&&$<=q&&$<=Q)return f2(s,p,t.subarray(h,h+f));var he,be,V,de;if(Xo(s,p,1+(Q<q)),p+=2,Q<q){he=ku(b,x,0),be=b,V=ku(N,P,0),de=N;var ke=ku(G,I,0);Xo(s,p,j-257),Xo(s,p+5,z-1),Xo(s,p+10,R-4),p+=14;for(var X=0;X<R;++X)Xo(s,p+3*X,G[R0[X]]);p+=3*R;for(var te=[C,D],O=0;O<2;++O)for(var re=te[O],X=0;X<re.length;++X){var K=re[X]&31;Xo(s,p,ke[K]),p+=G[K],K>15&&(Xo(s,p,re[X]>>5&127),p+=re[X]>>12)}}else he=gk,be=Fc,V=yk,de=im;for(var X=0;X<c;++X){var ne=a[X];if(ne>255){var K=ne>>18&31;Nu(s,p,he[K+257]),p+=be[K+257],K>7&&(Xo(s,p,ne>>23&31),p+=cx[K]);var pe=ne&31;Nu(s,p,V[pe]),p+=de[pe],pe>3&&(Nu(s,p,ne>>5&8191),p+=dx[pe])}else Nu(s,p,he[ne]),p+=be[ne]}return Nu(s,p,he[256]),p+be[256]},bk=new lx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),p2=new Ii(0),jk=function(t,s,r,a,o,l){var d=l.z||t.length,c=new Ii(a+d+5*(1+Math.ceil(d/7e3))+o),h=c.subarray(a,c.length-o),f=l.l,p=(l.r||0)&7;if(s){p&&(h[0]=l.r>>3);for(var y=bk[s-1],b=y>>13,x=y&8191,A=(1<<r)-1,N=l.p||new qa(32768),P=l.h||new qa(A+1),_=Math.ceil(r/3),C=2*_,j=function(De){return(t[De]^t[De+1]<<_^t[De+2]<<C)&A},w=new lx(25e3),D=new qa(288),z=new qa(32),U=0,X=0,E=l.i||0,G=0,I=l.w||0,R=0;E+2<d;++E){var $=j(E),q=E&32767,Q=P[$];if(N[q]=Q,P[$]=q,I<=E){var he=d-E;if((U>7e3||G>24576)&&(he>423||!f)){p=z0(t,h,0,w,D,z,X,G,R,E-R,p),G=U=X=0,R=E;for(var be=0;be<286;++be)D[be]=0;for(var be=0;be<30;++be)z[be]=0}var V=2,de=0,ke=x,te=q-Q&32767;if(he>2&&$==j(E-te))for(var O=Math.min(b,he)-1,re=Math.min(32767,E),K=Math.min(258,he);te<=re&&--ke&&q!=Q;){if(t[E+V]==t[E+V-te]){for(var ne=0;ne<K&&t[E+ne]==t[E+ne-te];++ne);if(ne>V){if(V=ne,de=te,ne>O)break;for(var pe=Math.min(te,ne-2),je=0,be=0;be<pe;++be){var _e=E-te+be&32767,ue=N[_e],xe=_e-ue&32767;xe>je&&(je=xe,Q=_e)}}}q=Q,Q=N[q],te+=q-Q&32767}if(de){w[G++]=268435456|vp[V]<<18|I0[de];var Ie=vp[V]&31,He=I0[de]&31;X+=cx[Ie]+dx[He],++D[257+Ie],++z[He],I=E+V,++U}else w[G++]=t[E],++D[t[E]]}}for(E=Math.max(E,I);E<d;++E)w[G++]=t[E],++D[t[E]];p=z0(t,h,f,w,D,z,X,G,R,E-R,p),f||(l.r=p&7|h[p/8|0]<<3,p-=7,l.h=P,l.p=N,l.i=E,l.w=I)}else{for(var E=l.w||0;E<d+f;E+=65535){var Je=E+65535;Je>=d&&(h[p/8|0]=f,Je=d),p=f2(h,p+1,t.subarray(E,Je))}l.i=d}return vk(c,0,a+m2(p)+o)},x2=function(){var t=1,s=0;return{p:function(r){for(var a=t,o=s,l=r.length|0,d=0;d!=l;){for(var c=Math.min(d+2655,l);d<c;++d)o+=a+=r[d];a=(a&65535)+15*(a>>16),o=(o&65535)+15*(o>>16)}t=a,s=o},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},wk=function(t,s,r,a,o){if(!o&&(o={l:1},s.dictionary)){var l=s.dictionary.subarray(-32768),d=new Ii(l.length+t.length);d.set(l),d.set(t,l.length),t=d,o.w=l.length}return jk(t,s.level==null?6:s.level,s.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,r,a,o)},g2=function(t,s,r){for(;r;++s)t[s]=r,r>>>=8},Nk=function(t,s){var r=s.level,a=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=a<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var o=x2();o.p(s.dictionary),g2(t,2,o.d())}};function wp(t,s){s||(s={});var r=x2();r.p(t);var a=wk(t,s,s.dictionary?6:2,4);return Nk(a,s),g2(a,a.length-4,r.d()),a}var _k=typeof TextDecoder<"u"&&new TextDecoder,kk=0;try{_k.decode(p2,{stream:!0}),kk=1}catch{}function Sk(t){if(Array.isArray(t))return t}function Ck(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,o,l,d,c=[],h=!0,f=!1;try{if(l=(r=r.call(t)).next,s!==0)for(;!(h=(a=l.call(r)).done)&&(c.push(a.value),c.length!==s);h=!0);}catch(p){f=!0,o=p}finally{try{if(!h&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(f)throw o}}return c}}function O0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function Ak(t,s){if(t){if(typeof t=="string")return O0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O0(t,s):void 0}}function Pk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0(t,s){return Sk(t)||Ck(t,s)||Ak(t,s)||Pk()}function $0(t,s="utf8"){return new TextDecoder(s).decode(t)}const Lk=new TextEncoder;function Ek(t){return Lk.encode(t)}const Tk=1024*8,Fk=(()=>{const t=new Uint8Array(4),s=new Uint32Array(t.buffer);return!((s[0]=1)&t[0])})(),Df={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class ux{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(s=Tk,r={}){let a=!1;typeof s=="number"?s=new ArrayBuffer(s):(a=!0,this.lastWrittenByte=s.byteLength);const o=r.offset?r.offset>>>0:0,l=s.byteLength-o;let d=o;(ArrayBuffer.isView(s)||s instanceof ux)&&(s.byteLength!==s.buffer.byteLength&&(d=s.byteOffset+o),s=s.buffer),a?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=s,this.length=l,this.byteLength=l,this.byteOffset=d,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,d,l),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const a=(this.offset+s)*2,o=new Uint8Array(a);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,r){const a=Df[r].BYTES_PER_ELEMENT*s,o=this.byteOffset+this.offset,l=this.buffer.slice(o,o+a);if(this.littleEndian===Fk&&r!=="uint8"&&r!=="int8"){const c=new Uint8Array(this.buffer.slice(o,o+a));c.reverse();const h=new Df[r](c.buffer);return this.offset+=a,h.reverse(),h}const d=new Df[r](l);return this.offset+=a,d}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let r="";for(let a=0;a<s;a++)r+=this.readChar();return r}readUtf8(s=1){return $0(this.readBytes(s))}decodeText(s=1,r="utf8"){return $0(this.readBytes(s),r)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let r=0;r<s.length;r++)this._data.setUint8(this.offset++,s[r]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let r=0;r<s.length;r++)this.writeUint8(s.charCodeAt(r));return this}writeUtf8(s){return this.writeBytes(Ek(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Hd(t){let s=t.length;for(;--s>=0;)t[s]=0}const Dk=3,Rk=258,y2=29,Ik=256,Mk=Ik+1+y2,v2=30,zk=512,Ok=new Array((Mk+2)*2);Hd(Ok);const qk=new Array(v2*2);Hd(qk);const $k=new Array(zk);Hd($k);const Uk=new Array(Rk-Dk+1);Hd(Uk);const Bk=new Array(y2);Hd(Bk);const Vk=new Array(v2);Hd(Vk);const Wk=(t,s,r,a)=>{let o=t&65535|0,l=t>>>16&65535|0,d=0;for(;r!==0;){d=r>2e3?2e3:r,r-=d;do o=o+s[a++]|0,l=l+o|0;while(--d);o%=65521,l%=65521}return o|l<<16|0};var Np=Wk;const Hk=()=>{let t,s=[];for(var r=0;r<256;r++){t=r;for(var a=0;a<8;a++)t=t&1?3988292384^t>>>1:t>>>1;s[r]=t}return s},Gk=new Uint32Array(Hk()),Zk=(t,s,r,a)=>{const o=Gk,l=a+r;t^=-1;for(let d=a;d<l;d++)t=t>>>8^o[(t^s[d])&255];return t^-1};var no=Zk,_p={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},b2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Yk=(t,s)=>Object.prototype.hasOwnProperty.call(t,s);var Kk=function(t){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const r=s.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const a in r)Yk(r,a)&&(t[a]=r[a])}}return t},Jk=t=>{let s=0;for(let a=0,o=t.length;a<o;a++)s+=t[a].length;const r=new Uint8Array(s);for(let a=0,o=0,l=t.length;a<l;a++){let d=t[a];r.set(d,o),o+=d.length}return r},j2={assign:Kk,flattenChunks:Jk};let w2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{w2=!1}const Du=new Uint8Array(256);for(let t=0;t<256;t++)Du[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Du[254]=Du[254]=1;var Qk=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let s,r,a,o,l,d=t.length,c=0;for(o=0;o<d;o++)r=t.charCodeAt(o),(r&64512)===55296&&o+1<d&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),o++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(s=new Uint8Array(c),l=0,o=0;l<c;o++)r=t.charCodeAt(o),(r&64512)===55296&&o+1<d&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),o++)),r<128?s[l++]=r:r<2048?(s[l++]=192|r>>>6,s[l++]=128|r&63):r<65536?(s[l++]=224|r>>>12,s[l++]=128|r>>>6&63,s[l++]=128|r&63):(s[l++]=240|r>>>18,s[l++]=128|r>>>12&63,s[l++]=128|r>>>6&63,s[l++]=128|r&63);return s};const Xk=(t,s)=>{if(s<65534&&t.subarray&&w2)return String.fromCharCode.apply(null,t.length===s?t:t.subarray(0,s));let r="";for(let a=0;a<s;a++)r+=String.fromCharCode(t[a]);return r};var eS=(t,s)=>{const r=s||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,s));let a,o;const l=new Array(r*2);for(o=0,a=0;a<r;){let d=t[a++];if(d<128){l[o++]=d;continue}let c=Du[d];if(c>4){l[o++]=65533,a+=c-1;continue}for(d&=c===2?31:c===3?15:7;c>1&&a<r;)d=d<<6|t[a++]&63,c--;if(c>1){l[o++]=65533;continue}d<65536?l[o++]=d:(d-=65536,l[o++]=55296|d>>10&1023,l[o++]=56320|d&1023)}return Xk(l,o)},tS=(t,s)=>{s=s||t.length,s>t.length&&(s=t.length);let r=s-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?s:r+Du[t[r]]>s?r:s},kp={string2buf:Qk,buf2string:eS,utf8border:tS};function sS(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rS=sS;const Eh=16209,nS=16191;var aS=function(s,r){let a,o,l,d,c,h,f,p,y,b,x,A,N,P,_,C,j,w,D,z,U,X,E,G;const I=s.state;a=s.next_in,E=s.input,o=a+(s.avail_in-5),l=s.next_out,G=s.output,d=l-(r-s.avail_out),c=l+(s.avail_out-257),h=I.dmax,f=I.wsize,p=I.whave,y=I.wnext,b=I.window,x=I.hold,A=I.bits,N=I.lencode,P=I.distcode,_=(1<<I.lenbits)-1,C=(1<<I.distbits)-1;e:do{A<15&&(x+=E[a++]<<A,A+=8,x+=E[a++]<<A,A+=8),j=N[x&_];t:for(;;){if(w=j>>>24,x>>>=w,A-=w,w=j>>>16&255,w===0)G[l++]=j&65535;else if(w&16){D=j&65535,w&=15,w&&(A<w&&(x+=E[a++]<<A,A+=8),D+=x&(1<<w)-1,x>>>=w,A-=w),A<15&&(x+=E[a++]<<A,A+=8,x+=E[a++]<<A,A+=8),j=P[x&C];s:for(;;){if(w=j>>>24,x>>>=w,A-=w,w=j>>>16&255,w&16){if(z=j&65535,w&=15,A<w&&(x+=E[a++]<<A,A+=8,A<w&&(x+=E[a++]<<A,A+=8)),z+=x&(1<<w)-1,z>h){s.msg="invalid distance too far back",I.mode=Eh;break e}if(x>>>=w,A-=w,w=l-d,z>w){if(w=z-w,w>p&&I.sane){s.msg="invalid distance too far back",I.mode=Eh;break e}if(U=0,X=b,y===0){if(U+=f-w,w<D){D-=w;do G[l++]=b[U++];while(--w);U=l-z,X=G}}else if(y<w){if(U+=f+y-w,w-=y,w<D){D-=w;do G[l++]=b[U++];while(--w);if(U=0,y<D){w=y,D-=w;do G[l++]=b[U++];while(--w);U=l-z,X=G}}}else if(U+=y-w,w<D){D-=w;do G[l++]=b[U++];while(--w);U=l-z,X=G}for(;D>2;)G[l++]=X[U++],G[l++]=X[U++],G[l++]=X[U++],D-=3;D&&(G[l++]=X[U++],D>1&&(G[l++]=X[U++]))}else{U=l-z;do G[l++]=G[U++],G[l++]=G[U++],G[l++]=G[U++],D-=3;while(D>2);D&&(G[l++]=G[U++],D>1&&(G[l++]=G[U++]))}}else if((w&64)===0){j=P[(j&65535)+(x&(1<<w)-1)];continue s}else{s.msg="invalid distance code",I.mode=Eh;break e}break}}else if((w&64)===0){j=N[(j&65535)+(x&(1<<w)-1)];continue t}else if(w&32){I.mode=nS;break e}else{s.msg="invalid literal/length code",I.mode=Eh;break e}break}}while(a<o&&l<c);D=A>>3,a-=D,A-=D<<3,x&=(1<<A)-1,s.next_in=a,s.next_out=l,s.avail_in=a<o?5+(o-a):5-(a-o),s.avail_out=l<c?257+(c-l):257-(l-c),I.hold=x,I.bits=A};const Nd=15,U0=852,B0=592,V0=0,Rf=1,W0=2,iS=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oS=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lS=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dS=(t,s,r,a,o,l,d,c)=>{const h=c.bits;let f=0,p=0,y=0,b=0,x=0,A=0,N=0,P=0,_=0,C=0,j,w,D,z,U,X=null,E;const G=new Uint16Array(Nd+1),I=new Uint16Array(Nd+1);let R=null,$,q,Q;for(f=0;f<=Nd;f++)G[f]=0;for(p=0;p<a;p++)G[s[r+p]]++;for(x=h,b=Nd;b>=1&&G[b]===0;b--);if(x>b&&(x=b),b===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<b&&G[y]===0;y++);for(x<y&&(x=y),P=1,f=1;f<=Nd;f++)if(P<<=1,P-=G[f],P<0)return-1;if(P>0&&(t===V0||b!==1))return-1;for(I[1]=0,f=1;f<Nd;f++)I[f+1]=I[f]+G[f];for(p=0;p<a;p++)s[r+p]!==0&&(d[I[s[r+p]]++]=p);if(t===V0?(X=R=d,E=20):t===Rf?(X=iS,R=oS,E=257):(X=lS,R=cS,E=0),C=0,p=0,f=y,U=l,A=x,N=0,D=-1,_=1<<x,z=_-1,t===Rf&&_>U0||t===W0&&_>B0)return 1;for(;;){$=f-N,d[p]+1<E?(q=0,Q=d[p]):d[p]>=E?(q=R[d[p]-E],Q=X[d[p]-E]):(q=96,Q=0),j=1<<f-N,w=1<<A,y=w;do w-=j,o[U+(C>>N)+w]=$<<24|q<<16|Q|0;while(w!==0);for(j=1<<f-1;C&j;)j>>=1;if(j!==0?(C&=j-1,C+=j):C=0,p++,--G[f]===0){if(f===b)break;f=s[r+d[p]]}if(f>x&&(C&z)!==D){for(N===0&&(N=x),U+=y,A=f-N,P=1<<A;A+N<b&&(P-=G[A+N],!(P<=0));)A++,P<<=1;if(_+=1<<A,t===Rf&&_>U0||t===W0&&_>B0)return 1;D=C&z,o[D]=x<<24|A<<16|U-l|0}}return C!==0&&(o[U+C]=f-N<<24|64<<16|0),c.bits=x,0};var Su=dS;const uS=0,N2=1,_2=2,{Z_FINISH:H0,Z_BLOCK:hS,Z_TREES:Th,Z_OK:Dc,Z_STREAM_END:mS,Z_NEED_DICT:fS,Z_STREAM_ERROR:ui,Z_DATA_ERROR:k2,Z_MEM_ERROR:S2,Z_BUF_ERROR:pS,Z_DEFLATED:G0}=b2,km=16180,Z0=16181,Y0=16182,K0=16183,J0=16184,Q0=16185,X0=16186,ey=16187,ty=16188,sy=16189,om=16190,el=16191,If=16192,ry=16193,Mf=16194,ny=16195,ay=16196,iy=16197,oy=16198,Fh=16199,Dh=16200,ly=16201,cy=16202,dy=16203,uy=16204,hy=16205,zf=16206,my=16207,fy=16208,tr=16209,C2=16210,A2=16211,xS=852,gS=592,yS=15,vS=yS,py=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function bS(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Mc=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.mode<km||s.mode>A2?1:0},P2=t=>{if(Mc(t))return ui;const s=t.state;return t.total_in=t.total_out=s.total=0,t.msg="",s.wrap&&(t.adler=s.wrap&1),s.mode=km,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(xS),s.distcode=s.distdyn=new Int32Array(gS),s.sane=1,s.back=-1,Dc},L2=t=>{if(Mc(t))return ui;const s=t.state;return s.wsize=0,s.whave=0,s.wnext=0,P2(t)},E2=(t,s)=>{let r;if(Mc(t))return ui;const a=t.state;return s<0?(r=0,s=-s):(r=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?ui:(a.window!==null&&a.wbits!==s&&(a.window=null),a.wrap=r,a.wbits=s,L2(t))},T2=(t,s)=>{if(!t)return ui;const r=new bS;t.state=r,r.strm=t,r.window=null,r.mode=km;const a=E2(t,s);return a!==Dc&&(t.state=null),a},jS=t=>T2(t,vS);let xy=!0,Of,qf;const wS=t=>{if(xy){Of=new Int32Array(512),qf=new Int32Array(32);let s=0;for(;s<144;)t.lens[s++]=8;for(;s<256;)t.lens[s++]=9;for(;s<280;)t.lens[s++]=7;for(;s<288;)t.lens[s++]=8;for(Su(N2,t.lens,0,288,Of,0,t.work,{bits:9}),s=0;s<32;)t.lens[s++]=5;Su(_2,t.lens,0,32,qf,0,t.work,{bits:5}),xy=!1}t.lencode=Of,t.lenbits=9,t.distcode=qf,t.distbits=5},F2=(t,s,r,a)=>{let o;const l=t.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),a>=l.wsize?(l.window.set(s.subarray(r-l.wsize,r),0),l.wnext=0,l.whave=l.wsize):(o=l.wsize-l.wnext,o>a&&(o=a),l.window.set(s.subarray(r-a,r-a+o),l.wnext),a-=o,a?(l.window.set(s.subarray(r-a,r),0),l.wnext=a,l.whave=l.wsize):(l.wnext+=o,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=o))),0},NS=(t,s)=>{let r,a,o,l,d,c,h,f,p,y,b,x,A,N,P=0,_,C,j,w,D,z,U,X;const E=new Uint8Array(4);let G,I;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Mc(t)||!t.output||!t.input&&t.avail_in!==0)return ui;r=t.state,r.mode===el&&(r.mode=If),d=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,a=t.input,c=t.avail_in,f=r.hold,p=r.bits,y=c,b=h,X=Dc;e:for(;;)switch(r.mode){case km:if(r.wrap===0){r.mode=If;break}for(;p<16;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(r.wrap&2&&f===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=f&255,E[1]=f>>>8&255,r.check=no(r.check,E,2,0),f=0,p=0,r.mode=Z0;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){t.msg="incorrect header check",r.mode=tr;break}if((f&15)!==G0){t.msg="unknown compression method",r.mode=tr;break}if(f>>>=4,p-=4,U=(f&15)+8,r.wbits===0&&(r.wbits=U),U>15||U>r.wbits){t.msg="invalid window size",r.mode=tr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=f&512?sy:el,f=0,p=0;break;case Z0:for(;p<16;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(r.flags=f,(r.flags&255)!==G0){t.msg="unknown compression method",r.mode=tr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=tr;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&r.wrap&4&&(E[0]=f&255,E[1]=f>>>8&255,r.check=no(r.check,E,2,0)),f=0,p=0,r.mode=Y0;case Y0:for(;p<32;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}r.head&&(r.head.time=f),r.flags&512&&r.wrap&4&&(E[0]=f&255,E[1]=f>>>8&255,E[2]=f>>>16&255,E[3]=f>>>24&255,r.check=no(r.check,E,4,0)),f=0,p=0,r.mode=K0;case K0:for(;p<16;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&r.wrap&4&&(E[0]=f&255,E[1]=f>>>8&255,r.check=no(r.check,E,2,0)),f=0,p=0,r.mode=J0;case J0:if(r.flags&1024){for(;p<16;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&r.wrap&4&&(E[0]=f&255,E[1]=f>>>8&255,r.check=no(r.check,E,2,0)),f=0,p=0}else r.head&&(r.head.extra=null);r.mode=Q0;case Q0:if(r.flags&1024&&(x=r.length,x>c&&(x=c),x&&(r.head&&(U=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(a.subarray(l,l+x),U)),r.flags&512&&r.wrap&4&&(r.check=no(r.check,a,x,l)),c-=x,l+=x,r.length-=x),r.length))break e;r.length=0,r.mode=X0;case X0:if(r.flags&2048){if(c===0)break e;x=0;do U=a[l+x++],r.head&&U&&r.length<65536&&(r.head.name+=String.fromCharCode(U));while(U&&x<c);if(r.flags&512&&r.wrap&4&&(r.check=no(r.check,a,x,l)),c-=x,l+=x,U)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=ey;case ey:if(r.flags&4096){if(c===0)break e;x=0;do U=a[l+x++],r.head&&U&&r.length<65536&&(r.head.comment+=String.fromCharCode(U));while(U&&x<c);if(r.flags&512&&r.wrap&4&&(r.check=no(r.check,a,x,l)),c-=x,l+=x,U)break e}else r.head&&(r.head.comment=null);r.mode=ty;case ty:if(r.flags&512){for(;p<16;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(r.wrap&4&&f!==(r.check&65535)){t.msg="header crc mismatch",r.mode=tr;break}f=0,p=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=el;break;case sy:for(;p<32;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}t.adler=r.check=py(f),f=0,p=0,r.mode=om;case om:if(r.havedict===0)return t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=c,r.hold=f,r.bits=p,fS;t.adler=r.check=1,r.mode=el;case el:if(s===hS||s===Th)break e;case If:if(r.last){f>>>=p&7,p-=p&7,r.mode=zf;break}for(;p<3;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}switch(r.last=f&1,f>>>=1,p-=1,f&3){case 0:r.mode=ry;break;case 1:if(wS(r),r.mode=Fh,s===Th){f>>>=2,p-=2;break e}break;case 2:r.mode=ay;break;case 3:t.msg="invalid block type",r.mode=tr}f>>>=2,p-=2;break;case ry:for(f>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){t.msg="invalid stored block lengths",r.mode=tr;break}if(r.length=f&65535,f=0,p=0,r.mode=Mf,s===Th)break e;case Mf:r.mode=ny;case ny:if(x=r.length,x){if(x>c&&(x=c),x>h&&(x=h),x===0)break e;o.set(a.subarray(l,l+x),d),c-=x,l+=x,h-=x,d+=x,r.length-=x;break}r.mode=el;break;case ay:for(;p<14;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(r.nlen=(f&31)+257,f>>>=5,p-=5,r.ndist=(f&31)+1,f>>>=5,p-=5,r.ncode=(f&15)+4,f>>>=4,p-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=tr;break}r.have=0,r.mode=iy;case iy:for(;r.have<r.ncode;){for(;p<3;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}r.lens[R[r.have++]]=f&7,f>>>=3,p-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,G={bits:r.lenbits},X=Su(uS,r.lens,0,19,r.lencode,0,r.work,G),r.lenbits=G.bits,X){t.msg="invalid code lengths set",r.mode=tr;break}r.have=0,r.mode=oy;case oy:for(;r.have<r.nlen+r.ndist;){for(;P=r.lencode[f&(1<<r.lenbits)-1],_=P>>>24,C=P>>>16&255,j=P&65535,!(_<=p);){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(j<16)f>>>=_,p-=_,r.lens[r.have++]=j;else{if(j===16){for(I=_+2;p<I;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(f>>>=_,p-=_,r.have===0){t.msg="invalid bit length repeat",r.mode=tr;break}U=r.lens[r.have-1],x=3+(f&3),f>>>=2,p-=2}else if(j===17){for(I=_+3;p<I;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}f>>>=_,p-=_,U=0,x=3+(f&7),f>>>=3,p-=3}else{for(I=_+7;p<I;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}f>>>=_,p-=_,U=0,x=11+(f&127),f>>>=7,p-=7}if(r.have+x>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=tr;break}for(;x--;)r.lens[r.have++]=U}}if(r.mode===tr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=tr;break}if(r.lenbits=9,G={bits:r.lenbits},X=Su(N2,r.lens,0,r.nlen,r.lencode,0,r.work,G),r.lenbits=G.bits,X){t.msg="invalid literal/lengths set",r.mode=tr;break}if(r.distbits=6,r.distcode=r.distdyn,G={bits:r.distbits},X=Su(_2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,G),r.distbits=G.bits,X){t.msg="invalid distances set",r.mode=tr;break}if(r.mode=Fh,s===Th)break e;case Fh:r.mode=Dh;case Dh:if(c>=6&&h>=258){t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=c,r.hold=f,r.bits=p,aS(t,b),d=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,a=t.input,c=t.avail_in,f=r.hold,p=r.bits,r.mode===el&&(r.back=-1);break}for(r.back=0;P=r.lencode[f&(1<<r.lenbits)-1],_=P>>>24,C=P>>>16&255,j=P&65535,!(_<=p);){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(C&&(C&240)===0){for(w=_,D=C,z=j;P=r.lencode[z+((f&(1<<w+D)-1)>>w)],_=P>>>24,C=P>>>16&255,j=P&65535,!(w+_<=p);){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}f>>>=w,p-=w,r.back+=w}if(f>>>=_,p-=_,r.back+=_,r.length=j,C===0){r.mode=hy;break}if(C&32){r.back=-1,r.mode=el;break}if(C&64){t.msg="invalid literal/length code",r.mode=tr;break}r.extra=C&15,r.mode=ly;case ly:if(r.extra){for(I=r.extra;p<I;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,p-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=cy;case cy:for(;P=r.distcode[f&(1<<r.distbits)-1],_=P>>>24,C=P>>>16&255,j=P&65535,!(_<=p);){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if((C&240)===0){for(w=_,D=C,z=j;P=r.distcode[z+((f&(1<<w+D)-1)>>w)],_=P>>>24,C=P>>>16&255,j=P&65535,!(w+_<=p);){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}f>>>=w,p-=w,r.back+=w}if(f>>>=_,p-=_,r.back+=_,C&64){t.msg="invalid distance code",r.mode=tr;break}r.offset=j,r.extra=C&15,r.mode=dy;case dy:if(r.extra){for(I=r.extra;p<I;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,p-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=tr;break}r.mode=uy;case uy:if(h===0)break e;if(x=b-h,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=tr;break}x>r.wnext?(x-=r.wnext,A=r.wsize-x):A=r.wnext-x,x>r.length&&(x=r.length),N=r.window}else N=o,A=d-r.offset,x=r.length;x>h&&(x=h),h-=x,r.length-=x;do o[d++]=N[A++];while(--x);r.length===0&&(r.mode=Dh);break;case hy:if(h===0)break e;o[d++]=r.length,h--,r.mode=Dh;break;case zf:if(r.wrap){for(;p<32;){if(c===0)break e;c--,f|=a[l++]<<p,p+=8}if(b-=h,t.total_out+=b,r.total+=b,r.wrap&4&&b&&(t.adler=r.check=r.flags?no(r.check,o,b,d-b):Np(r.check,o,b,d-b)),b=h,r.wrap&4&&(r.flags?f:py(f))!==r.check){t.msg="incorrect data check",r.mode=tr;break}f=0,p=0}r.mode=my;case my:if(r.wrap&&r.flags){for(;p<32;){if(c===0)break e;c--,f+=a[l++]<<p,p+=8}if(r.wrap&4&&f!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=tr;break}f=0,p=0}r.mode=fy;case fy:X=mS;break e;case tr:X=k2;break e;case C2:return S2;case A2:default:return ui}return t.next_out=d,t.avail_out=h,t.next_in=l,t.avail_in=c,r.hold=f,r.bits=p,(r.wsize||b!==t.avail_out&&r.mode<tr&&(r.mode<zf||s!==H0))&&F2(t,t.output,t.next_out,b-t.avail_out),y-=t.avail_in,b-=t.avail_out,t.total_in+=y,t.total_out+=b,r.total+=b,r.wrap&4&&b&&(t.adler=r.check=r.flags?no(r.check,o,b,t.next_out-b):Np(r.check,o,b,t.next_out-b)),t.data_type=r.bits+(r.last?64:0)+(r.mode===el?128:0)+(r.mode===Fh||r.mode===Mf?256:0),(y===0&&b===0||s===H0)&&X===Dc&&(X=pS),X},_S=t=>{if(Mc(t))return ui;let s=t.state;return s.window&&(s.window=null),t.state=null,Dc},kS=(t,s)=>{if(Mc(t))return ui;const r=t.state;return(r.wrap&2)===0?ui:(r.head=s,s.done=!1,Dc)},SS=(t,s)=>{const r=s.length;let a,o,l;return Mc(t)||(a=t.state,a.wrap!==0&&a.mode!==om)?ui:a.mode===om&&(o=1,o=Np(o,s,r,0),o!==a.check)?k2:(l=F2(t,s,r,r),l?(a.mode=C2,S2):(a.havedict=1,Dc))};var CS=L2,AS=E2,PS=P2,LS=jS,ES=T2,TS=NS,FS=_S,DS=kS,RS=SS,IS="pako inflate (from Nodeca project)",tl={inflateReset:CS,inflateReset2:AS,inflateResetKeep:PS,inflateInit:LS,inflateInit2:ES,inflate:TS,inflateEnd:FS,inflateGetHeader:DS,inflateSetDictionary:RS,inflateInfo:IS};function MS(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zS=MS;const D2=Object.prototype.toString,{Z_NO_FLUSH:OS,Z_FINISH:qS,Z_OK:Ru,Z_STREAM_END:$f,Z_NEED_DICT:Uf,Z_STREAM_ERROR:$S,Z_DATA_ERROR:gy,Z_MEM_ERROR:US}=b2;function Uu(t){this.options=j2.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(t&&t.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15)===0&&(s.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rS,this.strm.avail_out=0;let r=tl.inflateInit2(this.strm,s.windowBits);if(r!==Ru)throw new Error(_p[r]);if(this.header=new zS,tl.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=kp.string2buf(s.dictionary):D2.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(r=tl.inflateSetDictionary(this.strm,s.dictionary),r!==Ru)))throw new Error(_p[r])}Uu.prototype.push=function(t,s){const r=this.strm,a=this.options.chunkSize,o=this.options.dictionary;let l,d,c;if(this.ended)return!1;for(s===~~s?d=s:d=s===!0?qS:OS,D2.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),l=tl.inflate(r,d),l===Uf&&o&&(l=tl.inflateSetDictionary(r,o),l===Ru?l=tl.inflate(r,d):l===gy&&(l=Uf));r.avail_in>0&&l===$f&&r.state.wrap>0&&t[r.next_in]!==0;)tl.inflateReset(r),l=tl.inflate(r,d);switch(l){case $S:case gy:case Uf:case US:return this.onEnd(l),this.ended=!0,!1}if(c=r.avail_out,r.next_out&&(r.avail_out===0||l===$f))if(this.options.to==="string"){let h=kp.utf8border(r.output,r.next_out),f=r.next_out-h,p=kp.buf2string(r.output,h);r.next_out=f,r.avail_out=a-f,f&&r.output.set(r.output.subarray(h,h+f),0),this.onData(p)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(l===Ru&&c===0)){if(l===$f)return l=tl.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Uu.prototype.onData=function(t){this.chunks.push(t)};Uu.prototype.onEnd=function(t){t===Ru&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j2.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function BS(t,s){const r=new Uu(s);if(r.push(t),r.err)throw r.msg||_p[r.err];return r.result}var VS=Uu,WS=BS,HS={Inflate:VS,inflate:WS};const{Inflate:GS,inflate:ZS}=HS;var yy=GS,YS=ZS;const R2=[];for(let t=0;t<256;t++){let s=t;for(let r=0;r<8;r++)s&1?s=3988292384^s>>>1:s=s>>>1;R2[t]=s}const vy=4294967295;function KS(t,s,r){let a=t;for(let o=0;o<r;o++)a=R2[(a^s[o])&255]^a>>>8;return a}function JS(t,s){return(KS(vy,t,s)^vy)>>>0}function by(t,s,r){const a=t.readUint32(),o=JS(new Uint8Array(t.buffer,t.byteOffset+t.offset-s-4,s),s);if(o!==a)throw new Error(`CRC mismatch for chunk ${r}. Expected ${a}, found ${o}`)}function I2(t,s,r){for(let a=0;a<r;a++)s[a]=t[a]}function M2(t,s,r,a){let o=0;for(;o<a;o++)s[o]=t[o];for(;o<r;o++)s[o]=t[o]+s[o-a]&255}function z2(t,s,r,a){let o=0;if(r.length===0)for(;o<a;o++)s[o]=t[o];else for(;o<a;o++)s[o]=t[o]+r[o]&255}function O2(t,s,r,a,o){let l=0;if(r.length===0){for(;l<o;l++)s[l]=t[l];for(;l<a;l++)s[l]=t[l]+(s[l-o]>>1)&255}else{for(;l<o;l++)s[l]=t[l]+(r[l]>>1)&255;for(;l<a;l++)s[l]=t[l]+(s[l-o]+r[l]>>1)&255}}function q2(t,s,r,a,o){let l=0;if(r.length===0){for(;l<o;l++)s[l]=t[l];for(;l<a;l++)s[l]=t[l]+s[l-o]&255}else{for(;l<o;l++)s[l]=t[l]+r[l]&255;for(;l<a;l++)s[l]=t[l]+QS(s[l-o],r[l],r[l-o])&255}}function QS(t,s,r){const a=t+s-r,o=Math.abs(a-t),l=Math.abs(a-s),d=Math.abs(a-r);return o<=l&&o<=d?t:l<=d?s:r}function XS(t,s,r,a,o,l){switch(t){case 0:I2(s,r,o);break;case 1:M2(s,r,o,l);break;case 2:z2(s,r,a,o);break;case 3:O2(s,r,a,o,l);break;case 4:q2(s,r,a,o,l);break;default:throw new Error(`Unsupported filter: ${t}`)}}const eC=new Uint16Array([255]),tC=new Uint8Array(eC.buffer),sC=tC[0]===255;function rC(t){const{data:s,width:r,height:a,channels:o,depth:l}=t,d=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(l/8)*o,h=new Uint8Array(a*r*c);let f=0;for(let p=0;p<7;p++){const y=d[p],b=Math.ceil((r-y.x)/y.xStep),x=Math.ceil((a-y.y)/y.yStep);if(b<=0||x<=0)continue;const A=b*c,N=new Uint8Array(A);for(let P=0;P<x;P++){const _=s[f++],C=s.subarray(f,f+A);f+=A;const j=new Uint8Array(A);XS(_,C,j,N,A,c),N.set(j);for(let w=0;w<b;w++){const D=y.x+w*y.xStep,z=y.y+P*y.yStep;if(!(D>=r||z>=a))for(let U=0;U<c;U++)h[(z*r+D)*c+U]=j[w*c+U]}}}if(l===16){const p=new Uint16Array(h.buffer);if(sC)for(let y=0;y<p.length;y++)p[y]=nC(p[y]);return p}else return h}function nC(t){return(t&255)<<8|t>>8&255}const aC=new Uint16Array([255]),iC=new Uint8Array(aC.buffer),oC=iC[0]===255,lC=new Uint8Array(0);function jy(t){const{data:s,width:r,height:a,channels:o,depth:l}=t,d=Math.ceil(l/8)*o,c=Math.ceil(l/8*o*r),h=new Uint8Array(a*c);let f=lC,p=0,y,b;for(let x=0;x<a;x++){switch(y=s.subarray(p+1,p+1+c),b=h.subarray(x*c,(x+1)*c),s[p]){case 0:I2(y,b,c);break;case 1:M2(y,b,c,d);break;case 2:z2(y,b,f,c);break;case 3:O2(y,b,f,c,d);break;case 4:q2(y,b,f,c,d);break;default:throw new Error(`Unsupported filter: ${s[p]}`)}f=b,p+=c+1}if(l===16){const x=new Uint16Array(h.buffer);if(oC)for(let A=0;A<x.length;A++)x[A]=cC(x[A]);return x}else return h}function cC(t){return(t&255)<<8|t>>8&255}const Vh=Uint8Array.of(137,80,78,71,13,10,26,10);function wy(t){if(!dC(t.readBytes(Vh.length)))throw new Error("wrong PNG signature")}function dC(t){if(t.length<Vh.length)return!1;for(let s=0;s<Vh.length;s++)if(t[s]!==Vh[s])return!1;return!0}const uC="tEXt",hC=0,$2=new TextDecoder("latin1");function mC(t){if(pC(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const fC=/^[\u0000-\u00FF]*$/;function pC(t){if(!fC.test(t))throw new Error("invalid latin1 text")}function xC(t,s,r){const a=U2(s);t[a]=gC(s,r-a.length-1)}function U2(t){for(t.mark();t.readByte()!==hC;);const s=t.offset;t.reset();const r=$2.decode(t.readBytes(s-t.offset-1));return t.skip(1),mC(r),r}function gC(t,s){return $2.decode(t.readBytes(s))}const za={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Bf={UNKNOWN:-1,DEFLATE:0},Ny={UNKNOWN:-1,ADAPTIVE:0},Vf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Rh={NONE:0,BACKGROUND:1,PREVIOUS:2},Wf={SOURCE:0,OVER:1};class yC extends ux{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(s,r={}){super(s);const{checkCrc:a=!1}=r;this._checkCrc=a,this._inflator=new yy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Bf.UNKNOWN,this._filterMethod=Ny.UNKNOWN,this._interlaceMethod=Vf.UNKNOWN,this._colorType=za.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(wy(this);!this._end;){const s=this.readUint32(),r=this.readChars(4);this.decodeChunk(s,r)}return this.decodeImage(),this._png}decodeApng(){for(wy(this);!this._end;){const s=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(s,r)}return this.decodeApngImage(),this._apng}decodeChunk(s,r){const a=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case uC:xC(this._png.text,this,s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-a!==s)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?by(this,s+4,r):this.skip(4)}decodeApngChunk(s,r){const a=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(s);break;default:this.decodeChunk(s,r),this.offset=a+s;break}if(this.offset-a!==s)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?by(this,s+4,r):this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=vC(this.readUint8());const r=this.readUint8();this._colorType=r;let a;switch(r){case za.GREYSCALE:a=1;break;case za.TRUECOLOUR:a=3;break;case za.INDEXED_COLOUR:a=1;break;case za.GREYSCALE_ALPHA:a=2;break;case za.TRUECOLOUR_ALPHA:a=4;break;case za.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==Bf.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const s={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(s)}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const r=s/3;this._hasPalette=!0;const a=[];this._palette=a;for(let o=0;o<r;o++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._writingDataChunks=!0;const r=s,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodeFDAT(s){this._writingDataChunks=!0;let r=s,a=this.offset+this.byteOffset;if(a+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodetRNS(s){switch(this._colorType){case za.GREYSCALE:case za.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let r=0;r<s/2;r++)this._transparency[r]=this.readUint16();break}case za.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let r=0;for(;r<s;r++){const a=this.readByte();this._palette[r].push(a)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case za.UNKNOWN:case za.GREYSCALE_ALPHA:case za.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){const r=U2(this),a=this.readUint8();if(a!==Bf.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const o=this.readBytes(s-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:YS(o)}}decodepHYs(){const s=this.readUint32(),r=this.readUint32(),a=this.readByte();this._png.resolution={x:s,y:r,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let s=0;s<this._numberOfFrames;s++){const r={sequenceNumber:this._frames[s].sequenceNumber,delayNumber:this._frames[s].delayNumber,delayDenominator:this._frames[s].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(s);if(a){if(a.data=jy({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),s===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)r.data=a.data;else{const o=this._apng.frames.at(s-1);this.disposeFrame(a,o,r),this.addFrameDataToCanvas(r,a)}this._apng.frames.push(r)}}return this._apng}disposeFrame(s,r,a){switch(s.disposeOp){case Rh.NONE:break;case Rh.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const d=(o*s.width+l)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[d+c]=0}break;case Rh.PREVIOUS:a.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(s,r){const a=1<<this._png.depth,o=(l,d)=>{const c=((l+r.yOffset)*this._png.width+r.xOffset+d)*this._png.channels,h=(l*r.width+d)*this._png.channels;return{index:c,frameIndex:h}};switch(r.blendOp){case Wf.SOURCE:for(let l=0;l<r.height;l++)for(let d=0;d<r.width;d++){const{index:c,frameIndex:h}=o(l,d);for(let f=0;f<this._png.channels;f++)s.data[c+f]=r.data[h+f]}break;case Wf.OVER:for(let l=0;l<r.height;l++)for(let d=0;d<r.width;d++){const{index:c,frameIndex:h}=o(l,d);for(let f=0;f<this._png.channels;f++){const p=r.data[h+this._png.channels-1]/a,y=f%(this._png.channels-1)===0?1:r.data[h+f],b=Math.floor(p*y+(1-p)*s.data[c+f]);s.data[c+f]+=b}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Ny.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Vf.NO_INTERLACE)this._png.data=jy({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Vf.ADAM7)this._png.data=rC({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const s=this._inflator.result,r=this._frames.at(-1);r?r.data=s:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Rh.NONE,blendOp:Wf.SOURCE,data:s}),this._inflator=new yy,this._writingDataChunks=!1}}function vC(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var _y;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(_y||(_y={}));function bC(t,s){return new yC(t,s).decode()}var Wt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Hf(){Wt.console&&typeof Wt.console.log=="function"&&Wt.console.log.apply(Wt.console,arguments)}var Is={log:Hf,warn:function(t){Wt.console&&(typeof Wt.console.warn=="function"?Wt.console.warn.apply(Wt.console,arguments):Hf.call(null,arguments))},error:function(t){Wt.console&&(typeof Wt.console.error=="function"?Wt.console.error.apply(Wt.console,arguments):Hf(t))}};function Gf(t,s,r){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){Nc(a.response,s,r)},a.onerror=function(){Is.error("could not download file")},a.send()}function ky(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function Ih(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var Nc=Wt.saveAs||((typeof window>"u"?"undefined":Ls(window))!=="object"||window!==Wt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,r){var a=Wt.URL||Wt.webkitURL,o=document.createElement("a");s=s||t.name||"download",o.download=s,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?ky(o.href)?Gf(t,s,r):Ih(o,o.target="_blank"):Ih(o)):(o.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(o.href)},4e4),setTimeout(function(){Ih(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,r){if(s=s||t.name||"download",typeof t=="string")if(ky(t))Gf(t,s,r);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){Ih(a)})}else navigator.msSaveOrOpenBlob((function(o,l){return l===void 0?l={autoBom:!1}:Ls(l)!=="object"&&(Is.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(t,r),s)}:function(t,s,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof t=="string")return Gf(t,s,r);var o=t.type==="application/octet-stream",l=/constructor/i.test(Wt.HTMLElement)||Wt.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||o&&l)&&(typeof FileReader>"u"?"undefined":Ls(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=d?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=p:location=p,a=null},c.readAsDataURL(t)}else{var h=Wt.URL||Wt.webkitURL,f=h.createObjectURL(t);a?a.location=f:location.href=f,a=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function B2(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],a=0;a<r.length;a++){var o=r[a].re,l=r[a].process,d=o.exec(t);d&&(s=l(d),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+c+h+f}}var Wh=Wt.atob.bind(Wt),Sy=Wt.btoa.bind(Wt);function Zf(t,s){var r=t[0],a=t[1],o=t[2],l=t[3];r=Tn(r,a,o,l,s[0],7,-680876936),l=Tn(l,r,a,o,s[1],12,-389564586),o=Tn(o,l,r,a,s[2],17,606105819),a=Tn(a,o,l,r,s[3],22,-1044525330),r=Tn(r,a,o,l,s[4],7,-176418897),l=Tn(l,r,a,o,s[5],12,1200080426),o=Tn(o,l,r,a,s[6],17,-1473231341),a=Tn(a,o,l,r,s[7],22,-45705983),r=Tn(r,a,o,l,s[8],7,1770035416),l=Tn(l,r,a,o,s[9],12,-1958414417),o=Tn(o,l,r,a,s[10],17,-42063),a=Tn(a,o,l,r,s[11],22,-1990404162),r=Tn(r,a,o,l,s[12],7,1804603682),l=Tn(l,r,a,o,s[13],12,-40341101),o=Tn(o,l,r,a,s[14],17,-1502002290),r=Fn(r,a=Tn(a,o,l,r,s[15],22,1236535329),o,l,s[1],5,-165796510),l=Fn(l,r,a,o,s[6],9,-1069501632),o=Fn(o,l,r,a,s[11],14,643717713),a=Fn(a,o,l,r,s[0],20,-373897302),r=Fn(r,a,o,l,s[5],5,-701558691),l=Fn(l,r,a,o,s[10],9,38016083),o=Fn(o,l,r,a,s[15],14,-660478335),a=Fn(a,o,l,r,s[4],20,-405537848),r=Fn(r,a,o,l,s[9],5,568446438),l=Fn(l,r,a,o,s[14],9,-1019803690),o=Fn(o,l,r,a,s[3],14,-187363961),a=Fn(a,o,l,r,s[8],20,1163531501),r=Fn(r,a,o,l,s[13],5,-1444681467),l=Fn(l,r,a,o,s[2],9,-51403784),o=Fn(o,l,r,a,s[7],14,1735328473),r=Dn(r,a=Fn(a,o,l,r,s[12],20,-1926607734),o,l,s[5],4,-378558),l=Dn(l,r,a,o,s[8],11,-2022574463),o=Dn(o,l,r,a,s[11],16,1839030562),a=Dn(a,o,l,r,s[14],23,-35309556),r=Dn(r,a,o,l,s[1],4,-1530992060),l=Dn(l,r,a,o,s[4],11,1272893353),o=Dn(o,l,r,a,s[7],16,-155497632),a=Dn(a,o,l,r,s[10],23,-1094730640),r=Dn(r,a,o,l,s[13],4,681279174),l=Dn(l,r,a,o,s[0],11,-358537222),o=Dn(o,l,r,a,s[3],16,-722521979),a=Dn(a,o,l,r,s[6],23,76029189),r=Dn(r,a,o,l,s[9],4,-640364487),l=Dn(l,r,a,o,s[12],11,-421815835),o=Dn(o,l,r,a,s[15],16,530742520),r=Rn(r,a=Dn(a,o,l,r,s[2],23,-995338651),o,l,s[0],6,-198630844),l=Rn(l,r,a,o,s[7],10,1126891415),o=Rn(o,l,r,a,s[14],15,-1416354905),a=Rn(a,o,l,r,s[5],21,-57434055),r=Rn(r,a,o,l,s[12],6,1700485571),l=Rn(l,r,a,o,s[3],10,-1894986606),o=Rn(o,l,r,a,s[10],15,-1051523),a=Rn(a,o,l,r,s[1],21,-2054922799),r=Rn(r,a,o,l,s[8],6,1873313359),l=Rn(l,r,a,o,s[15],10,-30611744),o=Rn(o,l,r,a,s[6],15,-1560198380),a=Rn(a,o,l,r,s[13],21,1309151649),r=Rn(r,a,o,l,s[4],6,-145523070),l=Rn(l,r,a,o,s[11],10,-1120210379),o=Rn(o,l,r,a,s[2],15,718787259),a=Rn(a,o,l,r,s[9],21,-343485551),t[0]=Bl(r,t[0]),t[1]=Bl(a,t[1]),t[2]=Bl(o,t[2]),t[3]=Bl(l,t[3])}function Sm(t,s,r,a,o,l){return s=Bl(Bl(s,t),Bl(a,l)),Bl(s<<o|s>>>32-o,r)}function Tn(t,s,r,a,o,l,d){return Sm(s&r|~s&a,t,s,o,l,d)}function Fn(t,s,r,a,o,l,d){return Sm(s&a|r&~a,t,s,o,l,d)}function Dn(t,s,r,a,o,l,d){return Sm(s^r^a,t,s,o,l,d)}function Rn(t,s,r,a,o,l,d){return Sm(r^(s|~a),t,s,o,l,d)}function V2(t){var s,r=t.length,a=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)Zf(a,jC(t.substring(s-64,s)));t=t.substring(s-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)o[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(o[s>>2]|=128<<(s%4<<3),s>55)for(Zf(a,o),s=0;s<16;s++)o[s]=0;return o[14]=8*r,Zf(a,o),a}function jC(t){var s,r=[];for(s=0;s<64;s+=4)r[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return r}var Cy="0123456789abcdef".split("");function wC(t){for(var s="",r=0;r<4;r++)s+=Cy[t>>8*r+4&15]+Cy[t>>8*r&15];return s}function NC(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Sp(t){return V2(t).map(NC).join("")}var _C=(function(t){for(var s=0;s<t.length;s++)t[s]=wC(t[s]);return t.join("")})(V2("hello"))!="5d41402abc4b2a76b9719d911017c592";function Bl(t,s){if(_C){var r=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(r>>16)<<16|65535&r}return t+s&4294967295}function Cp(t,s){var r,a,o,l;if(t!==r){for(var d=(o=t,l=1+(256/t.length|0),new Array(l+1).join(o)),c=[],h=0;h<256;h++)c[h]=h;var f=0;for(h=0;h<256;h++){var p=c[h];f=(f+p+d.charCodeAt(h))%256,c[h]=c[f],c[f]=p}r=t,a=c}else c=a;var y=s.length,b=0,x=0,A="";for(h=0;h<y;h++)x=(x+(p=c[b=(b+1)%256]))%256,c[b]=c[x],c[x]=p,d=c[(c[b]+c[x])%256],A+=String.fromCharCode(s.charCodeAt(h)^d);return A}var Ay={print:4,modify:8,copy:16,"annot-forms":32};function Cd(t,s,r,a){this.v=1,this.r=2;var o=192;t.forEach(function(c){if(Ay.perm!==void 0)throw new Error("Invalid permission: "+c);o+=Ay[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(s+this.padding).substr(0,32),d=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^o)),this.encryptionKey=Sp(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Cp(this.encryptionKey,this.padding)}function Ad(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",r=t.length,a=0;a<r;a++){var o=t.charCodeAt(a);s+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):t[a]}return s}function Py(t){if(Ls(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(r,a,o){if(o=o||!1,typeof r!="string"||typeof a!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(r)||(s[r]={});var l=Math.random().toString(35);return s[r][l]=[a,!!o],l},this.unsubscribe=function(r){for(var a in s)if(s[a][r])return delete s[a][r],Object.keys(s[a]).length===0&&delete s[a],!0;return!1},this.publish=function(r){if(s.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),o=[];for(var l in s[r]){var d=s[r][l];try{d[0].apply(t,a)}catch(c){Wt.console&&Is.error("jsPDF PubSub Error",c.message,c)}d[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function lm(t){if(!(this instanceof lm))return new lm(t);var s="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&s.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function W2(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function _c(t,s,r,a,o){if(!(this instanceof _c))return new _c(t,s,r,a,o);this.type=t==="axial"?2:3,this.coords=s,this.colors=r,W2.call(this,a,o)}function Ed(t,s,r,a,o){if(!(this instanceof Ed))return new Ed(t,s,r,a,o);this.boundingBox=t,this.xStep=s,this.yStep=r,this.stream="",this.cloneIndex=0,W2.call(this,a,o)}function Lt(t){var s,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],o=arguments[2],l=arguments[3],d=[],c=1,h=16,f="S",p=null;Ls(t=t||{})==="object"&&(r=t.orientation,a=t.unit||a,o=t.format||o,l=t.compress||t.compressPdf||l,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(h=t.floatPrecision),f=t.defaultPathOperation||"S"),d=t.filters||(l===!0?["FlateEncode"]:d),a=a||"mm",r=(""+(r||"P")).toLowerCase();var y=t.putOnlyUsedFonts||!1,b={},x={internal:{},__private__:{}};x.__private__.PubSub=Py;var A="1.3",N=x.__private__.getPdfVersion=function(){return A};x.__private__.setPdfVersion=function(k){A=k};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return P};var _=x.__private__.getPageFormat=function(k){return P[k]};o=o||"a4";var C="compat",j="advanced",w=C;function D(){this.saveGraphicsState(),le(new Ft(Et,0,0,-Et,0,ia()*Et).toString()+" cm"),this.setFontSize(this.getFontSize()/Et),f="n",w=j}function z(){this.restoreGraphicsState(),f="S",w=C}var U=x.__private__.combineFontStyleAndFontWeight=function(k,H){if(k=="bold"&&H=="normal"||k=="bold"&&H==400||k=="normal"&&H=="italic"||k=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(k=H==400||H==="normal"?k==="italic"?"italic":"normal":H!=700&&H!=="bold"||k!=="normal"?(H==700?"bold":H)+""+k:"bold"),k};x.advancedAPI=function(k){var H=w===C;return H&&D.call(this),typeof k!="function"||(k(this),H&&z.call(this)),this},x.compatAPI=function(k){var H=w===j;return H&&z.call(this),typeof k!="function"||(k(this),H&&D.call(this)),this},x.isAdvancedAPI=function(){return w===j};var X,E=function(k){if(w!==j)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=x.roundToPrecision=x.__private__.roundToPrecision=function(k,H){var oe=s||H;if(isNaN(k)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(oe).replace(/0+$/,"")};X=x.hpf=x.__private__.hpf=typeof h=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return G(k,h)}:h==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return G(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return G(k,16)};var I=x.f2=x.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return G(k,2)},R=x.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return G(k,3)},$=x.scale=x.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return w===C?k*Et:w===j?k:void 0},q=function(k){return $((function(H){return w===C?ia()-H:w===j?H:void 0})(k))};x.__private__.setPrecision=x.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(s=parseInt(k,10))};var Q,he="00000000000000000000000000000000",be=x.__private__.getFileId=function(){return he},V=x.__private__.setFileId=function(k){return he=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(ir=new Cd(p.userPermissions,p.userPassword,p.ownerPassword,he)),he};x.setFileId=function(k){return V(k),this},x.getFileId=function(){return be()};var de=x.__private__.convertDateToPDFDate=function(k){var H=k.getTimezoneOffset(),oe=H<0?"+":"-",ve=Math.floor(Math.abs(H/60)),Ae=Math.abs(H%60),Be=[oe,K(ve),"'",K(Ae),"'"].join("");return["D:",k.getFullYear(),K(k.getMonth()+1),K(k.getDate()),K(k.getHours()),K(k.getMinutes()),K(k.getSeconds()),Be].join("")},ke=x.__private__.convertPDFDateToDate=function(k){var H=parseInt(k.substr(2,4),10),oe=parseInt(k.substr(6,2),10)-1,ve=parseInt(k.substr(8,2),10),Ae=parseInt(k.substr(10,2),10),Be=parseInt(k.substr(12,2),10),Ze=parseInt(k.substr(14,2),10);return new Date(H,oe,ve,Ae,Be,Ze,0)},te=x.__private__.setCreationDate=function(k){var H;if(k===void 0&&(k=new Date),k instanceof Date)H=de(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=k}return Q=H},O=x.__private__.getCreationDate=function(k){var H=Q;return k==="jsDate"&&(H=ke(Q)),H};x.setCreationDate=function(k){return te(k),this},x.getCreationDate=function(k){return O(k)};var re,K=x.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},ne=x.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},pe=0,je=[],_e=[],ue=0,xe=[],Ie=[],He=!1,Je=_e;x.__private__.setCustomOutputDestination=function(k){He=!0,Je=k};var De=function(k){He||(Je=k)};x.__private__.resetCustomOutputDestination=function(){He=!1,Je=_e};var le=x.__private__.out=function(k){return k=k.toString(),ue+=k.length+1,Je.push(k),Je},Nt=x.__private__.write=function(k){return le(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},At=x.__private__.getArrayBuffer=function(k){for(var H=k.length,oe=new ArrayBuffer(H),ve=new Uint8Array(oe);H--;)ve[H]=k.charCodeAt(H);return oe},ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return ct};var Ye=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(k){return Ye=w===j?k/Et:k,this};var ce,ye=x.__private__.getFontSize=x.getFontSize=function(){return w===C?Ye:Ye*Et},Le=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(k){return Le=k,this},x.__private__.getR2L=x.getR2L=function(){return Le};var Ue,Ge=x.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))ce=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');ce=k}else ce=parseInt(k,10)};x.__private__.getZoomMode=function(){return ce};var qe,Qe=x.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Ue=k};x.__private__.getPageMode=function(){return Ue};var _t=x.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');qe=k};x.__private__.getLayoutMode=function(){return qe},x.__private__.setDisplayMode=x.setDisplayMode=function(k,H,oe){return Ge(k),_t(H),Qe(oe),this};var lt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(k){if(Object.keys(lt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lt[k]},x.__private__.getDocumentProperties=function(){return lt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(k){for(var H in lt)lt.hasOwnProperty(H)&&k[H]&&(lt[H]=k[H]);return this},x.__private__.setDocumentProperty=function(k,H){if(Object.keys(lt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lt[k]=H};var ut,Et,ht,ws,es,yt={},Ut={},is=[],Tt={},Kt={},Bt={},Vs={},Os=null,os=0,Ot=[],ds=new Py(x),qi=t.hotfixes||[],Ur={},Ua={},Qn=[],Ft=function k(H,oe,ve,Ae,Be,Ze){if(!(this instanceof k))return new k(H,oe,ve,Ae,Be,Ze);isNaN(H)&&(H=1),isNaN(oe)&&(oe=0),isNaN(ve)&&(ve=0),isNaN(Ae)&&(Ae=1),isNaN(Be)&&(Be=0),isNaN(Ze)&&(Ze=0),this._matrix=[H,oe,ve,Ae,Be,Ze]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(X).join(k)},Ft.prototype.multiply=function(k){var H=k.sx*this.sx+k.shy*this.shx,oe=k.sx*this.shy+k.shy*this.sy,ve=k.shx*this.sx+k.sy*this.shx,Ae=k.shx*this.shy+k.sy*this.sy,Be=k.tx*this.sx+k.ty*this.shx+this.tx,Ze=k.tx*this.shy+k.ty*this.sy+this.ty;return new Ft(H,oe,ve,Ae,Be,Ze)},Ft.prototype.decompose=function(){var k=this.sx,H=this.shy,oe=this.shx,ve=this.sy,Ae=this.tx,Be=this.ty,Ze=Math.sqrt(k*k+H*H),vt=(k/=Ze)*oe+(H/=Ze)*ve;oe-=k*vt,ve-=H*vt;var St=Math.sqrt(oe*oe+ve*ve);return vt/=St,k*(ve/=St)<H*(oe/=St)&&(k=-k,H=-H,vt=-vt,Ze=-Ze),{scale:new Ft(Ze,0,0,St,0,0),translate:new Ft(1,0,0,1,Ae,Be),rotate:new Ft(k,H,-H,k,0,0),skew:new Ft(1,0,vt,1,0,0)}},Ft.prototype.toString=function(k){return this.join(" ")},Ft.prototype.inversed=function(){var k=this.sx,H=this.shy,oe=this.shx,ve=this.sy,Ae=this.tx,Be=this.ty,Ze=1/(k*ve-H*oe),vt=ve*Ze,St=-H*Ze,qt=-oe*Ze,$t=k*Ze;return new Ft(vt,St,qt,$t,-vt*Ae-qt*Be,-St*Ae-$t*Be)},Ft.prototype.applyToPoint=function(k){var H=k.x*this.sx+k.y*this.shx+this.tx,oe=k.x*this.shy+k.y*this.sy+this.ty;return new Za(H,oe)},Ft.prototype.applyToRectangle=function(k){var H=this.applyToPoint(k),oe=this.applyToPoint(new Za(k.x+k.w,k.y+k.h));return new Ao(H.x,H.y,oe.x-H.x,oe.y-H.y)},Ft.prototype.clone=function(){var k=this.sx,H=this.shy,oe=this.shx,ve=this.sy,Ae=this.tx,Be=this.ty;return new Ft(k,H,oe,ve,Ae,Be)},x.Matrix=Ft;var On=x.matrixMult=function(k,H){return H.multiply(k)},wa=new Ft(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=wa;var Jr=function(k,H){if(!Kt[k]){var oe=(H instanceof _c?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);H.id=oe,Kt[k]=oe,Tt[oe]=H,ds.publish("addPattern",H)}};x.ShadingPattern=_c,x.TilingPattern=Ed,x.addShadingPattern=function(k,H){return E("addShadingPattern()"),Jr(k,H),this},x.beginTilingPattern=function(k){E("beginTilingPattern()"),ra(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},x.endTilingPattern=function(k,H){E("endTilingPattern()"),H.stream=Ie[re].join(`
`),Jr(k,H),ds.publish("endTilingPattern",H),Qn.pop().restore()};var Xn,Es=x.__private__.newObject=function(){var k=ar();return pr(k,!0),k},ar=x.__private__.newObjectDeferred=function(){return pe++,je[pe]=function(){return ue},pe},pr=function(k,H){return H=typeof H=="boolean"&&H,je[k]=ue,H&&le(k+" 0 obj"),k},mi=x.__private__.newAdditionalObject=function(){var k={objId:ar(),content:""};return xe.push(k),k},$i=ar(),Na=ar(),Ba=x.__private__.decodeColorString=function(k){var H=k.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var oe=parseFloat(H[0]);H=[oe,oe,oe,"r"]}for(var ve="#",Ae=0;Ae<3;Ae++)ve+=("0"+Math.floor(255*parseFloat(H[Ae])).toString(16)).slice(-2);return ve},Br=x.__private__.encodeColorString=function(k){var H;typeof k=="string"&&(k={ch1:k});var oe=k.ch1,ve=k.ch2,Ae=k.ch3,Be=k.ch4,Ze=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var vt=new B2(oe);if(vt.ok)oe=vt.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var St=parseInt(oe.substr(1),16);oe=St>>16&255,ve=St>>8&255,Ae=255&St}if(ve===void 0||Be===void 0&&oe===ve&&ve===Ae)H=typeof oe=="string"?oe+" "+Ze[0]:k.precision===2?I(oe/255)+" "+Ze[0]:R(oe/255)+" "+Ze[0];else if(Be===void 0||Ls(Be)==="object"){if(Be&&!isNaN(Be.a)&&Be.a===0)return["1.","1.","1.",Ze[1]].join(" ");H=typeof oe=="string"?[oe,ve,Ae,Ze[1]].join(" "):k.precision===2?[I(oe/255),I(ve/255),I(Ae/255),Ze[1]].join(" "):[R(oe/255),R(ve/255),R(Ae/255),Ze[1]].join(" ")}else H=typeof oe=="string"?[oe,ve,Ae,Be,Ze[2]].join(" "):k.precision===2?[I(oe),I(ve),I(Ae),I(Be),Ze[2]].join(" "):[R(oe),R(ve),R(Ae),R(Be),Ze[2]].join(" ");return H},ea=x.__private__.getFilters=function(){return d},qn=x.__private__.putStream=function(k){var H=(k=k||{}).data||"",oe=k.filters||ea(),ve=k.alreadyAppliedFilters||[],Ae=k.addLength1||!1,Be=H.length,Ze=k.objectId,vt=function(_r){return _r};if(p!==null&&Ze===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(vt=ir.encryptor(Ze,0));var St={};oe===!0&&(oe=["FlateEncode"]);var qt=k.additionalKeyValues||[],$t=(St=Lt.API.processDataByFilters!==void 0?Lt.API.processDataByFilters(H,oe):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(St.data.length!==0&&(qt.push({key:"Length",value:St.data.length}),Ae===!0&&qt.push({key:"Length1",value:Be})),$t.length!=0)if($t.split("/").length-1==1)qt.push({key:"Filter",value:$t});else{qt.push({key:"Filter",value:"["+$t+"]"});for(var us=0;us<qt.length;us+=1)if(qt[us].key==="DecodeParms"){for(var Ws=[],gr=0;gr<St.reverseChain.split("/").length-1;gr+=1)Ws.push("null");Ws.push(qt[us].value),qt[us].value="["+Ws.join(" ")+"]"}}le("<<");for(var Ts=0;Ts<qt.length;Ts++)le("/"+qt[Ts].key+" "+qt[Ts].value);le(">>"),St.data.length!==0&&(le("stream"),le(vt(St.data)),le("endstream"))},yo=x.__private__.putPage=function(k){var H=k.number,oe=k.data,ve=k.objId,Ae=k.contentsObjId;pr(ve,!0),le("<</Type /Page"),le("/Parent "+k.rootDictionaryObjId+" 0 R"),le("/Resources "+k.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(X(k.mediaBox.bottomLeftX))+" "+parseFloat(X(k.mediaBox.bottomLeftY))+" "+X(k.mediaBox.topRightX)+" "+X(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&le("/CropBox ["+X(k.cropBox.bottomLeftX)+" "+X(k.cropBox.bottomLeftY)+" "+X(k.cropBox.topRightX)+" "+X(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&le("/BleedBox ["+X(k.bleedBox.bottomLeftX)+" "+X(k.bleedBox.bottomLeftY)+" "+X(k.bleedBox.topRightX)+" "+X(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&le("/TrimBox ["+X(k.trimBox.bottomLeftX)+" "+X(k.trimBox.bottomLeftY)+" "+X(k.trimBox.topRightX)+" "+X(k.trimBox.topRightY)+"]"),k.artBox!==null&&le("/ArtBox ["+X(k.artBox.bottomLeftX)+" "+X(k.artBox.bottomLeftY)+" "+X(k.artBox.topRightX)+" "+X(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&le("/UserUnit "+k.userUnit),ds.publish("putPage",{objId:ve,pageContext:Ot[H],pageNumber:H,page:oe}),le("/Contents "+Ae+" 0 R"),le(">>"),le("endobj");var Be=oe.join(`
`);return w===j&&(Be+=`
Q`),pr(Ae,!0),qn({data:Be,filters:ea(),objectId:Ae}),le("endobj"),ve},_a=x.__private__.putPages=function(){var k,H,oe=[];for(k=1;k<=os;k++)Ot[k].objId=ar(),Ot[k].contentsObjId=ar();for(k=1;k<=os;k++)oe.push(yo({number:k,data:Ie[k],objId:Ot[k].objId,contentsObjId:Ot[k].contentsObjId,mediaBox:Ot[k].mediaBox,cropBox:Ot[k].cropBox,bleedBox:Ot[k].bleedBox,trimBox:Ot[k].trimBox,artBox:Ot[k].artBox,userUnit:Ot[k].userUnit,rootDictionaryObjId:$i,resourceDictionaryObjId:Na}));pr($i,!0),le("<</Type /Pages");var ve="/Kids [";for(H=0;H<os;H++)ve+=oe[H]+" 0 R ";le(ve+"]"),le("/Count "+os),le(">>"),le("endobj"),ds.publish("postPutPages")},Ui=function(k){ds.publish("putFont",{font:k,out:le,newObject:Es,putStream:qn}),k.isAlreadyPutted!==!0&&(k.objectNumber=Es(),le("<<"),le("/Type /Font"),le("/BaseFont /"+Ad(k.postScriptName)),le("/Subtype /Type1"),typeof k.encoding=="string"&&le("/Encoding /"+k.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},vo=function(k){k.objectNumber=Es();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[X(k.x),X(k.y),X(k.x+k.width),X(k.y+k.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var oe=k.pages[1].join(`
`);qn({data:oe,additionalKeyValues:H,objectId:k.objectNumber}),le("endobj")},bo=function(k,H){H||(H=21);var oe=Es(),ve=(function(Ze,vt){var St,qt=[],$t=1/(vt-1);for(St=0;St<1;St+=$t)qt.push(St);if(qt.push(1),Ze[0].offset!=0){var us={offset:0,color:Ze[0].color};Ze.unshift(us)}if(Ze[Ze.length-1].offset!=1){var Ws={offset:1,color:Ze[Ze.length-1].color};Ze.push(Ws)}for(var gr="",Ts=0,_r=0;_r<qt.length;_r++){for(St=qt[_r];St>Ze[Ts+1].offset;)Ts++;var or=Ze[Ts].offset,Vr=(St-or)/(Ze[Ts+1].offset-or),oa=Ze[Ts].color,Nn=Ze[Ts+1].color;gr+=ne(Math.round((1-Vr)*oa[0]+Vr*Nn[0]).toString(16))+ne(Math.round((1-Vr)*oa[1]+Vr*Nn[1]).toString(16))+ne(Math.round((1-Vr)*oa[2]+Vr*Nn[2]).toString(16))}return gr.trim()})(k.colors,H),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+H+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qn({data:ve,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),le("endobj"),k.objectNumber=Es(),le("<< /ShadingType "+k.type),le("/ColorSpace /DeviceRGB");var Be="/Coords ["+X(parseFloat(k.coords[0]))+" "+X(parseFloat(k.coords[1]))+" ";k.type===2?Be+=X(parseFloat(k.coords[2]))+" "+X(parseFloat(k.coords[3])):Be+=X(parseFloat(k.coords[2]))+" "+X(parseFloat(k.coords[3]))+" "+X(parseFloat(k.coords[4]))+" "+X(parseFloat(k.coords[5])),le(Be+="]"),k.matrix&&le("/Matrix ["+k.matrix.toString()+"]"),le("/Function "+oe+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},al=function(k,H){var oe=ar(),ve=Es();H.push({resourcesOid:oe,objectOid:ve}),k.objectNumber=ve;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+k.boundingBox.map(X).join(" ")+"]"}),Ae.push({key:"XStep",value:X(k.xStep)}),Ae.push({key:"YStep",value:X(k.yStep)}),Ae.push({key:"Resources",value:oe+" 0 R"}),k.matrix&&Ae.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),qn({data:k.stream,additionalKeyValues:Ae,objectId:k.objectNumber}),le("endobj")},Gd=function(k){for(var H in k.objectNumber=Es(),le("<<"),k)switch(H){case"opacity":le("/ca "+I(k[H]));break;case"stroke-opacity":le("/CA "+I(k[H]))}le(">>"),le("endobj")},Ds=function(k){pr(k.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in le("/Font <<"),yt)yt.hasOwnProperty(H)&&(y===!1||y===!0&&b.hasOwnProperty(H))&&le("/"+H+" "+yt[H].objectNumber+" 0 R");le(">>")})(),(function(){if(Object.keys(Tt).length>0){for(var H in le("/Shading <<"),Tt)Tt.hasOwnProperty(H)&&Tt[H]instanceof _c&&Tt[H].objectNumber>=0&&le("/"+H+" "+Tt[H].objectNumber+" 0 R");ds.publish("putShadingPatternDict"),le(">>")}})(),(function(H){if(Object.keys(Tt).length>0){for(var oe in le("/Pattern <<"),Tt)Tt.hasOwnProperty(oe)&&Tt[oe]instanceof x.TilingPattern&&Tt[oe].objectNumber>=0&&Tt[oe].objectNumber<H&&le("/"+oe+" "+Tt[oe].objectNumber+" 0 R");ds.publish("putTilingPatternDict"),le(">>")}})(k.objectOid),(function(){if(Object.keys(Bt).length>0){var H;for(H in le("/ExtGState <<"),Bt)Bt.hasOwnProperty(H)&&Bt[H].objectNumber>=0&&le("/"+H+" "+Bt[H].objectNumber+" 0 R");ds.publish("putGStateDict"),le(">>")}})(),(function(){for(var H in le("/XObject <<"),Ur)Ur.hasOwnProperty(H)&&Ur[H].objectNumber>=0&&le("/"+H+" "+Ur[H].objectNumber+" 0 R");ds.publish("putXobjectDict"),le(">>")})(),le(">>"),le("endobj")},Oc=function(k){Ut[k.fontName]=Ut[k.fontName]||{},Ut[k.fontName][k.fontStyle]=k.id},il=function(k,H,oe,ve,Ae){var Be={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:k,fontName:H,fontStyle:oe,encoding:ve,isStandardFont:Ae||!1,metadata:{}};return ds.publish("addFont",{font:Be,instance:this}),yt[Be.id]=Be,Oc(Be),Be.id},$n=x.__private__.pdfEscape=x.pdfEscape=function(k,H){return(function(oe,ve){var Ae,Be,Ze,vt,St,qt,$t,us,Ws;if(Ze=(ve=ve||{}).sourceEncoding||"Unicode",St=ve.outputEncoding,(ve.autoencode||St)&&yt[ut].metadata&&yt[ut].metadata[Ze]&&yt[ut].metadata[Ze].encoding&&(vt=yt[ut].metadata[Ze].encoding,!St&&yt[ut].encoding&&(St=yt[ut].encoding),!St&&vt.codePages&&(St=vt.codePages[0]),typeof St=="string"&&(St=vt[St]),St)){for($t=!1,qt=[],Ae=0,Be=oe.length;Ae<Be;Ae++)(us=St[oe.charCodeAt(Ae)])?qt.push(String.fromCharCode(us)):qt.push(oe[Ae]),qt[Ae].charCodeAt(0)>>8&&($t=!0);oe=qt.join("")}for(Ae=oe.length;$t===void 0&&Ae!==0;)oe.charCodeAt(Ae-1)>>8&&($t=!0),Ae--;if(!$t)return oe;for(qt=ve.noBOM?[]:[254,255],Ae=0,Be=oe.length;Ae<Be;Ae++){if((Ws=(us=oe.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(Ws),qt.push(us-(Ws<<8))}return String.fromCharCode.apply(void 0,qt)})(k,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bi=x.__private__.beginPage=function(k){Ie[++os]=[],Ot[os]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},jo(os),De(Ie[re])},qc=function(k,H){var oe,ve,Ae;switch(r=H||r,typeof k=="string"&&(oe=_(k.toLowerCase()),Array.isArray(oe)&&(ve=oe[0],Ae=oe[1])),Array.isArray(k)&&(ve=k[0]*Et,Ae=k[1]*Et),isNaN(ve)&&(ve=o[0],Ae=o[1]),(ve>14400||Ae>14400)&&(Is.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Ae=Math.min(14400,Ae)),o=[ve,Ae],r.substr(0,1)){case"l":Ae>ve&&(o=[Ae,ve]);break;case"p":ve>Ae&&(o=[Ae,ve])}Bi(o),So(sa),le(Co),Ql!==0&&le(Ql+" J"),Xl!==0&&le(Xl+" j"),ds.publish("addPage",{pageNumber:os})},ol=function(k){k>0&&k<=os&&(Ie.splice(k,1),Ot.splice(k,1),os--,re>os&&(re=os),this.setPage(re))},jo=function(k){k>0&&k<=os&&(re=k)},Un=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ie.length-1},$c=function(k,H,oe){var ve,Ae=void 0;return oe=oe||{},k=k!==void 0?k:yt[ut].fontName,H=H!==void 0?H:yt[ut].fontStyle,ve=k.toLowerCase(),Ut[ve]!==void 0&&Ut[ve][H]!==void 0?Ae=Ut[ve][H]:Ut[k]!==void 0&&Ut[k][H]!==void 0?Ae=Ut[k][H]:oe.disableWarning===!1&&Is.warn("Unable to look up font label for font '"+k+"', '"+H+"'. Refer to getFontList() for available fonts."),Ae||oe.noFallback||(Ae=Ut.times[H])==null&&(Ae=Ut.times.normal),Ae},Qr=x.__private__.putInfo=function(){var k=Es(),H=function(ve){return ve};for(var oe in p!==null&&(H=ir.encryptor(k,0)),le("<<"),le("/Producer ("+$n(H("jsPDF "+Lt.version))+")"),lt)lt.hasOwnProperty(oe)&&lt[oe]&&le("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+$n(H(lt[oe]))+")");le("/CreationDate ("+$n(H(Q))+")"),le(">>"),le("endobj")},Zd=x.__private__.putCatalog=function(k){var H=(k=k||{}).rootDictionaryObjId||$i;switch(Es(),le("<<"),le("/Type /Catalog"),le("/Pages "+H+" 0 R"),ce||(ce="fullwidth"),ce){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+ce;oe.substr(oe.length-1)==="%"&&(ce=parseInt(ce)/100),typeof ce=="number"&&le("/OpenAction [3 0 R /XYZ null null "+I(ce)+"]")}switch(qe||(qe="continuous"),qe){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}Ue&&le("/PageMode /"+Ue),ds.publish("putCatalog"),le(">>"),le("endobj")},xr=x.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(pe+1)),le("/Root "+pe+" 0 R"),le("/Info "+(pe-1)+" 0 R"),p!==null&&le("/Encrypt "+ir.oid+" 0 R"),le("/ID [ <"+he+"> <"+he+"> ]"),le(">>")},Uc=x.__private__.putHeader=function(){le("%PDF-"+A),le("%")},wo=x.__private__.putXRef=function(){var k="0000000000";le("xref"),le("0 "+(pe+1)),le("0000000000 65535 f ");for(var H=1;H<=pe;H++)typeof je[H]=="function"?le((k+je[H]()).slice(-10)+" 00000 n "):je[H]!==void 0?le((k+je[H]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},ta=x.__private__.buildDocument=function(){var k;pe=0,ue=0,_e=[],je=[],xe=[],$i=ar(),Na=ar(),De(_e),ds.publish("buildDocument"),Uc(),_a(),(function(){ds.publish("putAdditionalObjects");for(var oe=0;oe<xe.length;oe++){var ve=xe[oe];pr(ve.objId,!0),le(ve.content),le("endobj")}ds.publish("postPutAdditionalObjects")})(),k=[],(function(){for(var oe in yt)yt.hasOwnProperty(oe)&&(y===!1||y===!0&&b.hasOwnProperty(oe))&&Ui(yt[oe])})(),(function(){var oe;for(oe in Bt)Bt.hasOwnProperty(oe)&&Gd(Bt[oe])})(),(function(){for(var oe in Ur)Ur.hasOwnProperty(oe)&&vo(Ur[oe])})(),(function(oe){var ve;for(ve in Tt)Tt.hasOwnProperty(ve)&&(Tt[ve]instanceof _c?bo(Tt[ve]):Tt[ve]instanceof Ed&&al(Tt[ve],oe))})(k),ds.publish("putResources"),k.forEach(Ds),Ds({resourcesOid:Na,objectOid:Number.MAX_SAFE_INTEGER}),ds.publish("postPutResources"),p!==null&&(ir.oid=Es(),le("<<"),le("/Filter /Standard"),le("/V "+ir.v),le("/R "+ir.r),le("/U <"+ir.toHexString(ir.U)+">"),le("/O <"+ir.toHexString(ir.O)+">"),le("/P "+ir.P),le(">>"),le("endobj")),Qr(),Zd();var H=ue;return wo(),xr(),le("startxref"),le(""+H),le("%%EOF"),De(Ie[re]),_e.join(`
`)},ka=x.__private__.getBlob=function(k){return new Blob([At(k)],{type:"application/pdf"})},jn=x.output=x.__private__.output=(Xn=function(k,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",k){case void 0:return ta();case"save":x.save(H.filename);break;case"arraybuffer":return At(ta());case"blob":return ka(ta());case"bloburi":case"bloburl":if(Wt.URL!==void 0&&typeof Wt.URL.createObjectURL=="function")return Wt.URL&&Wt.URL.createObjectURL(ka(ta()))||void 0;Is.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ve=ta();try{oe=Sy(ve)}catch{oe=Sy(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+H.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ae=H.pdfObjectUrl,Be="");var Ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",vt=Wt.open();return vt!==null&&vt.document.write(Ze),vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',qt=Wt.open();if(qt!==null){qt.document.write(St);var $t=this;qt.document.documentElement.querySelector("#pdfViewer").onload=function(){qt.document.title=H.filename,qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($t.output("bloburl"))}}return qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var us='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Ws=Wt.open();if(Ws!==null&&(Ws.document.write(us),Ws.document.title=H.filename),Ws||typeof safari>"u")return Ws;break;case"datauri":case"dataurl":return Wt.document.location.href=this.output("datauristring",H);default:return null}},Xn.foo=function(){try{return Xn.apply(this,arguments)}catch(oe){var k=oe.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var H="Error in function "+k.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Wt.console)throw new Error(H);Wt.console.error(H,oe),Wt.alert&&alert(H)}},Xn.foo.bar=Xn,Xn.foo),No=function(k){return Array.isArray(qi)===!0&&qi.indexOf(k)>-1};switch(a){case"pt":Et=1;break;case"mm":Et=72/25.4;break;case"cm":Et=72/2.54;break;case"in":Et=72;break;case"px":Et=No("px_scaling")==1?.75:96/72;break;case"pc":case"em":Et=12;break;case"ex":Et=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Et=a}var ir=null;te(),V();var _o=x.__private__.getPageInfo=x.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ot[k].objId,pageNumber:k,pageContext:Ot[k]}},Bc=x.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Ot)if(Ot[H].objId===k)break;return _o(H)},Yl=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Ot[re].objId,pageNumber:re,pageContext:Ot[re]}};x.addPage=function(){return qc.apply(this,arguments),this},x.setPage=function(){return jo.apply(this,arguments),De.call(this,Ie[re]),this},x.insertPage=function(k){return this.addPage(),this.movePage(re,k),this},x.movePage=function(k,H){var oe,ve;if(k>H){oe=Ie[k],ve=Ot[k];for(var Ae=k;Ae>H;Ae--)Ie[Ae]=Ie[Ae-1],Ot[Ae]=Ot[Ae-1];Ie[H]=oe,Ot[H]=ve,this.setPage(H)}else if(k<H){oe=Ie[k],ve=Ot[k];for(var Be=k;Be<H;Be++)Ie[Be]=Ie[Be+1],Ot[Be]=Ot[Be+1];Ie[H]=oe,Ot[H]=ve,this.setPage(H)}return this},x.deletePage=function(){return ol.apply(this,arguments),this},x.__private__.text=x.text=function(k,H,oe,ve,Ae){var Be,Ze,vt,St,qt,$t,us,Ws,gr,Ts=(ve=ve||{}).scope||this;if(typeof k=="number"&&typeof H=="number"&&(typeof oe=="string"||Array.isArray(oe))){var _r=oe;oe=H,H=k,k=_r}if(arguments[3]instanceof Ft==0?(vt=arguments[4],St=arguments[5],Ls(us=arguments[3])==="object"&&us!==null||(typeof vt=="string"&&(St=vt,vt=null),typeof us=="string"&&(St=us,us=null),typeof us=="number"&&(vt=us,us=null),ve={flags:us,angle:vt,align:St})):(E("The transform parameter of text() with a Matrix value"),gr=Ae),isNaN(H)||isNaN(oe)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Ts;var or,Vr="",oa=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:wn,Nn=Ts.internal.scaleFactor;function Zc(hs){return hs=hs.split("	").join(Array(ve.TabLen||9).join(" ")),$n(hs,us)}function Vi(hs){for(var Ns,Js=hs.concat(),yr=[],Ea=Js.length;Ea--;)typeof(Ns=Js.shift())=="string"?yr.push(Ns):Array.isArray(hs)&&(Ns.length===1||Ns[1]===void 0&&Ns[2]===void 0)?yr.push(Ns[0]):yr.push([Ns[0],Ns[1],Ns[2]]);return yr}function Eo(hs,Ns){var Js;if(typeof hs=="string")Js=Ns(hs)[0];else if(Array.isArray(hs)){for(var yr,Ea,nc=hs.concat(),yl=[],Ni=nc.length;Ni--;)typeof(yr=nc.shift())=="string"?yl.push(Ns(yr)[0]):Array.isArray(yr)&&typeof yr[0]=="string"&&(Ea=Ns(yr[0],yr[1],yr[2]),yl.push([Ea[0],Ea[1],Ea[2]]));Js=yl}return Js}var Wi=!1,To=!0;if(typeof k=="string")Wi=!0;else if(Array.isArray(k)){var Hi=k.concat();Ze=[];for(var Fo,en=Hi.length;en--;)(typeof(Fo=Hi.shift())!="string"||Array.isArray(Fo)&&typeof Fo[0]!="string")&&(To=!1);Wi=To}if(Wi===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var Do=Ye/Ts.internal.scaleFactor,Ro=Do*(oa-1);switch(ve.baseline){case"bottom":oe-=Ro;break;case"top":oe+=Do-Ro;break;case"hanging":oe+=Do-2*Ro;break;case"middle":oe+=Do/2-Ro}if(($t=ve.maxWidth||0)>0&&(typeof k=="string"?k=Ts.splitTextToSize(k,$t):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(hs,Ns){return hs.concat(Ts.splitTextToSize(Ns,$t))},[]))),Be={text:k,x:H,y:oe,options:ve,mutex:{pdfEscape:$n,activeFontKey:ut,fonts:yt,activeFontSize:Ye}},ds.publish("preProcessText",Be),k=Be.text,vt=(ve=Be.options).angle,gr instanceof Ft==0&&vt&&typeof vt=="number"){vt*=Math.PI/180,ve.rotationDirection===0&&(vt=-vt),w===j&&(vt=-vt);var sc=Math.cos(vt),rc=Math.sin(vt);gr=new Ft(sc,rc,-rc,sc,0,0)}else vt&&vt instanceof Ft&&(gr=vt);w!==j||gr||(gr=wa),(qt=ve.charSpace||Aa)!==void 0&&(Vr+=X($(qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ws=ve.horizontalScale)!==void 0&&(Vr+=X(100*Ws)+` Tz
`),ve.lang;var Ys=-1,Pa=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,Ya=Ts.internal.getCurrentPageInfo().pageContext;switch(Pa){case 0:case!1:case"fill":Ys=0;break;case 1:case!0:case"stroke":Ys=1;break;case 2:case"fillThenStroke":Ys=2;break;case 3:case"invisible":Ys=3;break;case 4:case"fillAndAddForClipping":Ys=4;break;case 5:case"strokeAndAddPathForClipping":Ys=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ys=6;break;case 7:case"addToPathForClipping":Ys=7}var Yc=Ya.usedRenderingMode!==void 0?Ya.usedRenderingMode:-1;Ys!==-1?Vr+=Ys+` Tr
`:Yc!==-1&&(Vr+=`0 Tr
`),Ys!==-1&&(Ya.usedRenderingMode=Ys),St=ve.align||"left";var Vn,Gi=Ye*oa,fl=Ts.internal.pageSize.getWidth(),pl=yt[ut];qt=ve.charSpace||Aa,$t=ve.maxWidth||0,us=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var vi=[],la=function(hs){return Ts.getStringUnitWidth(hs,{font:pl,charSpace:qt,fontSize:Ye,doKerning:!1})*Ye/Nn};if(Object.prototype.toString.call(k)==="[object Array]"){var Wn;Ze=Vi(k),St!=="left"&&(Vn=Ze.map(la));var Hn,Zi=0;if(St==="right"){H-=Vn[0],k=[],en=Ze.length;for(var Ka=0;Ka<en;Ka++)Ka===0?(Hn=Bn(H),Wn=xi(oe)):(Hn=$(Zi-Vn[Ka]),Wn=-Gi),k.push([Ze[Ka],Hn,Wn]),Zi=Vn[Ka]}else if(St==="center"){H-=Vn[0]/2,k=[],en=Ze.length;for(var bi=0;bi<en;bi++)bi===0?(Hn=Bn(H),Wn=xi(oe)):(Hn=$((Zi-Vn[bi])/2),Wn=-Gi),k.push([Ze[bi],Hn,Wn]),Zi=Vn[bi]}else if(St==="left"){k=[],en=Ze.length;for(var ji=0;ji<en;ji++)k.push(Ze[ji])}else if(St==="justify"&&pl.encoding==="Identity-H"){k=[],en=Ze.length,$t=$t!==0?$t:fl;for(var Ja=0,lr=0;lr<en;lr++)if(Wn=lr===0?xi(oe):-Gi,Hn=lr===0?Bn(H):Ja,lr<en-1){var Io=$(($t-Vn[lr])/(Ze[lr].split(" ").length-1)),Qa=Ze[lr].split(" ");k.push([Qa[0]+" ",Hn,Wn]),Ja=0;for(var La=1;La<Qa.length;La++){var Mo=(la(Qa[La-1]+" "+Qa[La])-la(Qa[La]))*Nn+Io;La==Qa.length-1?k.push([Qa[La],Mo,0]):k.push([Qa[La]+" ",Mo,0]),Ja-=Mo}}else k.push([Ze[lr],Hn,Wn]);k.push(["",Ja,0])}else{if(St!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],en=Ze.length,$t=$t!==0?$t:fl,lr=0;lr<en;lr++){Wn=lr===0?xi(oe):-Gi,Hn=lr===0?Bn(H):0;var zo=Ze[lr].split(" ").length-1,xl=zo>0?($t-Vn[lr])/zo:0;lr<en-1?vi.push(X($(xl))):vi.push(0),k.push([Ze[lr],Hn,Wn])}}}(typeof ve.R2L=="boolean"?ve.R2L:Le)===!0&&(k=Eo(k,function(hs,Ns,Js){return[hs.split("").reverse().join(""),Ns,Js]})),Be={text:k,x:H,y:oe,options:ve,mutex:{pdfEscape:$n,activeFontKey:ut,fonts:yt,activeFontSize:Ye}},ds.publish("postProcessText",Be),k=Be.text,or=Be.mutex.isHex||!1;var gl=yt[ut].encoding;gl!=="WinAnsiEncoding"&&gl!=="StandardEncoding"||(k=Eo(k,function(hs,Ns,Js){return[Zc(hs),Ns,Js]})),Ze=Vi(k),k=[];for(var wi,Yi,Ki,Oo=Array.isArray(Ze[0])?1:0,Ji="",qo=function(hs,Ns,Js){var yr="";return Js instanceof Ft?(Js=typeof ve.angle=="number"?On(Js,new Ft(1,0,0,1,hs,Ns)):On(new Ft(1,0,0,1,hs,Ns),Js),w===j&&(Js=On(new Ft(1,0,0,-1,0,0),Js)),yr=Js.join(" ")+` Tm
`):yr=X(hs)+" "+X(Ns)+` Td
`,yr},Ks=0;Ks<Ze.length;Ks++){switch(Ji="",Oo){case 1:Ki=(or?"<":"(")+Ze[Ks][0]+(or?">":")"),wi=parseFloat(Ze[Ks][1]),Yi=parseFloat(Ze[Ks][2]);break;case 0:Ki=(or?"<":"(")+Ze[Ks]+(or?">":")"),wi=Bn(H),Yi=xi(oe)}vi!==void 0&&vi[Ks]!==void 0&&(Ji=vi[Ks]+` Tw
`),Ks===0?k.push(Ji+qo(wi,Yi,gr)+Ki):Oo===0?k.push(Ji+Ki):Oo===1&&k.push(Ji+qo(wi,Yi,gr)+Ki)}k=Oo===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var _n=`BT
/`;return _n+=ut+" "+Ye+` Tf
`,_n+=X(Ye*oa)+` TL
`,_n+=Ca+`
`,_n+=Vr,_n+=k,le(_n+="ET"),b[ut]=!0,Ts};var ko=x.__private__.clip=x.clip=function(k){return le(k==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return ko("evenodd")},x.__private__.discardPath=x.discardPath=function(){return le("n"),this};var Va=x.__private__.isValidStyle=function(k){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(H=!0),H};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(k){return Va(k)&&(f=k),this};var ll=x.__private__.getStyle=x.getStyle=function(k){var H=f;switch(k){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=k}return H},ls=x.close=function(){return le("h"),this};x.stroke=function(){return le("S"),this},x.fill=function(k){return fi("f",k),this},x.fillEvenOdd=function(k){return fi("f*",k),this},x.fillStroke=function(k){return fi("B",k),this},x.fillStrokeEvenOdd=function(k){return fi("B*",k),this};var fi=function(k,H){Ls(H)==="object"?Vc(H,k):le(k)},cl=function(k){k===null||w===j&&k===void 0||(k=ll(k),le(k))};function Kl(k,H,oe,ve,Ae){var Be=new Ed(H||this.boundingBox,oe||this.xStep,ve||this.yStep,this.gState,Ae||this.matrix);Be.stream=this.stream;var Ze=k+"$$"+this.cloneIndex+++"$$";return Jr(Ze,Be),Be}var Vc=function(k,H){var oe=Kt[k.key],ve=Tt[oe];if(ve instanceof _c)le("q"),le(Wc(H)),ve.gState&&x.setGState(ve.gState),le(k.matrix.toString()+" cm"),le("/"+oe+" sh"),le("Q");else if(ve instanceof Ed){var Ae=new Ft(1,0,0,-1,0,ia());k.matrix&&(Ae=Ae.multiply(k.matrix||wa),oe=Kl.call(ve,k.key,k.boundingBox,k.xStep,k.yStep,Ae).id),le("q"),le("/Pattern cs"),le("/"+oe+" scn"),ve.gState&&x.setGState(ve.gState),le(H),le("Q")}},Wc=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},dl=x.moveTo=function(k,H){return le(X($(k))+" "+X(q(H))+" m"),this},pi=x.lineTo=function(k,H){return le(X($(k))+" "+X(q(H))+" l"),this},Sa=x.curveTo=function(k,H,oe,ve,Ae,Be){return le([X($(k)),X(q(H)),X($(oe)),X(q(ve)),X($(Ae)),X(q(Be)),"c"].join(" ")),this};x.__private__.line=x.line=function(k,H,oe,ve,Ae){if(isNaN(k)||isNaN(H)||isNaN(oe)||isNaN(ve)||!Va(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return w===C?this.lines([[oe-k,ve-H]],k,H,[1,1],Ae||"S"):this.lines([[oe-k,ve-H]],k,H,[1,1]).stroke()},x.__private__.lines=x.lines=function(k,H,oe,ve,Ae,Be){var Ze,vt,St,qt,$t,us,Ws,gr,Ts,_r,or,Vr;if(typeof k=="number"&&(Vr=oe,oe=H,H=k,k=Vr),ve=ve||[1,1],Be=Be||!1,isNaN(H)||isNaN(oe)||!Array.isArray(k)||!Array.isArray(ve)||!Va(Ae)||typeof Be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(dl(H,oe),Ze=ve[0],vt=ve[1],qt=k.length,_r=H,or=oe,St=0;St<qt;St++)($t=k[St]).length===2?(_r=$t[0]*Ze+_r,or=$t[1]*vt+or,pi(_r,or)):(us=$t[0]*Ze+_r,Ws=$t[1]*vt+or,gr=$t[2]*Ze+_r,Ts=$t[3]*vt+or,_r=$t[4]*Ze+_r,or=$t[5]*vt+or,Sa(us,Ws,gr,Ts,_r,or));return Be&&ls(),cl(Ae),this},x.path=function(k){for(var H=0;H<k.length;H++){var oe=k[H],ve=oe.c;switch(oe.op){case"m":dl(ve[0],ve[1]);break;case"l":pi(ve[0],ve[1]);break;case"c":Sa.apply(this,ve);break;case"h":ls()}}return this},x.__private__.rect=x.rect=function(k,H,oe,ve,Ae){if(isNaN(k)||isNaN(H)||isNaN(oe)||isNaN(ve)||!Va(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return w===C&&(ve=-ve),le([X($(k)),X(q(H)),X($(oe)),X($(ve)),"re"].join(" ")),cl(Ae),this},x.__private__.triangle=x.triangle=function(k,H,oe,ve,Ae,Be,Ze){if(isNaN(k)||isNaN(H)||isNaN(oe)||isNaN(ve)||isNaN(Ae)||isNaN(Be)||!Va(Ze))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-k,ve-H],[Ae-oe,Be-ve],[k-Ae,H-Be]],k,H,[1,1],Ze,!0),this},x.__private__.roundedRect=x.roundedRect=function(k,H,oe,ve,Ae,Be,Ze){if(isNaN(k)||isNaN(H)||isNaN(oe)||isNaN(ve)||isNaN(Ae)||isNaN(Be)||!Va(Ze))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*oe),Be=Math.min(Be,.5*ve),this.lines([[oe-2*Ae,0],[Ae*vt,0,Ae,Be-Be*vt,Ae,Be],[0,ve-2*Be],[0,Be*vt,-Ae*vt,Be,-Ae,Be],[2*Ae-oe,0],[-Ae*vt,0,-Ae,-Be*vt,-Ae,-Be],[0,2*Be-ve],[0,-Be*vt,Ae*vt,-Be,Ae,-Be]],k+Ae,H,[1,1],Ze,!0),this},x.__private__.ellipse=x.ellipse=function(k,H,oe,ve,Ae){if(isNaN(k)||isNaN(H)||isNaN(oe)||isNaN(ve)||!Va(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Be=4/3*(Math.SQRT2-1)*oe,Ze=4/3*(Math.SQRT2-1)*ve;return dl(k+oe,H),Sa(k+oe,H-Ze,k+Be,H-ve,k,H-ve),Sa(k-Be,H-ve,k-oe,H-Ze,k-oe,H),Sa(k-oe,H+Ze,k-Be,H+ve,k,H+ve),Sa(k+Be,H+ve,k+oe,H+Ze,k+oe,H),cl(Ae),this},x.__private__.circle=x.circle=function(k,H,oe,ve){if(isNaN(k)||isNaN(H)||isNaN(oe)||!Va(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,H,oe,oe,ve)},x.setFont=function(k,H,oe){return oe&&(H=U(H,oe)),ut=$c(k,H,{disableWarning:!1}),this};var Wa=x.__private__.getFont=x.getFont=function(){return yt[$c.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var k,H,oe={};for(k in Ut)if(Ut.hasOwnProperty(k))for(H in oe[k]=[],Ut[k])Ut[k].hasOwnProperty(H)&&oe[k].push(H);return oe},x.addFont=function(k,H,oe,ve,Ae){var Be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Be.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Be.indexOf(arguments[3])==-1&&(oe=U(oe,ve)),il.call(this,k,H,oe,Ae=Ae||"Identity-H")};var wn,sa=t.lineWidth||.200025,It=x.__private__.getLineWidth=x.getLineWidth=function(){return sa},So=x.__private__.setLineWidth=x.setLineWidth=function(k){return sa=k,le(X($(k))+" w"),this};x.__private__.setLineDash=Lt.API.setLineDash=Lt.API.setLineDashPattern=function(k,H){if(k=k||[],H=H||0,isNaN(H)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(oe){return X($(oe))}).join(" "),H=X($(H)),le("["+k+"] "+H+" d"),this};var Ha=x.__private__.getLineHeight=x.getLineHeight=function(){return Ye*wn};x.__private__.getLineHeight=x.getLineHeight=function(){return Ye*wn};var Yd=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(wn=k),this},Hc=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return wn};Yd(t.lineHeight);var Bn=x.__private__.getHorizontalCoordinate=function(k){return $(k)},xi=x.__private__.getVerticalCoordinate=function(k){return w===j?k:Ot[re].mediaBox.topRightY-Ot[re].mediaBox.bottomLeftY-$(k)},Gc=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(k){return X(Bn(k))},ul=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(k){return X(xi(k))},Co=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Ba(Co)},x.__private__.setStrokeColor=x.setDrawColor=function(k,H,oe,ve){return Co=Br({ch1:k,ch2:H,ch3:oe,ch4:ve,pdfColorType:"draw",precision:2}),le(Co),this};var Jl=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Ba(Jl)},x.__private__.setFillColor=x.setFillColor=function(k,H,oe,ve){return Jl=Br({ch1:k,ch2:H,ch3:oe,ch4:ve,pdfColorType:"fill",precision:2}),le(Jl),this};var Ca=t.textColor||"0 g",Ga=x.__private__.getTextColor=x.getTextColor=function(){return Ba(Ca)};x.__private__.setTextColor=x.setTextColor=function(k,H,oe,ve){return Ca=Br({ch1:k,ch2:H,ch3:oe,ch4:ve,pdfColorType:"text",precision:3}),this};var Aa=t.charSpace,hl=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Aa||0)};x.__private__.setCharSpace=x.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Aa=k,this};var Ql=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(k){var H=x.CapJoinStyles[k];if(H===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ql=H,le(H+" J"),this};var Xl=0;x.__private__.setLineJoin=x.setLineJoin=function(k){var H=x.CapJoinStyles[k];if(H===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xl=H,le(H+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(X($(k))+" M"),this},x.GState=lm,x.setGState=function(k){(k=typeof k=="string"?Bt[Vs[k]]:gi(null,k)).equals(Os)||(le("/"+k.id+" gs"),Os=k)};var gi=function(k,H){if(!k||!Vs[k]){var oe=!1;for(var ve in Bt)if(Bt.hasOwnProperty(ve)&&Bt[ve].equals(H)){oe=!0;break}if(oe)H=Bt[ve];else{var Ae="GS"+(Object.keys(Bt).length+1).toString(10);Bt[Ae]=H,H.id=Ae}return k&&(Vs[k]=H.id),ds.publish("addGState",H),H}};x.addGState=function(k,H){return gi(k,H),this},x.saveGraphicsState=function(){return le("q"),is.push({key:ut,size:Ye,color:Ca}),this},x.restoreGraphicsState=function(){le("Q");var k=is.pop();return ut=k.key,Ye=k.size,Ca=k.color,Os=null,this},x.setCurrentTransformationMatrix=function(k){return le(k.toString()+" cm"),this},x.comment=function(k){return le("#"+k),this};var Za=function(k,H){var oe=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Be){isNaN(Be)||(oe=parseFloat(Be))}});var ve=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(Be){isNaN(Be)||(ve=parseFloat(Be))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Be){Ae=Be.toString()}}),this},Ao=function(k,H,oe,ve){Za.call(this,k,H),this.type="rect";var Ae=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(Ze){isNaN(Ze)||(Ae=parseFloat(Ze))}});var Be=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Be},set:function(Ze){isNaN(Ze)||(Be=parseFloat(Ze))}}),this},Po=function(){this.page=os,this.currentPage=re,this.pages=Ie.slice(0),this.pagesContext=Ot.slice(0),this.x=ht,this.y=ws,this.matrix=es,this.width=Lo(re),this.height=na(re),this.outputDestination=Je,this.id="",this.objectNumber=-1};Po.prototype.restore=function(){os=this.page,re=this.currentPage,Ot=this.pagesContext,Ie=this.pages,ht=this.x,ws=this.y,es=this.matrix,ec(re,this.width),aa(re,this.height),Je=this.outputDestination};var ra=function(k,H,oe,ve,Ae){Qn.push(new Po),os=re=0,Ie=[],ht=k,ws=H,es=Ae,Bi([oe,ve])};for(var yi in x.beginFormObject=function(k,H,oe,ve,Ae){return ra(k,H,oe,ve,Ae),this},x.endFormObject=function(k){return(function(H){if(Ua[H])Qn.pop().restore();else{var oe=new Po,ve="Xo"+(Object.keys(Ur).length+1).toString(10);oe.id=ve,Ua[H]=ve,Ur[ve]=oe,ds.publish("addFormObject",oe),Qn.pop().restore()}})(k),this},x.doFormObject=function(k,H){var oe=Ur[Ua[k]];return le("q"),le(H.toString()+" cm"),le("/"+oe.id+" Do"),le("Q"),this},x.getFormObject=function(k){var H=Ur[Ua[k]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},x.save=function(k,H){return k=k||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Nc(ka(ta()),k),typeof Nc.unload=="function"&&Wt.setTimeout&&setTimeout(Nc.unload,911),this):new Promise(function(oe,ve){try{var Ae=Nc(ka(ta()),k);typeof Nc.unload=="function"&&Wt.setTimeout&&setTimeout(Nc.unload,911),oe(Ae)}catch(Be){ve(Be.message)}})},Lt.API)Lt.API.hasOwnProperty(yi)&&(yi==="events"&&Lt.API.events.length?(function(k,H){var oe,ve,Ae;for(Ae=H.length-1;Ae!==-1;Ae--)oe=H[Ae][0],ve=H[Ae][1],k.subscribe.apply(k,[oe].concat(typeof ve=="function"?[ve]:ve))})(ds,Lt.API.events):x[yi]=Lt.API[yi]);function Lo(k){return Ot[k].mediaBox.topRightX-Ot[k].mediaBox.bottomLeftX}function ec(k,H){Ot[k].mediaBox.topRightX=H+Ot[k].mediaBox.bottomLeftX}function na(k){return Ot[k].mediaBox.topRightY-Ot[k].mediaBox.bottomLeftY}function aa(k,H){Ot[k].mediaBox.topRightY=H+Ot[k].mediaBox.bottomLeftY}var tc=x.getPageWidth=function(k){return Lo(k=k||re)/Et},Xr=x.setPageWidth=function(k,H){ec(k,H*Et)},ia=x.getPageHeight=function(k){return na(k=k||re)/Et},ml=x.setPageHeight=function(k,H){aa(k,H*Et)};return x.internal={pdfEscape:$n,getStyle:ll,getFont:Wa,getFontSize:ye,getCharSpace:hl,getTextColor:Ga,getLineHeight:Ha,getLineHeightFactor:Hc,getLineWidth:It,write:Nt,getHorizontalCoordinate:Bn,getVerticalCoordinate:xi,getCoordinateString:Gc,getVerticalCoordinateString:ul,collections:{},newObject:Es,newAdditionalObject:mi,newObjectDeferred:ar,newObjectDeferredBegin:pr,getFilters:ea,putStream:qn,events:ds,scaleFactor:Et,pageSize:{getWidth:function(){return tc(re)},setWidth:function(k){Xr(re,k)},getHeight:function(){return ia(re)},setHeight:function(k){ml(re,k)}},encryptionOptions:p,encryption:ir,getEncryptor:function(k){return p!==null?ir.encryptor(k,0):function(H){return H}},output:jn,getNumberOfPages:Un,pages:Ie,out:le,f2:I,f3:R,getPageInfo:_o,getPageInfoByObjId:Bc,getCurrentPageInfo:Yl,getPDFVersion:N,Point:Za,Rectangle:Ao,Matrix:Ft,hasHotfix:No},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return tc(re)},set:function(k){Xr(re,k)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ia(re)},set:function(k){ml(re,k)},enumerable:!0,configurable:!0}),(function(k){for(var H=0,oe=ct.length;H<oe;H++){var ve=il.call(this,k[H][0],k[H][1],k[H][2],ct[H][3],!0);y===!1&&(b[ve]=!0);var Ae=k[H][0].split("-");Oc({id:ve,fontName:Ae[0],fontStyle:Ae[1]||""})}ds.publish("addFonts",{fonts:yt,dictionary:Ut})}).call(x,ct),ut="F1",qc(o,r),ds.publish("initialized"),x}Cd.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Cd.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Cd.prototype.hexToBytes=function(t){for(var s=[],r=0;r<t.length;r+=2)s.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return s.join("")},Cd.prototype.processOwnerPassword=function(t,s){return Cp(Sp(s).substr(0,5),t)},Cd.prototype.encryptor=function(t,s){var r=Sp(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(a){return Cp(r,a)}},lm.prototype.equals=function(t){var s,r="id,objectNumber,equals";if(!t||Ls(t)!==Ls(this))return!1;var a=0;for(s in this)if(!(r.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;a++}for(s in t)t.hasOwnProperty(s)&&r.indexOf(s)<0&&a--;return a===0},Lt.API={events:[]},Lt.version="3.0.3";var Nr=Lt.API,hx=1,zc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_d=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zt=function(t){return t.toFixed(2)},Ol=function(t){return t.toFixed(5)};Nr.__acroform__={};var ja=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},Ly=function(t){return t*hx},io=function(t){var s=new G2,r=wt.internal.getHeight(t)||0,a=wt.internal.getWidth(t)||0;return s.BBox=[0,0,Number(Zt(a)),Number(Zt(r))],s},kC=Nr.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<s},SC=Nr.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<s)},CC=Nr.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},Pr=Nr.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return CC(t,s-1)},Lr=Nr.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kC(t,s-1)},Er=Nr.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return SC(t,s-1)},AC=Nr.__acroform__.calculateCoordinates=function(t,s){var r=s.internal.getHorizontalCoordinate,a=s.internal.getVerticalCoordinate,o=t[0],l=t[1],d=t[2],c=t[3],h={};return h.lowerLeft_X=r(o)||0,h.lowerLeft_Y=a(l+c)||0,h.upperRight_X=r(o+d)||0,h.upperRight_Y=a(l)||0,[Number(Zt(h.lowerLeft_X)),Number(Zt(h.lowerLeft_Y)),Number(Zt(h.upperRight_X)),Number(Zt(h.upperRight_Y))]},PC=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],r=t._V||t.DV,a=Ap(t,r),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+o+" "+Zt(a.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(a.text),s.push("ET"),s.push("Q"),s.push("EMC");var l=io(t);return l.scope=t.scope,l.stream=s.join(`
`),l}},Ap=function(t,s){var r=t.fontSize===0?t.maxFontSize:t.fontSize,a={text:"",fontSize:""},o=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");o=t.multiline?o.map(function(I){return I.split(`
`)}):o.map(function(I){return[I]});var l=r,d=wt.internal.getHeight(t)||0;d=d<0?-d:d;var c=wt.internal.getWidth(t)||0;c=c<0?-c:c;var h=function(I,R,$){if(I+1<o.length){var q=R+" "+o[I+1][0];return Mh(q,t,$).width<=c-4}return!1};l++;e:for(;l>0;){s="",l--;var f,p,y=Mh("3",t,l).height,b=t.multiline?d-l:(d-y)/2,x=b+=2,A=0,N=0,P=0;if(l<=0){s=`(...) Tj
`,s+="% Width of Text: "+Mh(s,t,l=12).width+", FieldWidth:"+c+`
`;break}for(var _="",C=0,j=0;j<o.length;j++)if(o.hasOwnProperty(j)){var w=!1;if(o[j].length!==1&&P!==o[j].length-1){if((y+2)*(C+2)+2>d)continue e;_+=o[j][P],w=!0,N=j,j--}else{_=(_+=o[j][P]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var D=parseInt(j),z=h(D,_,l),U=j>=o.length-1;if(z&&!U){_+=" ",P=0;continue}if(z||U){if(U)N=D;else if(t.multiline&&(y+2)*(C+2)+2>d)continue e}else{if(!t.multiline||(y+2)*(C+2)+2>d)continue e;N=D}}for(var X="",E=A;E<=N;E++){var G=o[E];if(t.multiline){if(E===N){X+=G[P]+" ",P=(P+1)%G.length;continue}if(E===A){X+=G[G.length-1]+" ";continue}}X+=G[0]+" "}switch(X=X.substr(X.length-1)==" "?X.substr(0,X.length-1):X,p=Mh(X,t,l).width,t.textAlign){case"right":f=c-p-2;break;case"center":f=(c-p)/2;break;default:f=2}s+=Zt(f)+" "+Zt(x)+` Td
`,s+="("+zc(X)+`) Tj
`,s+=-Zt(f)+` 0 Td
`,x=-(l+2),p=0,A=w?N:N+1,C++,_=""}break}return a.text=s,a.fontSize=l,a},Mh=function(t,s,r){var a=s.scope.internal.getFont(s.fontName,s.fontStyle),o=s.scope.getStringUnitWidth(t,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:s.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:o}},LC={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EC=function(t,s){var r={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(r)},TC=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(zi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(LC)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");hx=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Z2,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];l.objId=void 0,l.hasAnnotation&&EC(l,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(a,o){var l=!a;for(var d in a||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(d)){var c=a[d],h=[],f=c.Rect;if(c.Rect&&(c.Rect=AC(c.Rect,o)),o.internal.newObjectDeferredBegin(c.objId,!0),c.DA=wt.createDefaultAppearanceStream(c),Ls(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(h=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=PC(c);h.push({key:"AP",value:"<</N "+p+">>"}),o.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var y="";for(var b in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(b)){var x=c.appearanceStreamContent[b];if(y+="/"+b+" ",y+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var d in x)if(x.hasOwnProperty(d)){var A=x[d];typeof A=="function"&&(A=A.call(o,c)),y+="/"+d+" "+A+" ",o.internal.acroformPlugin.xForms.indexOf(A)>=0||o.internal.acroformPlugin.xForms.push(A)}}else typeof(A=x)=="function"&&(A=A.call(o,c)),y+="/"+d+" "+A,o.internal.acroformPlugin.xForms.indexOf(A)>=0||o.internal.acroformPlugin.xForms.push(A);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:c.objId}),o.internal.out("endobj")}l&&(function(N,P){for(var _ in N)if(N.hasOwnProperty(_)){var C=_,j=N[_];P.internal.newObjectDeferredBegin(j.objId,!0),Ls(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete N[C]}})(o.internal.acroformPlugin.xForms,o)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},H2=Nr.__acroform__.arrayToPdfArray=function(t,s,r){var a=function(d){return d};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),Ls(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(s!==void 0&&r&&(a=r.internal.getEncryptor(s)),o+="("+zc(a(t[l].toString()))+")"):o+=t[l].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yf=function(t,s,r){var a=function(o){return o};return s!==void 0&&r&&(a=r.internal.getEncryptor(s)),(t=t||"").toString(),"("+zc(a(t))+")"},uo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};uo.prototype.toString=function(){return this.objId+" 0 R"},uo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},uo.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var r in s)if(Object.getOwnPropertyDescriptor(this,s[r]).configurable===!1){var a=s[r],o=this[a];o&&(Array.isArray(o)?t.push({key:a,value:H2(o,this.objId,this.scope)}):o instanceof uo?(o.scope=this.scope,t.push({key:a,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:a,value:o}))}return t};var G2=function(){uo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ja(G2,uo);var Z2=function(){uo.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+zc(r(t))+")"}},set:function(r){t=r}})};ja(Z2,uo);var zi=function t(){uo.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');s=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pr(s,3)},set:function(_){_?this.F=Lr(s,3):this.F=Er(s,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(_){a=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(_){a[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(_){a[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(_){a[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(_){a[3]=_}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof cm)return;l="FieldObject"+t.FieldNum++}var _=function(C){return C};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+zc(_(l))+")"},set:function(_){l=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(_){l=_}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(_){d=_}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/hx:f},set:function(_){f=_}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof cm||this instanceof Ac))return Yf(y,this.objId,this.scope)},set:function(_){_=_.toString(),y=_}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof cn==0?Yf(b,this.objId,this.scope):b},set:function(_){_=_.toString(),b=this instanceof cn==0?_.substr(0,1)==="("?_d(_.substr(1,_.length-2)):_d(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof cn==1?_d(b.substr(1,b.length-1)):b},set:function(_){_=_.toString(),b=this instanceof cn==1?"/"+_:_}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof cn==0?Yf(x,this.objId,this.scope):x},set:function(_){_=_.toString(),x=this instanceof cn==0?_.substr(0,1)==="("?_d(_.substr(1,_.length-2)):_d(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof cn==1?_d(x.substr(1,x.length-1)):x},set:function(_){_=_.toString(),x=this instanceof cn==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(_){_=!!_,N=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(_){A=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,1)},set:function(_){_?this.Ff=Lr(this.Ff,1):this.Ff=Er(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,2)},set:function(_){_?this.Ff=Lr(this.Ff,2):this.Ff=Er(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,3)},set:function(_){_?this.Ff=Lr(this.Ff,3):this.Ff=Er(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');P=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(P){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:P=2;break;case"center":case 1:P=1;break;default:P=0}}})};ja(zi,uo);var Dd=function(){zi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return H2(s,this.objId,this.scope)},set:function(r){var a,o;o=[],typeof(a=r)=="string"&&(o=(function(l,d,c){c||(c=1);for(var h,f=[];h=d.exec(l);)f.push(h[c]);return f})(a,/\((.*?)\)/g)),s=o}}),this.getOptions=function(){return s},this.setOptions=function(r){s=r,this.sort&&s.sort()},this.addOption=function(r){r=(r=r||"").toString(),s.push(r),this.sort&&s.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();s.indexOf(r)!==-1&&(s.splice(s.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,18)},set:function(r){r?this.Ff=Lr(this.Ff,18):this.Ff=Er(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Lr(this.Ff,19):this.Ff=Er(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,20)},set:function(r){r?(this.Ff=Lr(this.Ff,20),s.sort()):this.Ff=Er(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,22)},set:function(r){r?this.Ff=Lr(this.Ff,22):this.Ff=Er(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,23)},set:function(r){r?this.Ff=Lr(this.Ff,23):this.Ff=Er(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,27)},set:function(r){r?this.Ff=Lr(this.Ff,27):this.Ff=Er(this.Ff,27)}}),this.hasAppearanceStream=!1};ja(Dd,zi);var Rd=function(){Dd.call(this),this.fontName="helvetica",this.combo=!1};ja(Rd,Dd);var Id=function(){Rd.call(this),this.combo=!0};ja(Id,Rd);var Hh=function(){Id.call(this),this.edit=!0};ja(Hh,Id);var cn=function(){zi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,15)},set:function(r){r?this.Ff=Lr(this.Ff,15):this.Ff=Er(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,16)},set:function(r){r?this.Ff=Lr(this.Ff,16):this.Ff=Er(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,17)},set:function(r){r?this.Ff=Lr(this.Ff,17):this.Ff=Er(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,26)},set:function(r){r?this.Ff=Lr(this.Ff,26):this.Ff=Er(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var a,o=[];for(a in o.push("<<"),s)o.push("/"+a+" ("+zc(r(s[a]))+")");return o.push(">>"),o.join(`
`)}},set:function(r){Ls(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ja(cn,zi);var Gh=function(){cn.call(this),this.pushButton=!0};ja(Gh,cn);var Md=function(){cn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};ja(Md,cn);var cm=function(){var t,s;zi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(o){s=o}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(c){return c};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),a)d.push("/"+l+" ("+zc(o(a[l]))+")");return d.push(">>"),d.join(`
`)},set:function(o){Ls(o)==="object"&&(a=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(o){typeof o=="string"&&(a.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ja(cm,zi),Md.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var r=this.Kids[s];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Md.prototype.createOption=function(t){var s=new cm;return s.Parent=this,s.optionName=t,this.Kids.push(s),FC.call(this.scope,s),s};var Zh=function(){cn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wt.CheckBox.createAppearanceStream()};ja(Zh,cn);var Ac=function(){zi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,13)},set:function(s){s?this.Ff=Lr(this.Ff,13):this.Ff=Er(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,21)},set:function(s){s?this.Ff=Lr(this.Ff,21):this.Ff=Er(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,23)},set:function(s){s?this.Ff=Lr(this.Ff,23):this.Ff=Er(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,24)},set:function(s){s?this.Ff=Lr(this.Ff,24):this.Ff=Er(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,25)},set:function(s){s?this.Ff=Lr(this.Ff,25):this.Ff=Er(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,26)},set:function(s){s?this.Ff=Lr(this.Ff,26):this.Ff=Er(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ja(Ac,zi);var Yh=function(){Ac.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,14)},set:function(t){t?this.Ff=Lr(this.Ff,14):this.Ff=Er(this.Ff,14)}}),this.password=!0};ja(Yh,Ac);var wt={CheckBox:{createAppearanceStream:function(){return{N:{On:wt.CheckBox.YesNormal},D:{On:wt.CheckBox.YesPushDown,Off:wt.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=io(t);s.scope=t.scope;var r=[],a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=Ap(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Zt(wt.internal.getWidth(t))+" "+Zt(wt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Zt(l.fontSize)+" Tf "+o),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),s.stream=r.join(`
`),s},YesNormal:function(t){var s=io(t);s.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=[],l=wt.internal.getHeight(t),d=wt.internal.getWidth(t),c=Ap(t,t.caption);return o.push("1 g"),o.push("0 0 "+Zt(d)+" "+Zt(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Zt(d-1)+" "+Zt(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+r+" "+Zt(c.fontSize)+" Tf "+a),o.push(c.text),o.push("ET"),o.push("Q"),s.stream=o.join(`
`),s},OffPushDown:function(t){var s=io(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zt(wt.internal.getWidth(t))+" "+Zt(wt.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:wt.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=wt.RadioButton.Circle.YesNormal,s.D[t]=wt.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=io(t);s.scope=t.scope;var r=[],a=wt.internal.getWidth(t)<=wt.internal.getHeight(t)?wt.internal.getWidth(t)/4:wt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=wt.internal.Bezier_C,l=Number((a*o).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ol(wt.internal.getWidth(t)/2)+" "+Ol(wt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),r.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),r.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),r.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=io(t);s.scope=t.scope;var r=[],a=wt.internal.getWidth(t)<=wt.internal.getHeight(t)?wt.internal.getWidth(t)/4:wt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*wt.internal.Bezier_C).toFixed(5)),d=Number((a*wt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ol(wt.internal.getWidth(t)/2)+" "+Ol(wt.internal.getHeight(t)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),r.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),r.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),r.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ol(wt.internal.getWidth(t)/2)+" "+Ol(wt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+d+" "+d+" "+a+" 0 "+a+" c"),r.push("-"+d+" "+a+" -"+a+" "+d+" -"+a+" 0 c"),r.push("-"+a+" -"+d+" -"+d+" -"+a+" 0 -"+a+" c"),r.push(d+" -"+a+" "+a+" -"+d+" "+a+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=io(t);s.scope=t.scope;var r=[],a=wt.internal.getWidth(t)<=wt.internal.getHeight(t)?wt.internal.getWidth(t)/4:wt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),l=Number((o*wt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ol(wt.internal.getWidth(t)/2)+" "+Ol(wt.internal.getHeight(t)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),r.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),r.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),r.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:wt.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=wt.RadioButton.Cross.YesNormal,s.D[t]=wt.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=io(t);s.scope=t.scope;var r=[],a=wt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Zt(wt.internal.getWidth(t)-2)+" "+Zt(wt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Zt(a.x1.x)+" "+Zt(a.x1.y)+" m"),r.push(Zt(a.x2.x)+" "+Zt(a.x2.y)+" l"),r.push(Zt(a.x4.x)+" "+Zt(a.x4.y)+" m"),r.push(Zt(a.x3.x)+" "+Zt(a.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=io(t);s.scope=t.scope;var r=wt.internal.calculateCross(t),a=[];return a.push("0.749023 g"),a.push("0 0 "+Zt(wt.internal.getWidth(t))+" "+Zt(wt.internal.getHeight(t))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Zt(wt.internal.getWidth(t)-2)+" "+Zt(wt.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(Zt(r.x1.x)+" "+Zt(r.x1.y)+" m"),a.push(Zt(r.x2.x)+" "+Zt(r.x2.y)+" l"),a.push(Zt(r.x4.x)+" "+Zt(r.x4.y)+" m"),a.push(Zt(r.x3.x)+" "+Zt(r.x3.y)+" l"),a.push("s"),a.push("Q"),s.stream=a.join(`
`),s},OffPushDown:function(t){var s=io(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zt(wt.internal.getWidth(t))+" "+Zt(wt.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+r}};wt.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=wt.internal.getWidth(t),r=wt.internal.getHeight(t),a=Math.min(s,r);return{x1:{x:(s-a)/2,y:(r-a)/2+a},x2:{x:(s-a)/2+a,y:(r-a)/2},x3:{x:(s-a)/2,y:(r-a)/2},x4:{x:(s-a)/2+a,y:(r-a)/2+a}}}},wt.internal.getWidth=function(t){var s=0;return Ls(t)==="object"&&(s=Ly(t.Rect[2])),s},wt.internal.getHeight=function(t){var s=0;return Ls(t)==="object"&&(s=Ly(t.Rect[3])),s};var FC=Nr.addField=function(t){if(TC(this,t),!(t instanceof zi))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Nr.AcroFormChoiceField=Dd,Nr.AcroFormListBox=Rd,Nr.AcroFormComboBox=Id,Nr.AcroFormEditBox=Hh,Nr.AcroFormButton=cn,Nr.AcroFormPushButton=Gh,Nr.AcroFormRadioButton=Md,Nr.AcroFormCheckBox=Zh,Nr.AcroFormTextField=Ac,Nr.AcroFormPasswordField=Yh,Nr.AcroFormAppearance=wt,Nr.AcroForm={ChoiceField:Dd,ListBox:Rd,ComboBox:Id,EditBox:Hh,Button:cn,PushButton:Gh,RadioButton:Md,CheckBox:Zh,TextField:Ac,PasswordField:Yh,Appearance:wt},Lt.AcroForm={ChoiceField:Dd,ListBox:Rd,ComboBox:Id,EditBox:Hh,Button:cn,PushButton:Gh,RadioButton:Md,CheckBox:Zh,TextField:Ac,PasswordField:Yh,Appearance:wt};Lt.AcroForm;function Y2(t){return t.reduce(function(s,r,a){return s[r]=a,s},{})}(function(t){var s="addImage_";t.__addimage__={};var r="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=t.__addimage__.getImageFileTypeByImageData=function(I,R){var $,q,Q,he,be,V=r;if((R=R||r)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(z(I))for(be in a)for(Q=a[be],$=0;$<Q.length;$+=1){for(he=!0,q=0;q<Q[$].length;q+=1)if(Q[$][q]!==void 0&&Q[$][q]!==I[q]){he=!1;break}if(he===!0){V=be;break}}else for(be in a)for(Q=a[be],$=0;$<Q.length;$+=1){for(he=!0,q=0;q<Q[$].length;q+=1)if(Q[$][q]!==void 0&&Q[$][q]!==I.charCodeAt(q)){he=!1;break}if(he===!0){V=be;break}}return V===r&&R!==r&&(V=R),V},l=function I(R){for(var $=this.internal.write,q=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:R.width}),he.push({key:"Height",value:R.height}),R.colorSpace===_.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===_.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var be="",V=0,de=R.transparency.length;V<de;V++)be+=R.transparency[V]+" "+R.transparency[V]+" ";he.push({key:"Mask",value:"["+be+"]"})}R.sMask!==void 0&&he.push({key:"SMask",value:R.objectId+1+" 0 R"});var ke=R.filter!==void 0?["/"+R.filter]:void 0;if(q({data:R.data,additionalKeyValues:he,alreadyAppliedFilters:ke,objectId:R.objectId}),$("endobj"),"sMask"in R&&R.sMask!==void 0){var te,O=(te=R.sMaskBitsPerComponent)!==null&&te!==void 0?te:R.bitsPerComponent,re={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:R.sMask};"filter"in R&&(re.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(R.width),re.filter=R.filter),I.call(this,re)}if(R.colorSpace===_.INDEXED){var K=this.internal.newObject();q({data:X(new Uint8Array(R.palette)),objectId:K}),$("endobj")}},d=function(){var I=this.internal.collections[s+"images"];for(var R in I)l.call(this,I[R])},c=function(){var I,R=this.internal.collections[s+"images"],$=this.internal.write;for(var q in R)$("/I"+(I=R[q]).index,I.objectId,"0","R")},h=function(){this.internal.collections[s+"images"]||(this.internal.collections[s+"images"]={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var I=this.internal.collections[s+"images"];return h.call(this),I},p=function(){return Object.keys(this.internal.collections[s+"images"]).length},y=function(I){return typeof t["process"+I.toUpperCase()]=="function"},b=function(I){return Ls(I)==="object"&&I.nodeType===1},x=function(I,R){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var $=""+I.getAttribute("src");if($.indexOf("data:image/")===0)return Wh(unescape($).split("base64,").pop());var q=t.loadFile($,!0);if(q!==void 0)return q}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var Q;switch(R){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;default:Q="image/jpeg"}return Wh(I.toDataURL(Q,1).split("base64,").pop())}},A=function(I){var R=this.internal.collections[s+"images"];if(R){for(var $ in R)if(I===R[$].alias)return R[$]}},N=function(I,R,$){return I||R||(I=-96,R=-96),I<0&&(I=-1*$.width*72/I/this.internal.scaleFactor),R<0&&(R=-1*$.height*72/R/this.internal.scaleFactor),I===0&&(I=R*$.width/$.height),R===0&&(R=I*$.height/$.width),[I,R]},P=function(I,R,$,q,Q,he){var be=N.call(this,$,q,Q),V=this.internal.getCoordinateString,de=this.internal.getVerticalCoordinateString,ke=f.call(this);if($=be[0],q=be[1],ke[Q.index]=Q,he){he*=Math.PI/180;var te=Math.cos(he),O=Math.sin(he),re=function(ne){return ne.toFixed(4)},K=[re(te),re(O),re(-1*O),re(te),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,V(I),de(R+q),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([V($),"0","0",V(q),"0","0","cm"].join(" "))):this.internal.write([V($),"0","0",V(q),V(I),de(R+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(I){var R,$,q=0;if(typeof I=="string")for($=I.length,R=0;R<$;R++)q=(q<<5)-q+I.charCodeAt(R),q|=0;else if(z(I))for($=I.byteLength/2,R=0;R<$;R++)q=(q<<5)-q+I[R],q|=0;return q},w=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var R=!0;return I.length===0&&(R=!1),I.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(R=!1),R},D=t.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var R=I.indexOf(",");return R<0?null:I.substring(0,R).trim().endsWith("base64")?I.substring(R+1):null};t.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var z=t.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},U=t.__addimage__.binaryStringToUint8Array=function(I){for(var R=I.length,$=new Uint8Array(R),q=0;q<R;q++)$[q]=I.charCodeAt(q);return $},X=t.__addimage__.arrayBufferToBinaryString=function(I){for(var R="",$=z(I)?I:new Uint8Array(I),q=0;q<$.length;q+=8192)R+=String.fromCharCode.apply(null,$.subarray(q,q+8192));return R};t.addImage=function(){var I,R,$,q,Q,he,be,V,de;if(typeof arguments[1]=="number"?(R=r,$=arguments[1],q=arguments[2],Q=arguments[3],he=arguments[4],be=arguments[5],V=arguments[6],de=arguments[7]):(R=arguments[1],$=arguments[2],q=arguments[3],Q=arguments[4],he=arguments[5],be=arguments[6],V=arguments[7],de=arguments[8]),Ls(I=arguments[0])==="object"&&!b(I)&&"imageData"in I){var ke=I;I=ke.imageData,R=ke.format||R||r,$=ke.x||$||0,q=ke.y||q||0,Q=ke.w||ke.width||Q,he=ke.h||ke.height||he,be=ke.alias||be,V=ke.compression||V,de=ke.rotation||ke.angle||de}var te=this.internal.getFilters();if(V===void 0&&te.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN($)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var O=E.call(this,I,R,be,V);return P.call(this,$,q,Q,he,O,de),this};var E=function(I,R,$,q){var Q,he,be;if(typeof I=="string"&&o(I)===r){I=unescape(I);var V=G(I,!1);(V!==""||(V=t.loadFile(I,!0))!==void 0)&&(I=V)}if(b(I)&&(I=x(I,R)),R=o(I,R),!y(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((be=$)==null||be.length===0)&&($=(function(de){return typeof de=="string"||z(de)?j(de):z(de.data)?j(de.data):null})(I)),(Q=A.call(this,$))||(I instanceof Uint8Array||R==="RGBA"||(he=I,I=U(I)),Q=this["process"+R.toUpperCase()](I,p.call(this),$,(function(de){return de&&typeof de=="string"&&(de=de.toUpperCase()),de in t.image_compression?de:C.NONE})(q),he)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},G=t.__addimage__.convertBase64ToBinaryString=function(I,R){R=typeof R!="boolean"||R;var $,q="";if(typeof I=="string"){var Q;$=(Q=D(I))!==null&&Q!==void 0?Q:I;try{q=Wh($)}catch(he){if(R)throw w($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};t.getImageProperties=function(I){var R,$,q="";if(b(I)&&(I=x(I)),typeof I=="string"&&o(I)===r&&((q=G(I,!1))===""&&(q=t.loadFile(I)||""),I=q),$=o(I),!y($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(I instanceof Uint8Array||(I=U(I)),!(R=this["process"+$.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=$,R}})(Lt.API),(function(t){var s=function(r){if(r!==void 0&&r!="")return!0};Lt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var a,o,l,d=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(r.objId),f=r.pageContext.annotations,p=!1,y=0;y<f.length&&!p;y++)switch((a=f[y]).type){case"link":(s(a.options.url)||s(a.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var b=0;b<f.length;b++){a=f[b];var x=this.internal.pdfEscape,A=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(N.objId),C=a.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+d(a.bounds.x)+" "+c(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w)+" "+c(a.bounds.y)+"] ")+"/Contents ("+x(_(a.contents))+")",l+=" /Popup "+P.objId+" 0 R",l+=" /P "+h.objId+" 0 R",l+=" /T ("+x(_(C))+") >>",N.content=l;var j=N.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+d(a.bounds.x+30)+" "+c(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w+30)+" "+c(a.bounds.y)+"] ")+" /Parent "+j,a.open&&(l+=" /Open true"),l+=" >>",P.content=l,this.internal.write(N.objId,"0 R",P.objId,"0 R");break;case"freetext":o="/Rect ["+d(a.bounds.x)+" "+c(a.bounds.y)+" "+d(a.bounds.x+a.bounds.w)+" "+c(a.bounds.y+a.bounds.h)+"] ";var w=a.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(A(a.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(a.options.name){var D=this.annotations._nameMap[a.options.name];a.options.pageNumber=D.page,a.options.top=D.y}else a.options.top||(a.options.top=0);if(o="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",l="",a.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(A(a.options.url))+") >>";else if(a.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,l+=" /FitV "+a.options.left+"]";break;default:var z=c(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),l+=" /XYZ "+a.options.left+" "+z+" "+a.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},t.link=function(r,a,o,l,d){var c=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:h(r),y:f(a),w:h(r+o),h:f(a+l)},options:d,type:"link"})},t.textWithLink=function(r,a,o,l){var d,c,h=this.getTextWidth(r),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){c=l.maxWidth;var p=this.splitTextToSize(r,c).length;d=Math.ceil(f*p)}else c=h,d=f;return this.text(r,a,o,l),o+=.2*f,l.align==="center"&&(a-=h/2),l.align==="right"&&(a-=h),this.link(a,o-f,c,d,l),h},t.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(Lt.API),(function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(N){return s[N.charCodeAt(0)]!==void 0},d=t.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},c=t.__arabicParser__.isArabicEndLetter=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length<=2},h=t.__arabicParser__.isArabicAlfLetter=function(N){return d(N)&&o.indexOf(N.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length>=1};var f=t.__arabicParser__.arabicLetterHasFinalForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length==4},y=t.__arabicParser__.resolveLigatures=function(N){var P=0,_=r,C="",j=0;for(P=0;P<N.length;P+=1)_[N.charCodeAt(P)]!==void 0?(j++,typeof(_=_[N.charCodeAt(P)])=="number"&&(C+=String.fromCharCode(_),_=r,j=0),P===N.length-1&&(_=r,C+=N.charAt(P-(j-1)),P-=j-1,j=0)):(_=r,C+=N.charAt(P-j),P-=j,j=0);return C};t.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&a[N.charCodeAt(0)]!==void 0};var b=t.__arabicParser__.getCorrectForm=function(N,P,_){return d(N)?l(N)===!1?-1:!f(N)||!d(P)&&!d(_)||!d(_)&&c(P)||c(N)&&!d(P)||c(N)&&h(P)||c(N)&&c(P)?0:p(N)&&d(P)&&!c(P)&&d(_)&&f(_)?3:c(N)||!d(_)?1:2:-1},x=function(N){var P=0,_=0,C=0,j="",w="",D="",z=(N=N||"").split("\\s+"),U=[];for(P=0;P<z.length;P+=1){for(U.push(""),_=0;_<z[P].length;_+=1)j=z[P][_],w=z[P][_-1],D=z[P][_+1],d(j)?(C=b(j,w,D),U[P]+=C!==-1?String.fromCharCode(s[j.charCodeAt(0)][C]):j):U[P]+=j;U[P]=y(U[P])}return U.join(" ")},A=t.__arabicParser__.processArabic=t.processArabic=function(){var N,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(P)){var C=0;for(_=[],C=0;C<P.length;C+=1)Array.isArray(P[C])?_.push([x(P[C][0]),P[C][1],P[C][2]]):_.push([x(P[C])]);N=_}else N=x(P);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};t.events.push(["preProcessText",A])})(Lt.API),Lt.API.autoPrint=function(t){var s;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})),this},(function(t){var s=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(c){o=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(c){l=c}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(c){d=c}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(r,a){var o;if((r=r||"2d")!=="2d")return null;for(o in a)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=a[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])})(Lt.API),(function(t){var s={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(N){x=N}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(N){A=N}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(h){return a.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},t.getTextDimensions=function(h,f){a.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),b=f.scaleFactor||this.internal.scaleFactor,x=0,A=0,N=0,P=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var _=f.maxWidth;_>0?typeof h=="string"?h=this.splitTextToSize(h,_):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(j,w){return j.concat(P.splitTextToSize(w,_))},[])):h=Array.isArray(h)?h:[h];for(var C=0;C<h.length;C++)x<(N=this.getStringUnitWidth(h[C],{font:y})*p)&&(x=N);return x!==0&&(A=h.length),{w:x/=b,h:Math.max((A*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/b,0)}},t.cellAddPage=function(){a.call(this),this.addPage();var h=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new l(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=t.cell=function(){var h;h=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||s,b=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,x&&b&&(this.printHeaderRow(h.lineNumber,!0),h.y+=b[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,r===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};t.table=function(h,f,p,y,b){if(a.call(this),!p)throw new Error("No data for PDF table.");var x,A,N,P,_=[],C=[],j=[],w={},D={},z=[],U=[],X=(b=b||{}).autoSize||!1,E=b.printHeaders!==!1,G=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,I=b.margins||Object.assign({width:this.getPageWidth()},s),R=typeof b.padding=="number"?b.padding:3,$=b.headerBackgroundColor||"#c8c8c8",q=b.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=q,this.setFontSize(G),y==null)C=_=Object.keys(p[0]),j=_.map(function(){return"left"});else if(Array.isArray(y)&&Ls(y[0])==="object")for(_=y.map(function(ke){return ke.name}),C=y.map(function(ke){return ke.prompt||ke.name||""}),j=y.map(function(ke){return ke.align||"left"}),x=0;x<y.length;x+=1)D[y[x].name]=.7499990551181103*y[x].width;else Array.isArray(y)&&typeof y[0]=="string"&&(C=_=y,j=_.map(function(){return"left"}));if(X||Array.isArray(y)&&typeof y[0]=="string")for(x=0;x<_.length;x+=1){for(w[P=_[x]]=p.map(function(ke){return ke[P]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(C[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=w[P],this.setFont(void 0,"normal"),N=0;N<A.length;N+=1)z.push(this.getTextDimensions(A[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[P]=Math.max.apply(null,z)+R+R,z=[]}if(E){var Q={};for(x=0;x<_.length;x+=1)Q[_[x]]={},Q[_[x]].text=C[x],Q[_[x]].align=j[x];var he=c.call(this,Q,D);U=_.map(function(ke){return new l(h,f,D[ke],he,Q[ke].text,void 0,Q[ke].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var be=y.reduce(function(ke,te){return ke[te.name]=te.align,ke},{});for(x=0;x<p.length;x+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:x,data:p[x]},this);var V=c.call(this,p[x],D);for(N=0;N<_.length;N+=1){var de=p[x][_[N]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:x,col:N,data:de},this),d.call(this,new l(h,f,D[_[N]],V,de,x+2,be[_[N]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var c=function(h,f){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(h).map(function(x){var A=h[x];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,f[x]-p-p)},this).map(function(x){return this.getLineHeightFactor()*x.length*y/b+p+p},this).reduce(function(x,A){return Math.max(x,A)},0)};t.setTableHeaderRow=function(h){a.call(this),this.internal.__cell__.tableHeaderRow=h},t.printHeaderRow=function(h,f){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){p=this.internal.__cell__.tableHeaderRow[x].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,b.push(p)),p.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,p),this.setTextColor(A)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),r=!1}})(Lt.API);var K2={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},J2=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Pp=Y2(J2),Q2=[100,200,300,400,500,600,700,800,900],DC=Y2(Q2);function Kf(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(l){return K2[l=l||"normal"]?l:"normal"})(t.style),a=(function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400})(t.weight),o=(function(l){return typeof Pp[l=l||"normal"]=="number"?l:"normal"})(t.stretch);return{family:s,style:r,weight:a,stretch:o,src:t.src||[],ref:t.ref||{name:s,style:[o,r,a].join(" ")}}}function Ey(t,s,r,a){var o;for(o=r;o>=0&&o<s.length;o+=a)if(t[s[o]])return t[s[o]];for(o=r;o>=0&&o<s.length;o-=a)if(t[s[o]])return t[s[o]]}var RC={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ty={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Fy(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Dy(t){return t.trimLeft()}function IC(t,s){for(var r=0;r<t.length;){if(t.charAt(r)===s)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function MC(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var zh,Ry,Iy,kd,Oh,My,zy,Oy,Jf=["times"];function qy(t,s,r,a,o){var l=4,d=Uy;switch(o){case Lt.API.image_compression.FAST:l=1,d=$y;break;case Lt.API.image_compression.MEDIUM:l=6,d=By;break;case Lt.API.image_compression.SLOW:l=9,d=Vy}t=(function(h,f,p,y){for(var b,x=h.length/f,A=new Uint8Array(h.length+x),N=[zC,$y,Uy,By,Vy],P=0;P<x;P+=1){var _=P*f,C=h.subarray(_,_+f);if(y)A.set(y(C,p,b),_+P);else{for(var j=N.length,w=[],D=0;D<j;D+=1)w[D]=N[D](C,p,b);var z=qC(w.concat());A.set(w[z],_+P)}b=C}return A})(t,s,Math.ceil(r*a/8),d);var c=wp(t,{level:l});return Lt.API.__addimage__.arrayBufferToBinaryString(c)}function zC(t){var s=Array.apply([],t);return s.unshift(0),s}function $y(t,s){var r=t.length,a=[];a[0]=1;for(var o=0;o<r;o+=1){var l=t[o-s]||0;a[o+1]=t[o]-l+256&255}return a}function Uy(t,s,r){var a=t.length,o=[];o[0]=2;for(var l=0;l<a;l+=1){var d=r&&r[l]||0;o[l+1]=t[l]-d+256&255}return o}function By(t,s,r){var a=t.length,o=[];o[0]=3;for(var l=0;l<a;l+=1){var d=t[l-s]||0,c=r&&r[l]||0;o[l+1]=t[l]+256-(d+c>>>1)&255}return o}function Vy(t,s,r){var a=t.length,o=[];o[0]=4;for(var l=0;l<a;l+=1){var d=OC(t[l-s]||0,r&&r[l]||0,r&&r[l-s]||0);o[l+1]=t[l]-d+256&255}return o}function OC(t,s,r){if(t===s&&s===r)return t;var a=Math.abs(s-r),o=Math.abs(t-r),l=Math.abs(t+s-r-r);return a<=o&&a<=l?t:o<=l?s:r}function qC(t){var s=t.map(function(r){return r.reduce(function(a,o){return a+Math.abs(o)},0)});return s.indexOf(Math.min.apply(null,s))}function Qf(t,s,r){var a=s*r,o=Math.floor(a/8),l=16-(a-8*o+r),d=(1<<r)-1;return X2(t,o)>>l&d}function Wy(t,s,r,a){var o=r*a,l=Math.floor(o/8),d=16-(o-8*l+a),c=(1<<a)-1,h=(s&c)<<d;(function(f,p,y){if(p+1<f.byteLength)f.setUint16(p,y,!1);else{var b=y>>8&255;f.setUint8(p,b)}})(t,l,X2(t,l)&~(c<<d)&65535|h)}function X2(t,s){return s+1<t.byteLength?t.getUint16(s,!1):t.getUint8(s)<<8}function $C(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[s++]|t[s++]<<8,a=t[s++]|t[s++]<<8,o=t[s++],l=o>>7,d=1<<1+(7&o);t[s++],t[s++];var c=null,h=null;l&&(c=s,h=d,s+=3*d);var f=!0,p=[],y=0,b=null,x=0,A=null;for(this.width=r,this.height=a;f&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,A=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((I=t[s++])>=0))throw Error("Invalid block size");if(I===0)break;s+=I}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var N=t[s++];y=t[s++]|t[s++]<<8,b=t[s++],1&N||(b=null),x=N>>2&7,s++;break;case 254:for(;;){if(!((I=t[s++])>=0))throw Error("Invalid block size");if(I===0)break;s+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var P=t[s++]|t[s++]<<8,_=t[s++]|t[s++]<<8,C=t[s++]|t[s++]<<8,j=t[s++]|t[s++]<<8,w=t[s++],D=w>>6&1,z=1<<1+(7&w),U=c,X=h,E=!1;w>>7&&(E=!0,U=s,X=z,s+=3*z);var G=s;for(s++;;){var I;if(!((I=t[s++])>=0))throw Error("Invalid block size");if(I===0)break;s+=I}p.push({x:P,y:_,width:C,height:j,has_local_palette:E,palette_offset:U,palette_size:X,data_offset:G,data_length:s-G,transparent_index:b,interlaced:!!D,delay:y,disposal:x});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(R){if(R<0||R>=p.length)throw new Error("Frame index out of range.");return p[R]},this.decodeAndBlitFrameBGRA=function(R,$){var q=this.frameInfo(R),Q=q.width*q.height,he=new Uint8Array(Q);Hy(t,q.data_offset,he,Q);var be=q.palette_offset,V=q.transparent_index;V===null&&(V=256);var de=q.width,ke=r-de,te=de,O=4*(q.y*r+q.x),re=4*((q.y+q.height)*r+q.x),K=O,ne=4*ke;q.interlaced===!0&&(ne+=4*r*7);for(var pe=8,je=0,_e=he.length;je<_e;++je){var ue=he[je];if(te===0&&(te=de,(K+=ne)>=re&&(ne=4*ke+4*r*(pe-1),K=O+(de+ke)*(pe<<1),pe>>=1)),ue===V)K+=4;else{var xe=t[be+3*ue],Ie=t[be+3*ue+1],He=t[be+3*ue+2];$[K++]=He,$[K++]=Ie,$[K++]=xe,$[K++]=255}--te}},this.decodeAndBlitFrameRGBA=function(R,$){var q=this.frameInfo(R),Q=q.width*q.height,he=new Uint8Array(Q);Hy(t,q.data_offset,he,Q);var be=q.palette_offset,V=q.transparent_index;V===null&&(V=256);var de=q.width,ke=r-de,te=de,O=4*(q.y*r+q.x),re=4*((q.y+q.height)*r+q.x),K=O,ne=4*ke;q.interlaced===!0&&(ne+=4*r*7);for(var pe=8,je=0,_e=he.length;je<_e;++je){var ue=he[je];if(te===0&&(te=de,(K+=ne)>=re&&(ne=4*ke+4*r*(pe-1),K=O+(de+ke)*(pe<<1),pe>>=1)),ue===V)K+=4;else{var xe=t[be+3*ue],Ie=t[be+3*ue+1],He=t[be+3*ue+2];$[K++]=xe,$[K++]=Ie,$[K++]=He,$[K++]=255}--te}}}function Hy(t,s,r,a){for(var o=t[s++],l=1<<o,d=l+1,c=d+1,h=o+1,f=(1<<h)-1,p=0,y=0,b=0,x=t[s++],A=new Int32Array(4096),N=null;;){for(;p<16&&x!==0;)y|=t[s++]<<p,p+=8,x===1?x=t[s++]:--x;if(p<h)break;var P=y&f;if(y>>=h,p-=h,P!==l){if(P===d)break;for(var _=P<c?P:N,C=0,j=_;j>l;)j=A[j]>>8,++C;var w=j;if(b+C+(_!==P?1:0)>a)return void Is.log("Warning, gif stream longer than expected.");r[b++]=w;var D=b+=C;for(_!==P&&(r[b++]=w),j=_;C--;)j=A[j],r[--D]=255&j,j>>=8;N!==null&&c<4096&&(A[c++]=N<<8|w,c>=f+1&&h<12&&(++h,f=f<<1|1)),N=P}else c=d+1,f=(1<<(h=o+1))-1,N=null}return b!==a&&Is.log("Warning, gif stream shorter than expected."),r}function Xf(t){var s,r,a,o,l,d=Math.floor,c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),y=new Array(65535),b=new Array(65535),x=new Array(64),A=new Array(64),N=[],P=0,_=7,C=new Array(64),j=new Array(64),w=new Array(64),D=new Array(256),z=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],X=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(O,re){for(var K=0,ne=0,pe=new Array,je=1;je<=16;je++){for(var _e=1;_e<=O[je];_e++)pe[re[ne]]=[],pe[re[ne]][0]=K,pe[re[ne]][1]=je,ne++,K++;K*=2}return pe}function be(O){for(var re=O[0],K=O[1]-1;K>=0;)re&1<<K&&(P|=1<<_),K--,--_<0&&(P==255?(V(255),V(0)):V(P),_=7,P=0)}function V(O){N.push(O)}function de(O){V(O>>8&255),V(255&O)}function ke(O,re,K,ne,pe){for(var je,_e=pe[0],ue=pe[240],xe=(function(Ye,ce){var ye,Le,Ue,Ge,qe,Qe,_t,lt,ut,Et,ht=0;for(ut=0;ut<8;++ut){ye=Ye[ht],Le=Ye[ht+1],Ue=Ye[ht+2],Ge=Ye[ht+3],qe=Ye[ht+4],Qe=Ye[ht+5],_t=Ye[ht+6];var ws=ye+(lt=Ye[ht+7]),es=ye-lt,yt=Le+_t,Ut=Le-_t,is=Ue+Qe,Tt=Ue-Qe,Kt=Ge+qe,Bt=Ge-qe,Vs=ws+Kt,Os=ws-Kt,os=yt+is,Ot=yt-is;Ye[ht]=Vs+os,Ye[ht+4]=Vs-os;var ds=.707106781*(Ot+Os);Ye[ht+2]=Os+ds,Ye[ht+6]=Os-ds;var qi=.382683433*((Vs=Bt+Tt)-(Ot=Ut+es)),Ur=.5411961*Vs+qi,Ua=1.306562965*Ot+qi,Qn=.707106781*(os=Tt+Ut),Ft=es+Qn,On=es-Qn;Ye[ht+5]=On+Ur,Ye[ht+3]=On-Ur,Ye[ht+1]=Ft+Ua,Ye[ht+7]=Ft-Ua,ht+=8}for(ht=0,ut=0;ut<8;++ut){ye=Ye[ht],Le=Ye[ht+8],Ue=Ye[ht+16],Ge=Ye[ht+24],qe=Ye[ht+32],Qe=Ye[ht+40],_t=Ye[ht+48];var wa=ye+(lt=Ye[ht+56]),Jr=ye-lt,Xn=Le+_t,Es=Le-_t,ar=Ue+Qe,pr=Ue-Qe,mi=Ge+qe,$i=Ge-qe,Na=wa+mi,Ba=wa-mi,Br=Xn+ar,ea=Xn-ar;Ye[ht]=Na+Br,Ye[ht+32]=Na-Br;var qn=.707106781*(ea+Ba);Ye[ht+16]=Ba+qn,Ye[ht+48]=Ba-qn;var yo=.382683433*((Na=$i+pr)-(ea=Es+Jr)),_a=.5411961*Na+yo,Ui=1.306562965*ea+yo,vo=.707106781*(Br=pr+Es),bo=Jr+vo,al=Jr-vo;Ye[ht+40]=al+_a,Ye[ht+24]=al-_a,Ye[ht+8]=bo+Ui,Ye[ht+56]=bo-Ui,ht++}for(ut=0;ut<64;++ut)Et=Ye[ut]*ce[ut],x[ut]=Et>0?Et+.5|0:Et-.5|0;return x})(O,re),Ie=0;Ie<64;++Ie)A[U[Ie]]=xe[Ie];var He=A[0]-K;K=A[0],He==0?be(ne[0]):(be(ne[b[je=32767+He]]),be(y[je]));for(var Je=63;Je>0&&A[Je]==0;)Je--;if(Je==0)return be(_e),K;for(var De,le=1;le<=Je;){for(var Nt=le;A[le]==0&&le<=Je;)++le;var At=le-Nt;if(At>=16){De=At>>4;for(var ct=1;ct<=De;++ct)be(ue);At&=15}je=32767+A[le],be(pe[(At<<4)+b[je]]),be(y[je]),le++}return Je!=63&&be(_e),K}function te(O){O=Math.min(Math.max(O,1),100),l!=O&&((function(re){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var pe=d((K[ne]*re+50)/100);pe=Math.min(Math.max(pe,1),255),c[U[ne]]=pe}for(var je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var ue=d((je[_e]*re+50)/100);ue=Math.min(Math.max(ue,1),255),h[U[_e]]=ue}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,He=0;He<8;He++)for(var Je=0;Je<8;Je++)f[Ie]=1/(c[U[Ie]]*xe[He]*xe[Je]*8),p[Ie]=1/(h[U[Ie]]*xe[He]*xe[Je]*8),Ie++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),l=O)}this.encode=function(O,re){re&&te(re),N=new Array,P=0,_=7,de(65496),de(65504),de(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),de(1),de(1),V(0),V(0),(function(){de(65499),de(132),V(0);for(var Le=0;Le<64;Le++)V(c[Le]);V(1);for(var Ue=0;Ue<64;Ue++)V(h[Ue])})(),(function(Le,Ue){de(65472),de(17),V(8),de(Ue),de(Le),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)})(O.width,O.height),(function(){de(65476),de(418),V(0);for(var Le=0;Le<16;Le++)V(X[Le+1]);for(var Ue=0;Ue<=11;Ue++)V(E[Ue]);V(16);for(var Ge=0;Ge<16;Ge++)V(G[Ge+1]);for(var qe=0;qe<=161;qe++)V(I[qe]);V(1);for(var Qe=0;Qe<16;Qe++)V(R[Qe+1]);for(var _t=0;_t<=11;_t++)V($[_t]);V(17);for(var lt=0;lt<16;lt++)V(q[lt+1]);for(var ut=0;ut<=161;ut++)V(Q[ut])})(),de(65498),de(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var K=0,ne=0,pe=0;P=0,_=7,this.encode.displayName="_encode_";for(var je,_e,ue,xe,Ie,He,Je,De,le,Nt=O.data,At=O.width,ct=O.height,Ye=4*At,ce=0;ce<ct;){for(je=0;je<Ye;){for(Ie=Ye*ce+je,Je=-1,De=0,le=0;le<64;le++)He=Ie+(De=le>>3)*Ye+(Je=4*(7&le)),ce+De>=ct&&(He-=Ye*(ce+1+De-ct)),je+Je>=Ye&&(He-=je+Je-Ye+4),_e=Nt[He++],ue=Nt[He++],xe=Nt[He++],C[le]=(z[_e]+z[ue+256|0]+z[xe+512|0]>>16)-128,j[le]=(z[_e+768|0]+z[ue+1024|0]+z[xe+1280|0]>>16)-128,w[le]=(z[_e+1280|0]+z[ue+1536|0]+z[xe+1792|0]>>16)-128;K=ke(C,f,K,s,a),ne=ke(j,p,ne,r,o),pe=ke(w,p,pe,r,o),je+=32}ce+=8}if(_>=0){var ye=[];ye[1]=_+1,ye[0]=(1<<_+1)-1,be(ye)}return de(65497),new Uint8Array(N)},t=t||50,(function(){for(var O=String.fromCharCode,re=0;re<256;re++)D[re]=O(re)})(),s=he(X,E),r=he(R,$),a=he(G,I),o=he(q,Q),(function(){for(var O=1,re=2,K=1;K<=15;K++){for(var ne=O;ne<re;ne++)b[32767+ne]=K,y[32767+ne]=[],y[32767+ne][1]=K,y[32767+ne][0]=ne;for(var pe=-(re-1);pe<=-O;pe++)b[32767+pe]=K,y[32767+pe]=[],y[32767+pe][1]=K,y[32767+pe][0]=re-1+pe;O<<=1,re<<=1}})(),(function(){for(var O=0;O<256;O++)z[O]=19595*O,z[O+256|0]=38470*O,z[O+512|0]=7471*O+32768,z[O+768|0]=-11059*O,z[O+1024|0]=-21709*O,z[O+1280|0]=32768*O+8421375,z[O+1536|0]=-27439*O,z[O+1792|0]=-5329*O})(),te(t)}function Fi(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Gy(t){function s(E){if(!E)throw Error("assert :P")}function r(E,G,I){for(var R=0;4>R;R++)if(E[G+R]!=I.charCodeAt(R))return!0;return!1}function a(E,G,I,R,$){for(var q=0;q<$;q++)E[G+q]=I[R+q]}function o(E,G,I,R){for(var $=0;$<R;$++)E[G+$]=I}function l(E){return new Int32Array(E)}function d(E,G){for(var I=[],R=0;R<E;R++)I.push(new G);return I}function c(E,G){var I=[];return(function R($,q,Q){for(var he=Q[q],be=0;be<he&&($.push(Q.length>q+1?[]:new G),!(Q.length<q+1));be++)R($[be],q+1,Q)})(I,0,E),I}var h=function(){var E=this;function G(m,v){for(var T=1<<v-1>>>0;m&T;)T>>>=1;return T?(m&T-1)+T:m}function I(m,v,T,M,W){s(!(M%T));do m[v+(M-=T)]=W;while(0<M)}function R(m,v,T,M,W){if(s(2328>=W),512>=W)var Y=l(512);else if((Y=l(W))==null)return 0;return(function(J,ee,se,ae,we,Ee){var ie,Se,Pe=ee,$e=1<<se,Fe=l(16),ze=l(16);for(s(we!=0),s(ae!=null),s(J!=null),s(0<se),Se=0;Se<we;++Se){if(15<ae[Se])return 0;++Fe[ae[Se]]}if(Fe[0]==we)return 0;for(ze[1]=0,ie=1;15>ie;++ie){if(Fe[ie]>1<<ie)return 0;ze[ie+1]=ze[ie]+Fe[ie]}for(Se=0;Se<we;++Se)ie=ae[Se],0<ae[Se]&&(Ee[ze[ie]++]=Se);if(ze[15]==1)return(ae=new $).g=0,ae.value=Ee[0],I(J,Pe,1,$e,ae),$e;var Oe,Ve=-1,We=$e-1,Ct=0,ft=1,Ht=1,bt=1<<se;for(Se=0,ie=1,we=2;ie<=se;++ie,we<<=1){if(ft+=Ht<<=1,0>(Ht-=Fe[ie]))return 0;for(;0<Fe[ie];--Fe[ie])(ae=new $).g=ie,ae.value=Ee[Se++],I(J,Pe+Ct,we,bt,ae),Ct=G(Ct,ie)}for(ie=se+1,we=2;15>=ie;++ie,we<<=1){if(ft+=Ht<<=1,0>(Ht-=Fe[ie]))return 0;for(;0<Fe[ie];--Fe[ie]){if(ae=new $,(Ct&We)!=Ve){for(Pe+=bt,Oe=1<<(Ve=ie)-se;15>Ve&&!(0>=(Oe-=Fe[Ve]));)++Ve,Oe<<=1;$e+=bt=1<<(Oe=Ve-se),J[ee+(Ve=Ct&We)].g=Oe+se,J[ee+Ve].value=Pe-ee-Ve}ae.g=ie-se,ae.value=Ee[Se++],I(J,Pe+(Ct>>se),we,bt,ae),Ct=G(Ct,ie)}}return ft!=2*ze[15]-1?0:$e})(m,v,T,M,W,Y)}function $(){this.value=this.g=0}function q(){this.value=this.g=0}function Q(){this.G=d(5,$),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(la,q)}function he(m,v,T,M){s(m!=null),s(v!=null),s(2147483648>M),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=v,m.pa=T,m.Jd=v,m.Yc=T+M,m.Zc=4<=M?T+M-4+1:T,_e(m)}function be(m,v){for(var T=0;0<v--;)T|=xe(m,128)<<v;return T}function V(m,v){var T=be(m,v);return ue(m)?-T:T}function de(m,v,T,M){var W,Y=0;for(s(m!=null),s(v!=null),s(4294967288>M),m.Sb=M,m.Ra=0,m.u=0,m.h=0,4<M&&(M=4),W=0;W<M;++W)Y+=v[T+W]<<8*W;m.Ra=Y,m.bb=M,m.oa=v,m.pa=T}function ke(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Zi-8>>>0,++m.bb,m.u-=8;ne(m)&&(m.h=1,m.u=0)}function te(m,v){if(s(0<=v),!m.h&&v<=Hn){var T=K(m)&Wn[v];return m.u+=v,ke(m),T}return m.h=1,m.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function re(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(m){return m.Ra>>>(m.u&Zi-1)>>>0}function ne(m){return s(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Zi}function pe(m,v){m.u=v,m.h=ne(m)}function je(m){m.u>=Ka&&(s(m.u>=Ka),ke(m))}function _e(m){s(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(s(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function ue(m){return be(m,1)}function xe(m,v){var T=m.Ca;0>m.b&&_e(m);var M=m.b,W=T*v>>>8,Y=(m.I>>>M>W)+0;for(Y?(T-=W,m.I-=W+1<<M>>>0):T=W+1,M=T,W=0;256<=M;)W+=8,M>>=8;return M=7^W+bi[M],m.b-=M,m.Ca=(T<<M)-1,Y}function Ie(m,v,T){m[v+0]=T>>24&255,m[v+1]=T>>16&255,m[v+2]=T>>8&255,m[v+3]=255&T}function He(m,v){return m[v+0]|m[v+1]<<8}function Je(m,v){return He(m,v)|m[v+2]<<16}function De(m,v){return He(m,v)|He(m,v+2)<<16}function le(m,v){var T=1<<v;return s(m!=null),s(0<v),m.X=l(T),m.X==null?0:(m.Mb=32-v,m.Xa=v,1)}function Nt(m,v){s(m!=null),s(v!=null),s(m.Xa==v.Xa),a(v.X,0,m.X,0,1<<v.Xa)}function At(){this.X=[],this.Xa=this.Mb=0}function ct(m,v,T,M){s(T!=null),s(M!=null);var W=T[0],Y=M[0];return W==0&&(W=(m*Y+v/2)/v),Y==0&&(Y=(v*W+m/2)/m),0>=W||0>=Y?0:(T[0]=W,M[0]=Y,1)}function Ye(m,v){return m+(1<<v)-1>>>v}function ce(m,v){return((4278255360&m)+(4278255360&v)>>>0&4278255360)+((16711935&m)+(16711935&v)>>>0&16711935)>>>0}function ye(m,v){E[v]=function(T,M,W,Y,J,ee,se){var ae;for(ae=0;ae<J;++ae){var we=E[m](ee[se+ae-1],W,Y+ae);ee[se+ae]=ce(T[M+ae],we)}}}function Le(){this.ud=this.hd=this.jd=0}function Ue(m,v){return((4278124286&(m^v))>>>1)+(m&v)>>>0}function Ge(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function qe(m,v){return Ge(m+(m-v+.5>>1))}function Qe(m,v,T){return Math.abs(v-T)-Math.abs(m-T)}function _t(m,v,T,M,W,Y,J){for(M=Y[J-1],T=0;T<W;++T)Y[J+T]=M=ce(m[v+T],M)}function lt(m,v,T,M,W){var Y;for(Y=0;Y<T;++Y){var J=m[v+Y],ee=J>>8&255,se=16711935&(se=(se=16711935&J)+((ee<<16)+ee));M[W+Y]=(4278255360&J)+se>>>0}}function ut(m,v){v.jd=255&m,v.hd=m>>8&255,v.ud=m>>16&255}function Et(m,v,T,M,W,Y){var J;for(J=0;J<M;++J){var ee=v[T+J],se=ee>>>8,ae=ee,we=255&(we=(we=ee>>>16)+((m.jd<<24>>24)*(se<<24>>24)>>>5));ae=255&(ae=(ae+=(m.hd<<24>>24)*(se<<24>>24)>>>5)+((m.ud<<24>>24)*(we<<24>>24)>>>5)),W[Y+J]=(4278255360&ee)+(we<<16)+ae}}function ht(m,v,T,M,W){E[v]=function(Y,J,ee,se,ae,we,Ee,ie,Se){for(se=Ee;se<ie;++se)for(Ee=0;Ee<Se;++Ee)ae[we++]=W(ee[M(Y[J++])])},E[m]=function(Y,J,ee,se,ae,we,Ee){var ie=8>>Y.b,Se=Y.Ea,Pe=Y.K[0],$e=Y.w;if(8>ie)for(Y=(1<<Y.b)-1,$e=(1<<ie)-1;J<ee;++J){var Fe,ze=0;for(Fe=0;Fe<Se;++Fe)Fe&Y||(ze=M(se[ae++])),we[Ee++]=W(Pe[ze&$e]),ze>>=ie}else E["VP8LMapColor"+T](se,ae,Pe,$e,we,Ee,J,ee,Se)}}function ws(m,v,T,M,W){for(T=v+T;v<T;){var Y=m[v++];M[W++]=Y>>16&255,M[W++]=Y>>8&255,M[W++]=255&Y}}function es(m,v,T,M,W){for(T=v+T;v<T;){var Y=m[v++];M[W++]=Y>>16&255,M[W++]=Y>>8&255,M[W++]=255&Y,M[W++]=Y>>24&255}}function yt(m,v,T,M,W){for(T=v+T;v<T;){var Y=(J=m[v++])>>16&240|J>>12&15,J=240&J|J>>28&15;M[W++]=Y,M[W++]=J}}function Ut(m,v,T,M,W){for(T=v+T;v<T;){var Y=(J=m[v++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;M[W++]=Y,M[W++]=J}}function is(m,v,T,M,W){for(T=v+T;v<T;){var Y=m[v++];M[W++]=255&Y,M[W++]=Y>>8&255,M[W++]=Y>>16&255}}function Tt(m,v,T,M,W,Y){if(Y==0)for(T=v+T;v<T;)Ie(M,((Y=m[v++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),W+=32;else a(M,W,m,v,T)}function Kt(m,v){E[v][0]=E[m+"0"],E[v][1]=E[m+"1"],E[v][2]=E[m+"2"],E[v][3]=E[m+"3"],E[v][4]=E[m+"4"],E[v][5]=E[m+"5"],E[v][6]=E[m+"6"],E[v][7]=E[m+"7"],E[v][8]=E[m+"8"],E[v][9]=E[m+"9"],E[v][10]=E[m+"10"],E[v][11]=E[m+"11"],E[v][12]=E[m+"12"],E[v][13]=E[m+"13"],E[v][14]=E[m+"0"],E[v][15]=E[m+"0"]}function Bt(m){return m==jl||m==Bo||m==cc||m==dc}function Vs(){this.eb=[],this.size=this.A=this.fb=0}function Os(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function os(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vs,this.f.kb=new Os,this.sd=null}function Ot(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ds(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function qi(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Ur(m,v){var T=m.T,M=v.ba.f.RGBA,W=M.eb,Y=M.fb+m.ka*M.A,J=Sn[v.ba.S],ee=m.y,se=m.O,ae=m.f,we=m.N,Ee=m.ea,ie=m.W,Se=v.cc,Pe=v.dc,$e=v.Mc,Fe=v.Nc,ze=m.ka,Oe=m.ka+m.T,Ve=m.U,We=Ve+1>>1;for(ze==0?J(ee,se,null,null,ae,we,Ee,ie,ae,we,Ee,ie,W,Y,null,null,Ve):(J(v.ec,v.fc,ee,se,Se,Pe,$e,Fe,ae,we,Ee,ie,W,Y-M.A,W,Y,Ve),++T);ze+2<Oe;ze+=2)Se=ae,Pe=we,$e=Ee,Fe=ie,we+=m.Rc,ie+=m.Rc,Y+=2*M.A,J(ee,(se+=2*m.fa)-m.fa,ee,se,Se,Pe,$e,Fe,ae,we,Ee,ie,W,Y-M.A,W,Y,Ve);return se+=m.fa,m.j+Oe<m.o?(a(v.ec,v.fc,ee,se,Ve),a(v.cc,v.dc,ae,we,We),a(v.Mc,v.Nc,Ee,ie,We),T--):1&Oe||J(ee,se,null,null,ae,we,Ee,ie,ae,we,Ee,ie,W,Y+M.A,null,null,Ve),T}function Ua(m,v,T){var M=m.F,W=[m.J];if(M!=null){var Y=m.U,J=v.ba.S,ee=J==lc||J==cc;v=v.ba.f.RGBA;var se=[0],ae=m.ka;se[0]=m.T,m.Kb&&(ae==0?--se[0]:(--ae,W[0]-=m.width),m.j+m.ka+m.T==m.o&&(se[0]=m.o-m.j-ae));var we=v.eb;ae=v.fb+ae*v.A,m=ic(M,W[0],m.width,Y,se,we,ae+(ee?0:3),v.A),s(T==se),m&&Bt(J)&&Uo(we,ae,ee,Y,se,v.A)}return 0}function Qn(m){var v=m.ma,T=v.ba.S,M=11>T,W=T==Qi||T==oc||T==lc||T==Ss||T==12||Bt(T);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!fl(v.Oa,m,W?11:12))return 0;if(W&&Bt(T)&&Zc(),m.da)alert("todo:use_scaling");else{if(M){if(v.Ib=qi,m.Kb){if(T=m.U+1>>1,v.memory=l(m.U+2*T),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+m.U,v.Mc=v.cc,v.Nc=v.dc+T,v.Ib=Ur,Zc()}}else alert("todo:EmitYUV");W&&(v.Jb=Ua,M&&oa())}if(M&&!Wr){for(m=0;256>m;++m)Cn[m]=89858*(m-128)+Ta>>_i,An[m]=-22014*(m-128)+Ta,kl[m]=-45773*(m-128),Go[m]=113618*(m-128)+Ta>>_i;for(m=vs;m<_s;++m)v=76283*(m-16)+Ta>>_i,sd[m-vs]=Ys(v,255),Zu[m-vs]=Ys(v+8>>4,15);Wr=1}return 1}function Ft(m){var v=m.ma,T=m.U,M=m.T;return s(!(1&m.ka)),0>=T||0>=M?0:(T=v.Ib(m,v),v.Jb!=null&&v.Jb(m,v,T),v.Dc+=T,1)}function On(m){m.ma.memory=null}function wa(m,v,T,M){return te(m,8)!=47?0:(v[0]=te(m,14)+1,T[0]=te(m,14)+1,M[0]=te(m,1),te(m,3)!=0?0:!m.h)}function Jr(m,v){if(4>m)return m+1;var T=m-2>>1;return(2+(1&m)<<T)+te(v,T)+1}function Xn(m,v){return 120<v?v-120:1<=(T=((T=Am[v-1])>>4)*m+(8-(15&T)))?T:1;var T}function Es(m,v,T){var M=K(T),W=m[v+=255&M].g-8;return 0<W&&(pe(T,T.u+8),M=K(T),v+=m[v].value,v+=M&(1<<W)-1),pe(T,T.u+m[v].g),m[v].value}function ar(m,v,T){return T.g+=m.g,T.value+=m.value<<v>>>0,s(8>=T.g),m.g}function pr(m,v,T){var M=m.xc;return s((v=M==0?0:m.vc[m.md*(T>>M)+(v>>M)])<m.Wb),m.Ya[v]}function mi(m,v,T,M){var W=m.ab,Y=m.c*v,J=m.C;v=J+v;var ee=T,se=M;for(M=m.Ta,T=m.Ua;0<W--;){var ae=m.gc[W],we=J,Ee=v,ie=ee,Se=se,Pe=(se=M,ee=T,ae.Ea);switch(s(we<Ee),s(Ee<=ae.nc),ae.hc){case 2:lr(ie,Se,(Ee-we)*Pe,se,ee);break;case 0:var $e=we,Fe=Ee,ze=se,Oe=ee,Ve=(bt=ae).Ea;$e==0&&(ji(ie,Se,null,null,1,ze,Oe),_t(ie,Se+1,0,0,Ve-1,ze,Oe+1),Se+=Ve,Oe+=Ve,++$e);for(var We=1<<bt.b,Ct=We-1,ft=Ye(Ve,bt.b),Ht=bt.K,bt=bt.w+($e>>bt.b)*ft;$e<Fe;){var ts=Ht,Qs=bt,Gt=1;for(Ja(ie,Se,ze,Oe-Ve,1,ze,Oe);Gt<Ve;){var pt=(Gt&~Ct)+We;pt>Ve&&(pt=Ve),(0,zo[ts[Qs++]>>8&15])(ie,Se+ +Gt,ze,Oe+Gt-Ve,pt-Gt,ze,Oe+Gt),Gt=pt}Se+=Ve,Oe+=Ve,++$e&Ct||(bt+=ft)}Ee!=ae.nc&&a(se,ee-Pe,se,ee+(Ee-we-1)*Pe,Pe);break;case 1:for(Pe=ie,Fe=Se,Ve=(ie=ae.Ea)-(Oe=ie&~(ze=(Se=1<<ae.b)-1)),$e=Ye(ie,ae.b),We=ae.K,ae=ae.w+(we>>ae.b)*$e;we<Ee;){for(Ct=We,ft=ae,Ht=new Le,bt=Fe+Oe,ts=Fe+ie;Fe<bt;)ut(Ct[ft++],Ht),xl(Ht,Pe,Fe,Se,se,ee),Fe+=Se,ee+=Se;Fe<ts&&(ut(Ct[ft++],Ht),xl(Ht,Pe,Fe,Ve,se,ee),Fe+=Ve,ee+=Ve),++we&ze||(ae+=$e)}break;case 3:if(ie==se&&Se==ee&&0<ae.b){for(Fe=se,ie=Pe=ee+(Ee-we)*Pe-(Oe=(Ee-we)*Ye(ae.Ea,ae.b)),Se=se,ze=ee,$e=[],Oe=(Ve=Oe)-1;0<=Oe;--Oe)$e[Oe]=Se[ze+Oe];for(Oe=Ve-1;0<=Oe;--Oe)Fe[ie+Oe]=$e[Oe];Io(ae,we,Ee,se,Pe,se,ee)}else Io(ae,we,Ee,ie,Se,se,ee)}ee=M,se=T}se!=T&&a(M,T,ee,se,Y)}function $i(m,v){var T=m.V,M=m.Ba+m.c*m.C,W=v-m.C;if(s(v<=m.l.o),s(16>=W),0<W){var Y=m.l,J=m.Ta,ee=m.Ua,se=Y.width;if(mi(m,W,T,M),W=ee=[ee],s((T=m.C)<(M=v)),s(Y.v<Y.va),M>Y.o&&(M=Y.o),T<Y.j){var ae=Y.j-T;T=Y.j,W[0]+=ae*se}if(T>=M?T=0:(W[0]+=4*Y.v,Y.ka=T-Y.j,Y.U=Y.va-Y.v,Y.T=M-T,T=1),T){if(ee=ee[0],11>(T=m.ca).S){var we=T.f.RGBA,Ee=(M=T.S,W=Y.U,Y=Y.T,ae=we.eb,we.A),ie=Y;for(we=we.fb+m.Ma*we.A;0<ie--;){var Se=J,Pe=ee,$e=W,Fe=ae,ze=we;switch(M){case Qc:gl(Se,Pe,$e,Fe,ze);break;case Qi:wi(Se,Pe,$e,Fe,ze);break;case jl:wi(Se,Pe,$e,Fe,ze),Uo(Fe,ze,0,$e,1,0);break;case Bu:Oo(Se,Pe,$e,Fe,ze);break;case oc:Tt(Se,Pe,$e,Fe,ze,1);break;case Bo:Tt(Se,Pe,$e,Fe,ze,1),Uo(Fe,ze,0,$e,1,0);break;case lc:Tt(Se,Pe,$e,Fe,ze,0);break;case cc:Tt(Se,Pe,$e,Fe,ze,0),Uo(Fe,ze,1,$e,1,0);break;case Ss:Yi(Se,Pe,$e,Fe,ze);break;case dc:Yi(Se,Pe,$e,Fe,ze),Jd(Fe,ze,$e,1,0);break;case Xc:Ki(Se,Pe,$e,Fe,ze);break;default:s(0)}ee+=se,we+=Ee}m.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");s(m.Ma<=T.height)}}m.C=v,s(m.C<=m.i)}function Na(m){var v;if(0<m.ua)return 0;for(v=0;v<m.Wb;++v){var T=m.Ya[v].G,M=m.Ya[v].H;if(0<T[1][M[1]+0].g||0<T[2][M[2]+0].g||0<T[3][M[3]+0].g)return 0}return 1}function Ba(m,v,T,M,W,Y){if(m.Z!=0){var J=m.qd,ee=m.rd;for(s(tn[m.Z]!=null);v<T;++v)tn[m.Z](J,ee,M,W,M,W,Y),J=M,ee=W,W+=Y;m.qd=J,m.rd=ee}}function Br(m,v){var T=m.l.ma,M=T.Z==0||T.Z==1?m.l.j:m.C;if(M=m.C<M?M:m.C,s(v<=m.l.o),v>M){var W=m.l.width,Y=T.ca,J=T.tb+W*M,ee=m.V,se=m.Ba+m.c*M,ae=m.gc;s(m.ab==1),s(ae[0].hc==3),La(ae[0],M,v,ee,se,Y,J),Ba(T,M,v,Y,J,W)}m.C=m.Ma=v}function ea(m,v,T,M,W,Y,J){var ee=m.$/M,se=m.$%M,ae=m.m,we=m.s,Ee=T+m.$,ie=Ee;W=T+M*W;var Se=T+M*Y,Pe=280+we.ua,$e=m.Pb?ee:16777216,Fe=0<we.ua?we.Wa:null,ze=we.wc,Oe=Ee<Se?pr(we,se,ee):null;s(m.C<Y),s(Se<=W);var Ve=!1;e:for(;;){for(;Ve||Ee<Se;){var We=0;if(ee>=$e){var Ct=Ee-T;s(($e=m).Pb),$e.wd=$e.m,$e.xd=Ct,0<$e.s.ua&&Nt($e.s.Wa,$e.s.vb),$e=ee+td}if(se&ze||(Oe=pr(we,se,ee)),s(Oe!=null),Oe.Qb&&(v[Ee]=Oe.qb,Ve=!0),!Ve)if(je(ae),Oe.jc){We=ae,Ct=v;var ft=Ee,Ht=Oe.pd[K(We)&la-1];s(Oe.jc),256>Ht.g?(pe(We,We.u+Ht.g),Ct[ft]=Ht.value,We=0):(pe(We,We.u+Ht.g-256),s(256<=Ht.value),We=Ht.value),We==0&&(Ve=!0)}else We=Es(Oe.G[0],Oe.H[0],ae);if(ae.h)break;if(Ve||256>We){if(!Ve)if(Oe.nd)v[Ee]=(Oe.qb|We<<8)>>>0;else{if(je(ae),Ve=Es(Oe.G[1],Oe.H[1],ae),je(ae),Ct=Es(Oe.G[2],Oe.H[2],ae),ft=Es(Oe.G[3],Oe.H[3],ae),ae.h)break;v[Ee]=(ft<<24|Ve<<16|We<<8|Ct)>>>0}if(Ve=!1,++Ee,++se>=M&&(se=0,++ee,J!=null&&ee<=Y&&!(ee%16)&&J(m,ee),Fe!=null))for(;ie<Ee;)We=v[ie++],Fe.X[(506832829*We&4294967295)>>>Fe.Mb]=We}else if(280>We){if(We=Jr(We-256,ae),Ct=Es(Oe.G[4],Oe.H[4],ae),je(ae),Ct=Xn(M,Ct=Jr(Ct,ae)),ae.h)break;if(Ee-T<Ct||W-Ee<We)break e;for(ft=0;ft<We;++ft)v[Ee+ft]=v[Ee+ft-Ct];for(Ee+=We,se+=We;se>=M;)se-=M,++ee,J!=null&&ee<=Y&&!(ee%16)&&J(m,ee);if(s(Ee<=W),se&ze&&(Oe=pr(we,se,ee)),Fe!=null)for(;ie<Ee;)We=v[ie++],Fe.X[(506832829*We&4294967295)>>>Fe.Mb]=We}else{if(!(We<Pe))break e;for(Ve=We-280,s(Fe!=null);ie<Ee;)We=v[ie++],Fe.X[(506832829*We&4294967295)>>>Fe.Mb]=We;We=Ee,s(!(Ve>>>(Ct=Fe).Xa)),v[We]=Ct.X[Ve],Ve=!0}Ve||s(ae.h==ne(ae))}if(m.Pb&&ae.h&&Ee<W)s(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Nt(m.s.vb,m.s.Wa);else{if(ae.h)break e;J?.(m,ee>Y?Y:ee),m.a=0,m.$=Ee-T}return 1}return m.a=3,0}function qn(m){s(m!=null),m.vc=null,m.yc=null,m.Ya=null;var v=m.Wa;v!=null&&(v.X=null),m.vb=null,s(m!=null)}function yo(){var m=new St;return m==null?null:(m.a=0,m.xb=Nl,Kt("Predictor","VP8LPredictors"),Kt("Predictor","VP8LPredictors_C"),Kt("PredictorAdd","VP8LPredictorsAdd"),Kt("PredictorAdd","VP8LPredictorsAdd_C"),lr=lt,xl=Et,gl=ws,wi=es,Yi=yt,Ki=Ut,Oo=is,E.VP8LMapColor32b=Qa,E.VP8LMapColor8b=Mo,m)}function _a(m,v,T,M,W){var Y=1,J=[m],ee=[v],se=M.m,ae=M.s,we=null,Ee=0;e:for(;;){if(T)for(;Y&&te(se,1);){var ie=J,Se=ee,Pe=M,$e=1,Fe=Pe.m,ze=Pe.gc[Pe.ab],Oe=te(Fe,2);if(Pe.Oc&1<<Oe)Y=0;else{switch(Pe.Oc|=1<<Oe,ze.hc=Oe,ze.Ea=ie[0],ze.nc=Se[0],ze.K=[null],++Pe.ab,s(4>=Pe.ab),Oe){case 0:case 1:ze.b=te(Fe,3)+2,$e=_a(Ye(ze.Ea,ze.b),Ye(ze.nc,ze.b),0,Pe,ze.K),ze.K=ze.K[0];break;case 3:var Ve,We=te(Fe,8)+1,Ct=16<We?0:4<We?1:2<We?2:3;if(ie[0]=Ye(ze.Ea,Ct),ze.b=Ct,Ve=$e=_a(We,1,0,Pe,ze.K)){var ft,Ht=We,bt=ze,ts=1<<(8>>bt.b),Qs=l(ts);if(Qs==null)Ve=0;else{var Gt=bt.K[0],pt=bt.w;for(Qs[0]=bt.K[0][0],ft=1;ft<1*Ht;++ft)Qs[ft]=ce(Gt[pt+ft],Qs[ft-1]);for(;ft<4*ts;++ft)Qs[ft]=0;bt.K[0]=null,bt.K[0]=Qs,Ve=1}}$e=Ve;break;case 2:break;default:s(0)}Y=$e}}if(J=J[0],ee=ee[0],Y&&te(se,1)&&!(Y=1<=(Ee=te(se,4))&&11>=Ee)){M.a=3;break e}var nt;if(nt=Y)t:{var cr,zt,Xt,Fs=M,Rr=J,vr=ee,Hs=Ee,kr=T,Ir=Fs.m,qs=Fs.s,rs=[null],ms=1,$s=0,fs=Wu[Hs];s:for(;;){if(kr&&te(Ir,1)){var Xs=te(Ir,3)+2,er=Ye(Rr,Xs),Cs=Ye(vr,Xs),sn=er*Cs;if(!_a(er,Cs,0,Fs,rs))break s;for(rs=rs[0],qs.xc=Xs,cr=0;cr<sn;++cr){var ks=rs[cr]>>8&65535;rs[cr]=ks,ks>=ms&&(ms=ks+1)}}if(Ir.h)break s;for(zt=0;5>zt;++zt){var As=Vo[zt];!zt&&0<Hs&&(As+=1<<Hs),$s<As&&($s=As)}var br=d(ms*fs,$),Hr=ms,Pn=d(Hr,Q);if(Pn==null)var dr=null;else s(65536>=Hr),dr=Pn;var ur=l($s);if(dr==null||ur==null||br==null){Fs.a=1;break s}var rn=br;for(cr=Xt=0;cr<ms;++cr){var Ps=dr[cr],nn=Ps.G,ua=Ps.H,Fa=0,Mr=1,hr=0;for(zt=0;5>zt;++zt){As=Vo[zt],nn[zt]=rn,ua[zt]=Xt,!zt&&0<Hs&&(As+=1<<Hs);n:{var to,Si=As,Sl=Fs,ti=ur,Ku=rn,cu=Xt,Rs=0,Da=Sl.m,du=te(Da,1);if(o(ti,0,0,Si),du){var uu=te(Da,1)+1,rd=te(Da,1),nd=te(Da,rd==0?1:8);ti[nd]=1,uu==2&&(ti[nd=te(Da,8)]=1);var si=1}else{var Us=l(19),jr=te(Da,4)+4;if(19<jr){Sl.a=3;var mr=0;break n}for(to=0;to<jr;++to)Us[Cm[to]]=te(Da,3);var Cl=void 0,Ci=void 0,Al=Sl,Fm=Us,Sr=Si,ad=ti,pc=0,ri=Al.m,Ra=8,Gn=d(128,$);r:for(;R(Gn,0,7,Fm,19);){if(te(ri,1)){var xc=2+2*te(ri,3);if((Cl=2+te(ri,xc))>Sr)break r}else Cl=Sr;for(Ci=0;Ci<Sr&&Cl--;){je(ri);var id=Gn[0+(127&K(ri))];pe(ri,ri.u+id.g);var so=id.value;if(16>so)ad[Ci++]=so,so!=0&&(Ra=so);else{var Ju=so==16,hu=so-16,Qu=ed[hu],mu=te(ri,uc[hu])+Qu;if(Ci+mu>Sr)break r;for(var Xu=Ju?Ra:0;0<mu--;)ad[Ci++]=Xu}}pc=1;break r}pc||(Al.a=3),si=pc}(si=si&&!Da.h)&&(Rs=R(Ku,cu,8,ti,Si)),si&&Rs!=0?mr=Rs:(Sl.a=3,mr=0)}if(mr==0)break s;if(Mr&&Vu[zt]==1&&(Mr=rn[Xt].g==0),Fa+=rn[Xt].g,Xt+=mr,3>=zt){var Pl,od=ur[0];for(Pl=1;Pl<As;++Pl)ur[Pl]>od&&(od=ur[Pl]);hr+=od}}if(Ps.nd=Mr,Ps.Qb=0,Mr&&(Ps.qb=(nn[3][ua[3]+0].value<<24|nn[1][ua[1]+0].value<<16|nn[2][ua[2]+0].value)>>>0,Fa==0&&256>nn[0][ua[0]+0].value&&(Ps.Qb=1,Ps.qb+=nn[0][ua[0]+0].value<<8)),Ps.jc=!Ps.Qb&&6>hr,Ps.jc){var gc,Zn=Ps;for(gc=0;gc<la;++gc){var Ai=gc,Ia=Zn.pd[Ai],Yo=Zn.G[0][Zn.H[0]+Ai];256<=Yo.value?(Ia.g=Yo.g+256,Ia.value=Yo.value):(Ia.g=0,Ia.value=0,Ai>>=ar(Yo,8,Ia),Ai>>=ar(Zn.G[1][Zn.H[1]+Ai],16,Ia),Ai>>=ar(Zn.G[2][Zn.H[2]+Ai],0,Ia),ar(Zn.G[3][Zn.H[3]+Ai],24,Ia))}}}qs.vc=rs,qs.Wb=ms,qs.Ya=dr,qs.yc=br,nt=1;break t}nt=0}if(!(Y=nt)){M.a=3;break e}if(0<Ee){if(ae.ua=1<<Ee,!le(ae.Wa,Ee)){M.a=1,Y=0;break e}}else ae.ua=0;var ld=M,cd=J,eh=ee,dd=ld.s,ud=dd.xc;if(ld.c=cd,ld.i=eh,dd.md=Ye(cd,ud),dd.wc=ud==0?-1:(1<<ud)-1,T){M.xb=ei;break e}if((we=l(J*ee))==null){M.a=1,Y=0;break e}Y=(Y=ea(M,we,0,J,ee,ee,null))&&!se.h;break e}return Y?(W!=null?W[0]=we:(s(we==null),s(T)),M.$=0,T||qn(ae)):qn(ae),Y}function Ui(m,v){var T=m.c*m.i,M=T+v+16*v;return s(m.c<=v),m.V=l(M),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+T+v,1)}function vo(m,v){var T=m.C,M=v-T,W=m.V,Y=m.Ba+m.c*T;for(s(v<=m.l.o);0<M;){var J=16<M?16:M,ee=m.l.ma,se=m.l.width,ae=se*J,we=ee.ca,Ee=ee.tb+se*T,ie=m.Ta,Se=m.Ua;mi(m,J,W,Y),Qd(ie,Se,we,Ee,ae),Ba(ee,T,T+J,we,Ee,se),M-=J,W+=J*m.c,T+=J}s(T==v),m.C=m.Ma=v}function bo(){this.ub=this.yd=this.td=this.Rb=0}function al(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Gd(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Ds(){this.Yb=(function(){var m=[];return(function v(T,M,W){for(var Y=W[M],J=0;J<Y&&(T.push(W.length>M+1?[]:0),!(W.length<M+1));J++)v(T[J],M+1,W)})(m,0,[3,11]),m})()}function Oc(){this.jb=l(3),this.Wc=c([4,8],Ds),this.Xc=c([4,17],Ds)}function il(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function $n(){this.ld=this.La=this.dd=this.tc=0}function Bi(){this.Na=this.la=0}function qc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ol(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function jo(){this.uc=this.M=this.Nb=0,this.wa=Array(new $n),this.Y=0,this.ya=Array(new ol),this.aa=0,this.l=new Qr}function Un(){this.y=l(16),this.f=l(8),this.ea=l(8)}function $c(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new bo,this.Kc=new al,this.ed=new il,this.Qa=new Gd,this.Ic=this.$c=this.Aa=0,this.D=new jo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,O),this.ia=0,this.pb=d(4,qc),this.Pa=new Oc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Un),this.Hd=0,this.rb=Array(new Bi),this.sb=0,this.wa=Array(new $n),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ol),this.L=this.aa=0,this.gd=c([4,2],$n),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Zd(){var m=new $c;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Wo||(Wo=ta)),m}function xr(m,v,T){return m.a==0&&(m.a=v,m.sc=T,m.cb=0),0}function Uc(m,v,T){return 3<=T&&m[v+0]==157&&m[v+1]==1&&m[v+2]==42}function wo(m,v){if(m==null)return 0;if(m.a=0,m.sc="OK",v==null)return xr(m,2,"null VP8Io passed to VP8GetHeaders()");var T=v.data,M=v.w,W=v.ha;if(4>W)return xr(m,7,"Truncated header.");var Y=T[M+0]|T[M+1]<<8|T[M+2]<<16,J=m.Od;if(J.Rb=!(1&Y),J.td=Y>>1&7,J.yd=Y>>4&1,J.ub=Y>>5,3<J.td)return xr(m,3,"Incorrect keyframe parameters.");if(!J.yd)return xr(m,4,"Frame not displayable.");M+=3,W-=3;var ee=m.Kc;if(J.Rb){if(7>W)return xr(m,7,"cannot parse picture header");if(!Uc(T,M,W))return xr(m,3,"Bad code word");ee.c=16383&(T[M+4]<<8|T[M+3]),ee.Td=T[M+4]>>6,ee.i=16383&(T[M+6]<<8|T[M+5]),ee.Ud=T[M+6]>>6,M+=7,W-=7,m.za=ee.c+15>>4,m.Ub=ee.i+15>>4,v.width=ee.c,v.height=ee.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((Y=m.Pa).jb,0,255,Y.jb.length),s((Y=m.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,o(Y.Zb,0,0,Y.Zb.length),o(Y.Lb,0,0,Y.Lb)}if(J.ub>W)return xr(m,7,"bad partition length");he(Y=m.m,T,M,J.ub),M+=J.ub,W-=J.ub,J.Rb&&(ee.Ld=ue(Y),ee.Kd=ue(Y)),ee=m.Qa;var se,ae=m.Pa;if(s(Y!=null),s(ee!=null),ee.Cb=ue(Y),ee.Cb){if(ee.Bb=ue(Y),ue(Y)){for(ee.Fb=ue(Y),se=0;4>se;++se)ee.Zb[se]=ue(Y)?V(Y,7):0;for(se=0;4>se;++se)ee.Lb[se]=ue(Y)?V(Y,6):0}if(ee.Bb)for(se=0;3>se;++se)ae.jb[se]=ue(Y)?be(Y,8):255}else ee.Bb=0;if(Y.Ka)return xr(m,3,"cannot parse segment header");if((ee=m.ed).zd=ue(Y),ee.Tb=be(Y,6),ee.wb=be(Y,3),ee.Pc=ue(Y),ee.Pc&&ue(Y)){for(ae=0;4>ae;++ae)ue(Y)&&(ee.vd[ae]=V(Y,6));for(ae=0;4>ae;++ae)ue(Y)&&(ee.od[ae]=V(Y,6))}if(m.L=ee.Tb==0?0:ee.zd?1:2,Y.Ka)return xr(m,3,"cannot parse filter header");var we=W;if(W=se=M,M=se+we,ee=we,m.Xb=(1<<be(m.m,2))-1,we<3*(ae=m.Xb))T=7;else{for(se+=3*ae,ee-=3*ae,we=0;we<ae;++we){var Ee=T[W+0]|T[W+1]<<8|T[W+2]<<16;Ee>ee&&(Ee=ee),he(m.Jc[+we],T,se,Ee),se+=Ee,ee-=Ee,W+=3}he(m.Jc[+ae],T,se,ee),T=se<M?0:5}if(T!=0)return xr(m,T,"cannot parse partitions");for(T=be(se=m.m,7),W=ue(se)?V(se,4):0,M=ue(se)?V(se,4):0,ee=ue(se)?V(se,4):0,ae=ue(se)?V(se,4):0,se=ue(se)?V(se,4):0,we=m.Qa,Ee=0;4>Ee;++Ee){if(we.Cb){var ie=we.Zb[Ee];we.Fb||(ie+=T)}else{if(0<Ee){m.pb[Ee]=m.pb[0];continue}ie=T}var Se=m.pb[Ee];Se.Sc[0]=wl[Ys(ie+W,127)],Se.Sc[1]=hc[Ys(ie+0,127)],Se.Eb[0]=2*wl[Ys(ie+M,127)],Se.Eb[1]=101581*hc[Ys(ie+ee,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=wl[Ys(ie+ae,117)],Se.Qc[1]=hc[Ys(ie+se,127)],Se.lc=ie+se}if(!J.Rb)return xr(m,4,"Not a key frame.");for(ue(Y),J=m.Pa,T=0;4>T;++T){for(W=0;8>W;++W)for(M=0;3>M;++M)for(ee=0;11>ee;++ee)ae=xe(Y,Lm[T][W][M][ee])?be(Y,8):Gu[T][W][M][ee],J.Wc[T][W].Yb[M][ee]=ae;for(W=0;17>W;++W)J.Xc[T][W]=J.Wc[T][iu[W]]}return m.kc=ue(Y),m.kc&&(m.Bd=be(Y,8)),m.cb=1}function ta(m,v,T,M,W,Y,J){var ee=v[W].Yb[T];for(T=0;16>W;++W){if(!xe(m,ee[T+0]))return W;for(;!xe(m,ee[T+1]);)if(ee=v[++W].Yb[0],T=0,W==16)return 16;var se=v[W+1].Yb;if(xe(m,ee[T+2])){var ae=m,we=0;if(xe(ae,(ie=ee)[(Ee=T)+3]))if(xe(ae,ie[Ee+6])){for(ee=0,Ee=2*(we=xe(ae,ie[Ee+8]))+(ie=xe(ae,ie[Ee+9+we])),we=0,ie=nu[Ee];ie[ee];++ee)we+=we+xe(ae,ie[ee]);we+=3+(8<<Ee)}else xe(ae,ie[Ee+7])?(we=7+2*xe(ae,165),we+=xe(ae,145)):we=5+xe(ae,159);else we=xe(ae,ie[Ee+4])?3+xe(ae,ie[Ee+5]):2;ee=se[2]}else we=1,ee=se[1];se=J+au[W],0>(ae=m).b&&_e(ae);var Ee,ie=ae.b,Se=(Ee=ae.Ca>>1)-(ae.I>>ie)>>31;--ae.b,ae.Ca+=Se,ae.Ca|=1,ae.I-=(Ee+1&Se)<<ie,Y[se]=((we^Se)-Se)*M[(0<W)+0]}return 16}function ka(m){var v=m.rb[m.sb-1];v.la=0,v.Na=0,o(m.zc,0,0,m.zc.length),m.ja=0}function jn(m,v,T,M,W){W=m[v+T+32*M]+(W>>3),m[v+T+32*M]=-256&W?0>W?0:255:W}function No(m,v,T,M,W,Y){jn(m,v,0,T,M+W),jn(m,v,1,T,M+Y),jn(m,v,2,T,M-Y),jn(m,v,3,T,M-W)}function ir(m){return(20091*m>>16)+m}function _o(m,v,T,M){var W,Y=0,J=l(16);for(W=0;4>W;++W){var ee=m[v+0]+m[v+8],se=m[v+0]-m[v+8],ae=(35468*m[v+4]>>16)-ir(m[v+12]),we=ir(m[v+4])+(35468*m[v+12]>>16);J[Y+0]=ee+we,J[Y+1]=se+ae,J[Y+2]=se-ae,J[Y+3]=ee-we,Y+=4,v++}for(W=Y=0;4>W;++W)ee=(m=J[Y+0]+4)+J[Y+8],se=m-J[Y+8],ae=(35468*J[Y+4]>>16)-ir(J[Y+12]),jn(T,M,0,0,ee+(we=ir(J[Y+4])+(35468*J[Y+12]>>16))),jn(T,M,1,0,se+ae),jn(T,M,2,0,se-ae),jn(T,M,3,0,ee-we),Y++,M+=32}function Bc(m,v,T,M){var W=m[v+0]+4,Y=35468*m[v+4]>>16,J=ir(m[v+4]),ee=35468*m[v+1]>>16;No(T,M,0,W+J,m=ir(m[v+1]),ee),No(T,M,1,W+Y,m,ee),No(T,M,2,W-Y,m,ee),No(T,M,3,W-J,m,ee)}function Yl(m,v,T,M,W){_o(m,v,T,M),W&&_o(m,v+16,T,M+4)}function ko(m,v,T,M){qo(m,v+0,T,M,1),qo(m,v+32,T,M+128,1)}function Va(m,v,T,M){var W;for(m=m[v+0]+4,W=0;4>W;++W)for(v=0;4>v;++v)jn(T,M,v,W,m)}function ll(m,v,T,M){m[v+0]&&hs(m,v+0,T,M),m[v+16]&&hs(m,v+16,T,M+4),m[v+32]&&hs(m,v+32,T,M+128),m[v+48]&&hs(m,v+48,T,M+128+4)}function ls(m,v,T,M){var W,Y=l(16);for(W=0;4>W;++W){var J=m[v+0+W]+m[v+12+W],ee=m[v+4+W]+m[v+8+W],se=m[v+4+W]-m[v+8+W],ae=m[v+0+W]-m[v+12+W];Y[0+W]=J+ee,Y[8+W]=J-ee,Y[4+W]=ae+se,Y[12+W]=ae-se}for(W=0;4>W;++W)J=(m=Y[0+4*W]+3)+Y[3+4*W],ee=Y[1+4*W]+Y[2+4*W],se=Y[1+4*W]-Y[2+4*W],ae=m-Y[3+4*W],T[M+0]=J+ee>>3,T[M+16]=ae+se>>3,T[M+32]=J-ee>>3,T[M+48]=ae-se>>3,M+=64}function fi(m,v,T){var M,W=v-32,Y=mn,J=255-m[W-1];for(M=0;M<T;++M){var ee,se=Y,ae=J+m[v-1];for(ee=0;ee<T;++ee)m[v+ee]=se[ae+m[W+ee]];v+=32}}function cl(m,v){fi(m,v,4)}function Kl(m,v){fi(m,v,8)}function Vc(m,v){fi(m,v,16)}function Wc(m,v){var T;for(T=0;16>T;++T)a(m,v+32*T,m,v-32,16)}function dl(m,v){var T;for(T=16;0<T;--T)o(m,v,m[v-1],16),v+=32}function pi(m,v,T){var M;for(M=0;16>M;++M)o(v,T+32*M,m,16)}function Sa(m,v){var T,M=16;for(T=0;16>T;++T)M+=m[v-1+32*T]+m[v+T-32];pi(M>>5,m,v)}function Wa(m,v){var T,M=8;for(T=0;16>T;++T)M+=m[v-1+32*T];pi(M>>4,m,v)}function wn(m,v){var T,M=8;for(T=0;16>T;++T)M+=m[v+T-32];pi(M>>4,m,v)}function sa(m,v){pi(128,m,v)}function It(m,v,T){return m+2*v+T+2>>2}function So(m,v){var T,M=v-32;for(M=new Uint8Array([It(m[M-1],m[M+0],m[M+1]),It(m[M+0],m[M+1],m[M+2]),It(m[M+1],m[M+2],m[M+3]),It(m[M+2],m[M+3],m[M+4])]),T=0;4>T;++T)a(m,v+32*T,M,0,M.length)}function Ha(m,v){var T=m[v-1],M=m[v-1+32],W=m[v-1+64],Y=m[v-1+96];Ie(m,v+0,16843009*It(m[v-1-32],T,M)),Ie(m,v+32,16843009*It(T,M,W)),Ie(m,v+64,16843009*It(M,W,Y)),Ie(m,v+96,16843009*It(W,Y,Y))}function Yd(m,v){var T,M=4;for(T=0;4>T;++T)M+=m[v+T-32]+m[v-1+32*T];for(M>>=3,T=0;4>T;++T)o(m,v+32*T,M,4)}function Hc(m,v){var T=m[v-1+0],M=m[v-1+32],W=m[v-1+64],Y=m[v-1-32],J=m[v+0-32],ee=m[v+1-32],se=m[v+2-32],ae=m[v+3-32];m[v+0+96]=It(M,W,m[v-1+96]),m[v+1+96]=m[v+0+64]=It(T,M,W),m[v+2+96]=m[v+1+64]=m[v+0+32]=It(Y,T,M),m[v+3+96]=m[v+2+64]=m[v+1+32]=m[v+0+0]=It(J,Y,T),m[v+3+64]=m[v+2+32]=m[v+1+0]=It(ee,J,Y),m[v+3+32]=m[v+2+0]=It(se,ee,J),m[v+3+0]=It(ae,se,ee)}function Bn(m,v){var T=m[v+1-32],M=m[v+2-32],W=m[v+3-32],Y=m[v+4-32],J=m[v+5-32],ee=m[v+6-32],se=m[v+7-32];m[v+0+0]=It(m[v+0-32],T,M),m[v+1+0]=m[v+0+32]=It(T,M,W),m[v+2+0]=m[v+1+32]=m[v+0+64]=It(M,W,Y),m[v+3+0]=m[v+2+32]=m[v+1+64]=m[v+0+96]=It(W,Y,J),m[v+3+32]=m[v+2+64]=m[v+1+96]=It(Y,J,ee),m[v+3+64]=m[v+2+96]=It(J,ee,se),m[v+3+96]=It(ee,se,se)}function xi(m,v){var T=m[v-1+0],M=m[v-1+32],W=m[v-1+64],Y=m[v-1-32],J=m[v+0-32],ee=m[v+1-32],se=m[v+2-32],ae=m[v+3-32];m[v+0+0]=m[v+1+64]=Y+J+1>>1,m[v+1+0]=m[v+2+64]=J+ee+1>>1,m[v+2+0]=m[v+3+64]=ee+se+1>>1,m[v+3+0]=se+ae+1>>1,m[v+0+96]=It(W,M,T),m[v+0+64]=It(M,T,Y),m[v+0+32]=m[v+1+96]=It(T,Y,J),m[v+1+32]=m[v+2+96]=It(Y,J,ee),m[v+2+32]=m[v+3+96]=It(J,ee,se),m[v+3+32]=It(ee,se,ae)}function Gc(m,v){var T=m[v+0-32],M=m[v+1-32],W=m[v+2-32],Y=m[v+3-32],J=m[v+4-32],ee=m[v+5-32],se=m[v+6-32],ae=m[v+7-32];m[v+0+0]=T+M+1>>1,m[v+1+0]=m[v+0+64]=M+W+1>>1,m[v+2+0]=m[v+1+64]=W+Y+1>>1,m[v+3+0]=m[v+2+64]=Y+J+1>>1,m[v+0+32]=It(T,M,W),m[v+1+32]=m[v+0+96]=It(M,W,Y),m[v+2+32]=m[v+1+96]=It(W,Y,J),m[v+3+32]=m[v+2+96]=It(Y,J,ee),m[v+3+64]=It(J,ee,se),m[v+3+96]=It(ee,se,ae)}function ul(m,v){var T=m[v-1+0],M=m[v-1+32],W=m[v-1+64],Y=m[v-1+96];m[v+0+0]=T+M+1>>1,m[v+2+0]=m[v+0+32]=M+W+1>>1,m[v+2+32]=m[v+0+64]=W+Y+1>>1,m[v+1+0]=It(T,M,W),m[v+3+0]=m[v+1+32]=It(M,W,Y),m[v+3+32]=m[v+1+64]=It(W,Y,Y),m[v+3+64]=m[v+2+64]=m[v+0+96]=m[v+1+96]=m[v+2+96]=m[v+3+96]=Y}function Co(m,v){var T=m[v-1+0],M=m[v-1+32],W=m[v-1+64],Y=m[v-1+96],J=m[v-1-32],ee=m[v+0-32],se=m[v+1-32],ae=m[v+2-32];m[v+0+0]=m[v+2+32]=T+J+1>>1,m[v+0+32]=m[v+2+64]=M+T+1>>1,m[v+0+64]=m[v+2+96]=W+M+1>>1,m[v+0+96]=Y+W+1>>1,m[v+3+0]=It(ee,se,ae),m[v+2+0]=It(J,ee,se),m[v+1+0]=m[v+3+32]=It(T,J,ee),m[v+1+32]=m[v+3+64]=It(M,T,J),m[v+1+64]=m[v+3+96]=It(W,M,T),m[v+1+96]=It(Y,W,M)}function Jl(m,v){var T;for(T=0;8>T;++T)a(m,v+32*T,m,v-32,8)}function Ca(m,v){var T;for(T=0;8>T;++T)o(m,v,m[v-1],8),v+=32}function Ga(m,v,T){var M;for(M=0;8>M;++M)o(v,T+32*M,m,8)}function Aa(m,v){var T,M=8;for(T=0;8>T;++T)M+=m[v+T-32]+m[v-1+32*T];Ga(M>>4,m,v)}function hl(m,v){var T,M=4;for(T=0;8>T;++T)M+=m[v+T-32];Ga(M>>3,m,v)}function Ql(m,v){var T,M=4;for(T=0;8>T;++T)M+=m[v-1+32*T];Ga(M>>3,m,v)}function Xl(m,v){Ga(128,m,v)}function gi(m,v,T){var M=m[v-T],W=m[v+0],Y=3*(W-M)+Xa[1020+m[v-2*T]-m[v+T]],J=bl[112+(Y+4>>3)];m[v-T]=mn[255+M+bl[112+(Y+3>>3)]],m[v+0]=mn[255+W-J]}function Za(m,v,T,M){var W=m[v+0],Y=m[v+T];return ca[255+m[v-2*T]-m[v-T]]>M||ca[255+Y-W]>M}function Ao(m,v,T,M){return 4*ca[255+m[v-T]-m[v+0]]+ca[255+m[v-2*T]-m[v+T]]<=M}function Po(m,v,T,M,W){var Y=m[v-3*T],J=m[v-2*T],ee=m[v-T],se=m[v+0],ae=m[v+T],we=m[v+2*T],Ee=m[v+3*T];return 4*ca[255+ee-se]+ca[255+J-ae]>M?0:ca[255+m[v-4*T]-Y]<=W&&ca[255+Y-J]<=W&&ca[255+J-ee]<=W&&ca[255+Ee-we]<=W&&ca[255+we-ae]<=W&&ca[255+ae-se]<=W}function ra(m,v,T,M){var W=2*M+1;for(M=0;16>M;++M)Ao(m,v+M,T,W)&&gi(m,v+M,T)}function yi(m,v,T,M){var W=2*M+1;for(M=0;16>M;++M)Ao(m,v+M*T,1,W)&&gi(m,v+M*T,1)}function Lo(m,v,T,M){var W;for(W=3;0<W;--W)ra(m,v+=4*T,T,M)}function ec(m,v,T,M){var W;for(W=3;0<W;--W)yi(m,v+=4,T,M)}function na(m,v,T,M,W,Y,J,ee){for(Y=2*Y+1;0<W--;){if(Po(m,v,T,Y,J))if(Za(m,v,T,ee))gi(m,v,T);else{var se=m,ae=v,we=T,Ee=se[ae-2*we],ie=se[ae-we],Se=se[ae+0],Pe=se[ae+we],$e=se[ae+2*we],Fe=27*(Oe=Xa[1020+3*(Se-ie)+Xa[1020+Ee-Pe]])+63>>7,ze=18*Oe+63>>7,Oe=9*Oe+63>>7;se[ae-3*we]=mn[255+se[ae-3*we]+Oe],se[ae-2*we]=mn[255+Ee+ze],se[ae-we]=mn[255+ie+Fe],se[ae+0]=mn[255+Se-Fe],se[ae+we]=mn[255+Pe-ze],se[ae+2*we]=mn[255+$e-Oe]}v+=M}}function aa(m,v,T,M,W,Y,J,ee){for(Y=2*Y+1;0<W--;){if(Po(m,v,T,Y,J))if(Za(m,v,T,ee))gi(m,v,T);else{var se=m,ae=v,we=T,Ee=se[ae-we],ie=se[ae+0],Se=se[ae+we],Pe=bl[112+(4+($e=3*(ie-Ee))>>3)],$e=bl[112+($e+3>>3)],Fe=Pe+1>>1;se[ae-2*we]=mn[255+se[ae-2*we]+Fe],se[ae-we]=mn[255+Ee+$e],se[ae+0]=mn[255+ie-Pe],se[ae+we]=mn[255+Se-Fe]}v+=M}}function tc(m,v,T,M,W,Y){na(m,v,T,1,16,M,W,Y)}function Xr(m,v,T,M,W,Y){na(m,v,1,T,16,M,W,Y)}function ia(m,v,T,M,W,Y){var J;for(J=3;0<J;--J)aa(m,v+=4*T,T,1,16,M,W,Y)}function ml(m,v,T,M,W,Y){var J;for(J=3;0<J;--J)aa(m,v+=4,1,T,16,M,W,Y)}function k(m,v,T,M,W,Y,J,ee){na(m,v,W,1,8,Y,J,ee),na(T,M,W,1,8,Y,J,ee)}function H(m,v,T,M,W,Y,J,ee){na(m,v,1,W,8,Y,J,ee),na(T,M,1,W,8,Y,J,ee)}function oe(m,v,T,M,W,Y,J,ee){aa(m,v+4*W,W,1,8,Y,J,ee),aa(T,M+4*W,W,1,8,Y,J,ee)}function ve(m,v,T,M,W,Y,J,ee){aa(m,v+4,1,W,8,Y,J,ee),aa(T,M+4,1,W,8,Y,J,ee)}function Ae(){this.ba=new os,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ds,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Be(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ze(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vt(){this.ua=0,this.Wa=new At,this.vb=new At,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new $}function St(){this.xb=this.a=0,this.l=new Qr,this.ca=new os,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new re,this.Pb=0,this.wd=new re,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vt,this.ab=0,this.gc=d(4,Ze),this.Oc=0}function qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function $t(m,v,T,M,W,Y,J){for(m=m==null?0:m[v+0],v=0;v<J;++v)W[Y+v]=m+T[M+v]&255,m=W[Y+v]}function us(m,v,T,M,W,Y,J){var ee;if(m==null)$t(null,null,T,M,W,Y,J);else for(ee=0;ee<J;++ee)W[Y+ee]=m[v+ee]+T[M+ee]&255}function Ws(m,v,T,M,W,Y,J){if(m==null)$t(null,null,T,M,W,Y,J);else{var ee,se=m[v+0],ae=se,we=se;for(ee=0;ee<J;++ee)ae=we+(se=m[v+ee])-ae,we=T[M+ee]+(-256&ae?0>ae?0:255:ae)&255,ae=se,W[Y+ee]=we}}function gr(m,v,T,M){var W=v.width,Y=v.o;if(s(m!=null&&v!=null),0>T||0>=M||T+M>Y)return null;if(!m.Cc){if(m.ga==null){var J;if(m.ga=new qt,(J=m.ga==null)||(J=v.width*v.o,s(m.Gb.length==0),m.Gb=l(J),m.Uc=0,m.Gb==null?J=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,J=1),J=!J),!J){J=m.ga;var ee=m.Fa,se=m.P,ae=m.qc,we=m.mb,Ee=m.nb,ie=se+1,Se=ae-1,Pe=J.l;if(s(ee!=null&&we!=null&&v!=null),tn[0]=null,tn[1]=$t,tn[2]=us,tn[3]=Ws,J.ca=we,J.tb=Ee,J.c=v.width,J.i=v.height,s(0<J.c&&0<J.i),1>=ae)v=0;else if(J.$a=3&ee[se+0],J.Z=ee[se+0]>>2&3,J.Lc=ee[se+0]>>4&3,se=ee[se+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||se)v=0;else if(Pe.put=Ft,Pe.ac=Qn,Pe.bc=On,Pe.ma=J,Pe.width=v.width,Pe.height=v.height,Pe.Da=v.Da,Pe.v=v.v,Pe.va=v.va,Pe.j=v.j,Pe.o=v.o,J.$a)e:{s(J.$a==1),v=yo();t:for(;;){if(v==null){v=0;break e}if(s(J!=null),J.mc=v,v.c=J.c,v.i=J.i,v.l=J.l,v.l.ma=J,v.l.width=J.c,v.l.height=J.i,v.a=0,de(v.m,ee,ie,Se),!_a(J.c,J.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Na(v.s)?(J.ic=1,ee=v.c*v.i,v.Ta=null,v.Ua=0,v.V=l(ee),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(J.ic=0,v=Ui(v,J.c)),!v))break t;v=1;break e}J.mc=null,v=0}else v=Se>=J.c*J.i;J=!v}if(J)return null;m.ga.Lc!=1?m.Ga=0:M=Y-T}s(m.ga!=null),s(T+M<=Y);e:{if(v=(ee=m.ga).c,Y=ee.l.o,ee.$a==0){if(ie=m.rc,Se=m.Vc,Pe=m.Fa,se=m.P+1+T*v,ae=m.mb,we=m.nb+T*v,s(se<=m.P+m.qc),ee.Z!=0)for(s(tn[ee.Z]!=null),J=0;J<M;++J)tn[ee.Z](ie,Se,Pe,se,ae,we,v),ie=ae,Se=we,we+=v,se+=v;else for(J=0;J<M;++J)a(ae,we,Pe,se,v),ie=ae,Se=we,we+=v,se+=v;m.rc=ie,m.Vc=Se}else{if(s(ee.mc!=null),v=T+M,s((J=ee.mc)!=null),s(v<=J.i),J.C>=v)v=1;else if(ee.ic||oa(),ee.ic){ee=J.V,ie=J.Ba,Se=J.c;var $e=J.i,Fe=(Pe=1,se=J.$/Se,ae=J.$%Se,we=J.m,Ee=J.s,J.$),ze=Se*$e,Oe=Se*v,Ve=Ee.wc,We=Fe<Oe?pr(Ee,ae,se):null;s(Fe<=ze),s(v<=$e),s(Na(Ee));t:for(;;){for(;!we.h&&Fe<Oe;){if(ae&Ve||(We=pr(Ee,ae,se)),s(We!=null),je(we),256>($e=Es(We.G[0],We.H[0],we)))ee[ie+Fe]=$e,++Fe,++ae>=Se&&(ae=0,++se<=v&&!(se%16)&&Br(J,se));else{if(!(280>$e)){Pe=0;break t}$e=Jr($e-256,we);var Ct,ft=Es(We.G[4],We.H[4],we);if(je(we),!(Fe>=(ft=Xn(Se,ft=Jr(ft,we)))&&ze-Fe>=$e)){Pe=0;break t}for(Ct=0;Ct<$e;++Ct)ee[ie+Fe+Ct]=ee[ie+Fe+Ct-ft];for(Fe+=$e,ae+=$e;ae>=Se;)ae-=Se,++se<=v&&!(se%16)&&Br(J,se);Fe<Oe&&ae&Ve&&(We=pr(Ee,ae,se))}s(we.h==ne(we))}Br(J,se>v?v:se);break t}!Pe||we.h&&Fe<ze?(Pe=0,J.a=we.h?5:3):J.$=Fe,v=Pe}else v=ea(J,J.V,J.Ba,J.c,J.i,v,vo);if(!v){M=0;break e}}T+M>=Y&&(m.Cc=1),M=1}if(!M)return null;if(m.Cc&&((M=m.ga)!=null&&(M.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+T*W}function Ts(m,v,T,M,W,Y){for(;0<W--;){var J,ee=m,se=v+(T?1:0),ae=m,we=v+(T?0:3);for(J=0;J<M;++J){var Ee=ae[we+4*J];Ee!=255&&(Ee*=32897,ee[se+4*J+0]=ee[se+4*J+0]*Ee>>23,ee[se+4*J+1]=ee[se+4*J+1]*Ee>>23,ee[se+4*J+2]=ee[se+4*J+2]*Ee>>23)}v+=Y}}function _r(m,v,T,M,W){for(;0<M--;){var Y;for(Y=0;Y<T;++Y){var J=m[v+2*Y+0],ee=15&(ae=m[v+2*Y+1]),se=4369*ee,ae=(240&ae|ae>>4)*se>>16;m[v+2*Y+0]=(240&J|J>>4)*se>>16&240|(15&J|J<<4)*se>>16>>4&15,m[v+2*Y+1]=240&ae|ee}v+=W}}function or(m,v,T,M,W,Y,J,ee){var se,ae,we=255;for(ae=0;ae<W;++ae){for(se=0;se<M;++se){var Ee=m[v+se];Y[J+4*se]=Ee,we&=Ee}v+=T,J+=ee}return we!=255}function Vr(m,v,T,M,W){var Y;for(Y=0;Y<W;++Y)T[M+Y]=m[v+Y]>>8}function oa(){Uo=Ts,Jd=_r,ic=or,Qd=Vr}function Nn(m,v,T){E[m]=function(M,W,Y,J,ee,se,ae,we,Ee,ie,Se,Pe,$e,Fe,ze,Oe,Ve){var We,Ct=Ve-1>>1,ft=ee[se+0]|ae[we+0]<<16,Ht=Ee[ie+0]|Se[Pe+0]<<16;s(M!=null);var bt=3*ft+Ht+131074>>2;for(v(M[W+0],255&bt,bt>>16,$e,Fe),Y!=null&&(bt=3*Ht+ft+131074>>2,v(Y[J+0],255&bt,bt>>16,ze,Oe)),We=1;We<=Ct;++We){var ts=ee[se+We]|ae[we+We]<<16,Qs=Ee[ie+We]|Se[Pe+We]<<16,Gt=ft+ts+Ht+Qs+524296,pt=Gt+2*(ts+Ht)>>3;bt=pt+ft>>1,ft=(Gt=Gt+2*(ft+Qs)>>3)+ts>>1,v(M[W+2*We-1],255&bt,bt>>16,$e,Fe+(2*We-1)*T),v(M[W+2*We-0],255&ft,ft>>16,$e,Fe+(2*We-0)*T),Y!=null&&(bt=Gt+Ht>>1,ft=pt+Qs>>1,v(Y[J+2*We-1],255&bt,bt>>16,ze,Oe+(2*We-1)*T),v(Y[J+2*We+0],255&ft,ft>>16,ze,Oe+(2*We+0)*T)),ft=ts,Ht=Qs}1&Ve||(bt=3*ft+Ht+131074>>2,v(M[W+Ve-1],255&bt,bt>>16,$e,Fe+(Ve-1)*T),Y!=null&&(bt=3*Ht+ft+131074>>2,v(Y[J+Ve-1],255&bt,bt>>16,ze,Oe+(Ve-1)*T)))}}function Zc(){Sn[Qc]=Em,Sn[Qi]=Xi,Sn[Bu]=Tm,Sn[oc]=_l,Sn[lc]=Ho,Sn[Ss]=mc,Sn[Xc]=ou,Sn[jl]=Xi,Sn[Bo]=_l,Sn[cc]=Ho,Sn[dc]=mc}function Vi(m){return m&-16384?0>m?0:255:m>>eo}function Eo(m,v){return Vi((19077*m>>8)+(26149*v>>8)-14234)}function Wi(m,v,T){return Vi((19077*m>>8)-(6419*v>>8)-(13320*T>>8)+8708)}function To(m,v){return Vi((19077*m>>8)+(33050*v>>8)-17685)}function Hi(m,v,T,M,W){M[W+0]=Eo(m,T),M[W+1]=Wi(m,v,T),M[W+2]=To(m,v)}function Fo(m,v,T,M,W){M[W+0]=To(m,v),M[W+1]=Wi(m,v,T),M[W+2]=Eo(m,T)}function en(m,v,T,M,W){var Y=Wi(m,v,T);v=Y<<3&224|To(m,v)>>3,M[W+0]=248&Eo(m,T)|Y>>5,M[W+1]=v}function Do(m,v,T,M,W){var Y=240&To(m,v)|15;M[W+0]=240&Eo(m,T)|Wi(m,v,T)>>4,M[W+1]=Y}function Ro(m,v,T,M,W){M[W+0]=255,Hi(m,v,T,M,W+1)}function sc(m,v,T,M,W){Fo(m,v,T,M,W),M[W+3]=255}function rc(m,v,T,M,W){Hi(m,v,T,M,W),M[W+3]=255}function Ys(m,v){return 0>m?0:m>v?v:m}function Pa(m,v,T){E[m]=function(M,W,Y,J,ee,se,ae,we,Ee){for(var ie=we+(-2&Ee)*T;we!=ie;)v(M[W+0],Y[J+0],ee[se+0],ae,we),v(M[W+1],Y[J+0],ee[se+0],ae,we+T),W+=2,++J,++se,we+=2*T;1&Ee&&v(M[W+0],Y[J+0],ee[se+0],ae,we)}}function Ya(m,v,T){return T==0?m==0?v==0?6:5:v==0?4:0:T}function Yc(m,v,T,M,W){switch(m>>>30){case 3:qo(v,T,M,W,0);break;case 2:Ks(v,T,M,W);break;case 1:hs(v,T,M,W)}}function Vn(m,v){var T,M,W=v.M,Y=v.Nb,J=m.oc,ee=m.pc+40,se=m.oc,ae=m.pc+584,we=m.oc,Ee=m.pc+600;for(T=0;16>T;++T)J[ee+32*T-1]=129;for(T=0;8>T;++T)se[ae+32*T-1]=129,we[Ee+32*T-1]=129;for(0<W?J[ee-1-32]=se[ae-1-32]=we[Ee-1-32]=129:(o(J,ee-32-1,127,21),o(se,ae-32-1,127,9),o(we,Ee-32-1,127,9)),M=0;M<m.za;++M){var ie=v.ya[v.aa+M];if(0<M){for(T=-1;16>T;++T)a(J,ee+32*T-4,J,ee+32*T+12,4);for(T=-1;8>T;++T)a(se,ae+32*T-4,se,ae+32*T+4,4),a(we,Ee+32*T-4,we,Ee+32*T+4,4)}var Se=m.Gd,Pe=m.Hd+M,$e=ie.ad,Fe=ie.Hc;if(0<W&&(a(J,ee-32,Se[Pe].y,0,16),a(se,ae-32,Se[Pe].f,0,8),a(we,Ee-32,Se[Pe].ea,0,8)),ie.Za){var ze=J,Oe=ee-32+16;for(0<W&&(M>=m.za-1?o(ze,Oe,Se[Pe].y[15],4):a(ze,Oe,Se[Pe+1].y,0,4)),T=0;4>T;T++)ze[Oe+128+T]=ze[Oe+256+T]=ze[Oe+384+T]=ze[Oe+0+T];for(T=0;16>T;++T,Fe<<=2)ze=J,Oe=ee+lu[T],da[ie.Ob[T]](ze,Oe),Yc(Fe,$e,16*+T,ze,Oe)}else if(ze=Ya(M,W,ie.Ob[0]),fn[ze](J,ee),Fe!=0)for(T=0;16>T;++T,Fe<<=2)Yc(Fe,$e,16*+T,J,ee+lu[T]);for(T=ie.Gc,ze=Ya(M,W,ie.Dd),kn[ze](se,ae),kn[ze](we,Ee),Fe=$e,ze=se,Oe=ae,255&(ie=0|T)&&(170&ie?_n(Fe,256,ze,Oe):Ns(Fe,256,ze,Oe)),ie=we,Fe=Ee,255&(T>>=8)&&(170&T?_n($e,320,ie,Fe):Ns($e,320,ie,Fe)),W<m.Ub-1&&(a(Se[Pe].y,0,J,ee+480,16),a(Se[Pe].f,0,se,ae+224,8),a(Se[Pe].ea,0,we,Ee+224,8)),T=8*Y*m.B,Se=m.sa,Pe=m.ta+16*M+16*Y*m.R,$e=m.qa,ie=m.ra+8*M+T,Fe=m.Ha,ze=m.Ia+8*M+T,T=0;16>T;++T)a(Se,Pe+T*m.R,J,ee+32*T,16);for(T=0;8>T;++T)a($e,ie+T*m.B,se,ae+32*T,8),a(Fe,ze+T*m.B,we,Ee+32*T,8)}}function Gi(m,v,T,M,W,Y,J,ee,se){var ae=[0],we=[0],Ee=0,ie=se!=null?se.kd:0,Se=se??new Be;if(m==null||12>T)return 7;Se.data=m,Se.w=v,Se.ha=T,v=[v],T=[T],Se.gb=[Se.gb];e:{var Pe=v,$e=T,Fe=Se.gb;if(s(m!=null),s($e!=null),s(Fe!=null),Fe[0]=0,12<=$e[0]&&!r(m,Pe[0],"RIFF")){if(r(m,Pe[0]+8,"WEBP")){Fe=3;break e}var ze=De(m,Pe[0]+4);if(12>ze||4294967286<ze){Fe=3;break e}if(ie&&ze>$e[0]-8){Fe=7;break e}Fe[0]=ze,Pe[0]+=12,$e[0]-=12}Fe=0}if(Fe!=0)return Fe;for(ze=0<Se.gb[0],T=T[0];;){e:{var Oe=m;$e=v,Fe=T;var Ve=ae,We=we,Ct=Pe=[0];if((bt=Ee=[Ee])[0]=0,8>Fe[0])Fe=7;else{if(!r(Oe,$e[0],"VP8X")){if(De(Oe,$e[0]+4)!=10){Fe=3;break e}if(18>Fe[0]){Fe=7;break e}var ft=De(Oe,$e[0]+8),Ht=1+Je(Oe,$e[0]+12);if(2147483648<=Ht*(Oe=1+Je(Oe,$e[0]+15))){Fe=3;break e}Ct!=null&&(Ct[0]=ft),Ve!=null&&(Ve[0]=Ht),We!=null&&(We[0]=Oe),$e[0]+=18,Fe[0]-=18,bt[0]=1}Fe=0}}if(Ee=Ee[0],Pe=Pe[0],Fe!=0)return Fe;if($e=!!(2&Pe),!ze&&Ee)return 3;if(Y!=null&&(Y[0]=!!(16&Pe)),J!=null&&(J[0]=$e),ee!=null&&(ee[0]=0),J=ae[0],Pe=we[0],Ee&&$e&&se==null){Fe=0;break}if(4>T){Fe=7;break}if(ze&&Ee||!ze&&!Ee&&!r(m,v[0],"ALPH")){T=[T],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{ft=m,Fe=v,ze=T;var bt=Se.gb;Ve=Se.na,We=Se.P,Ct=Se.Sa,Ht=22,s(ft!=null),s(ze!=null),Oe=Fe[0];var ts=ze[0];for(s(Ve!=null),s(Ct!=null),Ve[0]=null,We[0]=null,Ct[0]=0;;){if(Fe[0]=Oe,ze[0]=ts,8>ts){Fe=7;break e}var Qs=De(ft,Oe+4);if(4294967286<Qs){Fe=3;break e}var Gt=8+Qs+1&-2;if(Ht+=Gt,0<bt&&Ht>bt){Fe=3;break e}if(!r(ft,Oe,"VP8 ")||!r(ft,Oe,"VP8L")){Fe=0;break e}if(ts[0]<Gt){Fe=7;break e}r(ft,Oe,"ALPH")||(Ve[0]=ft,We[0]=Oe+8,Ct[0]=Qs),Oe+=Gt,ts-=Gt}}if(T=T[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],Fe!=0)break}T=[T],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(bt=m,Fe=v,ze=T,Ve=Se.gb[0],We=Se.Ja,Ct=Se.xa,ft=Fe[0],Oe=!r(bt,ft,"VP8 "),Ht=!r(bt,ft,"VP8L"),s(bt!=null),s(ze!=null),s(We!=null),s(Ct!=null),8>ze[0])Fe=7;else{if(Oe||Ht){if(bt=De(bt,ft+4),12<=Ve&&bt>Ve-12){Fe=3;break e}if(ie&&bt>ze[0]-8){Fe=7;break e}We[0]=bt,Fe[0]+=8,ze[0]-=8,Ct[0]=Ht}else Ct[0]=5<=ze[0]&&bt[ft+0]==47&&!(bt[ft+4]>>5),We[0]=ze[0];Fe=0}if(T=T[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],v=v[0],Fe!=0)break;if(4294967286<Se.Ja)return 3;if(ee==null||$e||(ee[0]=Se.xa?2:1),J=[J],Pe=[Pe],Se.xa){if(5>T){Fe=7;break}ee=J,ie=Pe,$e=Y,m==null||5>T?m=0:5<=T&&m[v+0]==47&&!(m[v+4]>>5)?(ze=[0],bt=[0],Ve=[0],de(We=new re,m,v,T),wa(We,ze,bt,Ve)?(ee!=null&&(ee[0]=ze[0]),ie!=null&&(ie[0]=bt[0]),$e!=null&&($e[0]=Ve[0]),m=1):m=0):m=0}else{if(10>T){Fe=7;break}ee=Pe,m==null||10>T||!Uc(m,v+3,T-3)?m=0:(ie=m[v+0]|m[v+1]<<8|m[v+2]<<16,$e=16383&(m[v+7]<<8|m[v+6]),m=16383&(m[v+9]<<8|m[v+8]),1&ie||3<(ie>>1&7)||!(ie>>4&1)||ie>>5>=Se.Ja||!$e||!m?m=0:(J&&(J[0]=$e),ee&&(ee[0]=m),m=1))}if(!m||(J=J[0],Pe=Pe[0],Ee&&(ae[0]!=J||we[0]!=Pe)))return 3;se!=null&&(se[0]=Se,se.offset=v-se.w,s(4294967286>v-se.w),s(se.offset==se.ha-T));break}return Fe==0||Fe==7&&Ee&&se==null?(Y!=null&&(Y[0]|=Se.na!=null&&0<Se.na.length),M!=null&&(M[0]=J),W!=null&&(W[0]=Pe),0):Fe}function fl(m,v,T){var M=v.width,W=v.height,Y=0,J=0,ee=M,se=W;if(v.Da=m!=null&&0<m.Da,v.Da&&(ee=m.cd,se=m.bd,Y=m.v,J=m.j,11>T||(Y&=-2,J&=-2),0>Y||0>J||0>=ee||0>=se||Y+ee>M||J+se>W))return 0;if(v.v=Y,v.j=J,v.va=Y+ee,v.o=J+se,v.U=ee,v.T=se,v.da=m!=null&&0<m.da,v.da){if(!ct(ee,se,T=[m.ib],Y=[m.hb]))return 0;v.ib=T[0],v.hb=Y[0]}return v.ob=m!=null&&m.ob,v.Kb=m==null||!m.Sd,v.da&&(v.ob=v.ib<3*M/4&&v.hb<3*W/4,v.Kb=0),1}function pl(m){if(m==null)return 2;if(11>m.S){var v=m.f.RGBA;v.fb+=(m.height-1)*v.A,v.A=-v.A}else v=m.f.kb,m=m.height,v.O+=(m-1)*v.fa,v.fa=-v.fa,v.N+=(m-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(m-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(m-1)*v.lb,v.lb=-v.lb);return 0}function vi(m,v,T,M){if(M==null||0>=m||0>=v)return 2;if(T!=null){if(T.Da){var W=T.cd,Y=T.bd,J=-2&T.v,ee=-2&T.j;if(0>J||0>ee||0>=W||0>=Y||J+W>m||ee+Y>v)return 2;m=W,v=Y}if(T.da){if(!ct(m,v,W=[T.ib],Y=[T.hb]))return 2;m=W[0],v=Y[0]}}M.width=m,M.height=v;e:{var se=M.width,ae=M.height;if(m=M.S,0>=se||0>=ae||!(m>=Qc&&13>m))m=2;else{if(0>=M.Rd&&M.sd==null){J=Y=W=v=0;var we=(ee=se*fc[m])*ae;if(11>m||(Y=(ae+1)/2*(v=(se+1)/2),m==12&&(J=(W=se)*ae)),(ae=l(we+2*Y+J))==null){m=1;break e}M.sd=ae,11>m?((se=M.f.RGBA).eb=ae,se.fb=0,se.A=ee,se.size=we):((se=M.f.kb).y=ae,se.O=0,se.fa=ee,se.Fd=we,se.f=ae,se.N=0+we,se.Ab=v,se.Cd=Y,se.ea=ae,se.W=0+we+Y,se.Db=v,se.Ed=Y,m==12&&(se.F=ae,se.J=0+we+2*Y),se.Tc=J,se.lb=W)}if(v=1,W=M.S,Y=M.width,J=M.height,W>=Qc&&13>W)if(11>W)m=M.f.RGBA,v&=(ee=Math.abs(m.A))*(J-1)+Y<=m.size,v&=ee>=Y*fc[W],v&=m.eb!=null;else{m=M.f.kb,ee=(Y+1)/2,we=(J+1)/2,se=Math.abs(m.fa),ae=Math.abs(m.Ab);var Ee=Math.abs(m.Db),ie=Math.abs(m.lb),Se=ie*(J-1)+Y;v&=se*(J-1)+Y<=m.Fd,v&=ae*(we-1)+ee<=m.Cd,v=(v&=Ee*(we-1)+ee<=m.Ed)&se>=Y&ae>=ee&Ee>=ee,v&=m.y!=null,v&=m.f!=null,v&=m.ea!=null,W==12&&(v&=ie>=Y,v&=Se<=m.Tc,v&=m.F!=null)}else v=0;m=v?0:2}}return m!=0||T!=null&&T.fd&&(m=pl(M)),m}var la=64,Wn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Hn=24,Zi=32,Ka=8,bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(m){return m},E.Predictor2=function(m,v,T){return v[T+0]},E.Predictor3=function(m,v,T){return v[T+1]},E.Predictor4=function(m,v,T){return v[T-1]},E.Predictor5=function(m,v,T){return Ue(Ue(m,v[T+1]),v[T+0])},E.Predictor6=function(m,v,T){return Ue(m,v[T-1])},E.Predictor7=function(m,v,T){return Ue(m,v[T+0])},E.Predictor8=function(m,v,T){return Ue(v[T-1],v[T+0])},E.Predictor9=function(m,v,T){return Ue(v[T+0],v[T+1])},E.Predictor10=function(m,v,T){return Ue(Ue(m,v[T-1]),Ue(v[T+0],v[T+1]))},E.Predictor11=function(m,v,T){var M=v[T+0];return 0>=Qe(M>>24&255,m>>24&255,(v=v[T-1])>>24&255)+Qe(M>>16&255,m>>16&255,v>>16&255)+Qe(M>>8&255,m>>8&255,v>>8&255)+Qe(255&M,255&m,255&v)?M:m},E.Predictor12=function(m,v,T){var M=v[T+0];return(Ge((m>>24&255)+(M>>24&255)-((v=v[T-1])>>24&255))<<24|Ge((m>>16&255)+(M>>16&255)-(v>>16&255))<<16|Ge((m>>8&255)+(M>>8&255)-(v>>8&255))<<8|Ge((255&m)+(255&M)-(255&v)))>>>0},E.Predictor13=function(m,v,T){var M=v[T-1];return(qe((m=Ue(m,v[T+0]))>>24&255,M>>24&255)<<24|qe(m>>16&255,M>>16&255)<<16|qe(m>>8&255,M>>8&255)<<8|qe(255&m,255&M))>>>0};var ji=E.PredictorAdd0;E.PredictorAdd1=_t,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var Ja=E.PredictorAdd2;ht("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var lr,Io=E.ColorIndexInverseTransform,Qa=E.MapARGB,La=E.VP8LColorIndexInverseTransformAlpha,Mo=E.MapAlpha,zo=E.VP8LPredictorsAdd=[];zo.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var xl,gl,wi,Yi,Ki,Oo,Ji,qo,Ks,_n,hs,Ns,Js,yr,Ea,nc,yl,Ni,Kc,vl,Jc,Kd,ac,$o,Uo,Jd,ic,Qd,Xd=l(511),eu=l(2041),tu=l(225),su=l(767),ru=0,Xa=eu,bl=tu,mn=su,ca=Xd,Qc=0,Qi=1,Bu=2,oc=3,lc=4,Ss=5,Xc=6,jl=7,Bo=8,cc=9,dc=10,uc=[2,3,7],ed=[3,3,11],Vo=[280,256,256,256,40],Vu=[0,1,1,1,0],Cm=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Am=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Wu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],td=8,wl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],hc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wo=null,nu=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],au=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Hu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Pm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Lm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],iu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],fn=[],da=[],kn=[],ei=1,Nl=2,tn=[],Sn=[];Nn("UpsampleRgbLinePair",Hi,3),Nn("UpsampleBgrLinePair",Fo,3),Nn("UpsampleRgbaLinePair",rc,4),Nn("UpsampleBgraLinePair",sc,4),Nn("UpsampleArgbLinePair",Ro,4),Nn("UpsampleRgba4444LinePair",Do,2),Nn("UpsampleRgb565LinePair",en,2);var Em=E.UpsampleRgbLinePair,Tm=E.UpsampleBgrLinePair,Xi=E.UpsampleRgbaLinePair,_l=E.UpsampleBgraLinePair,Ho=E.UpsampleArgbLinePair,mc=E.UpsampleRgba4444LinePair,ou=E.UpsampleRgb565LinePair,_i=16,Ta=1<<_i-1,vs=-227,_s=482,eo=6,Wr=0,Cn=l(256),Go=l(256),kl=l(256),An=l(256),sd=l(_s-vs),Zu=l(_s-vs);Pa("YuvToRgbRow",Hi,3),Pa("YuvToBgrRow",Fo,3),Pa("YuvToRgbaRow",rc,4),Pa("YuvToBgraRow",sc,4),Pa("YuvToArgbRow",Ro,4),Pa("YuvToRgba4444Row",Do,2),Pa("YuvToRgb565Row",en,2);var lu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Zo=[0,2,8],Yu=[8,7,6,4,4,2,2,2,1,1,1,1],ki=1;this.WebPDecodeRGBA=function(m,v,T,M,W){var Y=Qi,J=new Ae,ee=new os;J.ba=ee,ee.S=Y,ee.width=[ee.width],ee.height=[ee.height];var se=ee.width,ae=ee.height,we=new Ot;if(we==null||m==null)var Ee=2;else s(we!=null),Ee=Gi(m,v,T,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ee!=0?se=0:(se!=null&&(se[0]=we.width[0]),ae!=null&&(ae[0]=we.height[0]),se=1),se){ee.width=ee.width[0],ee.height=ee.height[0],M!=null&&(M[0]=ee.width),W!=null&&(W[0]=ee.height);e:{if(M=new Qr,(W=new Be).data=m,W.w=v,W.ha=T,W.kd=1,v=[0],s(W!=null),((m=Gi(W.data,W.w,W.ha,null,null,null,v,null,W))==0||m==7)&&v[0]&&(m=4),(v=m)==0){if(s(J!=null),M.data=W.data,M.w=W.w+W.offset,M.ha=W.ha-W.offset,M.put=Ft,M.ac=Qn,M.bc=On,M.ma=J,W.xa){if((m=yo())==null){J=1;break e}if((function(ie,Se){var Pe=[0],$e=[0],Fe=[0];t:for(;;){if(ie==null)return 0;if(Se==null)return ie.a=2,0;if(ie.l=Se,ie.a=0,de(ie.m,Se.data,Se.w,Se.ha),!wa(ie.m,Pe,$e,Fe)){ie.a=3;break t}if(ie.xb=Nl,Se.width=Pe[0],Se.height=$e[0],!_a(Pe[0],$e[0],1,ie,null))break t;return 1}return s(ie.a!=0),0})(m,M)){if(M=(v=vi(M.width,M.height,J.Oa,J.ba))==0){t:{M=m;s:for(;;){if(M==null){M=0;break t}if(s(M.s.yc!=null),s(M.s.Ya!=null),s(0<M.s.Wb),s((T=M.l)!=null),s((W=T.ma)!=null),M.xb!=0){if(M.ca=W.ba,M.tb=W.tb,s(M.ca!=null),!fl(W.Oa,T,oc)){M.a=2;break s}if(!Ui(M,T.width)||T.da)break s;if((T.da||Bt(M.ca.S))&&oa(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&oa()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!le(M.s.vb,M.s.Wa.Xa)){M.a=1;break s}M.xb=0}if(!ea(M,M.V,M.Ba,M.c,M.i,T.o,$i))break s;W.Dc=M.Ma,M=1;break t}s(M.a!=0),M=0}M=!M}M&&(v=m.a)}else v=m.a}else{if((m=new Zd)==null){J=1;break e}if(m.Fa=W.na,m.P=W.P,m.qc=W.Sa,wo(m,M)){if((v=vi(M.width,M.height,J.Oa,J.ba))==0){if(m.Aa=0,T=J.Oa,s((W=m)!=null),T!=null){if(0<(se=0>(se=T.Md)?0:100<se?255:255*se/100)){for(ae=we=0;4>ae;++ae)12>(Ee=W.pb[ae]).lc&&(Ee.ia=se*Yu[0>Ee.lc?0:Ee.lc]>>3),we|=Ee.ia;we&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=T.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}(function(ie,Se){if(ie==null)return 0;if(Se==null)return xr(ie,2,"NULL VP8Io parameter in VP8Decode().");if(!ie.cb&&!wo(ie,Se))return 0;if(s(ie.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(ie.L=0);var Pe=Zo[ie.L];if(ie.L==2?(ie.yb=0,ie.zb=0):(ie.yb=Se.v-Pe>>4,ie.zb=Se.j-Pe>>4,0>ie.yb&&(ie.yb=0),0>ie.zb&&(ie.zb=0)),ie.Va=Se.o+15+Pe>>4,ie.Hb=Se.va+15+Pe>>4,ie.Hb>ie.za&&(ie.Hb=ie.za),ie.Va>ie.Ub&&(ie.Va=ie.Ub),0<ie.L){var $e=ie.ed;for(Pe=0;4>Pe;++Pe){var Fe;if(ie.Qa.Cb){var ze=ie.Qa.Lb[Pe];ie.Qa.Fb||(ze+=$e.Tb)}else ze=$e.Tb;for(Fe=0;1>=Fe;++Fe){var Oe=ie.gd[Pe][Fe],Ve=ze;if($e.Pc&&(Ve+=$e.vd[0],Fe&&(Ve+=$e.od[0])),0<(Ve=0>Ve?0:63<Ve?63:Ve)){var We=Ve;0<$e.wb&&(We=4<$e.wb?We>>2:We>>1)>9-$e.wb&&(We=9-$e.wb),1>We&&(We=1),Oe.dd=We,Oe.tc=2*Ve+We,Oe.ld=40<=Ve?2:15<=Ve?1:0}else Oe.tc=0;Oe.La=Fe}}}Pe=0}else xr(ie,6,"Frame setup failed"),Pe=ie.a;if(Pe=Pe==0){if(Pe){ie.$c=0,0<ie.Aa||(ie.Ic=ki);t:{Pe=ie.Ic,$e=4*(We=ie.za);var Ct=32*We,ft=We+1,Ht=0<ie.L?We*(0<ie.Aa?2:1):0,bt=(ie.Aa==2?2:1)*We;if((Oe=$e+832+(Fe=3*(16*Pe+Zo[ie.L])/2*Ct)+(ze=ie.Fa!=null&&0<ie.Fa.length?ie.Kc.c*ie.Kc.i:0))!=Oe)Pe=0;else{if(Oe>ie.Vb){if(ie.Vb=0,ie.Ec=l(Oe),ie.Fc=0,ie.Ec==null){Pe=xr(ie,1,"no memory during frame initialization.");break t}ie.Vb=Oe}Oe=ie.Ec,Ve=ie.Fc,ie.Ac=Oe,ie.Bc=Ve,Ve+=$e,ie.Gd=d(Ct,Un),ie.Hd=0,ie.rb=d(ft+1,Bi),ie.sb=1,ie.wa=Ht?d(Ht,$n):null,ie.Y=0,ie.D.Nb=0,ie.D.wa=ie.wa,ie.D.Y=ie.Y,0<ie.Aa&&(ie.D.Y+=We),s(!0),ie.oc=Oe,ie.pc=Ve,Ve+=832,ie.ya=d(bt,ol),ie.aa=0,ie.D.ya=ie.ya,ie.D.aa=ie.aa,ie.Aa==2&&(ie.D.aa+=We),ie.R=16*We,ie.B=8*We,We=(Ct=Zo[ie.L])*ie.R,Ct=Ct/2*ie.B,ie.sa=Oe,ie.ta=Ve+We,ie.qa=ie.sa,ie.ra=ie.ta+16*Pe*ie.R+Ct,ie.Ha=ie.qa,ie.Ia=ie.ra+8*Pe*ie.B+Ct,ie.$c=0,Ve+=Fe,ie.mb=ze?Oe:null,ie.nb=ze?Ve:null,s(Ve+ze<=ie.Fc+ie.Vb),ka(ie),o(ie.Ac,ie.Bc,0,$e),Pe=1}}if(Pe){if(Se.ka=0,Se.y=ie.sa,Se.O=ie.ta,Se.f=ie.qa,Se.N=ie.ra,Se.ea=ie.Ha,Se.Vd=ie.Ia,Se.fa=ie.R,Se.Rc=ie.B,Se.F=null,Se.J=0,!ru){for(Pe=-255;255>=Pe;++Pe)Xd[255+Pe]=0>Pe?-Pe:Pe;for(Pe=-1020;1020>=Pe;++Pe)eu[1020+Pe]=-128>Pe?-128:127<Pe?127:Pe;for(Pe=-112;112>=Pe;++Pe)tu[112+Pe]=-16>Pe?-16:15<Pe?15:Pe;for(Pe=-255;510>=Pe;++Pe)su[255+Pe]=0>Pe?0:255<Pe?255:Pe;ru=1}Ji=ls,qo=Yl,_n=ko,hs=Va,Ns=ll,Ks=Bc,Js=tc,yr=Xr,Ea=k,nc=H,yl=ia,Ni=ml,Kc=oe,vl=ve,Jc=ra,Kd=yi,ac=Lo,$o=ec,da[0]=Yd,da[1]=cl,da[2]=So,da[3]=Ha,da[4]=Hc,da[5]=xi,da[6]=Bn,da[7]=Gc,da[8]=Co,da[9]=ul,fn[0]=Sa,fn[1]=Vc,fn[2]=Wc,fn[3]=dl,fn[4]=Wa,fn[5]=wn,fn[6]=sa,kn[0]=Aa,kn[1]=Kl,kn[2]=Jl,kn[3]=Ca,kn[4]=Ql,kn[5]=hl,kn[6]=Xl,Pe=1}else Pe=0}Pe&&(Pe=(function(ts,Qs){for(ts.M=0;ts.M<ts.Va;++ts.M){var Gt,pt=ts.Jc[ts.M&ts.Xb],nt=ts.m,cr=ts;for(Gt=0;Gt<cr.za;++Gt){var zt=nt,Xt=cr,Fs=Xt.Ac,Rr=Xt.Bc+4*Gt,vr=Xt.zc,Hs=Xt.ya[Xt.aa+Gt];if(Xt.Qa.Bb?Hs.$b=xe(zt,Xt.Pa.jb[0])?2+xe(zt,Xt.Pa.jb[2]):xe(zt,Xt.Pa.jb[1]):Hs.$b=0,Xt.kc&&(Hs.Ad=xe(zt,Xt.Bd)),Hs.Za=!xe(zt,145)+0,Hs.Za){var kr=Hs.Ob,Ir=0;for(Xt=0;4>Xt;++Xt){var qs,rs=vr[0+Xt];for(qs=0;4>qs;++qs){rs=Pm[Fs[Rr+qs]][rs];for(var ms=Hu[xe(zt,rs[0])];0<ms;)ms=Hu[2*ms+xe(zt,rs[ms])];rs=-ms,Fs[Rr+qs]=rs}a(kr,Ir,Fs,Rr,4),Ir+=4,vr[0+Xt]=rs}}else rs=xe(zt,156)?xe(zt,128)?1:3:xe(zt,163)?2:0,Hs.Ob[0]=rs,o(Fs,Rr,rs,4),o(vr,0,rs,4);Hs.Dd=xe(zt,142)?xe(zt,114)?xe(zt,183)?1:3:2:0}if(cr.m.Ka)return xr(ts,7,"Premature end-of-partition0 encountered.");for(;ts.ja<ts.za;++ts.ja){if(cr=pt,zt=(nt=ts).rb[nt.sb-1],Fs=nt.rb[nt.sb+nt.ja],Gt=nt.ya[nt.aa+nt.ja],Rr=nt.kc?Gt.Ad:0)zt.la=Fs.la=0,Gt.Za||(zt.Na=Fs.Na=0),Gt.Hc=0,Gt.Gc=0,Gt.ia=0;else{var $s,fs;if(zt=Fs,Fs=cr,Rr=nt.Pa.Xc,vr=nt.ya[nt.aa+nt.ja],Hs=nt.pb[vr.$b],Xt=vr.ad,kr=0,Ir=nt.rb[nt.sb-1],rs=qs=0,o(Xt,kr,0,384),vr.Za)var Xs=0,er=Rr[3];else{ms=l(16);var Cs=zt.Na+Ir.Na;if(Cs=Wo(Fs,Rr[1],Cs,Hs.Eb,0,ms,0),zt.Na=Ir.Na=(0<Cs)+0,1<Cs)Ji(ms,0,Xt,kr);else{var sn=ms[0]+3>>3;for(ms=0;256>ms;ms+=16)Xt[kr+ms]=sn}Xs=1,er=Rr[0]}var ks=15&zt.la,As=15&Ir.la;for(ms=0;4>ms;++ms){var br=1&As;for(sn=fs=0;4>sn;++sn)ks=ks>>1|(br=(Cs=Wo(Fs,er,Cs=br+(1&ks),Hs.Sc,Xs,Xt,kr))>Xs)<<7,fs=fs<<2|(3<Cs?3:1<Cs?2:Xt[kr+0]!=0),kr+=16;ks>>=4,As=As>>1|br<<7,qs=(qs<<8|fs)>>>0}for(er=ks,Xs=As>>4,$s=0;4>$s;$s+=2){for(fs=0,ks=zt.la>>4+$s,As=Ir.la>>4+$s,ms=0;2>ms;++ms){for(br=1&As,sn=0;2>sn;++sn)Cs=br+(1&ks),ks=ks>>1|(br=0<(Cs=Wo(Fs,Rr[2],Cs,Hs.Qc,0,Xt,kr)))<<3,fs=fs<<2|(3<Cs?3:1<Cs?2:Xt[kr+0]!=0),kr+=16;ks>>=2,As=As>>1|br<<5}rs|=fs<<4*$s,er|=ks<<4<<$s,Xs|=(240&As)<<$s}zt.la=er,Ir.la=Xs,vr.Hc=qs,vr.Gc=rs,vr.ia=43690&rs?0:Hs.ia,Rr=!(qs|rs)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[Gt.$b][Gt.Za],nt.wa[nt.Y+nt.ja].La|=!Rr),cr.Ka)return xr(ts,7,"Premature end-of-file encountered.")}if(ka(ts),nt=Qs,cr=1,Gt=(pt=ts).D,zt=0<pt.L&&pt.M>=pt.zb&&pt.M<=pt.Va,pt.Aa==0)t:{if(Gt.M=pt.M,Gt.uc=zt,Vn(pt,Gt),cr=1,Gt=(fs=pt.D).Nb,zt=(rs=Zo[pt.L])*pt.R,Fs=rs/2*pt.B,ms=16*Gt*pt.R,sn=8*Gt*pt.B,Rr=pt.sa,vr=pt.ta-zt+ms,Hs=pt.qa,Xt=pt.ra-Fs+sn,kr=pt.Ha,Ir=pt.Ia-Fs+sn,As=(ks=fs.M)==0,qs=ks>=pt.Va-1,pt.Aa==2&&Vn(pt,fs),fs.uc)for(br=(Cs=pt).D.M,s(Cs.D.uc),fs=Cs.yb;fs<Cs.Hb;++fs){Xs=fs,er=br;var Hr=(Pn=(hr=Cs).D).Nb;$s=hr.R;var Pn=Pn.wa[Pn.Y+Xs],dr=hr.sa,ur=hr.ta+16*Hr*$s+16*Xs,rn=Pn.dd,Ps=Pn.tc;if(Ps!=0)if(s(3<=Ps),hr.L==1)0<Xs&&Kd(dr,ur,$s,Ps+4),Pn.La&&$o(dr,ur,$s,Ps),0<er&&Jc(dr,ur,$s,Ps+4),Pn.La&&ac(dr,ur,$s,Ps);else{var nn=hr.B,ua=hr.qa,Fa=hr.ra+8*Hr*nn+8*Xs,Mr=hr.Ha,hr=hr.Ia+8*Hr*nn+8*Xs;Hr=Pn.ld,0<Xs&&(yr(dr,ur,$s,Ps+4,rn,Hr),nc(ua,Fa,Mr,hr,nn,Ps+4,rn,Hr)),Pn.La&&(Ni(dr,ur,$s,Ps,rn,Hr),vl(ua,Fa,Mr,hr,nn,Ps,rn,Hr)),0<er&&(Js(dr,ur,$s,Ps+4,rn,Hr),Ea(ua,Fa,Mr,hr,nn,Ps+4,rn,Hr)),Pn.La&&(yl(dr,ur,$s,Ps,rn,Hr),Kc(ua,Fa,Mr,hr,nn,Ps,rn,Hr))}}if(pt.ia&&alert("todo:DitherRow"),nt.put!=null){if(fs=16*ks,ks=16*(ks+1),As?(nt.y=pt.sa,nt.O=pt.ta+ms,nt.f=pt.qa,nt.N=pt.ra+sn,nt.ea=pt.Ha,nt.W=pt.Ia+sn):(fs-=rs,nt.y=Rr,nt.O=vr,nt.f=Hs,nt.N=Xt,nt.ea=kr,nt.W=Ir),qs||(ks-=rs),ks>nt.o&&(ks=nt.o),nt.F=null,nt.J=null,pt.Fa!=null&&0<pt.Fa.length&&fs<ks&&(nt.J=gr(pt,nt,fs,ks-fs),nt.F=pt.mb,nt.F==null&&nt.F.length==0)){cr=xr(pt,3,"Could not decode alpha data.");break t}fs<nt.j&&(rs=nt.j-fs,fs=nt.j,s(!(1&rs)),nt.O+=pt.R*rs,nt.N+=pt.B*(rs>>1),nt.W+=pt.B*(rs>>1),nt.F!=null&&(nt.J+=nt.width*rs)),fs<ks&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=fs-nt.j,nt.U=nt.va-nt.v,nt.T=ks-fs,cr=nt.put(nt))}Gt+1!=pt.Ic||qs||(a(pt.sa,pt.ta-zt,Rr,vr+16*pt.R,zt),a(pt.qa,pt.ra-Fs,Hs,Xt+8*pt.B,Fs),a(pt.Ha,pt.Ia-Fs,kr,Ir+8*pt.B,Fs))}if(!cr)return xr(ts,6,"Output aborted.")}return 1})(ie,Se)),Se.bc!=null&&Se.bc(Se),Pe&=1}return Pe?(ie.cb=0,Pe):0})(m,M)||(v=m.a)}}else v=m.a}v==0&&J.Oa!=null&&J.Oa.fd&&(v=pl(J.ba))}J=v}Y=J!=0?null:11>Y?ee.f.RGBA.eb:ee.f.kb.y}else Y=null;return Y};var fc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(E,G){for(var I="",R=0;R<4;R++)I+=String.fromCharCode(E[G++]);return I}function p(E,G){return E[G+0]|E[G+1]<<8}function y(E,G){return(E[G+0]|E[G+1]<<8|E[G+2]<<16)>>>0}function b(E,G){return(E[G+0]|E[G+1]<<8|E[G+2]<<16|E[G+3]<<24)>>>0}new h;var x=[0],A=[0],N=[],P=new h,_=t,C=(function(E,G){var I={},R=0,$=!1,q=0,Q=0;if(I.frames=[],!(function(O,re){for(var K=0;K<4;K++)if(O[re+K]!="RIFF".charCodeAt(K))return!0;return!1})(E,G)){for(b(E,G+=4),G+=8;G<E.length;){var he=f(E,G),be=b(E,G+=4);G+=4;var V=be+(1&be);switch(he){case"VP8 ":case"VP8L":I.frames[R]===void 0&&(I.frames[R]={}),(te=I.frames[R]).src_off=$?Q:G-8,te.src_size=q+be+8,R++,$&&($=!1,q=0,Q=0);break;case"VP8X":(te=I.header={}).feature_flags=E[G];var de=G+4;te.canvas_width=1+y(E,de),de+=3,te.canvas_height=1+y(E,de),de+=3;break;case"ALPH":$=!0,q=V+8,Q=G-8;break;case"ANIM":(te=I.header).bgcolor=b(E,G),de=G+4,te.loop_count=p(E,de),de+=2;break;case"ANMF":var ke,te;(te=I.frames[R]={}).offset_x=2*y(E,G),G+=3,te.offset_y=2*y(E,G),G+=3,te.width=1+y(E,G),G+=3,te.height=1+y(E,G),G+=3,te.duration=y(E,G),G+=3,ke=E[G++],te.dispose=1&ke,te.blend=ke>>1&1}he!="ANMF"&&(G+=V)}return I}})(_,0);C.response=_,C.rgbaoutput=!0,C.dataurl=!1;var j=C.header?C.header:null,w=C.frames?C.frames:null;if(j){j.loop_counter=j.loop_count,x=[j.canvas_height],A=[j.canvas_width];for(var D=0;D<w.length&&w[D].blend!=0;D++);}var z=w[0],U=P.WebPDecodeRGBA(_,z.src_off,z.src_size,A,x);z.rgba=U,z.imgwidth=A[0],z.imgheight=x[0];for(var X=0;X<A[0]*x[0]*4;X++)N[X]=U[X];return this.width=A,this.height=x,this.data=N,this}(function(t){var s,r,a,o,l,d,c,h,f,p=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new h,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new d,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new d,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new y(this),s=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,c=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var y=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var re=O;Object.defineProperty(this,"pdf",{get:function(){return re}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(De){K=!!De}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(De){ne=!!De}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(De){isNaN(De)||(pe=De)}});var je=0;Object.defineProperty(this,"posY",{get:function(){return je},set:function(De){isNaN(De)||(je=De)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(De){var le;typeof De=="number"?le=[De,De,De,De]:((le=new Array(4))[0]=De[0],le[1]=De.length>=2?De[1]:le[0],le[2]=De.length>=3?De[2]:le[0],le[3]=De.length>=4?De[3]:le[1]),f.margin=le}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(De){_e=De}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(De){ue=De}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(De){xe=De}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(De){De instanceof p&&(f=De)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(De){f.path=De}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(De){Ie=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var le;le=b(De),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var le=b(De);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var He=null,Je=null;Object.defineProperty(this,"fontFaces",{get:function(){return Je},set:function(De){He=null,Je=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var le;if(this.ctx.font=De,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var Nt=le[1];le[2];var At=le[3],ct=le[4];le[5];var Ye=le[6],ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ct)[2];ct=Math.floor(ce==="px"?parseFloat(ct)*this.pdf.internal.scaleFactor:ce==="em"?parseFloat(ct)*this.pdf.getFontSize():parseFloat(ct)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ct);var ye=(function(Et){var ht,ws,es=[],yt=Et.trim();if(yt==="")return Jf;if(yt in Ty)return[Ty[yt]];for(;yt!=="";){switch(ws=null,ht=(yt=Dy(yt)).charAt(0)){case'"':case"'":ws=IC(yt.substring(1),ht);break;default:ws=MC(yt)}if(ws===null||(es.push(ws[0]),(yt=Dy(ws[1]))!==""&&yt.charAt(0)!==","))return Jf;yt=yt.replace(/^,/,"")}return es})(Ye);if(this.fontFaces){var Le=(function(Et,ht){if(He===null){var ws=(function(es){var yt=[];return Object.keys(es).forEach(function(Ut){es[Ut].forEach(function(is){var Tt=null;switch(is){case"bold":Tt={family:Ut,weight:"bold"};break;case"italic":Tt={family:Ut,style:"italic"};break;case"bolditalic":Tt={family:Ut,weight:"bold",style:"italic"};break;case"":case"normal":Tt={family:Ut}}Tt!==null&&(Tt.ref={name:Ut,style:is},yt.push(Tt))})}),yt})(Et.getFontList());He=(function(es){for(var yt={},Ut=0;Ut<es.length;++Ut){var is=Kf(es[Ut]),Tt=is.family,Kt=is.stretch,Bt=is.style,Vs=is.weight;yt[Tt]=yt[Tt]||{},yt[Tt][Kt]=yt[Tt][Kt]||{},yt[Tt][Kt][Bt]=yt[Tt][Kt][Bt]||{},yt[Tt][Kt][Bt][Vs]=is}return yt})(ws.concat(ht))}return He})(this.pdf,this.fontFaces),Ue=ye.map(function(Et){return{family:Et,stretch:"normal",weight:At,style:Nt}}),Ge=(function(Et,ht,ws){for(var es=(ws=ws||{}).defaultFontFamily||"times",yt=Object.assign({},RC,ws.genericFontFamilies||{}),Ut=null,is=null,Tt=0;Tt<ht.length;++Tt)if(yt[(Ut=Kf(ht[Tt])).family]&&(Ut.family=yt[Ut.family]),Et.hasOwnProperty(Ut.family)){is=Et[Ut.family];break}if(!(is=is||Et[es]))throw new Error("Could not find a font-family for the rule '"+Fy(Ut)+"' and default family '"+es+"'.");if(is=(function(Kt,Bt){if(Bt[Kt])return Bt[Kt];var Vs=Pp[Kt],Os=Vs<=Pp.normal?-1:1,os=Ey(Bt,J2,Vs,Os);if(!os)throw new Error("Could not find a matching font-stretch value for "+Kt);return os})(Ut.stretch,is),is=(function(Kt,Bt){if(Bt[Kt])return Bt[Kt];for(var Vs=K2[Kt],Os=0;Os<Vs.length;++Os)if(Bt[Vs[Os]])return Bt[Vs[Os]];throw new Error("Could not find a matching font-style for "+Kt)})(Ut.style,is),!(is=(function(Kt,Bt){if(Bt[Kt])return Bt[Kt];if(Kt===400&&Bt[500])return Bt[500];if(Kt===500&&Bt[400])return Bt[400];var Vs=DC[Kt],Os=Ey(Bt,Q2,Vs,Kt<400?-1:1);if(!Os)throw new Error("Could not find a matching font-weight for value "+Kt);return Os})(Ut.weight,is)))throw new Error("Failed to resolve a font for the rule '"+Fy(Ut)+"'.");return is})(Le,Ue);this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var qe="";(At==="bold"||parseInt(At,10)>=700||Nt==="bold")&&(qe="bold"),Nt==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var Qe="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<ye.length;lt++){if(this.pdf.internal.getFont(ye[lt],qe,{noFallback:!0,disableWarning:!0})!==void 0){Qe=ye[lt];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(ye[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qe=ye[lt],qe="bold";else if(this.pdf.internal.getFont(ye[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qe=ye[lt],qe="normal";break}}if(Qe===""){for(var ut=0;ut<ye.length;ut++)if(_t[ye[ut]]){Qe=_t[ye[ut]];break}}Qe=Qe===""?"Times":Qe,this.pdf.setFont(Qe,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};y.prototype.setLineDash=function(O){this.lineDash=O},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){w.call(this,"fill",!1)},y.prototype.stroke=function(){w.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(O,re){if(isNaN(O)||isNaN(re))throw Is.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new d(O,re));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new d(O,re)},y.prototype.closePath=function(){var O=new d(0,0),re=0;for(re=this.path.length-1;re!==-1;re--)if(this.path[re].type==="begin"&&Ls(this.path[re+1])==="object"&&typeof this.path[re+1].x=="number"){O=new d(this.path[re+1].x,this.path[re+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(O.x,O.y)},y.prototype.lineTo=function(O,re){if(isNaN(O)||isNaN(re))throw Is.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new d(O,re));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new d(K.x,K.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},y.prototype.quadraticCurveTo=function(O,re,K,ne){if(isNaN(K)||isNaN(ne)||isNaN(O)||isNaN(re))throw Is.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new d(K,ne)),je=this.ctx.transform.applyToPoint(new d(O,re));this.path.push({type:"qct",x1:je.x,y1:je.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new d(pe.x,pe.y)},y.prototype.bezierCurveTo=function(O,re,K,ne,pe,je){if(isNaN(pe)||isNaN(je)||isNaN(O)||isNaN(re)||isNaN(K)||isNaN(ne))throw Is.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new d(pe,je)),ue=this.ctx.transform.applyToPoint(new d(O,re)),xe=this.ctx.transform.applyToPoint(new d(K,ne));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:xe.x,y2:xe.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new d(_e.x,_e.y)},y.prototype.arc=function(O,re,K,ne,pe,je){if(isNaN(O)||isNaN(re)||isNaN(K)||isNaN(ne)||isNaN(pe))throw Is.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(je=!!je,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new d(O,re));O=_e.x,re=_e.y;var ue=this.ctx.transform.applyToPoint(new d(0,K)),xe=this.ctx.transform.applyToPoint(new d(0,0));K=Math.sqrt(Math.pow(ue.x-xe.x,2)+Math.pow(ue.y-xe.y,2))}Math.abs(pe-ne)>=2*Math.PI&&(ne=0,pe=2*Math.PI),this.path.push({type:"arc",x:O,y:re,radius:K,startAngle:ne,endAngle:pe,counterclockwise:je})},y.prototype.arcTo=function(O,re,K,ne,pe){throw new Error("arcTo not implemented.")},y.prototype.rect=function(O,re,K,ne){if(isNaN(O)||isNaN(re)||isNaN(K)||isNaN(ne))throw Is.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,re),this.lineTo(O+K,re),this.lineTo(O+K,re+ne),this.lineTo(O,re+ne),this.lineTo(O,re),this.lineTo(O+K,re),this.lineTo(O,re)},y.prototype.fillRect=function(O,re,K,ne){if(isNaN(O)||isNaN(re)||isNaN(K)||isNaN(ne))throw Is.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,re,K,ne),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},y.prototype.strokeRect=function(O,re,K,ne){if(isNaN(O)||isNaN(re)||isNaN(K)||isNaN(ne))throw Is.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(O,re,K,ne),this.stroke())},y.prototype.clearRect=function(O,re,K,ne){if(isNaN(O)||isNaN(re)||isNaN(K)||isNaN(ne))throw Is.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,re,K,ne))},y.prototype.save=function(O){O=typeof O!="boolean"||O;for(var re=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(re),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},y.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var re=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(re),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(O){var re,K,ne,pe;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))re=0,K=0,ne=0,pe=0;else{var je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(je!==null)re=parseInt(je[1]),K=parseInt(je[2]),ne=parseInt(je[3]),pe=1;else if((je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)re=parseInt(je[1]),K=parseInt(je[2]),ne=parseInt(je[3]),pe=parseFloat(je[4]);else{if(pe=1,typeof O=="string"&&O.charAt(0)!=="#"){var _e=new B2(O);O=_e.ok?_e.toHex():"#000000"}O.length===4?(re=O.substring(1,2),re+=re,K=O.substring(2,3),K+=K,ne=O.substring(3,4),ne+=ne):(re=O.substring(1,3),K=O.substring(3,5),ne=O.substring(5,7)),re=parseInt(re,16),K=parseInt(K,16),ne=parseInt(ne,16)}}return{r:re,g:K,b:ne,a:pe,style:O}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(O,re,K,ne){if(isNaN(re)||isNaN(K)||typeof O!="string")throw Is.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!x.call(this)){var pe=V(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;R.call(this,{text:O,x:re,y:K,scale:je,angle:pe,align:this.textAlign,maxWidth:ne})}},y.prototype.strokeText=function(O,re,K,ne){if(isNaN(re)||isNaN(K)||typeof O!="string")throw Is.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){ne=isNaN(ne)?void 0:ne;var pe=V(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;R.call(this,{text:O,x:re,y:K,scale:je,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:ne})}},y.prototype.measureText=function(O){if(typeof O!="string")throw Is.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var re=this.pdf,K=this.pdf.internal.scaleFactor,ne=re.internal.getFontSize(),pe=re.getStringUnitWidth(O)*ne/re.internal.scaleFactor;return new function(je){var _e=(je=je||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this}({width:pe*=Math.round(96*K/72*1e4)/1e4})},y.prototype.scale=function(O,re){if(isNaN(O)||isNaN(re))throw Is.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new h(O,0,0,re,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},y.prototype.rotate=function(O){if(isNaN(O))throw Is.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var re=new h(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(re)},y.prototype.translate=function(O,re){if(isNaN(O)||isNaN(re))throw Is.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new h(1,0,0,1,O,re);this.ctx.transform=this.ctx.transform.multiply(K)},y.prototype.transform=function(O,re,K,ne,pe,je){if(isNaN(O)||isNaN(re)||isNaN(K)||isNaN(ne)||isNaN(pe)||isNaN(je))throw Is.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new h(O,re,K,ne,pe,je);this.ctx.transform=this.ctx.transform.multiply(_e)},y.prototype.setTransform=function(O,re,K,ne,pe,je){O=isNaN(O)?1:O,re=isNaN(re)?0:re,K=isNaN(K)?0:K,ne=isNaN(ne)?1:ne,pe=isNaN(pe)?0:pe,je=isNaN(je)?0:je,this.ctx.transform=new h(O,re,K,ne,pe,je)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(O,re,K,ne,pe,je,_e,ue,xe){var Ie=this.pdf.getImageProperties(O),He=1,Je=1,De=1,le=1;ne!==void 0&&ue!==void 0&&(De=ue/ne,le=xe/pe,He=Ie.width/ne*ue/ne,Je=Ie.height/pe*xe/pe),je===void 0&&(je=re,_e=K,re=0,K=0),ne!==void 0&&ue===void 0&&(ue=ne,xe=pe),ne===void 0&&ue===void 0&&(ue=Ie.width,xe=Ie.height);for(var Nt,At=this.ctx.transform.decompose(),ct=V(At.rotate.shx),Ye=new h,ce=(Ye=(Ye=(Ye=Ye.multiply(At.translate)).multiply(At.skew)).multiply(At.scale)).applyToRectangle(new c(je-re*De,_e-K*le,ne*He,pe*Je)),ye=P.call(this,ce),Le=[],Ue=0;Ue<ye.length;Ue+=1)Le.indexOf(ye[Ue])===-1&&Le.push(ye[Ue]);if(j(Le),this.autoPaging)for(var Ge=Le[0],qe=Le[Le.length-1],Qe=Ge;Qe<qe+1;Qe++){this.pdf.setPage(Qe);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=Qe===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=Qe===1?0:ut+(Qe-2)*Et;if(this.ctx.clip_path.length!==0){var ws=this.path;Nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Nt,this.posX+this.margin[3],-ht+lt+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=ws}var es=JSON.parse(JSON.stringify(ce));es=C([es],this.posX+this.margin[3],-ht+lt+this.ctx.prevPageLastElemOffset)[0];var yt=(Qe>Ge||Qe<qe)&&N.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Et,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",es.x,es.y,es.w,es.h,null,null,ct),yt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",ce.x,ce.y,ce.w,ce.h,null,null,ct)};var P=function(O,re,K){var ne=[];re=re||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ne.push(Math.floor((O.y+pe)/K)+1);break;case"arc":ne.push(Math.floor((O.y+pe-O.radius)/K)+1),ne.push(Math.floor((O.y+pe+O.radius)/K)+1);break;case"qct":var je=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ne.push(Math.floor((je.y+pe)/K)+1),ne.push(Math.floor((je.y+je.h+pe)/K)+1);break;case"bct":var _e=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ne.push(Math.floor((_e.y+pe)/K)+1),ne.push(Math.floor((_e.y+_e.h+pe)/K)+1);break;case"rect":ne.push(Math.floor((O.y+pe)/K)+1),ne.push(Math.floor((O.y+O.h+pe)/K)+1)}for(var ue=0;ue<ne.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<ne[ue];)_.call(this);return ne},_=function(){var O=this.fillStyle,re=this.strokeStyle,K=this.font,ne=this.lineCap,pe=this.lineWidth,je=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=re,this.font=K,this.lineCap=ne,this.lineWidth=pe,this.lineJoin=je},C=function(O,re,K){for(var ne=0;ne<O.length;ne++)switch(O[ne].type){case"bct":O[ne].x2+=re,O[ne].y2+=K;case"qct":O[ne].x1+=re,O[ne].y1+=K;default:O[ne].x+=re,O[ne].y+=K}return O},j=function(O){return O.sort(function(re,K){return re-K})},w=function(O,re){for(var K,ne,pe=this.fillStyle,je=this.strokeStyle,_e=this.lineCap,ue=this.lineWidth,xe=Math.abs(ue*this.ctx.transform.scaleX),Ie=this.lineJoin,He=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),De=[],le=0;le<Je.length;le++)if(Je[le].x!==void 0)for(var Nt=P.call(this,Je[le]),At=0;At<Nt.length;At+=1)De.indexOf(Nt[At])===-1&&De.push(Nt[At]);for(var ct=0;ct<De.length;ct++)for(;this.pdf.internal.getNumberOfPages()<De[ct];)_.call(this);if(j(De),this.autoPaging)for(var Ye=De[0],ce=De[De.length-1],ye=Ye;ye<ce+1;ye++){this.pdf.setPage(ye),this.fillStyle=pe,this.strokeStyle=je,this.lineCap=_e,this.lineWidth=xe,this.lineJoin=Ie;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=ye===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=ye===1?0:Ge+(ye-2)*qe;if(this.ctx.clip_path.length!==0){var _t=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(K,this.posX+this.margin[3],-Qe+Ue+this.ctx.prevPageLastElemOffset),D.call(this,O,!0),this.path=_t}if(ne=JSON.parse(JSON.stringify(He)),this.path=C(ne,this.posX+this.margin[3],-Qe+Ue+this.ctx.prevPageLastElemOffset),re===!1||ye===0){var lt=(ye>Ye||ye<ce)&&N.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,qe,null).clip().discardPath()),D.call(this,O,re),lt&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=xe,D.call(this,O,re),this.lineWidth=ue;this.path=He},D=function(O,re){if((O!=="stroke"||re||!A.call(this))&&(O==="stroke"||re||!x.call(this))){for(var K,ne,pe=[],je=this.path,_e=0;_e<je.length;_e++){var ue=je[_e];switch(ue.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:ue,deltas:[],abs:[]});break;case"lt":var xe=pe.length;if(je[_e-1]&&!isNaN(je[_e-1].x)&&(K=[ue.x-je[_e-1].x,ue.y-je[_e-1].y],xe>0)){for(;xe>=0;xe--)if(pe[xe-1].close!==!0&&pe[xe-1].begin!==!0){pe[xe-1].deltas.push(K),pe[xe-1].abs.push(ue);break}}break;case"bct":K=[ue.x1-je[_e-1].x,ue.y1-je[_e-1].y,ue.x2-je[_e-1].x,ue.y2-je[_e-1].y,ue.x-je[_e-1].x,ue.y-je[_e-1].y],pe[pe.length-1].deltas.push(K);break;case"qct":var Ie=je[_e-1].x+2/3*(ue.x1-je[_e-1].x),He=je[_e-1].y+2/3*(ue.y1-je[_e-1].y),Je=ue.x+2/3*(ue.x1-ue.x),De=ue.y+2/3*(ue.y1-ue.y),le=ue.x,Nt=ue.y;K=[Ie-je[_e-1].x,He-je[_e-1].y,Je-je[_e-1].x,De-je[_e-1].y,le-je[_e-1].x,Nt-je[_e-1].y],pe[pe.length-1].deltas.push(K);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(ue)}}ne=re?null:O==="stroke"?"stroke":"fill";for(var At=!1,ct=0;ct<pe.length;ct++)if(pe[ct].arc)for(var Ye=pe[ct].abs,ce=0;ce<Ye.length;ce++){var ye=Ye[ce];ye.type==="arc"?X.call(this,ye.x,ye.y,ye.radius,ye.startAngle,ye.endAngle,ye.counterclockwise,void 0,re,!At):$.call(this,ye.x,ye.y),At=!0}else if(pe[ct].close===!0)this.pdf.internal.out("h"),At=!1;else if(pe[ct].begin!==!0){var Le=pe[ct].start.x,Ue=pe[ct].start.y;q.call(this,pe[ct].deltas,Le,Ue),At=!0}ne&&E.call(this,ne),re&&G.call(this)}},z=function(O){var re=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=re*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-K;case"top":return O+re-K;case"hanging":return O+re-2*K;case"middle":return O+re/2-K;default:return O}},U=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(re,K){this.colorStops.push([re,K])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var X=function(O,re,K,ne,pe,je,_e,ue,xe){for(var Ie=he.call(this,K,ne,pe,je),He=0;He<Ie.length;He++){var Je=Ie[He];He===0&&(xe?I.call(this,Je.x1+O,Je.y1+re):$.call(this,Je.x1+O,Je.y1+re)),Q.call(this,O,re,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}ue?G.call(this):E.call(this,_e)},E=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(O,re){this.pdf.internal.out(r(O)+" "+a(re)+" m")},R=function(O){var re;switch(O.align){case"right":case"end":re="right";break;case"center":re="center";break;default:re="left"}var K=this.pdf.getTextDimensions(O.text),ne=z.call(this,O.y),pe=U.call(this,ne)-K.h,je=this.ctx.transform.applyToPoint(new d(O.x,ne)),_e=this.ctx.transform.decompose(),ue=new h;ue=(ue=(ue=ue.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var xe,Ie,He,Je=this.ctx.transform.applyToRectangle(new c(O.x,ne,K.w,K.h)),De=ue.applyToRectangle(new c(O.x,pe,K.w,K.h)),le=P.call(this,De),Nt=[],At=0;At<le.length;At+=1)Nt.indexOf(le[At])===-1&&Nt.push(le[At]);if(j(Nt),this.autoPaging)for(var ct=Nt[0],Ye=Nt[Nt.length-1],ce=ct;ce<Ye+1;ce++){this.pdf.setPage(ce);var ye=ce===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],Ge=Ue-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],Qe=qe-this.margin[3],_t=ce===1?0:Le+(ce-2)*Ge;if(this.ctx.clip_path.length!==0){var lt=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(xe,this.posX+this.margin[3],-1*_t+ye),D.call(this,"fill",!0),this.path=lt}var ut=C([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-_t+ye+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*O.scale),He=this.lineWidth,this.lineWidth=He*O.scale);var Et=this.autoPaging!=="text";if(Et||ut.y+ut.h<=Ue){if(Et||ut.y>=ye&&ut.x<=qe){var ht=Et?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||qe-ut.x)[0],ws=C([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-_t+ye+this.ctx.prevPageLastElemOffset)[0],es=Et&&(ce>ct||ce<Ye)&&N.call(this);es&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,Ge,null).clip().discardPath()),this.pdf.text(ht,ws.x,ws.y,{angle:O.angle,align:re,renderingMode:O.renderingMode}),es&&this.pdf.restoreGraphicsState()}}else ut.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-ut.y);O.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=He)}else O.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*O.scale),He=this.lineWidth,this.lineWidth=He*O.scale),this.pdf.text(O.text,je.x+this.posX,je.y+this.posY,{angle:O.angle,align:re,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=He)},$=function(O,re,K,ne){K=K||0,ne=ne||0,this.pdf.internal.out(r(O+K)+" "+a(re+ne)+" l")},q=function(O,re,K){return this.pdf.lines(O,re,K,null,null)},Q=function(O,re,K,ne,pe,je,_e,ue){this.pdf.internal.out([s(o(K+O)),s(l(ne+re)),s(o(pe+O)),s(l(je+re)),s(o(_e+O)),s(l(ue+re)),"c"].join(" "))},he=function(O,re,K,ne){for(var pe=2*Math.PI,je=Math.PI/2;re>K;)re-=pe;var _e=Math.abs(K-re);_e<pe&&ne&&(_e=pe-_e);for(var ue=[],xe=ne?-1:1,Ie=re;_e>1e-5;){var He=Ie+xe*Math.min(_e,je);ue.push(be.call(this,O,Ie,He)),_e-=Math.abs(He-Ie),Ie=He}return ue},be=function(O,re,K){var ne=(K-re)/2,pe=O*Math.cos(ne),je=O*Math.sin(ne),_e=pe,ue=-je,xe=_e*_e+ue*ue,Ie=xe+_e*pe+ue*je,He=4/3*(Math.sqrt(2*xe*Ie)-Ie)/(_e*je-ue*pe),Je=_e-He*ue,De=ue+He*_e,le=Je,Nt=-De,At=ne+re,ct=Math.cos(At),Ye=Math.sin(At);return{x1:O*Math.cos(re),y1:O*Math.sin(re),x2:Je*ct-De*Ye,y2:Je*Ye+De*ct,x3:le*ct-Nt*Ye,y3:le*Ye+Nt*ct,x4:O*Math.cos(K),y4:O*Math.sin(K)}},V=function(O){return 180*O/Math.PI},de=function(O,re,K,ne,pe,je){var _e=O+.5*(K-O),ue=re+.5*(ne-re),xe=pe+.5*(K-pe),Ie=je+.5*(ne-je),He=Math.min(O,pe,_e,xe),Je=Math.max(O,pe,_e,xe),De=Math.min(re,je,ue,Ie),le=Math.max(re,je,ue,Ie);return new c(He,De,Je-He,le-De)},ke=function(O,re,K,ne,pe,je,_e,ue){var xe,Ie,He,Je,De,le,Nt,At,ct,Ye,ce,ye,Le,Ue,Ge=K-O,qe=ne-re,Qe=pe-K,_t=je-ne,lt=_e-pe,ut=ue-je;for(Ie=0;Ie<41;Ie++)ct=(Nt=(He=O+(xe=Ie/40)*Ge)+xe*((De=K+xe*Qe)-He))+xe*(De+xe*(pe+xe*lt-De)-Nt),Ye=(At=(Je=re+xe*qe)+xe*((le=ne+xe*_t)-Je))+xe*(le+xe*(je+xe*ut-le)-At),Ie==0?(ce=ct,ye=Ye,Le=ct,Ue=Ye):(ce=Math.min(ce,ct),ye=Math.min(ye,Ye),Le=Math.max(Le,ct),Ue=Math.max(Ue,Ye));return new c(Math.round(ce),Math.round(ye),Math.round(Le-ce),Math.round(Ue-ye))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,re,K=(O=this.ctx.lineDash,re=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:re}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Lt.API),(function(t){var s=function(d){var c,h,f,p,y,b,x,A,N,P;for(h=[],f=0,p=(d+=c="\0\0\0\0".slice(d.length%4||4)).length;p>f;f+=4)(y=(d.charCodeAt(f)<<24)+(d.charCodeAt(f+1)<<16)+(d.charCodeAt(f+2)<<8)+d.charCodeAt(f+3))!==0?(b=(y=((y=((y=((y=(y-(P=y%85))/85)-(N=y%85))/85)-(A=y%85))/85)-(x=y%85))/85)%85,h.push(b+33,x+33,A+33,N+33,P+33)):h.push(122);return(function(_,C){for(var j=C;j>0;j--)_.pop()})(h,c.length),String.fromCharCode.apply(String,h)+"~>"},r=function(d){var c,h,f,p,y,b=String,x="length",A=255,N="charCodeAt",P="slice",_="replace";for(d[P](-2),d=d[P](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),f=[],p=0,y=(d+=c="uuuuu"[P](d[x]%5||5))[x];y>p;p+=5)h=52200625*(d[N](p)-33)+614125*(d[N](p+1)-33)+7225*(d[N](p+2)-33)+85*(d[N](p+3)-33)+(d[N](p+4)-33),f.push(A&h>>24,A&h>>16,A&h>>8,A&h);return(function(C,j){for(var w=j;w>0;w--)C.pop()})(f,c[x]),b.fromCharCode.apply(b,f)},a=function(d){return d.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(d){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),c.test(d)===!1)return"";for(var h="",f=0;f<d.length;f+=2)h+=String.fromCharCode("0x"+(d[f]+d[f+1]));return h},l=function(d){for(var c=new Uint8Array(d.length),h=d.length;h--;)c[h]=d.charCodeAt(h);return(c=wp(c)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};t.processDataByFilters=function(d,c){var h=0,f=d||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),h=0;h<c.length;h+=1)switch(c[h]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=s(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=o(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=a(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=l(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(Lt.API),(function(t){t.loadFile=function(s,r,a){return(function(o,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var c=void 0;try{c=(function(h,f,p){var y=new XMLHttpRequest,b=0,x=function(A){var N=A.length,P=[],_=String.fromCharCode;for(b=0;b<N;b+=1)P.push(_(255&A.charCodeAt(b)));return P.join("")};if(y.open("GET",h,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?p(x(this.responseText)):p(void 0)}),y.send(null),f&&y.status===200)return x(y.responseText)})(o,l,d)}catch{}return c})(s,r,a)},t.loadImageFile=t.loadFile})(Lt.API),(function(t){function s(){return(Wt.html2canvas?Promise.resolve(Wt.html2canvas):Tf(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(Wt.DOMPurify?Promise.resolve(Wt.DOMPurify):Tf(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var a=function(c){var h=Ls(c);return h==="undefined"?"undefined":h==="string"||c instanceof String?"string":h==="number"||c instanceof Number?"number":h==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":h==="object"?"object":"unknown"},o=function(c,h){var f=document.createElement(c);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},l=function c(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(c(y,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},d=function c(h){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),f);return(p=p.setProgress(1,c,1,[c])).set(h)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(c,h){return c.__proto__=h||d.prototype,c},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(c,h){return this.then(function(){switch(h=h||(function(f){switch(a(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),h){case"string":return this.then(r).then(function(f){return this.set({src:o("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},d.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(s).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(s).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var x=0;x<p.length;++x){var A=p[x],N=A.src.find(function(P){return P.format==="truetype"});N&&f.addFont(N.url,A.ref.name,A.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,f.context2d.save(!0),h(this.prop.container,b)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(c,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,h):this.outputPdf(c,h)},d.prototype.outputPdf=function(c,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,h)})},d.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},d.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(c){if(a(c)!=="object")return this;var h=Object.keys(c||{}).map(function(f){if(f in d.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(h)})},d.prototype.get=function(c,h){return this.then(function(){var f=c in d.template.prop?this.prop[c]:this.opt[c];return h?h(f):f})},d.prototype.setMargin=function(c){return this.then(function(){switch(a(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},d.prototype.setPageSize=function(c){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(c=c||Lt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:h(c.inner.width,c.k),height:h(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},d.prototype.setProgress=function(c,h,f,p){return c!=null&&(this.progress.val=c),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(c,h,f,p){return this.setProgress(c?this.progress.val+c:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},d.prototype.then=function(c,h){var f=this;return this.thenCore(c,h,function(p,y){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(b){return f.updateProgress(null,p),b}).then(p,y).then(function(b){return f.updateProgress(1),b})})},d.prototype.thenCore=function(c,h,f){f=f||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),h&&(h=h.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:d.convert(Object.assign({},p),Promise.prototype),b=f.call(y,c,h);return d.convert(b,p.__proto__)},d.prototype.thenExternal=function(c,h){return Promise.prototype.then.call(this,c,h)},d.prototype.thenList=function(c){var h=this;return c.forEach(function(f){h=h.thenCore(f)}),h},d.prototype.catch=function(c){c&&(c=c.bind(this));var h=Promise.prototype.catch.call(this,c);return d.convert(h,this)},d.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},d.prototype.error=function(c){return this.then(function(){throw new Error(c)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,Lt.getPageSize=function(c,h,f){if(Ls(c)==="object"){var p=c;c=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var y,b=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var A,N=0,P=0;if(x.hasOwnProperty(b))N=x[b][1]/y,P=x[b][0]/y;else try{N=f[1],P=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",P>N&&(A=P,P=N,N=A);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>P&&(A=P,P=N,N=A)}return{width:P,height:N,unit:h,k:y,orientation:c}},t.html=function(c,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Kf):null;var f=new d(h);return h.worker?f:f.from(c).doCallback()}})(Lt.API),Lt.API.addJS=function(t){return Iy=t,this.internal.events.subscribe("postPutResources",function(){zh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ry=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Iy+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zh!==void 0&&Ry!==void 0&&this.internal.out("/Names <</JavaScript "+zh+" 0 R>>")}),this},(function(t){var s;t.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=r.outline.render().split(/\r\n/),l=0;l<o.length;l++){var d=o[l],c=a.exec(d);if(c!=null){var h=c[1];r.internal.newObjectDeferredBegin(h,!1)}r.internal.write(d)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(l=0;l<f;l++){var y=r.internal.newObject();p.push(y);var b=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<p.length;l++)r.internal.write("(page_"+(l+1)+")"+p[l]+" 0 R");r.internal.write(" ] >>","endobj"),s=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,o,l){var d={title:o,options:l,children:[]};return a==null&&(a=this.root),a.children.push(d),d},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var o=0;o<a.children.length;o++)this.genIds_r(a.children[o])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<a.children.length;l++){var d=a.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(a)),l>0&&this.line("/Prev "+this.makeRef(a.children[l-1])),l<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var c=this.count=this.count_r({count:0},d);if(c>0&&this.line("/Count "+c),d.options&&d.options.pageNumber){var h=r.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var f=0;f<a.children.length;f++)this.renderItems(a.children[f])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,o){for(var l=0;l<o.children.length;l++)a.count++,this.count_r(a,o.children[l]);return a.count}}])})(Lt.API),(function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,a,o,l,d,c){var h,f=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=d||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,h=(function(y){for(var b,x=256*y.charCodeAt(4)+y.charCodeAt(5),A=y.length,N={width:0,height:0,numcomponents:1},P=4;P<A;P+=2){if(P+=x,s.indexOf(y.charCodeAt(P+1))!==-1){b=256*y.charCodeAt(P+5)+y.charCodeAt(P+6),N={width:256*y.charCodeAt(P+7)+y.charCodeAt(P+8),height:b,numcomponents:y.charCodeAt(P+9)};break}x=256*y.charCodeAt(P+2)+y.charCodeAt(P+3)}return N})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),h.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:r,width:h.width,height:h.height,colorSpace:c,bitsPerComponent:8,filter:f,index:a,alias:o}}return p}})(Lt.API),Lt.API.processPNG=function(t,s,r,a){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var o,l=bC(t,{checkCrc:!0}),d=l.width,c=l.height,h=l.channels,f=l.palette,p=l.depth;o=f&&h===1?(function(X){for(var E=X.width,G=X.height,I=X.data,R=X.palette,$=X.depth,q=!1,Q=[],he=[],be=void 0,V=!1,de=0,ke=0;ke<R.length;ke++){var te=q0(R[ke],4),O=te[0],re=te[1],K=te[2],ne=te[3];Q.push(O,re,K),ne!=null&&(ne===0?(de++,he.length<1&&he.push(ke)):ne<255&&(V=!0))}if(V||de>1){q=!0,he=void 0;var pe=E*G;be=new Uint8Array(pe);for(var je=new DataView(I.buffer),_e=0;_e<pe;_e++){var ue=Qf(je,_e,$),xe=q0(R[ue],4)[3];be[_e]=xe}}else de===0&&(he=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:q?8:void 0,colorBytes:I,alphaBytes:be,needSMask:q,palette:Q,mask:he}})(l):h===2||h===4?(function(X){for(var E=X.data,G=X.width,I=X.height,R=X.channels,$=X.depth,q=R===2?"DeviceGray":"DeviceRGB",Q=R-1,he=G*I,be=Q,V=he*be,de=1*he,ke=Math.ceil(V*$/8),te=Math.ceil(de*$/8),O=new Uint8Array(ke),re=new Uint8Array(te),K=new DataView(E.buffer),ne=new DataView(O.buffer),pe=new DataView(re.buffer),je=!1,_e=0;_e<he;_e++){for(var ue=_e*R,xe=0;xe<be;xe++)Wy(ne,Qf(K,ue+xe,$),_e*be+xe,$);var Ie=Qf(K,ue+be,$);Ie<(1<<$)-1&&(je=!0),Wy(pe,Ie,1*_e,$)}return{colorSpace:q,colorsPerPixel:Q,sMaskBitsPerComponent:je?$:void 0,colorBytes:O,alphaBytes:re,needSMask:je}})(l):(function(X){var E=X.data,G=X.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?(function(I){for(var R=I.length,$=new Uint8Array(2*R),q=new DataView($.buffer,$.byteOffset,$.byteLength),Q=0;Q<R;Q++)q.setUint16(2*Q,I[Q],!1);return $})(E):E,needSMask:!1}})(l);var y,b,x,A=o,N=A.colorSpace,P=A.colorsPerPixel,_=A.sMaskBitsPerComponent,C=A.colorBytes,j=A.alphaBytes,w=A.needSMask,D=A.palette,z=A.mask,U=null;return a!==Lt.API.image_compression.NONE&&typeof wp=="function"?(U=(function(X){var E;switch(X){case Lt.API.image_compression.FAST:E=11;break;case Lt.API.image_compression.MEDIUM:E=13;break;case Lt.API.image_compression.SLOW:E=14;break;default:E=12}return E})(a),y=this.decode.FLATE_DECODE,b="/Predictor ".concat(U," /Colors ").concat(P," /BitsPerComponent ").concat(p," /Columns ").concat(d),t=qy(C,Math.ceil(d*P*p/8),P,p,a),w&&(x=qy(j,Math.ceil(d*_/8),1,_,a))):(y=void 0,b=void 0,t=C,w&&(x=j)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:t,index:s,filter:y,decodeParameters:b,transparency:z,palette:D,sMask:x,predictor:U,width:d,height:c,bitsPerComponent:p,sMaskBitsPerComponent:_,colorSpace:N}}},(function(t){t.processGIF89A=function(s,r,a,o){var l=new $C(s),d=l.width,c=l.height,h=[];l.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:d,height:c},p=new Xf(100).encode(f,100);return t.processJPEG.call(this,p,r,a,o)},t.processGIF87A=t.processGIF89A})(Lt.API),Fi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:o,green:a,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(r){Is.log("bit decode error:"+r)}},Fi.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),r=s%4;for(t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,o=0;o<s;o++)for(var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+8*o*4,c=0;c<8&&8*o+c<this.width;c++){var h=this.palette[l>>7-c&1];this.data[d+4*c]=h.blue,this.data[d+4*c+1]=h.green,this.data[d+4*c+2]=h.red,this.data[d+4*c+3]=255}r!==0&&(this.pos+=4-r)}},Fi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+2*o*4,c=l>>4,h=15&l,f=this.palette[c];if(this.data[d]=f.blue,this.data[d+1]=f.green,this.data[d+2]=f.red,this.data[d+3]=255,2*o+1>=this.width)break;f=this.palette[h],this.data[d+4]=f.blue,this.data[d+4+1]=f.green,this.data[d+4+2]=f.red,this.data[d+4+3]=255}s!==0&&(this.pos+=4-s)}},Fi.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var o=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*a;if(o<this.palette.length){var d=this.palette[o];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},Fi.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&s)/s*255|0,c=(l>>5&s)/s*255|0,h=(l>>10&s)/s*255|0,f=l>>15?255:0,p=a*this.width*4+4*o;this.data[p]=h,this.data[p+1]=c,this.data[p+2]=d,this.data[p+3]=f}this.pos+=t}},Fi.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(d&s)/s*255|0,h=(d>>5&r)/r*255|0,f=(d>>11)/s*255|0,p=o*this.width*4+4*l;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=c,this.data[p+3]=255}this.pos+=t}},Fi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=s*this.width*4+4*r;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=255}this.pos+=this.width%4}},Fi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),c=s*this.width*4+4*r;this.data[c]=l,this.data[c+1]=o,this.data[c+2]=a,this.data[c+3]=d}},Fi.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(s,r,a,o){var l=new Fi(s,!1),d=l.width,c=l.height,h={data:l.getData(),width:d,height:c},f=new Xf(100).encode(h,100);return t.processJPEG.call(this,f,r,a,o)}})(Lt.API),Gy.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(s,r,a,o){var l=new Gy(s),d=l.width,c=l.height,h={data:l.getData(),width:d,height:c},f=new Xf(100).encode(h,100);return t.processJPEG.call(this,f,r,a,o)}})(Lt.API),Lt.API.processRGBA=function(t,s,r){for(var a=t.data,o=a.length,l=new Uint8Array(o/4*3),d=new Uint8Array(o/4),c=0,h=0,f=0;f<o;f+=4){var p=a[f],y=a[f+1],b=a[f+2],x=a[f+3];l[c++]=p,l[c++]=y,l[c++]=b,d[h++]=x}var A=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:A,index:s,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Lt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kd=Lt.API,Oh=kd.getCharWidthsArray=function(t,s){var r,a,o=(s=s||{}).font||this.internal.getFont(),l=s.fontSize||this.internal.getFontSize(),d=s.charSpace||this.internal.getCharSpace(),c=s.widths?s.widths:o.metadata.Unicode.widths,h=c.fof?c.fof:1,f=s.kerning?s.kerning:o.metadata.Unicode.kerning,p=f.fof?f.fof:1,y=s.doKerning!==!1,b=0,x=t.length,A=0,N=c[0]||h,P=[];for(r=0;r<x;r++)a=t.charCodeAt(r),typeof o.metadata.widthOfString=="function"?P.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(a))+d*(1e3/l)||0)/1e3):(b=y&&Ls(f[a])==="object"&&!isNaN(parseInt(f[a][A],10))?f[a][A]/p:0,P.push((c[a]||N)/h+b)),A=a;return P},My=kd.getStringUnitWidth=function(t,s){var r=(s=s||{}).fontSize||this.internal.getFontSize(),a=s.font||this.internal.getFont(),o=s.charSpace||this.internal.getCharSpace();return kd.processArabic&&(t=kd.processArabic(t)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(t,r,o)/r:Oh.apply(this,arguments).reduce(function(l,d){return l+d},0)},zy=function(t,s,r,a){for(var o=[],l=0,d=t.length,c=0;l!==d&&c+s[l]<r;)c+=s[l],l++;o.push(t.slice(0,l));var h=l;for(c=0;l!==d;)c+s[l]>a&&(o.push(t.slice(h,l)),c=0,h=l),c+=s[l],l++;return h!==l&&o.push(t.slice(h,l)),o},Oy=function(t,s,r){r||(r={});var a,o,l,d,c,h,f,p=[],y=[p],b=r.textIndent||0,x=0,A=0,N=t.split(" "),P=Oh.apply(this,[" ",r])[0];if(h=r.lineIndent===-1?N[0].length+2:r.lineIndent||0){var _=Array(h).join(" "),C=[];N.map(function(w){(w=w.split(/\s*\n/)).length>1?C=C.concat(w.map(function(D,z){return(z&&D.length?`
`:"")+D})):C.push(w[0])}),N=C,h=My.apply(this,[_,r])}for(l=0,d=N.length;l<d;l++){var j=0;if(a=N[l],h&&a[0]==`
`&&(a=a.substr(1),j=1),b+x+(A=(o=Oh.apply(this,[a,r])).reduce(function(w,D){return w+D},0))>s||j){if(A>s){for(c=zy.apply(this,[a,o,s-(b+x),s]),p.push(c.shift()),p=[c.pop()];c.length;)y.push([c.shift()]);A=o.slice(a.length-(p[0]?p[0].length:0)).reduce(function(w,D){return w+D},0)}else p=[a];y.push(p),b=A+h,x=P}else p.push(a),b+=x+A,x=P}return f=h?function(w,D){return(D?_:"")+w.join(" ")}:function(w){return w.join(" ")},y.map(f)},kd.splitTextToSize=function(t,s,r){var a,o=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),b="Unicode";return y.metadata[b]?{widths:y.metadata[b].widths||{0:1},kerning:y.metadata[b].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(t)?t:String(t).split(/\r?\n/);var d=1*this.internal.scaleFactor*s/o;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=r.lineIndent;var c,h,f=[];for(c=0,h=a.length;c<h;c++)f=f.concat(Oy.apply(this,[a[c],d,l]));return f},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="0123456789abcdef",r="klmnopqrstuvwxyz",a={},o={},l=0;l<16;l++)a[r[l]]=s[l],o[s[l]]=r[l];var d=function(b){return"0x"+parseInt(b,10).toString(16)},c=t.__fontmetrics__.compress=function(b){var x,A,N,P,_=["{"];for(var C in b){if(x=b[C],isNaN(parseInt(C,10))?A="'"+C+"'":(C=parseInt(C,10),A=(A=d(C).slice(2)).slice(0,-1)+o[A.slice(-1)]),typeof x=="number")x<0?(N=d(x).slice(3),P="-"):(N=d(x).slice(2),P=""),N=P+N.slice(0,-1)+o[N.slice(-1)];else{if(Ls(x)!=="object")throw new Error("Don't know what to do with value type "+Ls(x)+".");N=c(x)}_.push(A+N)}return _.push("}"),_.join("")},h=t.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,A,N,P,_={},C=1,j=_,w=[],D="",z="",U=b.length-1,X=1;X<U;X+=1)(P=b[X])=="'"?x?(N=x.join(""),x=void 0):x=[]:x?x.push(P):P=="{"?(w.push([j,N]),j={},N=void 0):P=="}"?((A=w.pop())[0][A[1]]=j,N=void 0,j=A[0]):P=="-"?C=-1:N===void 0?a.hasOwnProperty(P)?(D+=a[P],N=parseInt(D,16)*C,C=1,D=""):D+=P:a.hasOwnProperty(P)?(z+=a[P],j[N]=parseInt(z,16)*C,C=1,N=void 0,z=""):z+=P;return _},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(b){var x=b.font,A=y.Unicode[x.postScriptName];A&&(x.metadata.Unicode={},x.metadata.Unicode.widths=A.widths,x.metadata.Unicode.kerning=A.kerning);var N=p.Unicode[x.postScriptName];N&&(x.metadata.Unicode.encoding=N,x.encoding=N.codePages[0])}])})(Lt.API),(function(t){var s=function(r){for(var a=r.length,o=new Uint8Array(a),l=0;l<a;l++)o[l]=r.charCodeAt(l);return o};t.API.events.push(["addFont",function(r){var a=void 0,o=r.font,l=r.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(a=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(d,c){c=/^\x00\x01\x00\x00/.test(c)?s(c):s(Wh(c)),d.metadata=t.API.TTFFont.open(c),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(o,a)}}])})(Lt),Lt.API.addSvgAsImage=function(t,s,r,a,o,l,d,c){if(isNaN(s)||isNaN(r))throw Is.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw Is.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(Wt.canvg?Promise.resolve(Wt.canvg):Tf(()=>import("./index.es-D4MPMqhJ.js"),[])).catch(function(b){return Promise.reject(new Error("Could not load canvg: "+b))}).then(function(b){return b.default?b.default:b}).then(function(b){return b.fromString(f,t,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(p)}).then(function(){y.addImage(h.toDataURL("image/jpeg",1),s,r,a,o,d,c)})},Lt.API.putTotalPages=function(t){var s,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var o=0;o<this.internal.pages[a].length;o++)this.internal.pages[a][o]=this.internal.pages[a][o].replace(s,r);return this},Lt.API.viewerPreferences=function(t,s){var r;t=t||{},s=s||!1;var a,o,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(d),h=[],f=0,p=0,y=0;function b(A,N){var P,_=!1;for(P=0;P<A.length;P+=1)A[P]===N&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var x=c.length;for(y=0;y<x;y+=1)r[c[y]].value=r[c[y]].defaultValue,r[c[y]].explicitSet=!1}if(Ls(t)==="object"){for(o in t)if(l=t[o],b(c,o)&&l!==void 0){if(r[o].type==="boolean"&&typeof l=="boolean")r[o].value=l;else if(r[o].type==="name"&&b(r[o].valueSet,l))r[o].value=l;else if(r[o].type==="integer"&&Number.isInteger(l))r[o].value=l;else if(r[o].type==="array"){for(f=0;f<l.length;f+=1)if(a=!0,l[f].length===1&&typeof l[f][0]=="number")h.push(String(l[f]-1));else if(l[f].length>1){for(p=0;p<l[f].length;p+=1)typeof l[f][p]!="number"&&(a=!1);a===!0&&h.push([l[f][0]-1,l[f][1]-1].join(" "))}r[o].value="["+h.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,N=[];for(A in r)r[A].explicitSet===!0&&(r[A].type==="name"?N.push("/"+A+" /"+r[A].value):N.push("/"+A+" "+r[A].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var s=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(a)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=l.length+d.length+c.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(o+l+d+c+h),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(a,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",s)),this}})(Lt.API),(function(t){var s=t.API,r=s.pdfEscape16=function(l,d){for(var c,h=d.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],y=0,b=l.length;y<b;++y){if(c=d.metadata.characterToGlyph(l.charCodeAt(y)),d.metadata.glyIdsUsed.push(c),d.metadata.toUnicode[c]=l.charCodeAt(y),h.indexOf(c)==-1&&(h.push(c),h.push([parseInt(d.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(f[4-c.length],c)}return p.join("")},a=function(l){var d,c,h,f,p,y,b;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,b=(c=Object.keys(l).sort(function(x,A){return x-A})).length;y<b;y++)d=c[y],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(f=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),h.push("<"+d+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(l){(function(d){var c=d.font,h=d.out,f=d.newObject,p=d.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,b=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),x="",A=0;A<b.length;A++)x+=String.fromCharCode(b[A]);var N=f();p({data:x,addLength1:!0,objectId:N}),h("endobj");var P=f();p({data:a(c.metadata.toUnicode),addLength1:!0,objectId:P}),h("endobj");var _=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Ad(c.fontName)),h("/FontFile2 "+N+" 0 R"),h("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),h("/Flags "+c.metadata.flags),h("/StemV "+c.metadata.stemV),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h(">>"),h("endobj");var C=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+Ad(c.fontName)),h("/FontDescriptor "+_+" 0 R"),h("/W "+t.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+c.encoding+")"),h(">>"),h(">>"),h("endobj"),c.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+P+" 0 R"),h("/BaseFont /"+Ad(c.fontName)),h("/Encoding /"+c.encoding),h("/DescendantFonts ["+C+" 0 R]"),h(">>"),h("endobj"),c.isAlreadyPutted=!0}})(l)}]),s.events.push(["putFont",function(l){(function(d){var c=d.font,h=d.out,f=d.newObject,p=d.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,b="",x=0;x<y.length;x++)b+=String.fromCharCode(y[x]);var A=f();p({data:b,addLength1:!0,objectId:A}),h("endobj");var N=f();p({data:a(c.metadata.toUnicode),addLength1:!0,objectId:N}),h("endobj");var P=f();h("<<"),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h("/StemV "+c.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),h("/FontName /"+Ad(c.fontName)),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h(">>"),h("endobj"),c.objectNumber=f();for(var _=0;_<c.metadata.hmtx.widths.length;_++)c.metadata.hmtx.widths[_]=parseInt(c.metadata.hmtx.widths[_]*(1e3/c.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Ad(c.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),h("endobj"),c.isAlreadyPutted=!0}})(l)}]);var o=function(l){var d,c=l.text||"",h=l.x,f=l.y,p=l.options||{},y=l.mutex||{},b=y.pdfEscape,x=y.activeFontKey,A=y.fonts,N=x,P="",_=0,C="",j=A[N].encoding;if(A[N].encoding!=="Identity-H")return{text:c,x:h,y:f,options:p,mutex:y};for(C=c,N=x,Array.isArray(c)&&(C=c[0]),_=0;_<C.length;_+=1)A[N].metadata.hasOwnProperty("cmap")&&(d=A[N].metadata.cmap.unicode.codeMap[C[_].charCodeAt(0)]),d||C[_].charCodeAt(0)<256&&A[N].metadata.hasOwnProperty("Unicode")?P+=C[_]:P+="";var w="";return parseInt(N.slice(1))<14||j==="WinAnsiEncoding"?w=b(P,N).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(w=r(P,A[N])),y.isHex=!0,{text:w,x:h,y:f,options:p,mutex:y}};s.events.push(["postProcessText",function(l){var d=l.text||"",c=[],h={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var f=0;for(f=0;f<d.length;f+=1)Array.isArray(d[f])&&d[f].length===3?c.push([o(Object.assign({},h,{text:d[f][0]})).text,d[f][1],d[f][2]]):c.push(o(Object.assign({},h,{text:d[f]})).text);l.text=c}else l.text=o(Object.assign({},h,{text:d})).text}])})(Lt),(function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,a){return s.call(this),this.internal.vFS[r]=a,this},t.getFileFromVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Lt.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(a){var o,l,d,c,h,f,p,y=s,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,j=0;this.__bidiEngine__={};var w=function(I){var R=I.charCodeAt(),$=R>>8,q=N[$];return q!==void 0?y[256*q+(255&R)]:$===252||$===253?"AL":_.test($)?"L":$===8?"R":"N"},D=function(I){for(var R,$=0;$<I.length;$++){if((R=w(I.charAt($)))==="L")return!1;if(R==="R")return!0}return!1},z=function(I,R,$,q){var Q,he,be,V,de=R[q];switch(de){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"N":case"AN":break;case"EN":C&&(de="AN");break;case"AL":C=!0,de="R";break;case"WS":case"BN":de="N";break;case"CS":q<1||q+1>=R.length||(Q=$[q-1])!=="EN"&&Q!=="AN"||(he=R[q+1])!=="EN"&&he!=="AN"?de="N":C&&(he="AN"),de=he===Q?he:"N";break;case"ES":de=(Q=q>0?$[q-1]:"B")==="EN"&&q+1<R.length&&R[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&$[q-1]==="EN"){de="EN";break}if(C){de="N";break}for(be=q+1,V=R.length;be<V&&R[be]==="ET";)be++;de=be<V&&R[be]==="EN"?"EN":"N";break;case"NSM":if(d&&!c){for(V=R.length,be=q+1;be<V&&R[be]==="NSM";)be++;if(be<V){var ke=I[q],te=ke>=1425&&ke<=2303||ke===64286;if(Q=R[be],te&&(Q==="R"||Q==="AL")){de="R";break}}}de=q<1||(Q=R[q-1])==="B"?"N":$[q-1];break;case"B":C=!1,o=!0,de=j;break;case"S":l=!0,de="N"}return de},U=function(I,R,$){var q=I.split("");return $&&X(q,$,{hiLevel:j}),q.reverse(),R&&R.reverse(),q.join("")},X=function(I,R,$){var q,Q,he,be,V,de=-1,ke=I.length,te=0,O=[],re=j?x:b,K=[];for(C=!1,o=!1,l=!1,Q=0;Q<ke;Q++)K[Q]=w(I[Q]);for(he=0;he<ke;he++){if(V=te,O[he]=z(I,K,O,he),q=240&(te=re[V][A[O[he]]]),te&=15,R[he]=be=re[te][5],q>0)if(q===16){for(Q=de;Q<he;Q++)R[Q]=1;de=-1}else de=-1;if(re[te][6])de===-1&&(de=he);else if(de>-1){for(Q=de;Q<he;Q++)R[Q]=be;de=-1}K[he]==="B"&&(R[he]=0),$.hiLevel|=be}l&&(function(ne,pe,je){for(var _e=0;_e<je;_e++)if(ne[_e]==="S"){pe[_e]=j;for(var ue=_e-1;ue>=0&&ne[ue]==="WS";ue--)pe[ue]=j}})(K,R,ke)},E=function(I,R,$,q,Q){if(!(Q.hiLevel<I)){if(I===1&&j===1&&!o)return R.reverse(),void($&&$.reverse());for(var he,be,V,de,ke=R.length,te=0;te<ke;){if(q[te]>=I){for(V=te+1;V<ke&&q[V]>=I;)V++;for(de=te,be=V-1;de<be;de++,be--)he=R[de],R[de]=R[be],R[be]=he,$&&(he=$[de],$[de]=$[be],$[be]=he);te=V}te++}}},G=function(I,R,$){var q=I.split(""),Q={hiLevel:j};return $||($=[]),X(q,$,Q),(function(he,be,V){if(V.hiLevel!==0&&p)for(var de,ke=0;ke<he.length;ke++)be[ke]===1&&(de=P.indexOf(he[ke]))>=0&&(he[ke]=P[de+1])})(q,$,Q),E(2,q,R,$,Q),E(1,q,R,$,Q),q.join("")};return this.__bidiEngine__.doBidiReorder=function(I,R,$){if((function(Q,he){if(he)for(var be=0;be<Q.length;be++)he[be]=be;c===void 0&&(c=D(Q)),f===void 0&&(f=D(Q))})(I,R),d||!h||f)if(d&&h&&c^f)j=c?1:0,I=U(I,R,$);else if(!d&&h&&f)j=c?1:0,I=G(I,R,$),I=U(I,R);else if(!d||c||h||f){if(d&&!h&&c^f)I=U(I,R),c?(j=0,I=G(I,R,$)):(j=1,I=G(I,R,$),I=U(I,R));else if(d&&c&&!h&&f)j=1,I=G(I,R,$),I=U(I,R);else if(!d&&!h&&c^f){var q=p;c?(j=1,I=G(I,R,$),j=0,p=!1,I=G(I,R,$),p=q):(j=0,I=G(I,R,$),I=U(I,R),j=1,p=!1,I=G(I,R,$),p=q,I=U(I,R))}}else j=0,I=G(I,R,$);else j=c?1:0,I=G(I,R,$);return I},this.__bidiEngine__.setOptions=function(I){I&&(d=I.isInputVisual,h=I.isOutputVisual,c=I.isInputRtl,f=I.isOutputRtl,p=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(a){var o=a.text;a.x,a.y;var l=a.options||{};a.mutex,l.lang;var d=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var c=0;for(d=[],c=0;c<o.length;c+=1)Object.prototype.toString.call(o[c])==="[object Array]"?d.push([r.doBidiReorder(o[c][0]),o[c][1],o[c][2]]):d.push([r.doBidiReorder(o[c])]);a.text=d}else a.text=r.doBidiReorder(o);r.setOptions({isInputVisual:!0})}])})(Lt),Lt.API.TTFFont=(function(){function t(s){var r;if(this.rawData=s,r=this.contents=new Hl(s),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new s8(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new UC(this.contents),this.head=new VC(this),this.name=new YC(this),this.cmap=new eb(this),this.toUnicode={},this.hhea=new WC(this),this.maxp=new KC(this),this.hmtx=new JC(this),this.post=new GC(this),this.os2=new HC(this),this.loca=new t8(this),this.glyf=new QC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,r,a,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,c,h,f;for(f=[],d=0,c=(h=this.bbox).length;d<c;d++)s=h[d],f.push(Math.round(s*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(a=255&(o=this.post.italic_angle),32768&(r=o>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var r;return((r=this.cmap.unicode)!=null?r.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*r},t.prototype.widthOfString=function(s,r,a){var o,l,d,c;for(d=0,l=0,c=(s=""+s).length;0<=c?l<c:l>c;l=0<=c?++l:--l)o=s.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(o))+a*(1e3/r)||0;return d*(r/1e3)},t.prototype.lineHeight=function(s,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*s},t})();var Oi,Hl=(function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var r,a;for(a=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},t.prototype.writeString=function(s){var r,a,o;for(o=[],r=0,a=s.length;0<=a?r<a:r>a;r=0<=a?++r:--r)o.push(this.writeByte(s.charCodeAt(r)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,r,a,o,l,d,c,h;return s=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),c=this.readByte(),h=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^o)+16777216*(255^l)+65536*(255^d)+256*(255^c)+(255^h)+1):72057594037927940*s+281474976710656*r+1099511627776*a+4294967296*o+16777216*l+65536*d+256*c+h},t.prototype.writeLongLong=function(s){var r,a;return r=Math.floor(s/4294967296),a=4294967295&s,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var r,a;for(r=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r.push(this.readByte());return r},t.prototype.write=function(s){var r,a,o,l;for(l=[],a=0,o=s.length;a<o;a++)r=s[a],l.push(this.writeByte(r));return l},t})(),UC=(function(){var t;function s(r){var a,o,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return s.prototype.encode=function(r){var a,o,l,d,c,h,f,p,y,b,x,A,N;for(N in x=Object.keys(r).length,h=Math.log(2),y=16*Math.floor(Math.log(x)/h),d=Math.floor(y/h),p=16*x-y,(o=new Hl).writeInt(this.scalarType),o.writeShort(x),o.writeShort(y),o.writeShort(d),o.writeShort(p),l=16*x,f=o.pos+l,c=null,A=[],r)for(b=r[N],o.writeString(N),o.writeInt(t(b)),o.writeInt(f),o.writeInt(b.length),A=A.concat(b),N==="head"&&(c=f),f+=b.length;f%4;)A.push(0),f++;return o.write(A),a=2981146554-t(o.data),o.pos=c+8,o.writeUInt32(a),o.data},t=function(r){var a,o,l,d;for(r=tb.call(r);r.length%4;)r.push(0);for(l=new Hl(r),o=0,a=0,d=r.length;a<d;a=a+=4)o+=l.readUInt32();return 4294967295&o},s})(),BC={}.hasOwnProperty,go=function(t,s){for(var r in s)BC.call(s,r)&&(t[r]=s[r]);function a(){this.constructor=t}return a.prototype=s.prototype,t.prototype=new a,t.__super__=s.prototype,t};Oi=(function(){function t(s){var r;this.file=s,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var VC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var r;return(r=new Hl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(s),r.writeShort(this.glyphDataFormat),r.data},t})(),Zy=(function(){function t(s,r){var a,o,l,d,c,h,f,p,y,b,x,A,N,P,_,C,j;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=r+s.readInt(),y=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=s.readByte();break;case 4:for(x=s.readUInt16(),b=x/2,s.pos+=6,l=(function(){var w,D;for(D=[],h=w=0;0<=b?w<b:w>b;h=0<=b?++w:--w)D.push(s.readUInt16());return D})(),s.pos+=2,N=(function(){var w,D;for(D=[],h=w=0;0<=b?w<b:w>b;h=0<=b?++w:--w)D.push(s.readUInt16());return D})(),f=(function(){var w,D;for(D=[],h=w=0;0<=b?w<b:w>b;h=0<=b?++w:--w)D.push(s.readUInt16());return D})(),p=(function(){var w,D;for(D=[],h=w=0;0<=b?w<b:w>b;h=0<=b?++w:--w)D.push(s.readUInt16());return D})(),o=(this.length-s.pos+this.offset)/2,c=(function(){var w,D;for(D=[],h=w=0;0<=o?w<o:w>o;h=0<=o?++w:--w)D.push(s.readUInt16());return D})(),h=_=0,j=l.length;_<j;h=++_)for(P=l[h],a=C=A=N[h];A<=P?C<=P:C>=P;a=A<=P?++C:--C)p[h]===0?d=a+f[h]:(d=c[p[h]/2+(a-A)-(b-h)]||0)!==0&&(d+=f[h]),this.codeMap[a]=65535&d}s.pos=y}return t.encode=function(s,r){var a,o,l,d,c,h,f,p,y,b,x,A,N,P,_,C,j,w,D,z,U,X,E,G,I,R,$,q,Q,he,be,V,de,ke,te,O,re,K,ne,pe,je,_e,ue,xe,Ie,He;switch(q=new Hl,d=Object.keys(s).sort(function(Je,De){return Je-De}),r){case"macroman":for(N=0,P=(function(){var Je=[];for(A=0;A<256;++A)Je.push(0);return Je})(),C={0:0},l={},Q=0,de=d.length;Q<de;Q++)C[ue=s[o=d[Q]]]==null&&(C[ue]=++N),l[o]={old:s[o],new:C[s[o]]},P[o]=C[s[o]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(P),{charMap:l,subtable:q.data,maxGlyphID:N+1};case"unicode":for(R=[],y=[],j=0,C={},a={},_=f=null,he=0,ke=d.length;he<ke;he++)C[D=s[o=d[he]]]==null&&(C[D]=++j),a[o]={old:D,new:C[D]},c=C[D]-o,_!=null&&c===f||(_&&y.push(_),R.push(o),f=c),_=o;for(_&&y.push(_),y.push(65535),R.push(65535),G=2*(E=R.length),X=2*Math.pow(Math.log(E)/Math.LN2,2),b=Math.log(X/2)/Math.LN2,U=2*E-X,h=[],z=[],x=[],A=be=0,te=R.length;be<te;A=++be){if(I=R[A],p=y[A],I===65535){h.push(0),z.push(0);break}if(I-($=a[I].new)>=32768)for(h.push(0),z.push(2*(x.length+E-A)),o=V=I;I<=p?V<=p:V>=p;o=I<=p?++V:--V)x.push(a[o].new);else h.push($-I),z.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*E+2*x.length),q.writeUInt16(0),q.writeUInt16(G),q.writeUInt16(X),q.writeUInt16(b),q.writeUInt16(U),je=0,O=y.length;je<O;je++)o=y[je],q.writeUInt16(o);for(q.writeUInt16(0),_e=0,re=R.length;_e<re;_e++)o=R[_e],q.writeUInt16(o);for(xe=0,K=h.length;xe<K;xe++)c=h[xe],q.writeUInt16(c);for(Ie=0,ne=z.length;Ie<ne;Ie++)w=z[Ie],q.writeUInt16(w);for(He=0,pe=x.length;He<pe;He++)N=x[He],q.writeUInt16(N);return{charMap:a,subtable:q.data,maxGlyphID:j+1}}},t})(),eb=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="cmap",t.prototype.parse=function(s){var r,a,o;for(s.pos=this.offset,this.version=s.readUInt16(),o=s.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)r=new Zy(s,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(s,r){var a,o;return r==null&&(r="macroman"),a=Zy.encode(s,r),(o=new Hl).writeUInt16(0),o.writeUInt16(1),a.table=o.data.concat(a.subtable),a},t})(),WC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t})(),HC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=(function(){var r,a;for(a=[],r=0;r<10;++r)a.push(s.readByte());return a})(),this.charRange=(function(){var r,a;for(a=[],r=0;r<4;++r)a.push(s.readInt());return a})(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=(function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(s.readInt());return a})(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t})(),GC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="post",t.prototype.parse=function(s){var r,a,o;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(a=s.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],o=[];s.pos<this.offset+this.length;)r=s.readByte(),o.push(this.names.push(s.readString(r)));return o;case 151552:return a=s.readUInt16(),this.offsets=s.read(a);case 262144:return this.map=(function(){var d,c,h;for(h=[],l=d=0,c=this.file.maxp.numGlyphs;0<=c?d<c:d>c;l=0<=c?++d:--d)h.push(s.readUInt32());return h}).call(this)}},t})(),ZC=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},YC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="name",t.prototype.parse=function(s){var r,a,o,l,d,c,h,f,p,y,b;for(s.pos=this.offset,s.readShort(),r=s.readShort(),c=s.readShort(),a=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)a.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+c+s.readShort()});for(h={},l=p=0,y=a.length;p<y;l=++p)o=a[l],s.pos=o.offset,f=s.readString(o.length),d=new ZC(f,o),h[b=o.nameID]==null&&(h[b]=[]),h[o.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t})(),KC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t})(),JC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="hmtx",t.prototype.parse=function(s){var r,a,o,l,d,c,h;for(s.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],r=f=0;0<=o?f<o:f>o;r=0<=o?++f:--f)p.push(s.readInt16());return p})(),this.widths=(function(){var f,p,y,b;for(b=[],f=0,p=(y=this.metrics).length;f<p;f++)l=y[f],b.push(l.advance);return b}).call(this),a=this.widths[this.widths.length-1],h=[],r=d=0;0<=o?d<o:d>o;r=0<=o?++d:--d)h.push(this.widths.push(a));return h},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t})(),tb=[].slice,QC=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var r,a,o,l,d,c,h,f,p,y;return s in this.cache?this.cache[s]:(l=this.file.loca,r=this.file.contents,a=l.indexOf(s),(o=l.lengthOf(s))===0?this.cache[s]=null:(r.pos=this.offset+a,d=(c=new Hl(r.read(o))).readShort(),f=c.readShort(),y=c.readShort(),h=c.readShort(),p=c.readShort(),this.cache[s]=d===-1?new e8(c,f,y,h,p):new XC(c,d,f,y,h,p),this.cache[s]))},t.prototype.encode=function(s,r,a){var o,l,d,c,h;for(d=[],l=[],c=0,h=r.length;c<h;c++)o=s[r[c]],l.push(d.length),o&&(d=d.concat(o.encode(a)));return l.push(d.length),{table:d,offsets:l}},t})(),XC=(function(){function t(s,r,a,o,l,d){this.raw=s,this.numberOfContours=r,this.xMin=a,this.yMin=o,this.xMax=l,this.yMax=d,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),e8=(function(){function t(s,r,a,o,l){var d,c;for(this.raw=s,this.xMin=r,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;c=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&c;)d.pos+=1&c?4:2,128&c?d.pos+=8:64&c?d.pos+=4:8&c&&(d.pos+=2)}return t.prototype.encode=function(){var s,r,a;for(r=new Hl(tb.call(this.raw.data)),s=0,a=this.glyphIDs.length;s<a;++s)r.pos=this.glyphOffsets[s];return r.data},t})(),t8=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return go(t,Oi),t.prototype.tag="loca",t.prototype.parse=function(s){var r,a;return s.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=2)l.push(2*s.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=4)l.push(s.readUInt32());return l}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,r){for(var a=new Uint32Array(this.offsets.length),o=0,l=0,d=0;d<a.length;++d)if(a[d]=o,l<r.length&&r[l]==d){++l,a[d]=o;var c=this.offsets[d],h=this.offsets[d+1]-c;h>0&&(o+=h)}for(var f=new Array(4*a.length),p=0;p<a.length;++p)f[4*p+3]=255&a[p],f[4*p+2]=(65280&a[p])>>8,f[4*p+1]=(16711680&a[p])>>16,f[4*p]=(4278190080&a[p])>>24;return f},t})(),s8=(function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,r,a,o,l;for(r in o=this.font.cmap.tables[0].codeMap,s={},l=this.subset)a=l[r],s[r]=o[a];return s},t.prototype.glyphsFor=function(s){var r,a,o,l,d,c,h;for(o={},d=0,c=s.length;d<c;d++)o[l=s[d]]=this.font.glyf.glyphFor(l);for(l in r=[],o)(a=o[l])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(l in h=this.glyphsFor(r))a=h[l],o[l]=a;return o},t.prototype.encode=function(s,r){var a,o,l,d,c,h,f,p,y,b,x,A,N,P,_;for(o in a=eb.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(s),x={0:0},_=a.charMap)x[(h=_[o]).old]=h.new;for(A in b=a.maxGlyphID,d)A in x||(x[A]=b++);return p=(function(C){var j,w;for(j in w={},C)w[C[j]]=j;return w})(x),y=Object.keys(p).sort(function(C,j){return C-j}),N=(function(){var C,j,w;for(w=[],C=0,j=y.length;C<j;C++)c=y[C],w.push(p[c]);return w})(),l=this.font.glyf.encode(d,N,x),f=this.font.loca.encode(l.offsets,N),P={cmap:this.font.cmap.raw(),glyf:l.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},t})();Lt.API.PDFObject=(function(){var t;function s(){}return t=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},s.convert=function(r){var a,o,l,d;if(Array.isArray(r))return"["+(function(){var c,h,f;for(f=[],c=0,h=r.length;c<h;c++)a=r[c],f.push(s.convert(a));return f})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(o in l=["<<"],r)d=r[o],l.push("/"+o+" "+s.convert(d));return l.push(">>"),l.join(`
`)}return""+r},s})();function r8(){const[t,s]=L.useState(""),[r,a]=L.useState("all"),[o,l]=L.useState([]),[d,c]=L.useState(!0),[h,f]=L.useState(null),[p,y]=L.useState(!1),[b,x]=L.useState({pending:0,approved:0,rejected:0,total:0});L.useEffect(()=>{A()},[r]);const A=async()=>{c(!0);try{let j=B.database.from("applications").select("*, programs(title)").order("created_at",{ascending:!1});r!=="all"&&(j=j.eq("status",r));const{data:w,error:D}=await j;if(D)throw D;l(w||[]);const z=w?.filter(E=>E.status==="pending").length||0,U=w?.filter(E=>E.status==="approved").length||0,X=w?.filter(E=>E.status==="rejected").length||0;x({pending:z,approved:U,rejected:X,total:w?.length||0})}catch(j){console.error("Error fetching applications:",j)}finally{c(!1)}},N=async(j,w)=>{try{await B.database.from("applications").update({status:w,updated_at:new Date().toISOString()}).eq("id",j);const D=o.find(z=>z.id===j);if(D){const z={user_id:D.user_id,type:"application",title:`Application ${w==="approved"?"Approved":"Rejected"}`,message:`Your application for ${D.programs?.title||D.program_type} has been ${w}.`,related_id:j};await B.database.from("notifications").insert([z]),await Ri(D.user_id,{type:`application_${w}`,subject:z.title,message:z.message})}A()}catch(D){console.error("Error updating application:",D)}},P=()=>{const j=["Name","Email","Phone","Program","Status","Payment Status","Date"],w=o.map(E=>[E.full_name,E.email,E.phone,E.programs?.title||E.program_type,E.status,E.payment_status,new Date(E.created_at).toLocaleDateString()]),D=[j.join(","),...w.map(E=>E.map(G=>`"${G}"`).join(","))].join(`
`),z=new Blob([D],{type:"text/csv"}),U=window.URL.createObjectURL(z),X=document.createElement("a");X.href=U,X.download=`applications_${new Date().toISOString().split("T")[0]}.csv`,X.click(),window.URL.revokeObjectURL(U)},_=j=>{const w=new Lt;let D=20;const z=w.internal.pageSize.height,U=14,X=180;w.setFontSize(20),w.setTextColor(27,28,95),w.text("Christian Leadership Movement",U,D),D+=10,w.setFontSize(14),w.setTextColor(0,0,0),w.text(`${j.program_type==="membership"?"CLM Membership":"Bible School / Ordination"} Application Details`,U,D),D+=10;const E=($,q)=>{D>z-40&&(w.addPage(),D=20),w.setFontSize(12),w.setFont(void 0,"bold"),w.text($,U,D),D+=8,w.setFont(void 0,"normal"),q.forEach(([Q,he])=>{D>z-20&&(w.addPage(),D=20);const be=he!=null&&he!==""?String(he):"N/A";w.setFont(void 0,"bold"),w.text(Q,U,D),w.setFont(void 0,"normal");const V=w.splitTextToSize(be,X-60);w.text(V,U+60,D),D+=V.length*7}),D+=5},G=[["Full Name:",j.full_name],["First Name:",j.first_name],["Middle Name:",j.middle_name],["Last Name:",j.last_name],["Preferred Name:",j.preferred_name],["Title:",j.title],["ID Number:",j.id_number],["Nationality:",j.nationality],["Email:",j.email],["Phone:",j.phone],["Contact Number:",j.contact_number],["Date of Birth:",j.date_of_birth],["Gender:",j.gender],["Marital Status:",j.marital_status],["Province:",j.province],["City:",j.city],["Postal Code:",j.postal_code],["Physical Address:",j.physical_address||j.address],["Country:",j.country],["Residential Status:",j.residential_status],["Home Language:",j.home_language],["Population Group:",j.population_group]].filter(([$,q])=>q);if(E("Personal Information",G),j.disabilities&&Array.isArray(j.disabilities)&&j.disabilities.length>0&&E("Disability Information",[["Disabilities:",j.disabilities.join(", ")]]),j.program_type==="bible_school"){const $=[["Date Accepted Christ:",j.date_accepted_christ],["Baptized:",j.is_baptized?"Yes":"No"],["Baptism Date:",j.baptism_date],["Attends Local Church:",j.attends_local_church?"Yes":"No"],["Church Name:",j.church_name],["Denomination:",j.denomination],["Pastor Name:",j.pastor_name],["Serves in Ministry:",j.serves_in_ministry?"Yes":"No"],["Ministry Service Description:",j.ministry_service_description]].filter(([q,Q])=>Q&&Q!=="No");$.length>0&&E("Spiritual Background",$)}if(j.program_type==="membership"){const $=[["Current Ministry Name:",j.current_ministry_name],["Denomination:",j.denomination],["Ministry Types:",Array.isArray(j.ministry_types)?j.ministry_types.join(", "):j.ministry_types],["Ministry Position:",j.ministry_position],["Ministry Website:",j.ministry_website],["Years Part-Time Ministry:",j.years_part_time],["Years Full-Time Ministry:",j.years_full_time],["Primary Income Source:",j.primary_income_source],["Primary Income Other:",j.primary_income_other]].filter(([q,Q])=>Q);$.length>0&&E("Ministry Involvement",$)}if(j.program_type==="bible_school"){const $=[["Why Join Bible School:",j.why_join_bible_school],["Previous Leadership Experience:",j.previous_leadership_experience]].filter(([q,Q])=>Q);$.length>0&&E("Leadership Interests",$),j.leadership_roles&&Array.isArray(j.leadership_roles)&&j.leadership_roles.length>0&&(D+=5,w.setFont(void 0,"bold"),w.text("Leadership Roles:",U,D),D+=8,j.leadership_roles.forEach((q,Q)=>{D>z-30&&(w.addPage(),D=20),w.setFont(void 0,"bold"),w.text(`${Q+1}. ${q.title||"Untitled"}`,U,D),D+=7,w.setFont(void 0,"normal");const he=w.splitTextToSize(q.description||"N/A",X);w.text(he,U+10,D),D+=he.length*7+3}))}if(j.program_type==="bible_school"){const $=[["Calling Statement:",j.calling_statement],["Leadership Ambitions:",j.leadership_ambitions]].filter(([q,Q])=>Q);$.length>0&&E("Vision & Calling",$)}if(j.program_type==="membership"){const $=[["High School:",j.high_school],["Highest Ministry Qualification:",j.highest_ministry_qualification],["Highest Other Qualification:",j.highest_other_qualification],["Other Training:",j.other_training]].filter(([q,Q])=>Q);$.length>0&&E("Qualifications",$)}const I=[["Referee Name:",j.referee_name],["Reference First Name:",j.reference_first_name],["Reference Last Name:",j.reference_last_name],["Reference Contact:",j.referee_contact||j.reference_contact],["Reference Email:",j.reference_email],["Reference Title:",j.reference_title],["Relationship to Referee:",j.relationship_to_referee]].filter(([$,q])=>q);I.length>0&&E("Reference Information",I),j.program_type==="bible_school"&&E("Registration & Payment",[["Registration Option:",j.registration_option?.replace("_"," ").replace(/\b\w/g,$=>$.toUpperCase())]]),E("Declaration",[["Signature:",j.signature],["Declaration Date:",j.declaration_date]]),E("Application Status",[["Program Type:",j.program_type?.replace("_"," ").replace(/\b\w/g,$=>$.toUpperCase())],["Program:",j.programs?.title||"N/A"],["Status:",j.status],["Payment Status:",j.payment_status],["Submitted:",new Date(j.created_at).toLocaleDateString()],["Last Updated:",j.updated_at?new Date(j.updated_at).toLocaleDateString():"N/A"]]);const R=`application_${(j.full_name||"unknown").replace(/[^a-z0-9]/gi,"_")}_${j.id}.pdf`;w.save(R)},C=j=>{const w={pending:"bg-amber-100 text-amber-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${w[j]}`,children:j.charAt(0).toUpperCase()+j.slice(1)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Application Management"}),e.jsx("p",{className:"text-gray-600",children:"Review and process program applications"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:b.pending})]}),e.jsx($r,{className:"text-amber-500",size:32})]})}),e.jsx("div",{className:"bg-white p-4 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:b.approved})]}),e.jsx(rt,{className:"text-green-500",size:32})]})}),e.jsx("div",{className:"bg-white p-4 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:b.rejected})]}),e.jsx(rl,{className:"text-red-500",size:32})]})}),e.jsx("div",{className:"bg-white p-4 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:b.total})]}),e.jsx(di,{className:"text-blue-500",size:32})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search applications...",value:t,onChange:j=>s(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:r,onChange:j=>a(j.target.value),className:"px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs(me,{variant:"outline",onClick:P,children:[e.jsx(ci,{size:20,className:"mr-2"}),"Export CSV"]})]})}),e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Program"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Payment Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-600",children:"Loading applications..."})}):o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-600",children:"No applications found"})}):o.filter(j=>{if(!t)return!0;const w=t.toLowerCase();return j.full_name?.toLowerCase().includes(w)||j.email?.toLowerCase().includes(w)||j.programs?.title?.toLowerCase().includes(w)}).map(j=>e.jsxs("tr",{className:"hover:bg-muted-gray/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold flex items-center justify-center text-white font-bold mr-3",children:j.full_name?.charAt(0)||"A"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-navy-ink",children:j.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:j.email})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:j.programs?.title||j.program_type}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(j.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.payment_status==="confirmed"?"bg-green-100 text-green-800":j.payment_status==="pending"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:j.payment_status})}),e.jsx("td",{className:"px-6 py-4",children:C(j.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>_(j),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-card",title:"Download PDF",children:e.jsx(ys,{size:18})}),e.jsx("button",{onClick:()=>{f(j),y(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",title:"View Details",children:e.jsx(di,{size:18})}),j.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(j.id,"approved"),className:"p-2 text-green-600 hover:bg-green-50 rounded-card",title:"Approve",children:e.jsx(rt,{size:18})}),e.jsx("button",{onClick:()=>N(j.id,"rejected"),className:"p-2 text-red-600 hover:bg-red-50 rounded-card",title:"Reject",children:e.jsx(rl,{size:18})})]})]})})]},j.id))})]})})}),p&&h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-navy-ink",children:["Application Details - ",h.full_name]}),e.jsx("button",{onClick:()=>{y(!1),f(null)},className:"text-gray-500 hover:text-gray-700",children:e.jsx(Fr,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Full Name"}),e.jsx("p",{className:"font-medium",children:h.full_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium",children:h.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium",children:h.phone||h.contact_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ID Number"}),e.jsx("p",{className:"font-medium",children:h.id_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),e.jsx("p",{className:"font-medium",children:h.date_of_birth?new Date(h.date_of_birth).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"font-medium",children:h.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Province"}),e.jsx("p",{className:"font-medium",children:h.province||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"City"}),e.jsx("p",{className:"font-medium",children:h.city||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Address"}),e.jsx("p",{className:"font-medium",children:h.physical_address||h.address||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-4",children:"Program Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Program Type"}),e.jsx("p",{className:"font-medium",children:h.program_type?.replace("_"," ").replace(/\b\w/g,j=>j.toUpperCase())||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Program"}),e.jsx("p",{className:"font-medium",children:h.programs?.title||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"font-medium",children:C(h.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payment Status"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.payment_status==="confirmed"?"bg-green-100 text-green-800":h.payment_status==="pending"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:h.payment_status||"N/A"})]})]})]}),h.program_type==="membership"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-4",children:"Ministry Involvement"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Ministry"}),e.jsx("p",{className:"font-medium",children:h.current_ministry_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Denomination"}),e.jsx("p",{className:"font-medium",children:h.denomination||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ministry Position"}),e.jsx("p",{className:"font-medium",children:h.ministry_position||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Primary Income Source"}),e.jsx("p",{className:"font-medium",children:h.primary_income_source||"N/A"})]})]})]}),h.program_type==="bible_school"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-4",children:"Spiritual Background"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Church Name"}),e.jsx("p",{className:"font-medium",children:h.church_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Denomination"}),e.jsx("p",{className:"font-medium",children:h.denomination||"N/A"})]}),h.why_join_bible_school&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Why Join Bible School"}),e.jsx("p",{className:"font-medium",children:h.why_join_bible_school})]}),h.calling_statement&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Calling Statement"}),e.jsx("p",{className:"font-medium",children:h.calling_statement})]})]})]}),(h.referee_name||h.reference_first_name)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-4",children:"Reference Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Reference Name"}),e.jsx("p",{className:"font-medium",children:h.referee_name||`${h.reference_first_name||""} ${h.reference_last_name||""}`.trim()||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Reference Contact"}),e.jsx("p",{className:"font-medium",children:h.referee_contact||h.reference_contact||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Reference Email"}),e.jsx("p",{className:"font-medium",children:h.reference_email||"N/A"})]})]})]}),h.documents&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-4",children:"Documents"}),e.jsx("div",{className:"space-y-2",children:Array.isArray(h.documents)?h.documents.map((j,w)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:j.name||j.filename||`Document ${w+1}`}),j.url&&e.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View"})]},w)):e.jsx("p",{className:"text-sm text-gray-600",children:"Documents available in PDF export"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-4",children:"Timestamps"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Submitted"}),e.jsx("p",{className:"font-medium",children:new Date(h.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:h.updated_at?new Date(h.updated_at).toLocaleString():"N/A"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsxs(me,{variant:"outline",onClick:()=>_(h),children:[e.jsx(ys,{size:18,className:"mr-2"}),"Download PDF"]}),h.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(me,{variant:"primary",onClick:()=>{N(h.id,"approved"),y(!1)},children:[e.jsx(rt,{size:18,className:"mr-2"}),"Approve"]}),e.jsxs(me,{variant:"outline",onClick:()=>{N(h.id,"rejected"),y(!1)},children:[e.jsx(rl,{size:18,className:"mr-2"}),"Reject"]})]})]})]})]})})]})}function n8(){const{user:t}=Mt(),[s,r]=L.useState([]),[a,o]=L.useState({}),[l,d]=L.useState([]),[c,h]=L.useState(!0),[f,p]=L.useState(!1),[y,b]=L.useState(!1),[x,A]=L.useState(null),[N,P]=L.useState(null),[_,C]=L.useState(null),[j,w]=L.useState(null),[D,z]=L.useState(null),[U,X]=L.useState(null),[E,G]=L.useState({total:0,active:0,totalStudents:0}),{register:I,handleSubmit:R,formState:{errors:$},reset:q,setValue:Q}=hn(),{register:he,handleSubmit:be,formState:{errors:V},reset:de,setValue:ke}=hn();L.useEffect(()=>{te()},[]);const te=async()=>{try{const[xe,Ie]=await Promise.all([B.database.from("courses").select("*").order("created_at",{ascending:!1}),B.database.from("programs").select("*")]);r(xe.data||[]),d(Ie.data||[]);const He={};for(const le of xe.data||[]){const{data:Nt}=await B.database.from("course_lessons").select("*").eq("course_id",le.id).order("order_index",{ascending:!0});He[le.id]=Nt||[]}o(He);const{data:Je}=await B.database.from("user_course_progress").select("course_id"),De=new Set(Je?.map(le=>le.user_id)||[]);G({total:xe.data?.length||0,active:xe.data?.length||0,totalStudents:De.size})}catch(xe){console.error("Error fetching courses:",xe)}finally{h(!1)}},O=()=>{q(),A(null),X(null),p(!0)},re=xe=>{Q("title",xe.title),Q("description",xe.description||""),Q("instructor",xe.instructor||""),Q("program_id",xe.program_id||""),A(xe),X(null),p(!0)},K=async xe=>{if(confirm("Are you sure you want to delete this course? All lessons will be deleted."))try{await B.database.from("course_lessons").delete().eq("course_id",xe);const Ie=s.find(He=>He.id===xe);Ie?.image_key&&await B.storage.from("courses").remove(Ie.image_key),await B.database.from("courses").delete().eq("id",xe),te()}catch(Ie){console.error("Error deleting course:",Ie),alert("Failed to delete course")}},ne=async xe=>{try{let Ie=x?.image_url||null,He=x?.image_key||null;if(U){const{data:le,error:Nt}=await B.storage.from("courses").upload(`courses/${Date.now()}_${U.name}`,U);if(Nt)throw console.error("Image upload error:",Nt),new Error(`Failed to upload image: ${Nt.message}`);if(Ie=le.url,He=le.key,x?.image_key)try{await B.storage.from("courses").remove(x.image_key)}catch(At){console.warn("Could not remove old image:",At)}}const Je={title:xe.title,description:xe.description||null,instructor:xe.instructor||null,program_id:xe.program_id||null,image_url:Ie,image_key:He,created_by:t?.id};let De;if(x){const{data:le,error:Nt}=await B.database.from("courses").update(Je).eq("id",x.id).select().single();if(Nt)throw console.error("Course update error:",Nt),new Error(`Failed to update course: ${Nt.message}`);De=le}else{const{data:le,error:Nt}=await B.database.from("courses").insert([Je]).select().single();if(Nt)throw console.error("Course insert error:",Nt),new Error(`Failed to create course: ${Nt.message}`);De=le}if(De)p(!1),q(),X(null),te(),alert("Course saved successfully!");else throw new Error("Course save completed but verification failed")}catch(Ie){console.error("Course save error:",Ie),alert(Ie.message||"Failed to save course. Please try again.")}},pe=xe=>{de(),C(null),P(xe),w(null),z(null),b(!0)},je=xe=>{ke("title",xe.title),ke("description",xe.description||""),ke("order_index",xe.order_index.toString()),ke("scheduled_date",xe.scheduled_date?new Date(xe.scheduled_date).toISOString().split("T")[0]:""),ke("meeting_link",xe.meeting_link||""),C(xe),P(xe.course_id),w(null),z(null),b(!0)},_e=async xe=>{if(confirm("Are you sure you want to delete this lesson?"))try{const Ie=Object.values(a).flat().find(He=>He.id===xe);Ie?.video_key&&await B.storage.from("courses").remove(Ie.video_key),Ie?.resources_key&&await B.storage.from("courses").remove(Ie.resources_key),await B.database.from("course_lessons").delete().eq("id",xe),te()}catch(Ie){console.error("Error deleting lesson:",Ie),alert("Failed to delete lesson")}},ue=async xe=>{if(N)try{let Ie=_?.video_url||null,He=_?.video_key||null,Je=_?.resources_url||null,De=_?.resources_key||null;if(j){const{data:At,error:ct}=await B.storage.from("courses").upload(`lessons/${Date.now()}_${j.name}`,j);if(ct)throw console.error("Video upload error:",ct),new Error(`Failed to upload video: ${ct.message}`);if(Ie=At.url,He=At.key,_?.video_key)try{await B.storage.from("courses").remove(_.video_key)}catch(Ye){console.warn("Could not remove old video:",Ye)}}if(D){const{data:At,error:ct}=await B.storage.from("courses").upload(`lessons/${Date.now()}_${D.name}`,D);if(ct)throw console.error("Resources upload error:",ct),new Error(`Failed to upload resources: ${ct.message}`);if(Je=At.url,De=At.key,_?.resources_key)try{await B.storage.from("courses").remove(_.resources_key)}catch(Ye){console.warn("Could not remove old resources:",Ye)}}const le={course_id:N,title:xe.title,description:xe.description||null,order_index:parseInt(xe.order_index)||0,video_url:Ie,video_key:He,resources_url:Je,resources_key:De,scheduled_date:xe.scheduled_date||null,meeting_link:xe.meeting_link||null};let Nt;if(_){const{data:At,error:ct}=await B.database.from("course_lessons").update(le).eq("id",_.id).select().single();if(ct)throw console.error("Lesson update error:",ct),new Error(`Failed to update lesson: ${ct.message}`);Nt=At}else{const{data:At,error:ct}=await B.database.from("course_lessons").insert([le]).select().single();if(ct)throw console.error("Lesson insert error:",ct),new Error(`Failed to create lesson: ${ct.message}`);Nt=At}if(Nt)b(!1),de(),w(null),z(null),te(),alert("Lesson saved successfully!");else throw new Error("Lesson save completed but verification failed")}catch(Ie){console.error("Lesson save error:",Ie),alert(Ie.message||"Failed to save lesson. Please try again.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Course Management"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage educational programs"})]}),e.jsxs(me,{variant:"primary",onClick:O,children:[e.jsx(Dr,{size:20,className:"mr-2"}),"Create Course"]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink",children:x?"Edit Course":"Create New Course"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Fr,{size:24})})]}),e.jsxs("form",{onSubmit:R(ne),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Title *"}),e.jsx("input",{type:"text",...I("title",{required:"Title is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),$.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Description"}),e.jsx("textarea",{...I("description"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Instructor"}),e.jsx("input",{type:"text",...I("instructor"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Program"}),e.jsxs("select",{...I("program_id"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Program (Optional)"}),l.map(xe=>e.jsx("option",{value:xe.id,children:xe.title},xe.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Course Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:xe=>X(xe.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(me,{type:"submit",variant:"primary",children:[e.jsx(li,{className:"mr-2",size:16}),x?"Update Course":"Create Course"]}),e.jsx(me,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"})]})]})]})}),y&&N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink",children:_?"Edit Lesson":"Create New Lesson"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Fr,{size:24})})]}),e.jsxs("form",{onSubmit:be(ue),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Title *"}),e.jsx("input",{type:"text",...he("title",{required:"Title is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),V.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Description"}),e.jsx("textarea",{...he("description"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Order Index *"}),e.jsx("input",{type:"number",...he("order_index",{required:"Order is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),V.order_index&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.order_index.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Scheduled Date"}),e.jsx("input",{type:"datetime-local",...he("scheduled_date"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Meeting Link"}),e.jsx("input",{type:"url",...he("meeting_link"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"https://zoom.us/j/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Video File"}),e.jsx("input",{type:"file",accept:"video/*",onChange:xe=>w(xe.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Resources File"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:xe=>z(xe.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(me,{type:"submit",variant:"primary",children:[e.jsx(li,{className:"mr-2",size:16}),_?"Update Lesson":"Create Lesson"]}),e.jsx(me,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Cancel"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(as,{className:"text-blue-500",size:32})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Courses"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:E.total})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Qt,{className:"text-green-500",size:32})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:E.totalStudents})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx($r,{className:"text-amber-500",size:32})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Active Courses"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:E.active})]})]}),c?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading courses..."})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No courses created yet."}),e.jsx(me,{variant:"primary",onClick:O,children:"Create Your First Course"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(xe=>{const Ie=a[xe.id]||[];return e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[xe.image_url?e.jsx("div",{className:"h-32 overflow-hidden",children:e.jsx("img",{src:xe.image_url,alt:xe.title,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"h-32 bg-gradient-to-r from-brand-dark-blue to-navy-ink"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("h3",{className:"text-lg font-bold text-navy-ink",children:xe.title})}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:xe.description}),xe.instructor&&e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Instructor: ",xe.instructor]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[Ie.length," lesson",Ie.length!==1?"s":""]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(me,{variant:"outline",size:"sm",className:"w-full",onClick:()=>pe(xe.id),children:[e.jsx(Dr,{size:16,className:"mr-1"}),"Add Lesson"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(me,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>re(xe),children:[e.jsx(bn,{size:16,className:"mr-1"}),"Edit"]}),e.jsxs(me,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>K(xe.id),children:[e.jsx(zs,{size:16,className:"mr-1"}),"Delete"]})]})]}),Ie.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-navy-ink mb-2",children:"Lessons:"}),e.jsx("div",{className:"space-y-1",children:Ie.map(He=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted-gray rounded-card",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[He.order_index,"."]}),e.jsx("span",{className:"text-sm text-navy-ink",children:He.title})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>je(He),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:e.jsx(bn,{size:14})}),e.jsx("button",{onClick:()=>_e(He.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:e.jsx(zs,{size:14})})]})]},He.id))})]})]})]},xe.id)})})]})}function a8(){const{user:t}=Mt(),[s,r]=L.useState([]),[a,o]=L.useState(!0),[l,d]=L.useState(!1),[c,h]=L.useState(null),[f,p]=L.useState({total:0,upcoming:0,totalAttendees:0,thisMonth:0}),[y,b]=L.useState(null),[x,A]=L.useState({}),{register:N,handleSubmit:P,formState:{errors:_},reset:C,setValue:j}=hn();L.useEffect(()=>{w()},[]);const w=async()=>{o(!0);try{const{data:E,error:G}=await B.database.from("events").select("*").order("event_date",{ascending:!0});if(G)throw G;if(r(E||[]),E&&E.length>0){const I=E.map(V=>V.id),{data:R}=await B.database.from("event_registrations").select("event_id").in("event_id",I),$={};R?.forEach(V=>{$[V.event_id]=($[V.event_id]||0)+1}),A($);const q=new Date,Q=new Date(q.getFullYear(),q.getMonth(),1),he=E.filter(V=>new Date(V.event_date)>=q),be=E.filter(V=>new Date(V.event_date)>=Q);p({total:E.length,upcoming:he.length,totalAttendees:Object.values($).reduce((V,de)=>V+de,0),thisMonth:be.length})}}catch(E){console.error("Error fetching events:",E)}finally{o(!1)}},D=()=>{C(),h(null),b(null),d(!0)},z=E=>{const G=new Date(E.event_date);j("title",E.title),j("description",E.description||""),j("event_date",G.toISOString().split("T")[0]),j("event_time",G.toTimeString().slice(0,5)),j("location",E.location||""),j("capacity",E.capacity?.toString()||""),h(E),b(null),d(!0)},U=async E=>{if(confirm("Are you sure you want to delete this event?"))try{await B.database.from("event_registrations").delete().eq("event_id",E);const G=s.find(I=>I.id===E);G?.image_key&&await B.storage.from("gallery").remove(G.image_key),await B.database.from("events").delete().eq("id",E),w()}catch(G){console.error("Error deleting event:",G),alert("Failed to delete event")}},X=async E=>{try{let G=c?.image_url||null,I=c?.image_key||null;if(y){const{data:Q,error:he}=await B.storage.from("gallery").upload(`events/${Date.now()}_${y.name}`,y);if(he)throw console.error("Image upload error:",he),new Error(`Failed to upload image: ${he.message}`);if(G=Q.url,I=Q.key,c?.image_key)try{await B.storage.from("gallery").remove(c.image_key)}catch(be){console.warn("Could not remove old image:",be)}}const R=new Date(`${E.event_date}T${E.event_time}`),$={title:E.title,description:E.description||null,event_date:R.toISOString(),location:E.location||null,capacity:E.capacity?parseInt(E.capacity):null,image_url:G,image_key:I,created_by:t?.id};let q;if(c){const{data:Q,error:he}=await B.database.from("events").update($).eq("id",c.id).select().single();if(he)throw console.error("Event update error:",he),new Error(`Failed to update event: ${he.message}`);q=Q}else{const{data:Q,error:he}=await B.database.from("events").insert([$]).select().single();if(he)throw console.error("Event insert error:",he),new Error(`Failed to create event: ${he.message}`);q=Q}if(q)d(!1),C(),b(null),w(),alert("Event saved successfully!");else throw new Error("Event save completed but verification failed")}catch(G){console.error("Event save error:",G),alert(G.message||"Failed to save event. Please try again.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Event Management"}),e.jsx("p",{className:"text-gray-600",children:"Schedule and manage events"})]}),e.jsxs(me,{variant:"primary",onClick:D,children:[e.jsx(Dr,{size:20,className:"mr-2"}),"Create Event"]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink",children:c?"Edit Event":"Create New Event"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Fr,{size:24})})]}),e.jsxs("form",{onSubmit:P(X),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Title *"}),e.jsx("input",{type:"text",...N("title",{required:"Title is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),_.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Description"}),e.jsx("textarea",{...N("description"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Date *"}),e.jsx("input",{type:"date",...N("event_date",{required:"Date is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),_.event_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.event_date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Time *"}),e.jsx("input",{type:"time",...N("event_time",{required:"Time is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),_.event_time&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.event_time.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Location *"}),e.jsx("input",{type:"text",...N("location",{required:"Location is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"e.g., Pretoria Conference Center or Online via Zoom"}),_.location&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.location.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Capacity"}),e.jsx("input",{type:"number",...N("capacity"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Leave empty for unlimited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Event Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:E=>b(E.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(me,{type:"submit",variant:"primary",children:[e.jsx(li,{className:"mr-2",size:16}),c?"Update Event":"Create Event"]}),e.jsx(me,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Events"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:f.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:f.upcoming})]}),e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Attendees"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:f.totalAttendees})]}),e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:f.thisMonth})]})]}),a?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading events..."})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No events created yet."}),e.jsx(me,{variant:"primary",onClick:D,children:"Create Your First Event"})]}):e.jsx("div",{className:"space-y-4",children:s.map(E=>{const G=new Date(E.event_date),I=x[E.id]||0,R=E.location?.toLowerCase().includes("online")||E.location?.toLowerCase().includes("zoom"),$=E.capacity?I/E.capacity*100:0;return e.jsx("div",{className:"bg-white rounded-card shadow-soft p-6",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink",children:E.title}),R&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"Online"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${G>=new Date?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:G>=new Date?"Upcoming":"Past"})]}),E.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:E.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ns,{size:16,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:G.toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Zl,{size:16,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:E.location})]}),E.capacity&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Qt,{size:16,className:"mr-2"}),e.jsxs("span",{className:"text-sm",children:[I," / ",E.capacity," registered"]})]})]}),E.capacity&&e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:`h-full rounded-full ${$>=80?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min($,100)}%`}})})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx(me,{variant:"outline",size:"sm",onClick:()=>z(E),children:e.jsx(bn,{size:16})}),e.jsx(me,{variant:"outline",size:"sm",onClick:()=>U(E.id),children:e.jsx(zs,{size:16})})]})]})},E.id)})})]})}function i8(){const[t,s]=L.useState(""),[r,a]=L.useState("all"),[o,l]=L.useState("all"),[d,c]=L.useState([]),[h,f]=L.useState([]),[p,y]=L.useState([]),[b,x]=L.useState(!0),[A,N]=L.useState(!1),[P,_]=L.useState({totalIssued:0,thisMonth:0,pending:0,total:0}),[C,j]=L.useState(null),{register:w,handleSubmit:D,formState:{errors:z},reset:U}=hn();L.useEffect(()=>{X()},[r,o]);const X=async()=>{x(!0);try{let Q=B.database.from("certificates").select(`
          *,
          users!certificates_user_id_fkey(id, nickname),
          courses!certificates_course_id_fkey(id, title)
        `).order("issued_date",{ascending:!1});r!=="all"&&(Q=Q.eq("status",r));const{data:he,error:be}=await Q;if(be){if(be.code==="42P01"||be.message?.includes("does not exist")){console.log("Certificates table not found"),c([]),_({totalIssued:0,thisMonth:0,pending:0,total:0}),x(!1);return}throw be}const V=(he||[]).map(_e=>({id:_e.id,user_id:_e.user_id,course_id:_e.course_id,certificate_number:_e.certificate_number||`CLM-${_e.id.slice(0,8).toUpperCase()}`,issued_date:_e.issued_date||_e.created_at,status:_e.status||"issued",certificate_url:_e.certificate_url,user_name:_e.users?.nickname||"Unknown User",course_name:_e.courses?.title||"Course Completion"}));let de=V;o!=="all"&&(de=V.filter(_e=>_e.course_id===o)),c(de);const ke=new Date,te=new Date(ke.getFullYear(),ke.getMonth(),1),O=V.filter(_e=>new Date(_e.issued_date)>=te),re=V.filter(_e=>_e.status==="issued"),K=V.filter(_e=>_e.status==="pending");_({totalIssued:re.length,thisMonth:O.length,pending:K.length,total:V.length});const{data:ne}=await B.database.from("user_profiles").select(`
          user_id,
          users!inner(id, nickname)
        `).order("created_at",{ascending:!1}),pe=(ne||[]).map(_e=>({id:_e.user_id,user_id:_e.user_id,nickname:_e.users?.nickname||"Unknown"}));f(pe);const{data:je}=await B.database.from("courses").select("id, title").order("title");y(je||[])}catch(Q){console.error("Error fetching certificates:",Q),j({type:"error",text:Q.message||"Failed to fetch certificates"}),c([])}finally{x(!1)}},E=()=>{const he=new Date().getFullYear(),be=Math.random().toString(36).substring(2,8).toUpperCase();return`CLM-${he}-${be}`},G=async(Q,he,be)=>{const V=new Lt("landscape","mm","a4"),de=V.internal.pageSize.getWidth(),ke=V.internal.pageSize.getHeight();V.setFillColor(27,28,95),V.rect(0,0,de,ke,"F"),V.setDrawColor(212,175,55),V.setLineWidth(2),V.rect(10,10,de-20,ke-20,"S"),V.setTextColor(212,175,55),V.setFontSize(36),V.setFont(void 0,"bold"),V.text("CERTIFICATE OF COMPLETION",de/2,50,{align:"center"}),V.setFontSize(18),V.setFont(void 0,"normal"),V.text("This is to certify that",de/2,70,{align:"center"}),V.setTextColor(255,255,255),V.setFontSize(28),V.setFont(void 0,"bold"),V.text(he,de/2,95,{align:"center"}),V.setFontSize(16),V.setFont(void 0,"normal"),V.text("has successfully completed the course",de/2,110,{align:"center"}),V.setFont(void 0,"bold"),V.text(be,de/2,125,{align:"center"}),V.setFontSize(14),V.setFont(void 0,"normal");const te=new Date(Q.issued_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});V.text(`Issued on ${te}`,de/2,150,{align:"center"}),V.setFontSize(12),V.setTextColor(212,175,55),V.text(`Certificate Number: ${Q.certificate_number}`,de/2,170,{align:"center"}),V.setDrawColor(212,175,55),V.line(de/2-40,185,de/2+40,185),V.setFontSize(12),V.setTextColor(255,255,255),V.text("Authorized Signature",de/2,195,{align:"center"});const O=V.output("blob");return URL.createObjectURL(O)},I=async Q=>{try{const he=Q.certificateNumber||E(),{data:be,error:V}=await B.database.from("certificates").insert([{user_id:Q.userId,course_id:Q.courseId||null,certificate_number:he,issued_date:new Date().toISOString(),status:"issued"}]).select().single();if(V){if(V.code==="42P01"||V.message?.includes("does not exist")){j({type:"error",text:"Certificates table does not exist. Please create it in the database first."});return}throw V}const de=h.find(O=>O.user_id===Q.userId),ke=p.find(O=>O.id===Q.courseId),te=await G(be,de?.nickname||"Student",ke?.title||"Course");try{const re=await(await fetch(te)).blob(),K=new File([re],`certificate-${he}.pdf`,{type:"application/pdf"}),ne=`certificates/${be.id}/${K.name}`,{data:pe,error:je}=await B.storage.from("courses").upload(ne,K);if(je)throw je;await B.database.from("certificates").update({certificate_url:pe.url}).eq("id",be.id),URL.revokeObjectURL(te)}catch(O){console.warn("Failed to upload certificate PDF:",O)}await B.database.from("notifications").insert([{user_id:Q.userId,type:"certificate",title:"Certificate Issued",message:`Your certificate for ${ke?.title||"course completion"} has been issued.`,related_id:be.id}]),await Ri(Q.userId,{type:"certificate",subject:"Certificate Issued - Christian Leadership Movement",message:`Congratulations! Your certificate for ${ke?.title||"course completion"} has been issued. Certificate Number: ${he}`}),j({type:"success",text:"Certificate generated successfully!"}),N(!1),U(),X()}catch(he){console.error("Error generating certificate:",he),j({type:"error",text:he.message||"Failed to generate certificate"})}},R=async Q=>{if(Q.certificate_url)window.open(Q.certificate_url,"_blank");else try{const he=await G(Q,Q.user_name||"Student",Q.course_name||"Course");window.open(he,"_blank")}catch(he){console.error("Error generating PDF:",he),j({type:"error",text:"Failed to generate certificate PDF"})}},$=async Q=>{try{if(!Q.certificate_url){j({type:"error",text:"Certificate PDF not available. Please generate it first."});return}await Ri(Q.user_id,{type:"certificate",subject:"Your Certificate - Christian Leadership Movement",message:`Your certificate for ${Q.course_name||"course completion"} is ready. Certificate Number: ${Q.certificate_number}`,html:`<p>Your certificate is ready for download.</p><p><a href="${Q.certificate_url}">Download Certificate</a></p>`}),j({type:"success",text:"Certificate sent to user via email!"})}catch(he){console.error("Error sending certificate:",he),j({type:"error",text:he.message||"Failed to send certificate"})}},q=d.filter(Q=>!t||Q.user_name?.toLowerCase().includes(t.toLowerCase())||Q.course_name?.toLowerCase().includes(t.toLowerCase())||Q.certificate_number.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Certificate Management"}),e.jsx("p",{className:"text-gray-600",children:"Generate and manage course certificates"})]}),e.jsxs(me,{variant:"primary",onClick:()=>N(!0),children:[e.jsx(Dr,{size:20,className:"mr-2"}),"Generate Certificate"]})]}),C&&e.jsx("div",{className:`p-4 rounded-card ${C.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:C.text}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Issued"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:P.totalIssued})]}),e.jsx(Ms,{className:"text-gold",size:32})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:P.thisMonth})]}),e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:P.pending})]}),e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:P.total})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-2xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink",children:"Generate Certificate"}),e.jsx("button",{onClick:()=>{N(!1),U()},className:"text-gray-500 hover:text-gray-700",children:e.jsx(Fr,{size:24})})]}),e.jsxs("form",{onSubmit:D(I),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Select User *"}),e.jsxs("select",{...w("userId",{required:"Please select a user"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select a user..."}),h.map(Q=>e.jsx("option",{value:Q.user_id,children:Q.nickname||"Unknown User"},Q.user_id))]}),z.userId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:z.userId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Select Course"}),e.jsxs("select",{...w("courseId"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"No specific course (General Certificate)"}),p.map(Q=>e.jsx("option",{value:Q.id,children:Q.title},Q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Certificate Number (leave empty for auto-generation)"}),e.jsx("input",{type:"text",...w("certificateNumber"),placeholder:"Auto-generated if empty",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx(me,{type:"button",variant:"outline",onClick:()=>{N(!1),U()},children:"Cancel"}),e.jsx(me,{type:"submit",variant:"primary",children:"Generate Certificate"})]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search certificates...",value:t,onChange:Q=>s(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:r,onChange:Q=>a(Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"issued",children:"Issued"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"revoked",children:"Revoked"})]}),e.jsxs("select",{value:o,onChange:Q=>l(Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Courses"}),p.map(Q=>e.jsx("option",{value:Q.id,children:Q.title},Q.id))]})]})}),e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Course"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Certificate #"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Issued Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:b?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-600",children:"Loading certificates..."})}):q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-600",children:"No certificates found"})}):q.map(Q=>e.jsxs("tr",{className:"hover:bg-muted-gray/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold flex items-center justify-center text-white font-bold mr-3",children:Q.user_name?.charAt(0)||"U"}),e.jsx("span",{className:"font-medium text-navy-ink",children:Q.user_name||"Unknown User"})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Q.course_name||"General Certificate"}),e.jsx("td",{className:"px-6 py-4 text-gray-600 font-mono text-sm",children:Q.certificate_number}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(Q.issued_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${Q.status==="issued"?"bg-green-100 text-green-800":Q.status==="pending"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:Q.status==="issued"?e.jsxs("span",{className:"flex items-center",children:[e.jsx(rt,{size:12,className:"mr-1"}),"Issued"]}):Q.status==="pending"?e.jsxs("span",{className:"flex items-center",children:[e.jsx($r,{size:12,className:"mr-1"}),"Pending"]}):"Revoked"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>R(Q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",title:"Download",children:e.jsx(ci,{size:18})}),e.jsx("button",{onClick:()=>$(Q),className:"p-2 text-green-600 hover:bg-green-50 rounded-card",title:"Send via Email",children:e.jsx(Ic,{size:18})})]})})]},Q.id))})]})})})]})}function o8(){const[t,s]=L.useState(!0),[r,a]=L.useState({totalUsers:0,courseEnrollments:0,certificatesIssued:0,eventAttendance:0,totalDonations:0,totalPayments:0}),[o,l]=L.useState([]),[d,c]=L.useState([]);L.useEffect(()=>{h()},[]);const h=async()=>{s(!0);try{const[p,y,b,x,A,N,P]=await Promise.all([B.database.from("user_profiles").select("*",{count:"exact"}),B.database.from("user_course_progress").select("*",{count:"exact"}),B.database.from("certificates").select("*",{count:"exact"}),B.database.from("event_registrations").select("*",{count:"exact"}),B.database.from("donations").select("amount").eq("status","confirmed"),B.database.from("payments").select("amount").eq("status","confirmed"),B.database.from("courses").select("id, title")]),_={};p.data?.forEach(U=>{const X=U.province||"Unknown";_[X]=(_[X]||0)+1});const C=p.count||0,j=Object.entries(_).map(([U,X])=>({province:U,users:X,percentage:C>0?Math.round(X/C*100):0})).sort((U,X)=>X.users-U.users),w=await Promise.all((P.data||[]).map(async U=>{const{data:X}=await B.database.from("user_course_progress").select("*").eq("course_id",U.id),E=X?.length||0,G=X?.filter(R=>R.progress_percentage>=100).length||0,I=E>0?Math.round(G/E*100):0;return{course:U.title,enrolled:E,completed:G,completionRate:I}})),D=A.data?.reduce((U,X)=>U+parseFloat(X.amount||0),0)||0,z=N.data?.reduce((U,X)=>U+parseFloat(X.amount||0),0)||0;a({totalUsers:p.count||0,courseEnrollments:y.count||0,certificatesIssued:b.count||0,eventAttendance:x.count||0,totalDonations:D,totalPayments:z}),l(j),c(w)}catch(p){console.error("Error fetching analytics:",p)}finally{s(!1)}},f=[{icon:Qt,label:"Total Users",value:r.totalUsers.toString(),change:"",trend:"up",color:"bg-blue-500"},{icon:as,label:"Course Enrollments",value:r.courseEnrollments.toString(),change:"",trend:"up",color:"bg-green-500"},{icon:Ms,label:"Certificates Issued",value:r.certificatesIssued.toString(),change:"",trend:"up",color:"bg-gold"},{icon:ns,label:"Event Attendance",value:r.eventAttendance.toString(),change:"",trend:"up",color:"bg-purple-500"},{icon:fo,label:"Total Donations",value:`R${r.totalDonations.toFixed(2)}`,change:"",trend:"up",color:"bg-pink-500"},{icon:fo,label:"Total Payments",value:`R${r.totalPayments.toFixed(2)}`,change:"",trend:"up",color:"bg-indigo-500"}];return t?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Analytics & Reporting"}),e.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Analytics & Reporting"}),e.jsx("p",{className:"text-gray-600",children:"Track performance and engagement metrics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(p=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`${p.color} w-12 h-12 rounded-card flex items-center justify-center`,children:e.jsx(p.icon,{className:"text-white",size:24})}),p.change&&e.jsxs("span",{className:`text-sm font-medium flex items-center ${p.trend==="up"?"text-green-600":"text-red-600"}`,children:[e.jsx(Ul,{size:16,className:"mr-1"}),p.change]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:p.label}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:p.value})]},p.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Users by Province"}),o.length===0?e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No province data available"}):e.jsx("div",{className:"space-y-4",children:o.map(p=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:p.province}),e.jsx("span",{className:"text-sm font-medium text-navy-ink",children:p.users})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-full bg-gold rounded-full",style:{width:`${p.percentage}%`}})})]},p.province))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"User Growth"}),e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsx("p",{children:"Chart visualization coming soon"})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Course Performance"}),d.length===0?e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No course data available"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Course"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Enrolled"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Completed"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Completion Rate"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map((p,y)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-navy-ink font-medium",children:p.course}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:p.enrolled}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:p.completed}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`font-medium ${p.completionRate>=70?"text-green-600":p.completionRate>=50?"text-amber-600":"text-red-600"}`,children:[p.completionRate,"%"]})})]},y))})]})})]})]})}function l8(){const[t,s]=L.useState("email"),[r,a]=L.useState(!0),[o,l]=L.useState(!1),[d,c]=L.useState([]),[h,f]=L.useState([]),[p,y]=L.useState([]),[b,x]=L.useState([]),[A,N]=L.useState({totalNotifications:0,unreadNotifications:0,totalUsers:0}),[P,_]=L.useState(null),{register:C,handleSubmit:j,formState:{errors:w},reset:D,watch:z}=hn({defaultValues:{recipientType:"all",specificUsers:[],subject:"",message:""}}),U=z("recipientType");L.useEffect(()=>{X()},[]);const X=async()=>{a(!0);try{const{data:G,error:I}=await B.database.from("notifications").select(`
          *,
          users!notifications_user_id_fkey(nickname)
        `).order("created_at",{ascending:!1}).limit(50);I&&console.error("Error fetching notifications:",I);const R=(G||[]).map(te=>({id:te.id,user_id:te.user_id,type:te.type,title:te.title,message:te.message,read:te.read,created_at:te.created_at,user_name:te.users?.nickname||"Unknown"}));c(R);const{data:$,error:q}=await B.database.from("user_profiles").select(`
          user_id,
          users!inner(id, nickname, avatar_url)
        `).order("created_at",{ascending:!1});q&&console.error("Error fetching users:",q);const Q=($||[]).map(te=>({id:te.user_id,user_id:te.user_id,nickname:te.users?.nickname||"Unknown",phone:null})),he=Q.map(te=>te.user_id);if(he.length>0){const{data:te}=await B.database.from("user_profiles").select("user_id, phone").in("user_id",he),O=new Map(te?.map(re=>[re.user_id,re.phone])||[]);Q.forEach(re=>{re.phone=O.get(re.user_id)||null})}f(Q);const{data:be}=await B.database.from("courses").select("id, title").order("title");y(be||[]);const{data:V}=await B.database.from("events").select("id, title, event_date").gte("event_date",new Date().toISOString()).order("event_date");x(V||[]);const de=R.length,ke=R.filter(te=>!te.read).length;N({totalNotifications:de,unreadNotifications:ke,totalUsers:Q.length})}catch(G){console.error("Error fetching communication data:",G),_({type:"error",text:"Failed to load data"})}finally{a(!1)}},E=async G=>{l(!0),_(null);try{let I=[];switch(G.recipientType){case"all":I=h.map(be=>be.user_id);break;case"specific":I=G.specificUsers;break;case"course":const{data:q}=await B.database.from("user_course_progress").select("user_id").eq("course_id",G.courseId);I=q?.map(be=>be.user_id)||[];break;case"event":const{data:Q}=await B.database.from("event_registrations").select("user_id").eq("event_id",G.eventId);I=Q?.map(be=>be.user_id)||[];break;case"admins":const{data:he}=await B.database.from("user_profiles").select("user_id").in("role",["admin","super_admin"]);I=he?.map(be=>be.user_id)||[];break}if(I.length===0){_({type:"error",text:"No recipients selected"}),l(!1);return}const R=I.map(q=>({user_id:q,type:"system",title:G.subject||"System Notification",message:G.message,read:!1})),{error:$}=await B.database.from("notifications").insert(R);if($)throw $;if(t==="email")for(const q of I)try{await Ri(q,{type:"system",subject:G.subject||"Notification from CLM",message:G.message})}catch(Q){console.warn(`Failed to send email to user ${q}:`,Q)}_({type:"success",text:`Successfully sent ${t==="email"?"email":"notification"} to ${I.length} recipient(s)`}),D(),X()}catch(I){console.error("Error sending message:",I),_({type:"error",text:I.message||"Failed to send message"})}finally{l(!1)}};return r?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Communication Tools"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Communication Tools"}),e.jsx("p",{className:"text-gray-600",children:"Send messages and notifications to users"})]}),P&&e.jsx("div",{className:`p-4 rounded-card ${P.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:P.text}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(vn,{className:"text-blue-500",size:32})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Notifications"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:A.totalNotifications})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Zr,{className:"text-green-500",size:32})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Unread Notifications"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:A.unreadNotifications})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Qt,{className:"text-purple-500",size:32})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:A.totalUsers})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Compose Message"}),e.jsxs("form",{onSubmit:j(E),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Message Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>s("email"),className:`flex-1 p-3 rounded-card border-2 transition-colors ${t==="email"?"border-gold bg-gold/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(vn,{className:"mx-auto mb-2",size:24}),e.jsx("span",{className:"text-sm font-medium",children:"Email & Notification"})]}),e.jsxs("button",{type:"button",onClick:()=>s("notification"),className:`flex-1 p-3 rounded-card border-2 transition-colors ${t==="notification"?"border-gold bg-gold/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Zr,{className:"mx-auto mb-2",size:24}),e.jsx("span",{className:"text-sm font-medium",children:"Notification Only"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Recipients"}),e.jsxs("select",{...C("recipientType",{required:"Please select recipient type"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"admins",children:"Admins Only"}),e.jsx("option",{value:"specific",children:"Specific Users"}),e.jsx("option",{value:"course",children:"Course Participants"}),e.jsx("option",{value:"event",children:"Event Registrants"})]})]}),U==="specific"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Select Users"}),e.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-card p-2",children:h.map(G=>e.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[e.jsx("input",{type:"checkbox",value:G.user_id,...C("specificUsers"),className:"rounded"}),e.jsx("span",{className:"text-sm",children:G.nickname||"Unknown User"})]},G.user_id))})]}),U==="course"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Select Course"}),e.jsxs("select",{...C("courseId",{required:U==="course"?"Please select a course":!1}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select a course..."}),p.map(G=>e.jsx("option",{value:G.id,children:G.title},G.id))]})]}),U==="event"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Select Event"}),e.jsxs("select",{...C("eventId",{required:U==="event"?"Please select an event":!1}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select an event..."}),b.map(G=>e.jsxs("option",{value:G.id,children:[G.title," - ",new Date(G.event_date).toLocaleDateString()]},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Subject"}),e.jsx("input",{type:"text",...C("subject",{required:"Subject is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Enter message subject..."}),w.subject&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.subject.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Message"}),e.jsx("textarea",{rows:8,...C("message",{required:"Message is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Compose your message..."}),w.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.message.message})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(me,{type:"button",variant:"outline",onClick:()=>D(),children:"Clear"}),e.jsxs(me,{type:"submit",variant:"primary",disabled:o,children:[e.jsx(Ic,{size:20,className:"mr-2"}),o?"Sending...":"Send Message"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Recent Notifications"}),e.jsx(me,{variant:"outline",size:"sm",onClick:X,children:"Refresh"})]}),d.length===0?e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No notifications sent yet"}):e.jsx("div",{className:"space-y-3",children:d.map(G=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-muted-gray rounded-card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[G.type==="email"||G.type==="system"?e.jsx(vn,{className:"text-blue-500",size:24}):e.jsx(Zr,{className:"text-green-500",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-navy-ink",children:G.title}),e.jsx("p",{className:"text-sm text-gray-600",children:G.message}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["To: ",G.user_name,"  ",new Date(G.created_at).toLocaleString(),G.read&&e.jsx("span",{className:"ml-2 text-green-600",children:" Read"})]})]})]})},G.id))})]})]})}function c8(){const[t,s]=L.useState(!0),[r,a]=L.useState(!1),[o,l]=L.useState(null),{register:d,handleSubmit:c,formState:{errors:h},reset:f}=hn({defaultValues:{organizationName:"Christian Leadership Movement",contactEmail:"kenstraining04@gmail.com",phoneNumber:"073 204 7642",emailNotifications:!0,smsAlerts:!0,weeklyReports:!1,approvalWorkflow:"single",certificateTemplate:"template_a",defaultLanguage:"english",timeZone:"SAST"}});L.useEffect(()=>{p()},[]);const p=async()=>{s(!0);try{const{data:b}=await B.database.from("content_sections").select("*").eq("section_type","organization_info").maybeSingle();if(b){const x=JSON.parse(b.content||"{}");f({organizationName:x.organizationName||"Christian Leadership Movement",contactEmail:x.contactEmail||"kenstraining04@gmail.com",phoneNumber:x.phoneNumber||"073 204 7642",emailNotifications:x.emailNotifications!==!1,smsAlerts:x.smsAlerts!==!1,weeklyReports:x.weeklyReports===!0,approvalWorkflow:x.approvalWorkflow||"single",certificateTemplate:x.certificateTemplate||"template_a",defaultLanguage:x.defaultLanguage||"english",timeZone:x.timeZone||"SAST"})}}catch(b){console.error("Error fetching settings:",b)}finally{s(!1)}},y=async b=>{a(!0),l(null);try{const x={organizationName:b.organizationName,contactEmail:b.contactEmail,phoneNumber:b.phoneNumber,emailNotifications:b.emailNotifications,smsAlerts:b.smsAlerts,weeklyReports:b.weeklyReports,approvalWorkflow:b.approvalWorkflow,certificateTemplate:b.certificateTemplate,defaultLanguage:b.defaultLanguage,timeZone:b.timeZone},{data:A}=await B.database.from("content_sections").select("id").eq("section_type","organization_info").maybeSingle();if(A){const{error:N}=await B.database.from("content_sections").update({content:JSON.stringify(x),updated_at:new Date().toISOString()}).eq("id",A.id);if(N)throw N}else{const{error:N}=await B.database.from("content_sections").insert([{section_type:"organization_info",title:"Organization Information",content:JSON.stringify(x)}]);if(N)throw N}l({type:"success",text:"Settings saved successfully!"})}catch(x){console.error("Error saving settings:",x),l({type:"error",text:x.message||"Failed to save settings"})}finally{a(!1)}};return t?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage system configuration and preferences"})]}),o&&e.jsx("div",{className:`p-4 rounded-card ${o.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:o.text}),e.jsxs("form",{onSubmit:c(y),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(rm,{className:"text-blue-500",size:24}),e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"General Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Organization Name"}),e.jsx("input",{type:"text",...d("organizationName",{required:"Organization name is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),h.organizationName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.organizationName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Contact Email"}),e.jsx("input",{type:"email",...d("contactEmail",{required:"Contact email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),h.contactEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.contactEmail.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",...d("phoneNumber",{required:"Phone number is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),h.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.phoneNumber.message})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(sl,{className:"text-purple-500",size:24}),e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Notification Settings"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center justify-between p-4 bg-muted-gray rounded-card cursor-pointer",children:[e.jsx("span",{className:"text-navy-ink",children:"Email notifications for new applications"}),e.jsx("input",{type:"checkbox",...d("emailNotifications"),className:"w-5 h-5"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-muted-gray rounded-card cursor-pointer",children:[e.jsx("span",{className:"text-navy-ink",children:"SMS alerts for urgent matters"}),e.jsx("input",{type:"checkbox",...d("smsAlerts"),className:"w-5 h-5"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-muted-gray rounded-card cursor-pointer",children:[e.jsx("span",{className:"text-navy-ink",children:"Weekly summary reports"}),e.jsx("input",{type:"checkbox",...d("weeklyReports"),className:"w-5 h-5"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(G_,{className:"text-green-500",size:24}),e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"System Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Application Approval Workflow"}),e.jsxs("select",{...d("approvalWorkflow",{required:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"single",children:"Single Approval"}),e.jsx("option",{value:"two_stage",children:"Two-Stage Approval"}),e.jsx("option",{value:"three_stage",children:"Three-Stage Approval"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Certificate Template"}),e.jsxs("select",{...d("certificateTemplate",{required:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"template_a",children:"Template A"}),e.jsx("option",{value:"template_b",children:"Template B"}),e.jsx("option",{value:"template_c",children:"Template C"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(qu,{className:"text-amber-500",size:24}),e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Regional Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Default Language"}),e.jsxs("select",{...d("defaultLanguage",{required:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"english",children:"English"}),e.jsx("option",{value:"afrikaans",children:"Afrikaans"}),e.jsx("option",{value:"zulu",children:"Zulu"}),e.jsx("option",{value:"xhosa",children:"Xhosa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Time Zone"}),e.jsx("select",{...d("timeZone",{required:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:e.jsx("option",{value:"SAST",children:"South Africa Standard Time (SAST)"})})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(me,{type:"submit",variant:"primary",size:"lg",disabled:r,children:[e.jsx(li,{size:20,className:"mr-2"}),r?"Saving...":"Save All Changes"]})})]})]})}function d8(){const t=cs(),[s]=Iu(),{user:r,isLoaded:a}=Mt(),o=s.get("type");return xs.useEffect(()=>{if(a){if(!r){t("/login?redirect=/apply");return}if(o==="membership"){t("/apply/membership");return}if(o==="bible_school"||o==="bible-school"){t("/apply/bible-school");return}if(o==="short_course"||o==="short-course"){t("/apply/membership",{state:{message:"University of Pretoria courses require CLM membership. Please complete your membership application first."}});return}}},[o,r,a,t]),a?r?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow py-12 px-4 bg-muted-gray",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-navy-ink mb-4",children:"Application Forms"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Choose the application form that applies to you"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-gold/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Qt,{className:"text-gold",size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-2",children:"CLM Membership Application"}),e.jsx("p",{className:"text-gray-600",children:"3-step application form for Christian Leadership Movement membership"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"Personal Information"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"Ministry Involvement"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"Qualifications & References"})]})]}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t("/apply/membership"),children:["Start Membership Application",e.jsx(yn,{className:"ml-2",size:16})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-brand-dark-blue/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(mo,{className:"text-brand-dark-blue",size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-2",children:"Bible School / Ordination Application"}),e.jsx("p",{className:"text-gray-600",children:"5-step application form for Bible School and Ordination programs"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"Personal Information"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"Spiritual Background"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"Leadership Interests"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"Vision & Calling"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(rt,{className:"text-green-500 mr-2 mt-1",size:20}),e.jsx("span",{className:"text-sm text-gray-600",children:"References & Fees"})]})]}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t("/apply/bible-school"),children:["Start Bible School Application",e.jsx(yn,{className:"ml-2",size:16})]})]})]})]})}),e.jsx(un,{})]}):null:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})}const u8=["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","Northern Cape","North West","Western Cape"],h8=["African","Coloured","Indian/Asian","White","Other"];function m8(){const t=cs(),{user:s,isLoaded:r}=Mt(),[a,o]=L.useState(1),[l,d]=L.useState(!1),[c,h]=L.useState(null),[f,p]=L.useState(null),[y,b]=L.useState([]),[x,A]=L.useState(""),[N,P]=L.useState(0),{register:_,handleSubmit:C,formState:{errors:j},watch:w,setValue:D,getValues:z}=hn({defaultValues:{declarationDate:new Date().toISOString().split("T")[0],disabilityNone:!1,ministryTypeNotApplicable:!1}}),U=w("disabilityNone"),X=w("disabilitySight")||w("disabilityHearing")||w("disabilitySpeech")||w("disabilityPhysical");L.useEffect(()=>{if(r){if(!s){t("/login?redirect=/apply/membership");return}G(),E()}},[s,r]);const E=async()=>{try{const{data:V,error:de}=await B.database.from("fee_settings").select("amount").eq("fee_type","membership_application").eq("is_active",!0).single();if(de)throw de;V&&P(parseFloat(V.amount)||0)}catch(V){console.error("Error fetching application fee:",V)}};L.useEffect(()=>{const V=setInterval(()=>{I()},15e3);return()=>clearInterval(V)},[w()]);const G=async()=>{try{const{data:V}=await B.database.from("application_drafts").select("*").eq("user_id",s?.id).eq("form_type","membership").maybeSingle();if(V?.form_data){const de=V.form_data;Object.keys(de).forEach(ke=>{D(ke,de[ke])}),V.current_step&&o(V.current_step)}}catch(V){console.error("Error loading draft:",V)}},I=async()=>{if(s)try{const V=z();await B.database.from("application_drafts").upsert({user_id:s.id,form_type:"membership",form_data:V,current_step:a,updated_at:new Date().toISOString()},{onConflict:"user_id,form_type"}),A("Draft saved"),setTimeout(()=>A(""),2e3)}catch(V){console.error("Error saving draft:",V)}},R=V=>{const de=z();if(V===1){if(!de.idNumber||de.idNumber.length!==13||!de.nationality||!de.firstName||de.firstName.length<2||!de.lastName||de.lastName.length<2||!de.dateOfBirth)return!1;const ke=new Date(de.dateOfBirth);return!(new Date().getFullYear()-ke.getFullYear()<16||!de.gender||!de.province||!de.residentialStatus||!de.phone||de.phone.length<10||!de.email||!de.homeLanguage||!de.populationGroup)}return V===2?!!de.primaryIncomeSource:V===3?!(!de.referenceFirstName||!de.referenceLastName||!de.referenceContact||!de.referenceEmail||!de.signature||!f):!0},$=()=>{R(a)?(I(),o(V=>Math.min(V+1,3))):h("Please complete all required fields before proceeding")},q=()=>{o(V=>Math.max(V-1,1))},Q=async(V,de)=>{try{if(V.size>10*1024*1024)throw new Error("File size must be less than 10MB");if(!s)throw new Error("User must be logged in to upload files");const ke=await _m("applications",de,V,s.id,s.email||null,s.name||null);return{url:ke.url,key:ke.key}}catch(ke){return console.error("Upload error:",ke),h(ke.message||"Error uploading file"),null}},he=async V=>{if(!s||!f){h("Please upload your ID copy");return}d(!0),h(null);try{const de=await Q(f,`${s.id}/membership/id_${Date.now()}_${f.name}`);if(!de)return;const ke=[];for(const je of y){const _e=await Q(je,`${s.id}/membership/additional_${Date.now()}_${je.name}`);_e&&ke.push(_e.url)}const te=[];V.ministryTypeLocalChurch&&te.push("Local Church"),V.ministryTypeTeaching&&te.push("Teaching Institution"),V.ministryTypeCounselling&&te.push("Counselling"),V.ministryTypeYouth&&te.push("Youth/Child"),V.ministryTypeOther&&te.push(V.ministryTypeOtherText||"Other"),V.ministryTypeNotApplicable&&te.push("Not Applicable");const O=[];V.disabilitySight&&O.push("Sight"),V.disabilityHearing&&O.push("Hearing"),V.disabilitySpeech&&O.push("Speech"),V.disabilityPhysical&&O.push("Physical"),V.disabilityOther&&O.push(`Other: ${V.disabilityOther}`);const re={user_id:s.id,program_type:"membership",full_name:`${V.firstName} ${V.lastName}`,email:V.email,phone:V.phone,id_number:V.idNumber,nationality:V.nationality,title:V.title,first_name:V.firstName,middle_name:V.middleName,last_name:V.lastName,initials:V.initials,preferred_name:V.preferredName,date_of_birth:V.dateOfBirth,gender:V.gender,province:V.province,residential_status:V.residentialStatus,home_language:V.homeLanguage,population_group:V.populationGroup,city:V.city,postal_code:V.postalCode,disabilities:O,current_ministry_name:V.currentMinistryName,denomination:V.denomination,ministry_types:te,ministry_position:V.ministryPosition,ministry_website:V.ministryWebsite,years_part_time:V.yearsPartTime?parseInt(V.yearsPartTime):null,years_full_time:V.yearsFullTime?parseInt(V.yearsFullTime):null,primary_income_source:V.primaryIncomeSource,primary_income_other:V.primaryIncomeOther,high_school:V.highSchool,highest_ministry_qualification:V.highestMinistryQualification,highest_other_qualification:V.highestOtherQualification,other_training:V.otherTraining,reference_first_name:V.referenceFirstName,reference_last_name:V.referenceLastName,reference_contact:V.referenceContact,reference_email:V.referenceEmail,reference_title:V.referenceTitle,signature:V.signature,declaration_date:V.declarationDate,id_passport_url:de.url,id_passport_key:de.key,additional_documents_url:ke,status:"pending",payment_status:"pending"},{data:K,error:ne}=await B.database.from("applications").insert([re]).select().single();if(ne)throw ne;let pe=null;if(N>0){const{data:je,error:_e}=await B.database.from("payments").insert([{user_id:s.id,application_id:K.id,amount:N,currency:"ZAR",payment_type:"application",status:"pending"}]).select().single();if(_e)throw _e;pe=je.id,await B.database.from("applications").update({payment_id:je.id}).eq("id",K.id)}await B.database.from("notifications").insert([{user_id:s.id,type:"application",title:"Membership Application Submitted",message:N>0?`Your CLM membership application has been submitted. Please complete payment of R${N.toFixed(2)}.`:"Your CLM membership application has been submitted successfully and is pending review.",related_id:K.id}]),await Ri(s.id,{type:"application_submitted",subject:"Membership Application Submitted",message:N>0?`Your CLM membership application has been submitted. Please complete payment of R${N.toFixed(2)}.`:"Your CLM membership application has been submitted successfully."}),await B.database.from("application_drafts").delete().eq("user_id",s.id).eq("form_type","membership"),N>0&&pe?t(`/payment?payment_id=${pe}&return_url=/dashboard/applications`):t("/dashboard/applications")}catch(de){h(de.message||"Failed to submit application")}finally{d(!1)}};if(!r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});if(!s)return null;const be=(a/3*100).toFixed(0);return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow py-12 px-4 bg-muted-gray",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"CLM Membership Application Form"}),e.jsx("p",{className:"text-gray-600",children:"Complete all 3 steps to submit your membership application"}),N>0&&e.jsxs("div",{className:"mt-4 bg-gold/10 border border-gold/20 rounded-card p-4",children:[e.jsxs("p",{className:"text-sm text-navy-ink",children:[e.jsx("strong",{children:"Application Fee:"})," R",N.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Payment will be required after form submission"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-navy-ink",children:["Step ",a," of 3"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[be,"% Complete"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-gold rounded-full transition-all",style:{width:`${be}%`}})})]}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:c}),x&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl mb-6 flex items-center",children:[e.jsx(li,{size:16,className:"mr-2"}),x]}),e.jsxs("form",{onSubmit:C(he),className:"space-y-6",children:[a===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 1: Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"South African ID Number *"}),e.jsx("input",{type:"text",maxLength:13,..._("idNumber",{required:"ID number is required",minLength:{value:13,message:"ID must be exactly 13 digits"},maxLength:{value:13,message:"ID must be exactly 13 digits"},pattern:{value:/^\d+$/,message:"ID must contain only numbers"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"13-digit ID number"}),j.idNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.idNumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Nationality *"}),e.jsx("input",{type:"text",..._("nationality",{required:"Nationality is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.nationality&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.nationality.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Title"}),e.jsxs("select",{..._("title"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Title"}),e.jsx("option",{value:"Pastor",children:"Pastor"}),e.jsx("option",{value:"Bishop",children:"Bishop"}),e.jsx("option",{value:"Mr",children:"Mr"}),e.jsx("option",{value:"Mrs",children:"Mrs"}),e.jsx("option",{value:"Ms",children:"Ms"}),e.jsx("option",{value:"Dr",children:"Dr"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"First Name *"}),e.jsx("input",{type:"text",..._("firstName",{required:"First name is required",minLength:{value:2,message:"First name must be at least 2 characters"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.firstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Middle Name"}),e.jsx("input",{type:"text",..._("middleName"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",..._("lastName",{required:"Last name is required",minLength:{value:2,message:"Last name must be at least 2 characters"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.lastName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Initials"}),e.jsx("input",{type:"text",..._("initials"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Preferred Name"}),e.jsx("input",{type:"text",..._("preferredName"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Date of Birth *"}),e.jsx("input",{type:"date",..._("dateOfBirth",{required:"Date of birth is required",validate:V=>{const de=new Date(V);return new Date().getFullYear()-de.getFullYear()<16?"You must be at least 16 years old":!0}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.dateOfBirth&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.dateOfBirth.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Gender *"}),e.jsxs("select",{..._("gender",{required:"Gender is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),j.gender&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.gender.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Province *"}),e.jsxs("select",{..._("province",{required:"Province is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Province"}),u8.map(V=>e.jsx("option",{value:V,children:V},V))]}),j.province&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.province.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Residential Status *"}),e.jsxs("select",{..._("residentialStatus",{required:"Residential status is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Citizen",children:"Citizen"}),e.jsx("option",{value:"Permanent Resident",children:"Permanent Resident"}),e.jsx("option",{value:"Temporary Resident",children:"Temporary Resident"}),e.jsx("option",{value:"Refugee",children:"Refugee"})]}),j.residentialStatus&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.residentialStatus.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",..._("phone",{required:"Phone number is required",minLength:{value:10,message:"Phone must be at least 10 digits"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",..._("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Home Language *"}),e.jsx("input",{type:"text",..._("homeLanguage",{required:"Home language is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.homeLanguage&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.homeLanguage.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Population Group *"}),e.jsxs("select",{..._("populationGroup",{required:"Population group is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Population Group"}),h8.map(V=>e.jsx("option",{value:V,children:V},V))]}),j.populationGroup&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.populationGroup.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"City"}),e.jsx("input",{type:"text",..._("city"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",..._("postalCode"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Disability Information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("disabilityNone"),onChange:V=>{V.target.checked&&(D("disabilitySight",!1),D("disabilityHearing",!1),D("disabilitySpeech",!1),D("disabilityPhysical",!1))},className:"mr-2"}),e.jsx("span",{children:"None"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("disabilitySight"),disabled:U,className:"mr-2"}),e.jsx("span",{children:"Sight"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("disabilityHearing"),disabled:U,className:"mr-2"}),e.jsx("span",{children:"Hearing"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("disabilitySpeech"),disabled:U,className:"mr-2"}),e.jsx("span",{children:"Speech"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("disabilityPhysical"),disabled:U,className:"mr-2"}),e.jsx("span",{children:"Physical"})]})]}),X&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Other (Please specify)"}),e.jsx("input",{type:"text",..._("disabilityOther"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 2: Ministry Involvement"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Current Ministry Name"}),e.jsx("input",{type:"text",..._("currentMinistryName"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Denomination"}),e.jsx("input",{type:"text",..._("denomination"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Ministry Type *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("ministryTypeLocalChurch"),className:"mr-2"}),e.jsx("span",{children:"Local Church"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("ministryTypeTeaching"),className:"mr-2"}),e.jsx("span",{children:"Teaching Institution"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("ministryTypeCounselling"),className:"mr-2"}),e.jsx("span",{children:"Counselling"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("ministryTypeYouth"),className:"mr-2"}),e.jsx("span",{children:"Youth/Child"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("ministryTypeOther"),className:"mr-2"}),e.jsx("span",{children:"Other"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",..._("ministryTypeNotApplicable"),className:"mr-2"}),e.jsx("span",{children:"Not Applicable"})]})]}),w("ministryTypeOther")&&e.jsx("input",{type:"text",..._("ministryTypeOtherText"),placeholder:"Please specify",className:"w-full mt-2 px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Ministry Position"}),e.jsx("input",{type:"text",..._("ministryPosition"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Ministry Website"}),e.jsx("input",{type:"url",..._("ministryWebsite",{pattern:{value:/^https?:\/\/.+/,message:"Please enter a valid URL"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.ministryWebsite&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.ministryWebsite.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Years of Part-Time Ministry"}),e.jsx("input",{type:"number",..._("yearsPartTime"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Years of Full-Time Ministry"}),e.jsx("input",{type:"number",..._("yearsFullTime"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Primary Income Source *"}),e.jsxs("select",{..._("primaryIncomeSource",{required:"Primary income source is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Income Source"}),e.jsx("option",{value:"Ministry",children:"Ministry"}),e.jsx("option",{value:"Non-Ministry",children:"Non-Ministry"}),e.jsx("option",{value:"None",children:"None"}),e.jsx("option",{value:"Other",children:"Other"})]}),j.primaryIncomeSource&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.primaryIncomeSource.message}),w("primaryIncomeSource")==="Other"&&e.jsx("input",{type:"text",..._("primaryIncomeOther"),placeholder:"Please specify",className:"w-full mt-2 px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]})]}),a===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 3: Qualifications & References"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"High School"}),e.jsx("input",{type:"text",..._("highSchool"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Highest Ministry Qualification"}),e.jsx("input",{type:"text",..._("highestMinistryQualification"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Highest Other Qualification"}),e.jsx("input",{type:"text",..._("highestOtherQualification"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Other Training"}),e.jsx("textarea",{..._("otherTraining"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Reference Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Reference First Name *"}),e.jsx("input",{type:"text",..._("referenceFirstName",{required:"Reference first name is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.referenceFirstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.referenceFirstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Reference Last Name *"}),e.jsx("input",{type:"text",..._("referenceLastName",{required:"Reference last name is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.referenceLastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.referenceLastName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Reference Contact Number *"}),e.jsx("input",{type:"tel",..._("referenceContact",{required:"Reference contact is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.referenceContact&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.referenceContact.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Reference Email Address *"}),e.jsx("input",{type:"email",..._("referenceEmail",{required:"Reference email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.referenceEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.referenceEmail.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Reference Title"}),e.jsx("input",{type:"text",..._("referenceTitle"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Document Upload"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"ID Copy * (PDF, JPG, JPEG, PNG - Max 10MB)"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:V=>{const de=V.target.files?.[0];if(de){if(de.size>10*1024*1024){h("File size must be less than 10MB");return}p(de)}},className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),f&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ys,{size:16}),e.jsx("span",{children:f.name}),e.jsx("button",{type:"button",onClick:()=>p(null),className:"text-red-500 hover:text-red-700",children:e.jsx(Fr,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Additional Certificates/Documents (Optional - Max 10MB each)"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",multiple:!0,onChange:V=>{const de=Array.from(V.target.files||[]);b(ke=>[...ke,...de])},className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),y.length>0&&e.jsx("div",{className:"mt-2 space-y-2",children:y.map((V,de)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ys,{size:16}),e.jsx("span",{children:V.name}),e.jsx("button",{type:"button",onClick:()=>b(ke=>ke.filter((te,O)=>O!==de)),className:"text-red-500 hover:text-red-700",children:e.jsx(Fr,{size:16})})]},de))})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Declaration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Signature (Type your full name) *"}),e.jsx("input",{type:"text",..._("signature",{required:"Signature is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.signature&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.signature.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Date *"}),e.jsx("input",{type:"date",..._("declarationDate",{required:"Date is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.declarationDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.declarationDate.message})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx(me,{type:"button",variant:"outline",onClick:q,disabled:a===1,children:"Previous"}),a<3?e.jsx(me,{type:"button",variant:"primary",onClick:$,children:"Next"}):e.jsx(me,{type:"submit",variant:"primary",disabled:l,children:l?"Submitting...":"Submit Application"})]})]})]})})}),e.jsx(un,{})]})}const ii={accountName:"Ken's Training Institute",bank:"Standard Bank",accountNumber:"1234567890",branchCode:"123456",branch:"Main Branch",swift:"SBZAJJZ"};function f8(){const t=cs(),{user:s,isLoaded:r}=Mt(),[a,o]=L.useState(1),[l,d]=L.useState(!1),[c,h]=L.useState(null),[f,p]=L.useState(null),[y,b]=L.useState(null),[x,A]=L.useState(""),[N,P]=L.useState({withACRP:0,withoutACRP:0}),{register:_,handleSubmit:C,formState:{errors:j},watch:w,setValue:D,getValues:z,control:U}=hn({defaultValues:{declarationDate:new Date().toISOString().split("T")[0],isBaptized:!1,attendsLocalChurch:!1,servesInMinistry:!1,leadershipRoles:[]}}),{fields:X,append:E,remove:G}=X3({control:U,name:"leadershipRoles"}),I=w("isBaptized"),R=w("attendsLocalChurch"),$=w("servesInMinistry");L.useEffect(()=>{if(r){if(!s){t("/login?redirect=/apply/bible-school");return}Q(),q()}},[s,r]);const q=async()=>{try{const{data:K,error:ne}=await B.database.from("fee_settings").select("fee_type, amount").in("fee_type",["bible_school_with_acrp","bible_school_without_acrp"]).eq("is_active",!0);if(ne)throw ne;if(K){const pe={};K.forEach(je=>{je.fee_type==="bible_school_with_acrp"?pe.withACRP=parseFloat(je.amount)||0:je.fee_type==="bible_school_without_acrp"&&(pe.withoutACRP=parseFloat(je.amount)||0)}),P(pe)}}catch(K){console.error("Error fetching registration fees:",K)}};L.useEffect(()=>{const K=setInterval(()=>{he()},15e3);return()=>clearInterval(K)},[w()]);const Q=async()=>{try{const{data:K}=await B.database.from("application_drafts").select("*").eq("user_id",s?.id).eq("form_type","bible_school").maybeSingle();if(K?.form_data){const ne=K.form_data;Object.keys(ne).forEach(pe=>{pe==="leadershipRoles"&&Array.isArray(ne[pe])?ne[pe].forEach(je=>E(je)):D(pe,ne[pe])}),K.current_step&&o(K.current_step)}}catch(K){console.error("Error loading draft:",K)}},he=async()=>{if(s)try{const K=z();await B.database.from("application_drafts").upsert({user_id:s.id,form_type:"bible_school",form_data:K,current_step:a,updated_at:new Date().toISOString()},{onConflict:"user_id,form_type"}),A("Draft saved"),setTimeout(()=>A(""),2e3)}catch(K){console.error("Error saving draft:",K)}},be=K=>{const ne=z();return K===1?!(!ne.fullName||ne.fullName.length<2||!ne.idNumber||ne.idNumber.length!==13||!ne.gender||!ne.maritalStatus||!ne.contactNumber||ne.contactNumber.length<10||!ne.email||!ne.physicalAddress||ne.physicalAddress.length<10||!ne.country||ne.country.length<2):K===2?!0:K===3?!(!ne.whyJoinBibleSchool||ne.whyJoinBibleSchool.length<50):K===4?!(!ne.callingStatement||ne.callingStatement.length<100):K===5?!(!ne.refereeName||!ne.refereeContact||!ne.relationshipToReferee||!ne.registrationOption||!ne.signature||!f):!0},V=()=>{be(a)?(he(),o(K=>Math.min(K+1,5))):h("Please complete all required fields before proceeding")},de=()=>{o(K=>Math.max(K-1,1))},ke=()=>{const K=`Account Name: ${ii.accountName}
Bank: ${ii.bank}
Account Number: ${ii.accountNumber}
Branch Code: ${ii.branchCode}
Branch: ${ii.branch}
SWIFT: ${ii.swift}`;navigator.clipboard.writeText(K),A("Bank details copied to clipboard"),setTimeout(()=>A(""),2e3)},te=async(K,ne)=>{try{if(K.size>10*1024*1024)throw new Error("File size must be less than 10MB");if(!s)throw new Error("User must be logged in to upload files");const pe=await _m("applications",ne,K,s.id,s.email||null,s.name||null);return{url:pe.url,key:pe.key}}catch(pe){return console.error("Upload error:",pe),h(pe.message||"Error uploading file"),null}},O=async K=>{if(!s||!f){h("Please upload your ID copy");return}d(!0),h(null);try{const ne=await te(f,`${s.id}/bible_school/id_${Date.now()}_${f.name}`);if(!ne)return;let pe=null;if(y&&(pe=await te(y,`${s.id}/bible_school/payment_${Date.now()}_${y.name}`),!pe))return;const je={user_id:s.id,program_type:"bible_school",full_name:K.fullName,email:K.email,phone:K.contactNumber,id_number:K.idNumber,gender:K.gender,marital_status:K.maritalStatus,address:K.physicalAddress,country:K.country,date_accepted_christ:K.dateAcceptedChrist,is_baptized:K.isBaptized,baptism_date:K.baptismDate,attends_local_church:K.attendsLocalChurch,church_name:K.churchName,denomination:K.denomination,pastor_name:K.pastorName,serves_in_ministry:K.servesInMinistry,ministry_service_description:K.ministryServiceDescription,why_join_bible_school:K.whyJoinBibleSchool,leadership_roles:K.leadershipRoles,previous_leadership_experience:K.previousLeadershipExperience,calling_statement:K.callingStatement,leadership_ambitions:K.leadershipAmbitions,referee_name:K.refereeName,referee_contact:K.refereeContact,relationship_to_referee:K.relationshipToReferee,registration_option:K.registrationOption,signature:K.signature,declaration_date:K.declarationDate,id_passport_url:ne.url,id_passport_key:ne.key,payment_proof_url:pe?.url||null,payment_proof_key:pe?.key||null,status:"pending",payment_status:"pending"},{data:_e,error:ue}=await B.database.from("applications").insert([je]).select().single();if(ue)throw ue;const xe=K.registrationOption==="with_acrp"?N.withACRP:N.withoutACRP;let Ie=null;if(xe>0){const He=y?"confirmed":"pending",{data:Je,error:De}=await B.database.from("payments").insert([{user_id:s.id,application_id:_e.id,amount:xe,currency:"ZAR",payment_type:"application",status:He}]).select().single();if(De)throw De;Ie=Je.id,await B.database.from("applications").update({payment_id:Je.id,payment_status:He}).eq("id",_e.id)}await B.database.from("notifications").insert([{user_id:s.id,type:"application",title:"Bible School Application Submitted",message:"Your Bible School application has been submitted successfully and is pending review.",related_id:_e.id}]),await Ri(s.id,{type:"application_submitted",subject:"Bible School Application Submitted",message:"Your Bible School application has been submitted successfully."}),await B.database.from("application_drafts").delete().eq("user_id",s.id).eq("form_type","bible_school"),xe>0&&!y&&Ie?t(`/payment?payment_id=${Ie}&return_url=/dashboard/applications`):t("/dashboard/applications")}catch(ne){h(ne.message||"Failed to submit application")}finally{d(!1)}};if(!r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});if(!s)return null;const re=(a/5*100).toFixed(0);return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow py-12 px-4 bg-muted-gray",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Bible School / Ordination Application Form"}),e.jsx("p",{className:"text-gray-600",children:"Complete all 5 steps to submit your application"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-navy-ink",children:["Step ",a," of 5"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[re,"% Complete"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-gold rounded-full transition-all",style:{width:`${re}%`}})})]}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:c}),x&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl mb-6 flex items-center",children:[x.includes("Bank details")?e.jsx(em,{size:16,className:"mr-2"}):e.jsx(li,{size:16,className:"mr-2"}),x]}),e.jsxs("form",{onSubmit:C(O),className:"space-y-6",children:[a===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 1: Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",..._("fullName",{required:"Full name is required",minLength:{value:2,message:"Full name must be at least 2 characters"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.fullName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.fullName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"ID Number *"}),e.jsx("input",{type:"text",maxLength:13,..._("idNumber",{required:"ID number is required",minLength:{value:13,message:"ID must be exactly 13 digits"},maxLength:{value:13,message:"ID must be exactly 13 digits"},pattern:{value:/^\d+$/,message:"ID must contain only numbers"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"13-digit ID number"}),j.idNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.idNumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Gender *"}),e.jsxs("select",{..._("gender",{required:"Gender is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),j.gender&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.gender.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Marital Status *"}),e.jsxs("select",{..._("maritalStatus",{required:"Marital status is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Divorced",children:"Divorced"}),e.jsx("option",{value:"Widowed",children:"Widowed"})]}),j.maritalStatus&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.maritalStatus.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Contact Number *"}),e.jsx("input",{type:"tel",..._("contactNumber",{required:"Contact number is required",minLength:{value:10,message:"Contact number must be at least 10 digits"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.contactNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.contactNumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",..._("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.email.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Physical Address *"}),e.jsx("textarea",{..._("physicalAddress",{required:"Physical address is required",minLength:{value:10,message:"Address must be at least 10 characters"}}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.physicalAddress&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.physicalAddress.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Country *"}),e.jsx("input",{type:"text",..._("country",{required:"Country is required",minLength:{value:2,message:"Country must be at least 2 characters"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.country&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.country.message})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 2: Spiritual Background"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Date You Accepted Christ"}),e.jsx("input",{type:"date",..._("dateAcceptedChrist"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",..._("isBaptized"),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-navy-ink",children:"Baptized"})]}),I&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Baptism Date"}),e.jsx("input",{type:"date",..._("baptismDate"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",..._("attendsLocalChurch"),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-navy-ink",children:"Attends Local Church"})]}),R&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Church Name"}),e.jsx("input",{type:"text",..._("churchName"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Denomination"}),e.jsx("input",{type:"text",..._("denomination"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Pastor Name"}),e.jsx("input",{type:"text",..._("pastorName"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",..._("servesInMinistry"),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-navy-ink",children:"Serves in Ministry"})]}),$&&e.jsxs("div",{className:"ml-6",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Ministry Service Description"}),e.jsx("textarea",{..._("ministryServiceDescription"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]})]})]}),a===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 3: Leadership Interests"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Why Join Bible School? *"}),e.jsx("textarea",{..._("whyJoinBibleSchool",{required:"This field is required",minLength:{value:50,message:"Please provide at least 50 characters"}}),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Please provide a detailed explanation (minimum 50 characters)"}),j.whyJoinBibleSchool&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.whyJoinBibleSchool.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Leadership Roles"}),X.map((K,ne)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-300 rounded-card",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Role Title"}),e.jsx("input",{type:"text",..._(`leadershipRoles.${ne}.title`),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:()=>G(ne),className:"text-red-500 hover:text-red-700",children:e.jsx(zs,{size:20})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Role Description"}),e.jsx("textarea",{..._(`leadershipRoles.${ne}.description`),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]},K.id)),e.jsxs(me,{type:"button",variant:"outline",onClick:()=>E({title:"",description:""}),className:"mb-4",children:[e.jsx(Dr,{size:16,className:"mr-2"}),"Add Leadership Role"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Previous Leadership Experience"}),e.jsx("textarea",{..._("previousLeadershipExperience"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),a===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 4: Vision & Calling"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Calling Statement *"}),e.jsx("textarea",{..._("callingStatement",{required:"Calling statement is required",minLength:{value:100,message:"Please provide at least 100 characters"}}),rows:8,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Please describe your calling and ministry vision (minimum 100 characters)"}),j.callingStatement&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.callingStatement.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Leadership Ambitions"}),e.jsx("textarea",{..._("leadershipAmbitions"),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]})]}),a===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink border-b pb-2",children:"Step 5: References & Fees"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Reference Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Referee Name *"}),e.jsx("input",{type:"text",..._("refereeName",{required:"Referee name is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.refereeName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.refereeName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Referee Contact Number *"}),e.jsx("input",{type:"tel",..._("refereeContact",{required:"Referee contact is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.refereeContact&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.refereeContact.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Relationship to Referee *"}),e.jsx("input",{type:"text",..._("relationshipToReferee",{required:"Relationship is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.relationshipToReferee&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.relationshipToReferee.message})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Registration Fees"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-card cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",..._("registrationOption",{required:"Please select a registration option"}),value:"with_acrp",className:"mr-3"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-navy-ink",children:"Option 1: With ACRP Registration"}),e.jsxs("span",{className:"text-gold font-semibold ml-2",children:["R ",N.withACRP.toFixed(2)]})]})]}),e.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-card cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",..._("registrationOption"),value:"without_acrp",className:"mr-3"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-navy-ink",children:"Option 2: Without ACRP Registration"}),e.jsxs("span",{className:"text-gold font-semibold ml-2",children:["R ",N.withoutACRP.toFixed(2)]})]})]}),j.registrationOption&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.registrationOption.message})]}),e.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-card p-4",children:e.jsx("p",{className:"text-sm text-gray-700",children:"You can either upload proof of bank payment below, or pay online after form submission."})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Bank Details for Payment"}),e.jsxs("div",{className:"bg-muted-gray p-6 rounded-card",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Account Name:"}),e.jsx("span",{children:ii.accountName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Bank:"}),e.jsx("span",{children:ii.bank})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Account Number:"}),e.jsx("span",{children:ii.accountNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Branch Code:"}),e.jsx("span",{children:ii.branchCode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Branch:"}),e.jsx("span",{children:ii.branch})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"SWIFT:"}),e.jsx("span",{children:ii.swift})]})]}),e.jsxs(me,{type:"button",variant:"outline",onClick:ke,className:"mt-4",children:[e.jsx(em,{size:16,className:"mr-2"}),"Copy Bank Details"]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Document Upload"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"ID Copy * (PDF, JPG, JPEG, PNG - Max 10MB)"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:K=>{const ne=K.target.files?.[0];if(ne){if(ne.size>10*1024*1024){h("File size must be less than 10MB");return}p(ne)}},className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),f&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ys,{size:16}),e.jsx("span",{children:f.name}),e.jsx("button",{type:"button",onClick:()=>p(null),className:"text-red-500 hover:text-red-700",children:e.jsx(Fr,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Proof of Bank Payment (Optional - PDF, JPG, JPEG, PNG - Max 10MB)"}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"If you've already paid via bank transfer, upload proof here. Otherwise, you can pay online after submission."}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:K=>{const ne=K.target.files?.[0];if(ne){if(ne.size>10*1024*1024){h("File size must be less than 10MB");return}b(ne)}},className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),y&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ys,{size:16}),e.jsx("span",{children:y.name}),e.jsx("button",{type:"button",onClick:()=>b(null),className:"text-red-500 hover:text-red-700",children:e.jsx(Fr,{size:16})})]})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-4",children:"Declaration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Signature (Type your full name) *"}),e.jsx("input",{type:"text",..._("signature",{required:"Signature is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.signature&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.signature.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Date *"}),e.jsx("input",{type:"date",..._("declarationDate",{required:"Date is required"}),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),j.declarationDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.declarationDate.message})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx(me,{type:"button",variant:"outline",onClick:de,disabled:a===1,children:"Previous"}),a<5?e.jsx(me,{type:"button",variant:"primary",onClick:V,children:"Next"}):e.jsx(me,{type:"submit",variant:"primary",disabled:l,children:l?"Submitting...":"Submit Application"})]})]})]})})}),e.jsx(un,{})]})}function p8(){const{user:t}=Mt(),s=cs(),[r,a]=L.useState(!1),[o,l]=L.useState(null),[d,c]=L.useState(!1),{register:h,handleSubmit:f,formState:{errors:p}}=hn(),y=async b=>{if(!t){s("/login?redirect=/donations");return}a(!0),l(null);try{const{data:x,error:A}=await B.database.from("donations").insert([{user_id:t.id,amount:b.amount,campaign_name:b.campaign||null,message:b.message||null,anonymous:b.anonymous||!1,status:"pending"}]).select().single();if(A)throw A;const{data:N,error:P}=await B.database.from("payments").insert([{user_id:t.id,amount:b.amount,currency:"ZAR",payment_type:"donation",status:"pending"}]).select().single();if(P)throw P;await B.database.from("donations").update({payment_id:N.id}).eq("id",x.id);const _=parseFloat(b.amount.toString())||0;await B.database.from("notifications").insert([{user_id:t.id,type:"donation",title:"Donation Submitted",message:`Thank you for your donation of R${_.toFixed(2)}. Payment processing...`,related_id:x.id}]),await Ri(t.id,{type:"donation_submitted",subject:"Donation Submitted - Payment Required",message:`Thank you for your donation of R${_.toFixed(2)}. Please complete payment to finalize your donation.`}),c(!0),s(`/payment?payment_id=${N.id}&return_url=/donations`)}catch(x){l(x.message||"Failed to submit donation. Please try again.")}finally{a(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx(qd,{className:"mx-auto text-gold mb-4",size:48}),e.jsx("h1",{className:"text-4xl font-bold text-navy-ink mb-4",children:"Support Our Mission"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Your generous donation helps us develop Christian leaders and transform communities."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-6",children:"Make a Donation"}),o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:o}),d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl mb-4",children:"Thank you for your donation! You will be redirected to complete payment."}),e.jsx(me,{onClick:()=>s("/dashboard"),variant:"primary",children:"Go to Dashboard"})]}):e.jsxs("form",{onSubmit:f(y),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Amount (ZAR) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(fo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"1",...h("amount",{required:"Amount is required",min:{value:1,message:"Minimum donation is R1"}}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"0.00"})]}),p.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.amount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Campaign (Optional)"}),e.jsx("input",{type:"text",...h("campaign"),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"e.g., Leadership Development"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Message (Optional)"}),e.jsx("textarea",{...h("message"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Leave a message of encouragement..."})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",...h("anonymous"),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Make this donation anonymous"})]})}),!t&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-700 px-4 py-3 rounded-xl text-sm",children:["Please ",e.jsx("button",{type:"button",onClick:()=>s("/login"),className:"underline font-medium",children:"log in"})," to make a donation."]}),e.jsx(me,{type:"submit",variant:"primary",className:"w-full",disabled:r||!t,children:r?"Processing...":"Donate Now"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gold/10 rounded-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-4",children:"Why Donate?"}),e.jsxs("ul",{className:"space-y-3 text-gray-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-gold mr-2",children:""}),"Support leadership development programs"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-gold mr-2",children:""}),"Enable accessible theological education"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-gold mr-2",children:""}),"Fund community transformation initiatives"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-gold mr-2",children:""}),"Empower the next generation of leaders"]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-4",children:"Donation Impact"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"R500"}),e.jsx("p",{className:"font-semibold text-navy-ink",children:"Sponsors one student's course materials"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"R1,000"}),e.jsx("p",{className:"font-semibold text-navy-ink",children:"Covers event venue for 50 participants"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"R5,000"}),e.jsx("p",{className:"font-semibold text-navy-ink",children:"Funds a complete leadership training program"})]})]})]})]})]})]})}),e.jsx(un,{})]})}function x8(){const{user:t,isLoaded:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState(!0);L.useEffect(()=>{!s||!t||d()},[t,s]);const d=async()=>{try{const{data:y,error:b}=await B.database.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(b)throw b;a(y||[])}catch(y){console.error("Error fetching notifications:",y)}finally{l(!1)}},c=async y=>{try{await B.database.from("notifications").update({read:!0}).eq("id",y),a(b=>b.map(x=>x.id===y?{...x,read:!0}:x))}catch(b){console.error("Error marking notification as read:",b)}},h=async()=>{try{const y=r.filter(b=>!b.read).map(b=>b.id);if(y.length===0)return;await B.database.from("notifications").update({read:!0}).in("id",y),a(b=>b.map(x=>({...x,read:!0})))}catch(y){console.error("Error marking all as read:",y)}},f=async y=>{try{await B.database.from("notifications").delete().eq("id",y),a(b=>b.filter(x=>x.id!==y))}catch(b){console.error("Error deleting notification:",b)}},p=r.filter(y=>!y.read).length;return!s||!t?e.jsx("div",{className:"text-center py-12",children:"Please log in to view notifications."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Notifications"}),e.jsx("p",{className:"text-gray-600",children:p>0?`${p} unread notification${p>1?"s":""}`:"All caught up!"})]}),p>0&&e.jsx(me,{variant:"outline",onClick:h,children:"Mark All as Read"})]}),o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading notifications..."})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(sl,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No notifications yet"})]}):e.jsx("div",{className:"space-y-4",children:r.map(y=>e.jsx("div",{className:`bg-white p-6 rounded-card shadow-soft border-l-4 ${y.read?"border-gray-300":y.type==="application"?"border-blue-500":y.type==="payment"?"border-green-500":y.type==="event"?"border-purple-500":"border-gold"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-navy-ink",children:y.title}),!y.read&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:y.message}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(y.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[!y.read&&e.jsx("button",{onClick:()=>c(y.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",title:"Mark as read",children:e.jsx(Ec,{size:18})}),e.jsx("button",{onClick:()=>f(y.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-card",title:"Delete",children:e.jsx(Fr,{size:18})})]})]})},y.id))})]})}function g8(){const{user:t,isLoaded:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState({}),[d,c]=L.useState(!0);L.useEffect(()=>{s&&h()},[t,s]);const h=async()=>{try{const p=new Date().toISOString(),{data:y,error:b}=await B.database.from("events").select("*").gte("event_date",p).order("event_date",{ascending:!0});if(b)throw b;if(a(y||[]),t){const{data:x}=await B.database.from("event_registrations").select("event_id").eq("user_id",t.id),A={};x?.forEach(N=>{A[N.event_id]=!0}),l(A)}}catch(p){console.error("Error fetching events:",p)}finally{c(!1)}},f=async p=>{if(!t){alert("Please log in to register for events");return}try{const y=r.find(x=>x.id===p);if(y&&y.capacity){const{data:x}=await B.database.from("event_registrations").select("*",{count:"exact"}).eq("event_id",p);if(x&&x.length>=y.capacity){alert("Event is full");return}}const{error:b}=await B.database.from("event_registrations").insert([{event_id:p,user_id:t.id,status:"registered"}]);if(b)throw b;await B.database.from("notifications").insert([{user_id:t.id,type:"event",title:"Event Registration Confirmed",message:`You have successfully registered for ${y?.title}`,related_id:p}]),l(x=>({...x,[p]:!0})),alert("Successfully registered for event!")}catch(y){alert(y.message||"Failed to register for event")}};return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Upcoming Events"}),e.jsx("p",{className:"text-gray-600",children:"Register for upcoming events and conferences"})]}),d?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading events..."})}):r.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No upcoming events at the moment."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(p=>{const y=new Date(p.event_date),b=o[p.id],x=p.location?.toLowerCase().includes("online")||p.location?.toLowerCase().includes("zoom");return e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[p.image_url&&e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:p.image_url,alt:p.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:p.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:p.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ns,{className:"mr-2",size:16}),e.jsx("span",{children:y.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx($r,{className:"mr-2",size:16}),e.jsx("span",{children:y.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Zl,{className:"mr-2",size:16}),e.jsx("span",{children:p.location||"TBA"}),x&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:"Online"})]}),p.capacity&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Qt,{className:"mr-2",size:16}),e.jsxs("span",{children:["Capacity: ",p.capacity," attendees"]})]})]}),b?e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-card text-center",children:" Registered"}):e.jsx(me,{variant:"primary",className:"w-full",onClick:()=>f(p.id),children:"Register Now"})]})]},p.id)})})]}):e.jsx("div",{className:"text-center py-12",children:"Loading..."})}function y8(){const{user:t,isLoaded:s}=Mt(),r=cs(),[a,o]=L.useState([]),[l,d]=L.useState({}),[c,h]=L.useState(!0),[f,p]=L.useState({}),[y,b]=L.useState({});L.useEffect(()=>{!s||!t||x()},[t,s]);const x=async()=>{try{const{data:A,error:N}=await B.database.from("courses").select("*").order("created_at",{ascending:!1});if(N)throw N;if(o(A||[]),t){const{data:P}=await B.database.from("applications").select("program_id").eq("user_id",t.id).eq("payment_status","confirmed").eq("status","approved"),_={};A?.forEach(D=>{const z=P?.some(U=>U.program_id===D.id)||!1;_[D.id]=z}),p(_);const C={};for(const D of A){const{data:z}=await B.database.from("course_lessons").select("*").eq("course_id",D.id).order("order_index",{ascending:!0}).limit(1);C[D.id]=z||[]}b(C);const{data:j}=await B.database.from("user_course_progress").select("course_id, completed, progress_percentage").eq("user_id",t.id),w={};j?.forEach(D=>{w[D.course_id]||(w[D.course_id]={course_id:D.course_id,completed:D.completed,progress_percentage:D.progress_percentage})}),d(w)}}catch(A){console.error("Error fetching courses:",A)}finally{h(!1)}};return s?t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"My Courses"}),e.jsx("p",{className:"text-gray-600",children:"Access your enrolled courses and track your progress"})]}),c?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading courses..."})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(as,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No courses available at the moment."}),e.jsx(me,{href:"/apply",variant:"primary",children:"Apply for a Program"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(A=>{const N=l[A.id],P=f[A.id];return e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[A.image_url&&e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:A.image_url,alt:A.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink",children:A.title}),!P&&e.jsx(Yr,{className:"text-gray-400",size:20})]}),A.instructor&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Instructor: ",A.instructor]}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:A.description}),N&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-sm font-semibold text-navy-ink",children:[N.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-gold rounded-full transition-all",style:{width:`${N.progress_percentage}%`}})})]}),P?e.jsx(me,{variant:"primary",className:"w-full",onClick:()=>{const _=y[A.id];_&&_.length>0?r(`/dashboard/courses/${A.id}/lessons/${_[0].id}`):r(`/dashboard/courses/${A.id}`)},children:N?.completed?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"mr-2",size:16}),"View Course"]}):e.jsxs(e.Fragment,{children:[e.jsx(Cc,{className:"mr-2",size:16}),"Continue Learning"]})}):e.jsx("div",{className:"bg-amber-50 border border-amber-200 text-amber-700 px-4 py-2 rounded-card text-center text-sm",children:"Payment required to access"})]})]},A.id)})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to view courses."}),e.jsx(me,{href:"/login",variant:"primary",children:"Log In"})]}):e.jsx("div",{className:"text-center py-12",children:"Loading..."})}function v8(){const{courseId:t,lessonId:s}=Mi(),r=cs(),{user:a,isLoaded:o}=Mt(),[l,d]=L.useState(null),[c,h]=L.useState(null),[f,p]=L.useState([]),[y,b]=L.useState(null),[x,A]=L.useState(!0),[N,P]=L.useState(!1);L.useEffect(()=>{!o||!a||!t||_()},[t,s,a,o]);const _=async()=>{try{const{data:w,error:D}=await B.database.from("courses").select("*").eq("id",t).single();if(D)throw D;d(w);const{data:z}=await B.database.from("applications").select("program_id").eq("user_id",a.id).eq("payment_status","confirmed").eq("status","approved").eq("program_id",t);P(z&&z.length>0);const{data:U,error:X}=await B.database.from("course_lessons").select("*").eq("course_id",t).order("order_index",{ascending:!0});if(X)throw X;if(p(U||[]),s){const{data:E,error:G}=await B.database.from("course_lessons").select("*").eq("id",s).single();if(G)throw G;h(E);const{data:I}=await B.database.from("user_course_progress").select("*").eq("user_id",a.id).eq("lesson_id",s).maybeSingle();b(I)}}catch(w){console.error("Error fetching course data:",w)}finally{A(!1)}},C=async()=>{if(!(!a||!c))try{const w={user_id:a.id,course_id:t,lesson_id:c.id,completed:!0,progress_percentage:100,last_accessed_at:new Date().toISOString()};y?await B.database.from("user_course_progress").update(w).eq("id",y.id):await B.database.from("user_course_progress").insert([w]),b({...w,id:y?.id}),await B.database.from("notifications").insert([{user_id:a.id,type:"system",title:"Lesson Completed",message:`You have completed "${c.title}"`,related_id:c.id}])}catch(w){console.error("Error marking lesson as complete:",w)}},j=async w=>{if(!(!a||!c))try{const D={user_id:a.id,course_id:t,lesson_id:c.id,completed:w===100,progress_percentage:w,last_accessed_at:new Date().toISOString()};y?await B.database.from("user_course_progress").update(D).eq("id",y.id):await B.database.from("user_course_progress").insert([D]),b({...D,id:y?.id})}catch(D){console.error("Error updating progress:",D)}};return!o||x?e.jsx("div",{className:"text-center py-12",children:"Loading lesson..."}):N?c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(me,{variant:"outline",onClick:()=>r("/dashboard/courses"),children:[e.jsx(zn,{className:"mr-2",size:16}),"Back to Courses"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink",children:l?.title}),e.jsx("p",{className:"text-gray-600",children:c.title})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[c.video_url&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"relative aspect-video bg-black rounded-card overflow-hidden mb-4",children:e.jsx("video",{src:c.video_url,controls:!0,className:"w-full h-full",onTimeUpdate:w=>{const D=w.currentTarget,z=D.currentTime/D.duration*100;z>0&&j(Math.min(z,100))}})})}),c.meeting_link&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-card p-4 mb-6",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Live Meeting"}),e.jsx("p",{className:"text-gray-600 mb-3",children:"Join the scheduled class meeting:"}),e.jsxs(me,{variant:"primary",onClick:()=>window.open(c.meeting_link,"_blank"),children:[e.jsx(Wl,{className:"mr-2",size:16}),"Join Meeting"]}),c.scheduled_date&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Scheduled: ",new Date(c.scheduled_date).toLocaleString()]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"Lesson Description"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:c.description||"No description available."})]}),c.resources_url&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:"Resources"}),e.jsxs(me,{variant:"outline",onClick:()=>window.open(c.resources_url,"_blank"),children:[e.jsx(ci,{className:"mr-2",size:16}),"Download Resources"]})]}),y&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-sm font-semibold text-navy-ink",children:[y.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-gold rounded-full transition-all",style:{width:`${y.progress_percentage}%`}})})]}),!y?.completed&&e.jsxs(me,{variant:"primary",onClick:C,className:"w-full",children:[e.jsx(rt,{className:"mr-2",size:16}),"Mark as Complete"]}),y?.completed&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-card p-4 text-center",children:[e.jsx(rt,{className:"mx-auto text-green-500 mb-2",size:32}),e.jsx("p",{className:"font-semibold text-green-700",children:"Lesson Completed!"})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-4",children:"Course Lessons"}),e.jsx("div",{className:"space-y-2",children:f.map(w=>e.jsx("button",{onClick:()=>r(`/dashboard/courses/${t}/lessons/${w.id}`),className:`w-full text-left p-4 rounded-card border-2 transition-all ${w.id===c.id?"border-gold bg-gold/10":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-gold font-bold",children:[w.order_index,"."]}),e.jsx("span",{className:"font-medium text-navy-ink",children:w.title})]}),y&&y.lesson_id===w.id&&y.completed&&e.jsx(rt,{className:"text-green-500",size:20})]})},w.id))})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Lesson not found."}),e.jsx(me,{onClick:()=>r("/dashboard/courses"),variant:"primary",children:"Back to Courses"})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"You need to have an approved, paid application to access this course."}),e.jsx(me,{href:"/apply",variant:"primary",children:"Apply Now"})]})}function b8(){const{user:t,isLoaded:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState(!0);L.useEffect(()=>{if(!s||!t)return;(async()=>{try{const{data:h,error:f}=await B.database.from("certificates").select(`
            *,
            courses:course_id (
              title
            )
          `).eq("user_id",t.id).order("issued_date",{ascending:!1});if(f)if(f.code==="42P01"||f.message?.includes("does not exist"))console.log("Certificates table not found, showing empty state"),a([]);else throw f;else{const p=(h||[]).map(y=>({id:y.id,user_id:y.user_id,course_id:y.course_id,course_name:y.courses?.title||y.course_name||"Course Completion",certificate_number:y.certificate_number||`CLM-${y.id.slice(0,8).toUpperCase()}`,issued_date:y.issued_date||y.created_at,status:y.status||"issued",certificate_url:y.certificate_url}));a(p)}}catch(h){console.error("Error fetching certificates:",h),a([])}finally{l(!1)}})()},[t,s]);const d=async c=>{c.certificate_url?window.open(c.certificate_url,"_blank"):alert("Certificate download feature coming soon!")};return!s||o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading certificates..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"My Certificates"}),e.jsx("p",{className:"text-gray-600",children:"View and download your course completion certificates"})]}),r.length===0?e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-12 text-center",children:[e.jsx(Ms,{className:"mx-auto text-gray-400 mb-4",size:64}),e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-2",children:"No Certificates Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Complete courses to earn certificates. Your certificates will appear here once issued."}),e.jsx(me,{href:"/dashboard/courses",variant:"primary",children:"Browse Courses"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(c=>e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-gold/10 p-3 rounded-full",children:e.jsx(Ms,{className:"text-gold",size:32})}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${c.status==="issued"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"}`,children:c.status==="issued"?e.jsxs("span",{className:"flex items-center",children:[e.jsx(rt,{size:12,className:"mr-1"}),"Issued"]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx($r,{size:12,className:"mr-1"}),"Pending"]})})]}),e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-2",children:c.course_name}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Certificate #:"})," ",c.certificate_number]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Issued:"})," ",new Date(c.issued_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),c.status==="issued"&&e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>d(c),children:[e.jsx(ci,{size:18,className:"mr-2"}),"Download Certificate"]})]},c.id))})]})}function j8(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState(!0),[d,c]=L.useState(!1),[h,f]=L.useState(null),[p,y]=L.useState(null);L.useEffect(()=>{b()},[]);const b=async()=>{try{const[w,D]=await Promise.all([B.database.from("content_sections").select("*"),B.database.from("gallery").select("*").order("created_at",{ascending:!1})]);s(w.data||[]),a(D.data||[])}catch(w){console.error("Error fetching content:",w)}finally{l(!1)}},x=async(w,D,z)=>{try{const{error:U}=await B.database.from("content_sections").upsert([{section_type:w,content:D,title:z||null}],{onConflict:"section_type"});if(U)throw U;f({type:"success",text:"Content updated successfully!"}),setTimeout(()=>f(null),3e3)}catch(U){f({type:"error",text:U.message||"Failed to update content"})}},A=async()=>{if(p){c(!0);try{const{data:w,error:D}=await B.storage.from("gallery").upload(`gallery_${Date.now()}_${p.name}`,p);if(D)throw D;await B.database.from("gallery").insert([{image_url:w.url,image_key:w.key,caption:""}]),f({type:"success",text:"Image uploaded successfully!"}),y(null),b()}catch(w){f({type:"error",text:w.message||"Failed to upload image"})}finally{c(!1)}}},N=async(w,D)=>{if(confirm("Are you sure you want to delete this image?"))try{await B.storage.from("gallery").remove(D),await B.database.from("gallery").delete().eq("id",w),f({type:"success",text:"Image deleted successfully!"}),b()}catch(z){f({type:"error",text:z.message||"Failed to delete image"})}};if(o)return e.jsx("div",{className:"text-center py-12",children:"Loading content..."});const P=t.find(w=>w.section_type==="mission"),_=t.find(w=>w.section_type==="vision"),C=t.find(w=>w.section_type==="strategic_objectives"),j=t.find(w=>w.section_type==="core_values");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Content Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage website content and gallery"})]}),h&&e.jsx("div",{className:`p-4 rounded-card ${h.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:h.text}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Mission & Vision"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Mission"}),e.jsx("textarea",{defaultValue:P?.content||"",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",onBlur:w=>x("mission",w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Vision"}),e.jsx("textarea",{defaultValue:_?.content||"",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",onBlur:w=>x("vision",w.target.value)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Strategic Objectives"}),e.jsx("textarea",{defaultValue:C?.content||"",rows:10,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"Enter strategic objectives, one per line...",onBlur:w=>x("strategic_objectives",w.target.value)}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Enter each objective on a new line"})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Core Values"}),e.jsx("input",{type:"text",defaultValue:j?.content||"",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold",placeholder:"e.g., Integrity, Leadership, Faith, Service",onBlur:w=>x("core_values",w.target.value)})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Gallery Management"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Upload New Image"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:w=>y(w.target.files?.[0]||null),className:"flex-1 px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),e.jsxs(me,{variant:"primary",onClick:A,disabled:!p||d,children:[e.jsx(jm,{className:"mr-2",size:16}),d?"Uploading...":"Upload"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(w=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:w.image_url,alt:w.caption||"Gallery image",className:"w-full h-48 object-cover rounded-card"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-card flex items-center justify-center",children:e.jsx(me,{variant:"outline",size:"sm",onClick:()=>N(w.id,w.image_key),className:"bg-white",children:"Delete"})})]},w.id))})]})]})}function w8(){const[t,s]=L.useState([]),[r,a]=L.useState(!0),[o,l]=L.useState(null),[d,c]=L.useState({}),[h,f]=L.useState(null),[p,y]=L.useState(null);L.useEffect(()=>{b()},[]);const b=async()=>{a(!0);try{const{data:_,error:C}=await B.database.from("fee_settings").select("*").order("fee_type",{ascending:!0});if(C)throw C;s(_||[]);const j={};_?.forEach(w=>{j[w.id]=w.amount.toString()}),c(j)}catch(_){console.error("Error fetching fees:",_),y({type:"error",text:"Failed to load fee settings"})}finally{a(!1)}},x=_=>{l(_)},A=()=>{l(null);const _={};t.forEach(C=>{_[C.id]=C.amount.toString()}),c(_)},N=async _=>{const C=parseFloat(d[_]);if(isNaN(C)||C<0){y({type:"error",text:"Please enter a valid amount"});return}f(_),y(null);try{const{error:j}=await B.database.from("fee_settings").update({amount:C,updated_at:new Date().toISOString()}).eq("id",_);if(j)throw j;y({type:"success",text:"Fee updated successfully"}),l(null),b()}catch(j){y({type:"error",text:j.message||"Failed to update fee"})}finally{f(null)}},P=_=>{switch(_){case"membership_application":return"CLM Membership Application Fee";case"bible_school_with_acrp":return"Bible School Registration (With ACRP)";case"bible_school_without_acrp":return"Bible School Registration (Without ACRP)";default:return _}};return r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading fee settings..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Fee Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage application and registration fees"})]}),p&&e.jsx("div",{className:`p-4 rounded-card ${p.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:p.text}),e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Fee Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Amount (ZAR)"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-navy-ink",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-600",children:"No fee settings found"})}):t.map(_=>e.jsxs("tr",{className:"hover:bg-muted-gray/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fo,{className:"text-gold mr-2",size:20}),e.jsx("span",{className:"font-medium text-navy-ink",children:P(_.fee_type)})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:_.description||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:o===_.id?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-600",children:"R"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:d[_.id]||"0",onChange:C=>c(j=>({...j,[_.id]:C.target.value})),className:"w-32 px-3 py-1 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}):e.jsxs("span",{className:"font-semibold text-navy-ink",children:["R ",parseFloat(_.amount.toString()).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:o===_.id?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N(_.id),disabled:h===_.id,className:"p-2 text-green-600 hover:bg-green-50 rounded-card disabled:opacity-50",title:"Save",children:e.jsx(li,{size:18})}),e.jsx("button",{onClick:A,disabled:h===_.id,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-card disabled:opacity-50",title:"Cancel",children:e.jsx(Fr,{size:18})})]}):e.jsx("button",{onClick:()=>x(_.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",title:"Edit",children:e.jsx(bn,{size:18})})})]},_.id))})]})})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-card p-4",children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-2",children:"Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Changes to fees will apply to new applications only. Existing applications will retain their original fee amounts."})]})]})}function N8(){Mt();const[t,s]=L.useState("objectives"),[r,a]=L.useState(null),[o,l]=L.useState([]),[d,c]=L.useState([]),[h,f]=L.useState([]),[p,y]=L.useState([]),[b,x]=L.useState(!0),[A,N]=L.useState(null),[P,_]=L.useState(null),[C,j]=L.useState(null),[w,D]=L.useState(null),[z,U]=L.useState(null),{register:X,handleSubmit:E,reset:G,formState:{errors:I}}=hn(),{register:R,handleSubmit:$,reset:q}=hn(),{register:Q,handleSubmit:he,reset:be}=hn();L.useEffect(()=>{V()},[]),L.useEffect(()=>{r&&t!=="objectives"&&de()},[r,t]);const V=async()=>{try{const{data:ue,error:xe}=await B.database.from("strategic_objectives").select("*").order("created_at",{ascending:!0});if(xe)throw xe;l(ue||[]),ue&&ue.length>0&&!r&&a(ue[0].id)}catch(ue){console.error("Error fetching objectives:",ue),U({type:"error",text:"Failed to load objectives"})}finally{x(!1)}},de=async()=>{if(r)try{const{data:ue}=await B.database.from("past_work").select("*").eq("objective_id",r).order("date",{ascending:!1});c(ue||[]);const{data:xe}=await B.database.from("upcoming_work").select("*").eq("objective_id",r).order("event_date",{ascending:!0});f(xe||[]);const{data:Ie}=await B.database.from("objective_gallery").select("*").eq("objective_id",r).order("order_index",{ascending:!0});y(Ie||[])}catch(ue){console.error("Error fetching related data:",ue)}},ke=ue=>ue.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),te=async ue=>{try{let xe=A?.image_url||null,Ie=A?.image_key||null;if(w){const De=`objectives/${Date.now()}_${w.name}`,{data:le,error:Nt}=await B.storage.from("gallery").upload(De,w);if(Nt)throw Nt;xe=le.url,Ie=le.key}const He=ue.slug||ke(ue.title),Je={...ue,slug:He,image_url:xe,icon:ue.icon||null};if(A){const{error:De}=await B.database.from("strategic_objectives").update(Je).eq("id",A.id);if(De)throw De;U({type:"success",text:"Objective updated successfully!"})}else{const{error:De}=await B.database.from("strategic_objectives").insert([Je]);if(De)throw De;U({type:"success",text:"Objective created successfully!"})}N(null),D(null),G(),V()}catch(xe){U({type:"error",text:xe.message||"Failed to save objective"})}},O=async ue=>{if(!r){U({type:"error",text:"Please select an objective first"});return}try{let xe=P?.image_url||null,Ie=P?.attachment_url||null;if(w){const Je=`objectives/past-work/${Date.now()}_${w.name}`,{data:De,error:le}=await B.storage.from("gallery").upload(Je,w);if(le)throw le;xe=De.url}const He={objective_id:r,title:ue.title,description:ue.description,date:ue.date,image_url:xe,attachment_url:Ie};if(P){const{error:Je}=await B.database.from("past_work").update(He).eq("id",P.id);if(Je)throw Je;U({type:"success",text:"Past work updated successfully!"})}else{const{error:Je}=await B.database.from("past_work").insert([He]);if(Je)throw Je;U({type:"success",text:"Past work added successfully!"})}_(null),D(null),q(),de()}catch(xe){U({type:"error",text:xe.message||"Failed to save past work"})}},re=async ue=>{if(!r){U({type:"error",text:"Please select an objective first"});return}try{let xe=C?.image_url||null;if(w){const He=`objectives/upcoming-work/${Date.now()}_${w.name}`,{data:Je,error:De}=await B.storage.from("gallery").upload(He,w);if(De)throw De;xe=Je.url}const Ie={objective_id:r,title:ue.title,description:ue.description,event_date:ue.event_date,image_url:xe,link_url:ue.link_url||null};if(C){const{error:He}=await B.database.from("upcoming_work").update(Ie).eq("id",C.id);if(He)throw He;U({type:"success",text:"Upcoming work updated successfully!"})}else{const{error:He}=await B.database.from("upcoming_work").insert([Ie]);if(He)throw He;U({type:"success",text:"Upcoming work added successfully!"})}j(null),D(null),be(),de()}catch(xe){U({type:"error",text:xe.message||"Failed to save upcoming work"})}},K=async ue=>{if(confirm("Are you sure you want to delete this objective?"))try{const{error:xe}=await B.database.from("strategic_objectives").delete().eq("id",ue);if(xe)throw xe;U({type:"success",text:"Objective deleted successfully!"}),V()}catch(xe){U({type:"error",text:xe.message||"Failed to delete objective"})}},ne=async ue=>{if(confirm("Are you sure you want to delete this past work item?"))try{const{error:xe}=await B.database.from("past_work").delete().eq("id",ue);if(xe)throw xe;U({type:"success",text:"Past work deleted successfully!"}),de()}catch(xe){U({type:"error",text:xe.message||"Failed to delete past work"})}},pe=async ue=>{if(confirm("Are you sure you want to delete this upcoming work item?"))try{const{error:xe}=await B.database.from("upcoming_work").delete().eq("id",ue);if(xe)throw xe;U({type:"success",text:"Upcoming work deleted successfully!"}),de()}catch(xe){U({type:"error",text:xe.message||"Failed to delete upcoming work"})}},je=async()=>{if(!(!w||!r))try{const ue=`objectives/gallery/${Date.now()}_${w.name}`,{data:xe,error:Ie}=await B.storage.from("gallery").upload(ue,w);if(Ie)throw Ie;const{error:He}=await B.database.from("objective_gallery").insert([{objective_id:r,image_url:xe.url,image_key:xe.key,order_index:p.length}]);if(He)throw He;U({type:"success",text:"Image uploaded successfully!"}),D(null),de()}catch(ue){U({type:"error",text:ue.message||"Failed to upload image"})}},_e=async(ue,xe)=>{if(confirm("Are you sure you want to delete this image?"))try{xe&&await B.storage.from("gallery").remove(xe);const{error:Ie}=await B.database.from("objective_gallery").delete().eq("id",ue);if(Ie)throw Ie;U({type:"success",text:"Image deleted successfully!"}),de()}catch(Ie){U({type:"error",text:Ie.message||"Failed to delete image"})}};return b?e.jsx("div",{className:"text-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Strategic Objectives Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage objectives, past work, upcoming work, and galleries"})]}),t==="objectives"&&e.jsxs(me,{variant:"primary",onClick:()=>{N(null),G(),D(null)},children:[e.jsx(Dr,{className:"mr-2",size:20}),"Add Objective"]})]}),z&&e.jsx("div",{className:`p-4 rounded-card ${z.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:z.text}),e.jsx("div",{className:"bg-white rounded-card shadow-soft p-1 flex space-x-1",children:["objectives","past-work","upcoming-work","gallery"].map(ue=>e.jsx("button",{onClick:()=>s(ue),className:`px-6 py-3 rounded-card font-medium transition-colors ${t===ue?"bg-gold text-white":"text-gray-600 hover:bg-gray-100"}`,children:ue.charAt(0).toUpperCase()+ue.slice(1).replace("-"," ")},ue))}),t==="objectives"&&e.jsxs("div",{className:"space-y-6",children:[(A||!A)&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:A?"Edit Objective":"Add New Objective"}),e.jsxs("form",{onSubmit:E(te),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Title"}),e.jsx("input",{type:"text",...X("title",{required:!0}),defaultValue:A?.title||"",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Slug"}),e.jsx("input",{type:"text",...X("slug"),defaultValue:A?.slug||"",placeholder:"Auto-generated from title",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Short Description"}),e.jsx("textarea",{...X("short_description",{required:!0}),defaultValue:A?.short_description||"",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Full Description"}),e.jsx("textarea",{...X("full_description",{required:!0}),defaultValue:A?.full_description||"",rows:8,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ue=>D(ue.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),A?.image_url&&!w&&e.jsx("img",{src:A.image_url,alt:"Current",className:"mt-2 w-32 h-32 object-cover rounded-card"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(me,{type:"submit",variant:"primary",children:[e.jsx(li,{className:"mr-2",size:20}),"Save"]}),A&&e.jsxs(me,{type:"button",variant:"outline",onClick:()=>{N(null),G(),D(null)},children:[e.jsx(Fr,{className:"mr-2",size:20}),"Cancel"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"All Objectives"}),e.jsx("div",{className:"space-y-4",children:o.map(ue=>e.jsx("div",{className:`p-4 rounded-card border-2 ${r===ue.id?"border-gold bg-gold/5":"border-gray-200"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-2",children:ue.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:ue.short_description}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Slug: ",ue.slug]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>{a(ue.id),N(ue),G(ue)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",children:e.jsx(bn,{size:18})}),e.jsx("button",{onClick:()=>K(ue.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-card",children:e.jsx(zs,{size:18})})]})]})},ue.id))})]})]}),t==="past-work"&&e.jsx("div",{className:"space-y-6",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:P?"Edit Past Work":"Add Past Work"}),e.jsxs("form",{onSubmit:$(O),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Title"}),e.jsx("input",{type:"text",...R("title",{required:!0}),defaultValue:P?.title||"",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Description"}),e.jsx("textarea",{...R("description",{required:!0}),defaultValue:P?.description||"",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Date"}),e.jsx("input",{type:"date",...R("date",{required:!0}),defaultValue:P?.date||"",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ue=>D(ue.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(me,{type:"submit",variant:"primary",children:[e.jsx(li,{className:"mr-2",size:20}),"Save"]}),P&&e.jsxs(me,{type:"button",variant:"outline",onClick:()=>{_(null),q(),D(null)},children:[e.jsx(Fr,{className:"mr-2",size:20}),"Cancel"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Past Work Items"}),e.jsx("div",{className:"space-y-4",children:d.map(ue=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-card",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-2",children:ue.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:ue.description}),e.jsx("p",{className:"text-gray-500 text-xs",children:ue.date})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>{_(ue),q(ue)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",children:e.jsx(bn,{size:18})}),e.jsx("button",{onClick:()=>ne(ue.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-card",children:e.jsx(zs,{size:18})})]})]})},ue.id))})]})]}):e.jsx("div",{className:"bg-white rounded-card shadow-soft p-6 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Please select an objective first"})})}),t==="upcoming-work"&&e.jsx("div",{className:"space-y-6",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:C?"Edit Upcoming Work":"Add Upcoming Work"}),e.jsxs("form",{onSubmit:he(re),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Title"}),e.jsx("input",{type:"text",...Q("title",{required:!0}),defaultValue:C?.title||"",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Description"}),e.jsx("textarea",{...Q("description",{required:!0}),defaultValue:C?.description||"",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Event Date"}),e.jsx("input",{type:"date",...Q("event_date",{required:!0}),defaultValue:C?.event_date||"",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ue=>D(ue.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-navy-ink mb-2",children:"Link URL (Optional)"}),e.jsx("input",{type:"url",...Q("link_url"),defaultValue:C?.link_url||"",className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(me,{type:"submit",variant:"primary",children:[e.jsx(li,{className:"mr-2",size:20}),"Save"]}),C&&e.jsxs(me,{type:"button",variant:"outline",onClick:()=>{j(null),be(),D(null)},children:[e.jsx(Fr,{className:"mr-2",size:20}),"Cancel"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Upcoming Work Items"}),e.jsx("div",{className:"space-y-4",children:h.map(ue=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-card",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-2",children:ue.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:ue.description}),e.jsx("p",{className:"text-gray-500 text-xs",children:ue.event_date})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>{j(ue),be(ue)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-card",children:e.jsx(bn,{size:18})}),e.jsx("button",{onClick:()=>pe(ue.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-card",children:e.jsx(zs,{size:18})})]})]})},ue.id))})]})]}):e.jsx("div",{className:"bg-white rounded-card shadow-soft p-6 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Please select an objective first"})})}),t==="gallery"&&e.jsx("div",{className:"space-y-6",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Upload Gallery Image"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ue=>D(ue.target.files?.[0]||null),className:"w-full px-4 py-2 border border-gray-300 rounded-card focus:outline-none focus:ring-2 focus:ring-gold"}),e.jsxs(me,{onClick:je,variant:"primary",disabled:!w,children:[e.jsx(jm,{className:"mr-2",size:20}),"Upload Image"]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Gallery Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:p.map(ue=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:ue.image_url,alt:"Gallery",className:"w-full h-32 object-cover rounded-card"}),e.jsx("button",{onClick:()=>_e(ue.id,ue.image_key||null),className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(zs,{size:16})})]},ue.id))})]})]}):e.jsx("div",{className:"bg-white rounded-card shadow-soft p-6 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Please select an objective first"})})})]})}function _8(){const t=cs(),[s]=Iu(),{user:r,isLoaded:a}=Mt(),o=s.get("payment_id");s.get("return_url");const[l,d]=L.useState(null),[c,h]=L.useState(""),[f,p]=L.useState(!0),[y,b]=L.useState(!1),[x,A]=L.useState(null),N=[{id:"payfast",name:"PayFast",icon:e.jsx(W_,{size:24}),description:"Credit/Debit Card, EFT, Instant EFT - Connects to all major SA banks",provider:"payfast"},{id:"ozow",name:"Ozow",icon:e.jsx(Xv,{size:24}),description:"Instant EFT - Direct bank transfers from major SA banks",provider:"ozow"}];L.useEffect(()=>{if(a){if(!r){t("/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search));return}if(!o){t("/dashboard");return}P()}},[o,r,a]);const P=async()=>{try{const{data:j,error:w}=await B.database.from("payments").select("*, applications(*), donations(*)").eq("id",o).single();if(w)throw w;if(j.user_id!==r?.id){t("/dashboard");return}d(j)}catch(j){console.error("Error fetching payment:",j),A(j.message||"Failed to load payment details")}finally{p(!1)}},_=(j,w)=>{const D=window.location.origin;throw`${D}${j.id}`,`${D}${j.id}`,new Error(`Payment gateway credentials not configured for ${w}. Please check your .env file.`)},C=async()=>{if(!c||!l){A("Please select a payment method");return}b(!0),A(null);try{await B.database.from("payments").update({payment_method:c,status:"pending",updated_at:new Date().toISOString()}).eq("id",l.id);const j=_(l,c);window.location.href=j}catch(j){console.error("Payment initiation error:",j),A(j.message||"Failed to initiate payment. Please check your payment gateway credentials in .env file."),b(!1)}};return!a||f?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading payment..."})]})}),e.jsx(un,{})]}):l?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow py-12 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(Yr,{className:"mx-auto text-gold mb-4",size:48}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Complete Payment"}),e.jsx("p",{className:"text-gray-600",children:"Secure payment processing via South African payment gateways"})]}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mp,{size:20,className:"mr-2"}),e.jsx("span",{children:x})]})}),e.jsxs("div",{className:"bg-muted-gray rounded-card p-6 mb-6",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-4",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Item:"}),e.jsx("span",{className:"font-medium text-navy-ink",children:l.payment_type==="donation"?l.donations?.campaign_name||"Donation":l.payment_type==="application"?(l.applications?.program_type?.replace("_"," ").replace(/\b\w/g,j=>j.toUpperCase())||"Application")+" Application Fee":l.payment_type==="registration"?"Registration Fee":"Payment"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"font-bold text-gold text-xl",children:["R",parseFloat(l.amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Currency:"}),e.jsx("span",{className:"font-medium text-navy-ink",children:l.currency||"ZAR"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`font-medium ${l.status==="confirmed"?"text-green-600":l.status==="pending"?"text-amber-600":"text-red-600"}`,children:l.status?.charAt(0).toUpperCase()+l.status?.slice(1)||"Pending"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-4",children:"Select Payment Method"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Both methods connect directly to major South African banks"}),e.jsx("div",{className:"space-y-3",children:N.map(j=>e.jsx("button",{onClick:()=>h(j.id),className:`w-full p-4 border-2 rounded-card text-left transition-all ${c===j.id?"border-gold bg-gold/10":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-card ${c===j.id?"bg-gold text-white":"bg-gray-100 text-gray-600"}`,children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-navy-ink",children:j.name}),e.jsx("p",{className:"text-sm text-gray-600",children:j.description})]}),c===j.id&&e.jsx(rt,{className:"text-gold",size:24})]})},j.id))})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-card p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx(Yr,{size:16,className:"inline mr-2"}),"Your payment is secured with SSL encryption. We do not store your card or bank details."]})}),e.jsx(me,{variant:"primary",className:"w-full py-4 text-lg",onClick:C,disabled:!c||y,children:y?"Processing...":`Pay R${parseFloat(l.amount).toFixed(2)}`}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"By proceeding, you agree to our Terms of Service and Privacy Policy"})]})})}),e.jsx(un,{})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(mp,{className:"mx-auto text-red-500 mb-4",size:48}),e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-2",children:"Payment Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:x||"Unable to load payment details"}),e.jsx(me,{onClick:()=>t("/dashboard"),variant:"primary",children:"Go to Dashboard"})]})}),e.jsx(un,{})]})}function k8(){const t=cs(),[s]=Iu(),{user:r,isLoaded:a}=Mt(),o=s.get("payment_id"),[l,d]=L.useState(null),[c,h]=L.useState(!0),[f,p]=L.useState(!0),[y,b]=L.useState(null);L.useEffect(()=>{if(a){if(!r){t("/login");return}if(!o){t("/dashboard");return}x()}},[o,r,a]);const x=async()=>{try{const{data:N,error:P}=await B.database.from("payments").select("*, applications(*), donations(*)").eq("id",o).single();if(P)throw P;if(N.user_id!==r?.id){t("/dashboard");return}if(d(N),N.status==="confirmed"){p(!1),h(!1);return}const{error:_}=await B.database.from("payments").update({status:"confirmed",updated_at:new Date().toISOString()}).eq("id",o);if(_)throw _;const C=parseFloat(N.amount).toFixed(2),j=N.payment_method?.charAt(0).toUpperCase()+N.payment_method?.slice(1)||"Payment Gateway";if(N.payment_type==="donation")await B.database.from("donations").update({status:"confirmed",updated_at:new Date().toISOString()}).eq("payment_id",o),await B.database.from("notifications").insert([{user_id:r.id,type:"donation",title:"Donation Confirmed",message:`Thank you! Your donation of R${C} has been confirmed.`,related_id:N.donations?.id||null}]),await Ri(r.id,{type:"donation_confirmed",subject:"Donation Confirmed - Thank You!",message:`Your donation of R${C} has been successfully processed via ${j}. Thank you for your generous support of Christian Leadership Movement!`,html:`
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
              <h2 style="color: #1B1C5F;">Donation Confirmed</h2>
              <p>Dear ${r.name||"Valued Supporter"},</p>
              <p>Thank you for your generous donation to Christian Leadership Movement!</p>
              <div style="background-color: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <p style="margin: 0;"><strong>Donation Amount:</strong> R${C}</p>
                <p style="margin: 5px 0;"><strong>Payment Method:</strong> ${j}</p>
                <p style="margin: 5px 0;"><strong>Status:</strong> Confirmed</p>
                ${N.donations?.campaign_name?`<p style="margin: 5px 0;"><strong>Campaign:</strong> ${N.donations.campaign_name}</p>`:""}
              </div>
              <p>Your donation helps us develop Christian leaders and transform communities. We are grateful for your support!</p>
              <p>Blessings,<br>Christian Leadership Movement Team</p>
            </div>
          `});else if(N.payment_type==="application"){if(N.applications){const D=N.applications.program_type?.replace("_"," ").replace(/\b\w/g,z=>z.toUpperCase())||"Application";await B.database.from("applications").update({payment_status:"confirmed",updated_at:new Date().toISOString()}).eq("id",N.applications.id),await B.database.from("notifications").insert([{user_id:r.id,type:"payment",title:"Application Fee Payment Confirmed",message:`Your payment of R${C} for your ${D} application has been confirmed.`,related_id:N.applications.id}]),await Ri(r.id,{type:"application_fee_confirmed",subject:"Application Fee Payment Confirmed",message:`Your payment of R${C} for your ${D} application has been successfully processed via ${j}. Your application is now being reviewed.`,html:`
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                <h2 style="color: #1B1C5F;">Application Fee Payment Confirmed</h2>
                <p>Dear ${r.name||"Applicant"},</p>
                <p>Thank you for your payment! Your application fee has been successfully processed.</p>
                <div style="background-color: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
                  <p style="margin: 0;"><strong>Application Type:</strong> ${D}</p>
                  <p style="margin: 5px 0;"><strong>Payment Amount:</strong> R${C}</p>
                  <p style="margin: 5px 0;"><strong>Payment Method:</strong> ${j}</p>
                  <p style="margin: 5px 0;"><strong>Status:</strong> Confirmed</p>
                </div>
                <p>Your application is now being reviewed by our team. You will be notified once a decision has been made.</p>
                <p>If you have any questions, please don't hesitate to contact us.</p>
                <p>Blessings,<br>Christian Leadership Movement Team</p>
              </div>
            `})}}else N.payment_type==="registration"?(await B.database.from("notifications").insert([{user_id:r.id,type:"payment",title:"Registration Fee Payment Confirmed",message:`Your registration fee payment of R${C} has been confirmed.`,related_id:o}]),await Ri(r.id,{type:"registration_fee_confirmed",subject:"Registration Fee Payment Confirmed",message:`Your registration fee payment of R${C} has been successfully processed via ${j}. Thank you for completing your registration!`,html:`
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
              <h2 style="color: #1B1C5F;">Registration Fee Payment Confirmed</h2>
              <p>Dear ${r.name||"Member"},</p>
              <p>Thank you for your payment! Your registration fee has been successfully processed.</p>
              <div style="background-color: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <p style="margin: 0;"><strong>Payment Type:</strong> Registration Fee</p>
                <p style="margin: 5px 0;"><strong>Payment Amount:</strong> R${C}</p>
                <p style="margin: 5px 0;"><strong>Payment Method:</strong> ${j}</p>
                <p style="margin: 5px 0;"><strong>Status:</strong> Confirmed</p>
              </div>
              <p>Your registration is now complete. Welcome to Christian Leadership Movement!</p>
              <p>If you have any questions, please don't hesitate to contact us.</p>
              <p>Blessings,<br>Christian Leadership Movement Team</p>
            </div>
          `})):(await B.database.from("notifications").insert([{user_id:r.id,type:"payment",title:"Payment Confirmed",message:`Your payment of R${C} has been confirmed.`,related_id:o}]),await Ri(r.id,{type:"payment_confirmed",subject:"Payment Confirmed",message:`Your payment of R${C} has been successfully processed via ${j}.`,html:`
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
              <h2 style="color: #1B1C5F;">Payment Confirmed</h2>
              <p>Dear ${r.name||"Valued Member"},</p>
              <p>Your payment has been successfully processed.</p>
              <div style="background-color: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <p style="margin: 0;"><strong>Payment Amount:</strong> R${C}</p>
                <p style="margin: 5px 0;"><strong>Payment Method:</strong> ${j}</p>
                <p style="margin: 5px 0;"><strong>Status:</strong> Confirmed</p>
              </div>
              <p>Thank you for your payment!</p>
              <p>Blessings,<br>Christian Leadership Movement Team</p>
            </div>
          `}));const{data:w}=await B.database.from("payments").select("*, applications(*), donations(*)").eq("id",o).single();d(w),p(!1)}catch(N){console.error("Payment processing error:",N),b(N.message||"Failed to process payment confirmation"),p(!1)}finally{h(!1)}};if(!a||c)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b6,{className:"mx-auto text-gold mb-4 animate-spin",size:48}),e.jsx("p",{className:"text-gray-600",children:"Processing payment..."})]})}),e.jsx(un,{})]});if(y)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow py-12 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 text-center",children:[e.jsx(mp,{className:"mx-auto text-red-500 mb-4",size:48}),e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-2",children:"Payment Processing Error"}),e.jsx("p",{className:"text-gray-600 mb-6",children:y}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(me,{onClick:()=>t("/dashboard"),variant:"primary",children:"Go to Dashboard"}),e.jsx(me,{onClick:()=>t("/payment?payment_id="+o),variant:"outline",children:"Try Again"})]})]})})}),e.jsx(un,{})]});const A=()=>l?.payment_type==="donation"?"Donation":l?.payment_type==="application"?`${l?.applications?.program_type?.replace("_"," ").replace(/\b\w/g,P=>P.toUpperCase())||"Application"} Application Fee`:l?.payment_type==="registration"?"Registration Fee":"Payment";return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow py-12 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 text-center",children:[e.jsx(rt,{className:"mx-auto text-green-500 mb-4",size:64}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-4",children:"Payment Successful!"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Thank you for your payment. Your transaction has been processed successfully."}),l&&e.jsxs("div",{className:"bg-muted-gray rounded-card p-6 mb-6 text-left",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-4",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Type:"}),e.jsx("span",{className:"font-medium text-navy-ink",children:A()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"font-bold text-gold text-xl",children:["R",parseFloat(l.amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"font-medium text-navy-ink",children:l.payment_method?.charAt(0).toUpperCase()+l.payment_method?.slice(1)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Confirmed"})]}),l.payment_type==="donation"&&l.donations?.campaign_name&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Campaign:"}),e.jsx("span",{className:"font-medium text-navy-ink",children:l.donations.campaign_name})]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(me,{onClick:()=>t("/dashboard"),variant:"primary",children:"Go to Dashboard"}),l?.payment_type==="donation"&&e.jsx(me,{onClick:()=>t("/donations"),variant:"outline",children:"Make Another Donation"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-6",children:"A confirmation email has been sent to your registered email address."})]})})}),e.jsx(un,{})]})}function S8(){const{slug:t}=Mi(),[s,r]=L.useState(null),[a,o]=L.useState([]),[l,d]=L.useState([]),[c,h]=L.useState([]),[f,p]=L.useState(!0);return L.useEffect(()=>{if(!t)return;(async()=>{try{const{data:b,error:x}=await B.database.from("strategic_objectives").select("*").eq("slug",t).single();if(x)throw x;r(b);const{data:A}=await B.database.from("past_work").select("*").eq("objective_id",b.id).order("date",{ascending:!1});o(A||[]);const{data:N}=await B.database.from("upcoming_work").select("*").eq("objective_id",b.id).order("event_date",{ascending:!0});d(N||[]);const{data:P}=await B.database.from("objective_gallery").select("*").eq("objective_id",b.id).order("order_index",{ascending:!0});h(P||[])}catch(b){console.error("Error fetching objective data:",b)}finally{p(!1)}})()},[t]),f?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading..."})}),e.jsx(un,{})]}):s?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsxs("main",{className:"flex-grow",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs(ot,{to:"/",className:"inline-flex items-center text-gold hover:text-gold/80 transition-colors",children:[e.jsx(zn,{className:"mr-2",size:20}),"Back to Objectives"]})})}),e.jsx("section",{className:"bg-gradient-to-br from-navy-ink to-[#2C2E78] text-white py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-semibold mb-6",children:s.title}),e.jsx("p",{className:"text-xl text-gray-200 leading-relaxed",children:s.short_description})]})})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-semibold text-navy-ink mb-6",children:"About This Objective"}),e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsx("p",{className:"text-base leading-relaxed text-gray-700 whitespace-pre-line",children:s.full_description})})]})})}),a.length>0&&e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-semibold text-navy-ink mb-12 text-center",children:"Past Projects & Activities"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map(y=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow overflow-hidden",children:[y.image_url&&e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:y.image_url,alt:y.title,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[e.jsx(ns,{className:"mr-2",size:16}),new Date(y.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsx("h3",{className:"text-xl font-semibold text-navy-ink mb-3",children:y.title}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed mb-4",children:y.description}),y.attachment_url&&e.jsxs("a",{href:y.attachment_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-gold hover:text-gold/80 transition-colors",children:[e.jsx(ci,{className:"mr-2",size:18}),"Download PDF"]})]})]},y.id))})]})})}),l.length>0&&e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-semibold text-navy-ink mb-12 text-center",children:"Upcoming Work"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.map(y=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow overflow-hidden border-2 border-gold/20",children:[y.image_url&&e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:y.image_url,alt:y.title,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[e.jsx(ns,{className:"mr-2",size:16}),new Date(y.event_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsx("h3",{className:"text-xl font-semibold text-navy-ink mb-3",children:y.title}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed mb-4",children:y.description}),y.link_url&&e.jsxs("a",{href:y.link_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-gold hover:text-gold/80 transition-colors",children:["Learn More",e.jsx(J_,{className:"ml-2",size:18})]})]})]},y.id))})]})})}),c.length>0&&e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-semibold text-navy-ink mb-12 text-center",children:"Gallery"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:c.map(y=>e.jsx("div",{className:"aspect-square overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-shadow group cursor-pointer",children:e.jsx("img",{src:y.image_url,alt:"Gallery",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})},y.id))})]})})})]}),e.jsx(un,{})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-navy-ink mb-4",children:"Objective Not Found"}),e.jsx(ot,{to:"/",className:"text-gold hover:underline",children:"Return to Home"})]})}),e.jsx(un,{})]})}function C8({children:t}){const{user:s,isLoaded:r}=Mt(),[a,o]=L.useState(null),[l,d]=L.useState(!0);return L.useEffect(()=>{if(r){if(!s){o(!1),d(!1);return}e2(s.id).then(c=>{o(c),d(!1)})}},[s,r]),!r||l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking access..."})]})}):s?a?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted-gray",children:e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 max-w-md text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy-ink mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You do not have permission to access the admin dashboard."}),e.jsx("a",{href:"/dashboard",className:"text-gold hover:underline font-medium",children:"Go to User Dashboard"})]})}):e.jsx(M1,{to:"/login?redirect=/admin",replace:!0})}function A8(){const[t,s]=L.useState(!0),[r,a]=L.useState({start:"",end:""}),[o,l]=L.useState(null),[d,c]=L.useState([]),[h,f]=L.useState([]);L.useEffect(()=>{const A=new Date,N=new Date(A.getFullYear(),0,1);a({start:N.toISOString().split("T")[0],end:A.toISOString().split("T")[0]})},[]),L.useEffect(()=>{r.start&&r.end&&p()},[r]);const p=async()=>{try{s(!0);const[A,N]=await Promise.all([B.database.from("donations").select("*").eq("status","confirmed").gte("created_at",r.start).lte("created_at",r.end),B.database.from("payments").select("*").eq("status","confirmed").gte("created_at",r.start).lte("created_at",r.end)]),P=A.data||[],_=N.data||[],C=P.reduce((D,z)=>D+parseFloat(z.amount||0),0),j=_.reduce((D,z)=>D+parseFloat(z.amount||0),0),w=_.filter(D=>D.payment_type==="application"||D.payment_type==="registration").reduce((D,z)=>D+parseFloat(z.amount||0),0);c(P),f(_),l({period:`${r.start} to ${r.end}`,donations:C,payments:j,fees:w,total:C+j})}catch(A){console.error("Error fetching report:",A)}finally{s(!1)}},y=()=>{const N=[["Financial Report",o?.period||""],[""],["Category","Amount (ZAR)"],["Donations",o?.donations.toFixed(2)||"0.00"],["Application/Registration Fees",o?.fees.toFixed(2)||"0.00"],["Other Payments",(o?.payments-o?.fees).toFixed(2)||"0.00"],["Total",o?.total.toFixed(2)||"0.00"],[""],["Donations Breakdown"],["Date","Amount","Campaign","Status"],...d.map(j=>[new Date(j.created_at).toLocaleDateString(),j.amount,j.campaign_name||"N/A",j.status]),[""],["Payments Breakdown"],["Date","Amount","Type","Status"],...h.map(j=>[new Date(j.created_at).toLocaleDateString(),j.amount,j.payment_type,j.status])].map(j=>j.join(",")).join(`
`),P=new Blob([N],{type:"text/csv"}),_=window.URL.createObjectURL(P),C=document.createElement("a");C.href=_,C.download=`financial-report-${r.start}-${r.end}.csv`,C.click(),window.URL.revokeObjectURL(_)},b=async()=>{const A=window.open("","_blank");if(!A)return;const N=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Financial Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #1a365d; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
            .summary { background-color: #f9f9f9; padding: 15px; margin: 20px 0; }
          </style>
        </head>
        <body>
          <h1>Financial Report</h1>
          <p><strong>Period:</strong> ${o?.period||""}</p>
          <div class="summary">
            <h2>Summary</h2>
            <p><strong>Total Donations:</strong> R${o?.donations.toFixed(2)||"0.00"}</p>
            <p><strong>Total Fees:</strong> R${o?.fees.toFixed(2)||"0.00"}</p>
            <p><strong>Total Payments:</strong> R${o?.payments.toFixed(2)||"0.00"}</p>
            <p><strong>Grand Total:</strong> R${o?.total.toFixed(2)||"0.00"}</p>
          </div>
          <h2>Donations</h2>
          <table>
            <tr><th>Date</th><th>Amount</th><th>Campaign</th><th>Status</th></tr>
            ${d.map(P=>`
              <tr>
                <td>${new Date(P.created_at).toLocaleDateString()}</td>
                <td>R${parseFloat(P.amount||0).toFixed(2)}</td>
                <td>${P.campaign_name||"N/A"}</td>
                <td>${P.status}</td>
              </tr>
            `).join("")}
          </table>
          <h2>Payments</h2>
          <table>
            <tr><th>Date</th><th>Amount</th><th>Type</th><th>Status</th></tr>
            ${h.map(P=>`
              <tr>
                <td>${new Date(P.created_at).toLocaleDateString()}</td>
                <td>R${parseFloat(P.amount||0).toFixed(2)}</td>
                <td>${P.payment_type}</td>
                <td>${P.status}</td>
              </tr>
            `).join("")}
          </table>
        </body>
      </html>
    `;A.document.write(N),A.document.close(),A.print()},x=async()=>{try{const{data:A}=await B.database.from("donations").select("user_id, amount, created_at").eq("status","confirmed"),{data:N}=await B.database.from("payments").select("user_id, amount, created_at").eq("status","confirmed"),P=new Map,_=new Date().getFullYear();[...A||[],...N||[]].forEach(C=>{if(new Date(C.created_at).getFullYear()===_){const w=C.user_id;P.has(w)||P.set(w,{donations:0,payments:0});const D=P.get(w);C.amount&&(A?.some(z=>z.id===C.id)?D.donations+=parseFloat(C.amount):D.payments+=parseFloat(C.amount))}});for(const[C,j]of P.entries())await B.database.from("giving_statements").upsert({user_id:C,year:_,total_donations:j.donations,total_payments:j.payments,status:"generated"},{onConflict:"user_id,year"});alert(`Annual giving statements generated for ${P.size} users`)}catch(A){console.error("Error generating statements:",A),alert("Error generating annual statements")}};return t?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading financial report..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Financial Reports"}),e.jsx("p",{className:"text-gray-600",children:"View and export financial data"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs(me,{onClick:x,variant:"secondary",children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),"Generate Annual Statements"]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Select Date Range"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:r.start,onChange:A=>a({...r,start:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:r.end,onChange:A=>a({...r,end:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(fo,{className:"w-8 h-8 text-gold"}),e.jsx(Ul,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Donations"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",o.donations.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ys,{className:"w-8 h-8 text-blue-500"}),e.jsx(Ul,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Application Fees"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",o.fees.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(fo,{className:"w-8 h-8 text-green-500"}),e.jsx(Ul,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Payments"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",o.payments.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Ul,{className:"w-8 h-8 text-purple-500"})}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Grand Total"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",o.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Export Report"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(me,{onClick:y,variant:"primary",children:[e.jsx(ci,{className:"w-4 h-4 mr-2"}),"Export to Excel (CSV)"]}),e.jsxs(me,{onClick:b,variant:"secondary",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Export to PDF"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Donations"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 px-4",children:"Date"}),e.jsx("th",{className:"text-left py-2 px-4",children:"Amount"}),e.jsx("th",{className:"text-left py-2 px-4",children:"Campaign"})]})}),e.jsx("tbody",{children:d.slice(0,10).map(A=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:new Date(A.created_at).toLocaleDateString()}),e.jsxs("td",{className:"py-2 px-4",children:["R",parseFloat(A.amount||0).toFixed(2)]}),e.jsx("td",{className:"py-2 px-4",children:A.campaign_name||"N/A"})]},A.id))})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Payments"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 px-4",children:"Date"}),e.jsx("th",{className:"text-left py-2 px-4",children:"Amount"}),e.jsx("th",{className:"text-left py-2 px-4",children:"Type"})]})}),e.jsx("tbody",{children:h.slice(0,10).map(A=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:new Date(A.created_at).toLocaleDateString()}),e.jsxs("td",{className:"py-2 px-4",children:["R",parseFloat(A.amount||0).toFixed(2)]}),e.jsx("td",{className:"py-2 px-4",children:A.payment_type})]},A.id))})]})})]})]})]})}function P8(){const t=cs(),{user:s,isLoaded:r}=Mt(),[a,o]=L.useState([]),[l,d]=L.useState(!0),[c,h]=L.useState(!1),[f,p]=L.useState({title:"",request:"",is_public:!0,is_anonymous:!1});L.useEffect(()=>{r&&y()},[r]);const y=async()=>{try{d(!0);const{data:A}=await B.database.from("prayer_requests").select("*").eq("status","active").eq("is_public",!0).order("created_at",{ascending:!1});o(A||[])}catch(A){console.error("Error fetching prayer requests:",A)}finally{d(!1)}},b=async A=>{if(A.preventDefault(),!!s)try{await B.database.from("prayer_requests").insert({user_id:s.id,...f,status:"active"}),p({title:"",request:"",is_public:!0,is_anonymous:!1}),h(!1),y(),alert("Prayer request submitted successfully!")}catch(N){console.error("Error submitting prayer request:",N),alert(N.message||"Error submitting prayer request. Please try again.")}},x=async A=>{if(!s){alert("Please log in to pray for requests");return}try{const{data:N}=await B.database.from("prayer_responses").select("*").eq("prayer_request_id",A).eq("user_id",s.id).single();if(N){alert("You have already prayed for this request");return}await B.database.from("prayer_responses").insert({prayer_request_id:A,user_id:s.id});const P=a.find(_=>_.id===A);P&&await B.database.from("prayer_requests").update({prayer_count:(P.prayer_count||0)+1}).eq("id",A),y(),alert("Thank you for praying!")}catch(N){console.error("Error praying for request:",N),alert(N.message||"Error recording your prayer. Please try again.")}};return l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading prayer requests..."})}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Prayer Wall"}),e.jsx("p",{className:"text-gray-600",children:"Share your prayer requests and pray for others"})]}),e.jsx("div",{className:"flex items-center gap-2",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsxs(me,{onClick:()=>h(!c),variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Submit Request"]})]})})]}),c&&s&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Submit Prayer Request"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:f.title,onChange:A=>p({...f,title:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prayer Request"}),e.jsx("textarea",{value:f.request,onChange:A=>p({...f,request:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:5,required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.is_public,onChange:A=>p({...f,is_public:A.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Make public"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.is_anonymous,onChange:A=>p({...f,is_anonymous:A.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Submit anonymously"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Submit"}),e.jsx(me,{type:"button",onClick:()=>h(!1),variant:"outline",children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(qd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No prayer requests yet. Be the first to share!"})]}):a.map(A=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink",children:A.title}),A.is_public?e.jsx(qu,{className:"w-4 h-4 text-blue-500",title:"Public"}):e.jsx(Yr,{className:"w-4 h-4 text-gray-500",title:"Private"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:A.request}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{children:new Date(A.created_at).toLocaleDateString()}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-4 h-4"}),A.prayer_count||0," prayers"]})]})]})}),s&&e.jsxs(me,{onClick:()=>x(A.id),variant:"outline",size:"sm",children:[e.jsx(qd,{className:"w-4 h-4 mr-2"}),"Pray for This"]})]},A.id))})]})}function L8(){const[t,s]=L.useState([]),[r,a]=L.useState(!0),[o,l]=L.useState(""),[d,c]=L.useState("all");L.useEffect(()=>{h()},[d]);const h=async()=>{try{a(!0);let b=B.database.from("prayer_requests").select("*").order("created_at",{ascending:!1});d!=="all"&&(b=b.eq("status",d));const{data:x}=await b;s(x||[])}catch(b){console.error("Error fetching prayer requests:",b)}finally{a(!1)}},f=async(b,x)=>{try{await B.database.from("prayer_requests").update({status:x}).eq("id",b),h()}catch(A){console.error("Error updating status:",A),alert("Failed to update status")}},p=async b=>{if(confirm("Are you sure you want to delete this prayer request? This action cannot be undone."))try{await B.database.from("prayer_responses").delete().eq("prayer_request_id",b),await B.database.from("prayer_requests").delete().eq("id",b),h()}catch(x){console.error("Error deleting prayer request:",x),alert("Failed to delete prayer request")}},y=t.filter(b=>b.title.toLowerCase().includes(o.toLowerCase())||b.request.toLowerCase().includes(o.toLowerCase()));return r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading prayer requests..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Prayer Requests Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage and moderate prayer requests"})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search requests...",value:o,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:d,onChange:b=>c(b.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"answered",children:"Answered"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})}),e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Request"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Prayers"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:y.map(b=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6 font-medium",children:b.title}),e.jsx("td",{className:"py-4 px-6 text-gray-600 max-w-md truncate",children:b.request}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.status==="active"?"bg-green-100 text-green-800":b.status==="answered"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:b.status})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qd,{className:"w-4 h-4 text-red-500"}),b.prayer_count||0]})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date(b.created_at).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[b.status!=="answered"&&e.jsx(me,{onClick:()=>f(b.id,"answered"),variant:"outline",size:"sm",title:"Mark as Answered",children:e.jsx(Ec,{className:"w-4 h-4"})}),b.status!=="archived"&&e.jsx(me,{onClick:()=>f(b.id,"archived"),variant:"outline",size:"sm",title:"Archive",children:e.jsx(__,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>p(b.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},b.id))})]})})}),y.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(qd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No prayer requests found"})]})]})}function E8(){const{user:t}=Mt(),[s,r]=L.useState([]),[a,o]=L.useState(!0),[l,d]=L.useState(!1),[c,h]=L.useState({name:"",content:"",rating:5,testimonial_type:"general",related_id:""});L.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0);const{data:x}=await B.database.from("testimonials").select("*").eq("is_approved",!0).order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});r(x||[])}catch(x){console.error("Error fetching testimonials:",x)}finally{o(!1)}},p=async x=>{if(x.preventDefault(),!!t)try{await B.database.from("testimonials").insert({user_id:t.id,...c,is_approved:!1}),h({name:"",content:"",rating:5,testimonial_type:"general",related_id:""}),d(!1),alert("Thank you! Your testimonial has been submitted for review.")}catch(A){console.error("Error submitting testimonial:",A),alert("Error submitting testimonial")}};if(a)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading testimonials..."})});const y=s.filter(x=>x.is_featured),b=s.filter(x=>!x.is_featured);return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Testimonials"}),e.jsx("p",{className:"text-gray-600",children:"Read what others are saying about our programs"})]}),t&&e.jsxs(me,{onClick:()=>d(!l),variant:"primary",children:[e.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Share Your Story"]})]}),l&&t&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Share Your Testimonial"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),e.jsx("input",{type:"text",value:c.name,onChange:x=>h({...c,name:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(x=>e.jsx("button",{type:"button",onClick:()=>h({...c,rating:x}),className:`p-2 ${c.rating>=x?"text-gold":"text-gray-300"}`,children:e.jsx(Bh,{className:"w-6 h-6 fill-current"})},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Testimonial"}),e.jsx("textarea",{value:c.content,onChange:x=>h({...c,content:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:5,required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Submit"}),e.jsx(me,{type:"button",onClick:()=>d(!1),variant:"outline",children:"Cancel"})]})]})]}),y.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"Featured Testimonials"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:y.map(x=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft border-2 border-gold",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.rating&&e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(A=>e.jsx(Bh,{className:`w-4 h-4 ${x.rating&&x.rating>=A?"text-gold fill-current":"text-gray-300"}`},A))})}),e.jsxs("p",{className:"text-gray-700 mb-4 italic",children:['"',x.content,'"']}),e.jsxs("p",{className:"font-semibold text-navy-ink",children:[" ",x.name]})]},x.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"All Testimonials"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(x=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.rating&&e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(A=>e.jsx(Bh,{className:`w-4 h-4 ${x.rating&&x.rating>=A?"text-gold fill-current":"text-gray-300"}`},A))})}),e.jsxs("p",{className:"text-gray-700 mb-4",children:['"',x.content,'"']}),e.jsxs("p",{className:"font-semibold text-navy-ink text-sm",children:[" ",x.name]})]},x.id))})]}),s.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No testimonials yet. Be the first to share!"})]})]})}function T8(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(null),[h,f]=L.useState(!0);L.useEffect(()=>{p()},[d]);const p=async()=>{try{f(!0);const[y,b]=await Promise.all([B.database.from("forum_categories").select("*").eq("is_active",!0).order("order_index"),d?B.database.from("forum_topics").select("*, forum_categories(*)").eq("category_id",d).order("is_pinned",{ascending:!1}).order("last_reply_at",{ascending:!1}):B.database.from("forum_topics").select("*, forum_categories(*)").order("is_pinned",{ascending:!1}).order("last_reply_at",{ascending:!1})]);a(y.data||[]),l(b.data||[])}catch(y){console.error("Error fetching forum data:",y)}finally{f(!1)}};return h?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading forum..."})}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Community Forum"}),e.jsx("p",{className:"text-gray-600",children:"Join the discussion and connect with others"})]}),e.jsx("div",{className:"flex items-center gap-2",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsxs(me,{href:"/forum/new-topic",variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"New Topic"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft sticky top-4",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Categories"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>c(null),className:`w-full text-left px-4 py-2 rounded-lg ${d===null?"bg-gold text-white":"bg-muted-gray hover:bg-gray-200"}`,children:"All Topics"}),r.map(y=>e.jsx("button",{onClick:()=>c(y.id),className:`w-full text-left px-4 py-2 rounded-lg ${d===y.id?"bg-gold text-white":"bg-muted-gray hover:bg-gray-200"}`,children:y.name},y.id))]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:d?r.find(y=>y.id===d)?.name||"Topics":"All Topics"})}),e.jsx("div",{className:"divide-y",children:o.map(y=>e.jsx(ot,{to:`/forum/topic/${y.id}`,className:"block p-6 hover:bg-muted-gray transition-colors",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.is_pinned&&e.jsx(sm,{className:"w-4 h-4 text-gold"}),e.jsx("h3",{className:"text-lg font-semibold text-navy-ink",children:y.title})]}),e.jsx("p",{className:"text-gray-600 mb-2 line-clamp-2",children:y.content}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsx("span",{children:y.forum_categories?.name||"Uncategorized"}),e.jsxs("span",{children:[y.view_count," views"]}),e.jsxs("span",{children:[y.reply_count," replies"]}),y.last_reply_at&&e.jsxs("span",{children:["Last reply ",new Date(y.last_reply_at).toLocaleDateString()]})]})]})})},y.id))})]}),o.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No topics yet. Start a discussion!"})]})]})]})]})}function F8(){const t=cs(),{user:s,isLoaded:r}=Mt(),[a,o]=L.useState([]),[l,d]=L.useState(!0),[c,h]=L.useState(!1),[f,p]=L.useState({category_id:"",title:"",content:""}),[y,b]=L.useState(null);L.useEffect(()=>{if(r&&!s){t("/login?redirect=/forum/new-topic");return}s&&x()},[s,r]);const x=async()=>{try{const{data:N}=await B.database.from("forum_categories").select("*").eq("is_active",!0).order("order_index");o(N||[]),N&&N.length>0&&!f.category_id&&p(P=>({...P,category_id:N[0].id}))}catch(N){console.error("Error fetching categories:",N)}finally{d(!1)}},A=async N=>{if(N.preventDefault(),!s){t("/login?redirect=/forum/new-topic");return}if(!f.category_id){b("Please select a category");return}if(!f.title.trim()){b("Please enter a title");return}if(!f.content.trim()){b("Please enter content");return}try{h(!0),b(null);const{data:P,error:_}=await B.database.from("forum_topics").insert({category_id:f.category_id,user_id:s.id,title:f.title.trim(),content:f.content.trim(),is_pinned:!1,is_locked:!1,view_count:0,reply_count:0}).select().single();if(_)throw _;t(`/forum/topic/${P.id}`)}catch(P){console.error("Error creating topic:",P),b(P.message||"Failed to create topic. Please try again.")}finally{h(!1)}};return!r||l?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading..."})}),e.jsx(un,{})]}):s?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsx("main",{className:"flex-grow",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(me,{onClick:()=>t("/forum"),variant:"outline",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Forum"]}),s&&e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),className:"bg-white/10 hover:bg-white/20 text-white border-white/20",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-6",children:"Create New Topic"}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg mb-6",children:y}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:f.category_id,onChange:N=>p({...f,category_id:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),a.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:f.title,onChange:N=>p({...f,title:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",placeholder:"Enter topic title...",required:!0,maxLength:200}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[f.title.length,"/200 characters"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:f.content,onChange:N=>p({...f,content:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",rows:12,placeholder:"Write your topic content here...",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[f.content.length," characters"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(me,{type:"submit",variant:"primary",disabled:c,children:[e.jsx(Ic,{className:"w-4 h-4 mr-2"}),c?"Creating...":"Create Topic"]}),e.jsx(me,{type:"button",variant:"outline",onClick:()=>t("/forum"),disabled:c,children:"Cancel"})]})]})]})]})}),e.jsx(un,{})]}):null}function D8(){const t=useNavigate(),{user:s}=Mt(),[r,a]=L.useState(null),[o,l]=L.useState([]),[d,c]=L.useState(!0),[h,f]=L.useState(!1);L.useEffect(()=>{s&&p()},[s]);const p=async()=>{if(s)try{c(!0);const[A,N]=await Promise.all([B.database.from("user_referral_codes").select("*").eq("user_id",s.id).single(),B.database.from("referrals").select("*").eq("referrer_id",s.id).order("created_at",{ascending:!1})]);if(a(A.data),l(N.data||[]),!A.data){const P=`REF-${s.id.substring(0,8).toUpperCase()}`,{data:_}=await B.database.from("user_referral_codes").insert({user_id:s.id,referral_code:P}).select().single();a(_)}}catch(A){console.error("Error fetching referral data:",A)}finally{c(!1)}},y=()=>{if(!r)return;const A=`${window.location.origin}/register?ref=${r.referral_code}`;navigator.clipboard.writeText(A),f(!0),setTimeout(()=>f(!1),2e3)},b=()=>{r&&(navigator.clipboard.writeText(r.referral_code),f(!0),setTimeout(()=>f(!1),2e3))};if(!s)return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Please log in to access the referral program"})});if(d)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading referral program..."})});const x=r?`${window.location.origin}/register?ref=${r.referral_code}`:"";return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Referral Program"}),e.jsx("p",{className:"text-gray-600",children:"Invite friends and earn rewards"})]}),s&&e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),children:[e.jsx(LayoutDashboard,{className:"w-4 h-4 mr-2"}),"Dashboard"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(Qt,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Referrals"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:r?.total_referrals||0})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(Ul,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:o.filter(A=>A.status==="completed").length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(v0,{className:"w-8 h-8 text-gold mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Rewards"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",r?.total_rewards.toFixed(2)||"0.00"]})]})]}),r&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Your Referral Code"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"flex-1 bg-muted-gray px-4 py-3 rounded-lg font-mono text-lg",children:r.referral_code}),e.jsx(me,{onClick:b,variant:"primary",children:h?e.jsx(Ec,{className:"w-4 h-4"}):e.jsx(em,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referral Link"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"text",value:x,readOnly:!0,className:"flex-1 bg-muted-gray px-4 py-2 rounded-lg"}),e.jsx(me,{onClick:y,variant:"primary",children:h?e.jsx(Ec,{className:"w-4 h-4"}):e.jsx(em,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Share this link with friends. When they sign up using your code, you'll earn rewards!"})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Your Referrals"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Date"})]})}),e.jsx("tbody",{children:o.map(A=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:A.email||"N/A"}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A.status==="completed"?"bg-green-100 text-green-800":A.status==="rewarded"?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:A.status})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date(A.created_at).toLocaleDateString()})]},A.id))})]})}),o.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(v0,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No referrals yet. Start sharing your link!"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"How It Works"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"Share your referral link with friends and family"}),e.jsx("li",{children:"They sign up using your unique referral code"}),e.jsx("li",{children:"When they complete their registration, you earn rewards"}),e.jsx("li",{children:"Track your referrals and rewards in your dashboard"})]})]})]})}function R8(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(null),[h,f]=L.useState(null),[p,y]=L.useState(""),[b,x]=L.useState(!0);L.useEffect(()=>{A()},[d,h]);const A=async()=>{try{x(!0);const[w,D]=await Promise.all([B.database.from("resource_categories").select("*").order("order_index"),(()=>{let z=B.database.from("resources").select("*, resource_categories(*)").eq("is_public",!0).order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});return d&&(z=z.eq("category_id",d)),h&&(z=z.eq("resource_type",h)),z})()]);a(w.data||[]),l(D.data||[])}catch(w){console.error("Error fetching resources:",w)}finally{x(!1)}},N=async w=>{if(w.file_url){try{await B.database.from("resources").update({download_count:(w.download_count||0)+1}).eq("id",w.id)}catch(D){console.error("Error tracking download:",D)}window.open(w.file_url,"_blank")}},P=w=>{switch(w){case"video":return e.jsx(Wl,{className:"w-6 h-6"});case"audio":return e.jsx(Jv,{className:"w-6 h-6"});default:return e.jsx(ys,{className:"w-6 h-6"})}},_=o.filter(w=>w.title.toLowerCase().includes(p.toLowerCase())||w.description?.toLowerCase().includes(p.toLowerCase()));if(b)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading resources..."})});const C=_.filter(w=>w.is_featured),j=_.filter(w=>!w.is_featured);return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Resource Library"}),e.jsx("p",{className:"text-gray-600",children:"Access documents, videos, and audio resources"})]}),s&&e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Dashboard"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search resources...",value:p,onChange:w=>y(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:d||"",onChange:w=>c(w.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"All Categories"}),r.map(w=>e.jsx("option",{value:w.id,children:w.name},w.id))]}),e.jsxs("select",{value:h||"",onChange:w=>f(w.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"document",children:"Documents"}),e.jsx("option",{value:"video",children:"Videos"}),e.jsx("option",{value:"audio",children:"Audio"}),e.jsx("option",{value:"link",children:"Links"})]})]})}),C.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"Featured Resources"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(w=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft border-2 border-gold",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"text-gold",children:P(w.resource_type)}),e.jsx("span",{className:"text-xs bg-gold text-white px-2 py-1 rounded",children:"Featured"})]}),e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-2",children:w.title}),w.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:w.description}),w.thumbnail_url&&e.jsx("img",{src:w.thumbnail_url,alt:w.title,className:"w-full h-32 object-cover rounded-lg mb-4"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[w.download_count||0," downloads"]}),e.jsxs(me,{onClick:()=>N(w),variant:"primary",size:"sm",children:[e.jsx(ci,{className:"w-4 h-4 mr-2"}),"Download"]})]})]},w.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"All Resources"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(w=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"text-blue-500",children:P(w.resource_type)}),w.resource_categories&&e.jsx("span",{className:"text-xs bg-muted-gray px-2 py-1 rounded",children:w.resource_categories.name})]}),e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-2",children:w.title}),w.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:w.description}),w.thumbnail_url&&e.jsx("img",{src:w.thumbnail_url,alt:w.title,className:"w-full h-32 object-cover rounded-lg mb-4"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[w.download_count||0," downloads"]}),e.jsxs(me,{onClick:()=>N(w),variant:"outline",size:"sm",children:[e.jsx(ci,{className:"w-4 h-4 mr-2"}),"Download"]})]})]},w.id))})]}),_.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(ys,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No resources found"})]})]})}function I8(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(null),[h,f]=L.useState("all"),[p,y]=L.useState(!0);L.useEffect(()=>{b()},[d,h]);const b=async()=>{try{y(!0);const[N,P]=await Promise.all([(()=>{let _=B.database.from("blog_posts").select("*, blog_categories(*)").eq("status","published").order("published_at",{ascending:!1});return d&&(_=_.eq("category_id",d)),h!=="all"&&(_=_.eq("post_type",h)),_})(),B.database.from("blog_categories").select("*")]);a(N.data||[]),l(P.data||[])}catch(N){console.error("Error fetching blog posts:",N)}finally{y(!1)}};if(p)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading blog posts..."})});const x=r.find(N=>N.post_type==="news"),A=r.filter(N=>N.id!==x?.id);return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"News & Blog"}),e.jsx("p",{className:"text-gray-600",children:"Stay updated with the latest news and announcements"})]}),s&&e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Dashboard"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{value:d||"",onChange:N=>c(N.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"All Categories"}),o.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]}),e.jsxs("select",{value:h,onChange:N=>f(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"post",children:"Blog Posts"}),e.jsx("option",{value:"news",children:"News"}),e.jsx("option",{value:"announcement",children:"Announcements"})]})]})}),x&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden mb-8",children:[x.featured_image_url&&e.jsx("img",{src:x.featured_image_url,alt:x.title,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-4 h-4"}),x.published_at?new Date(x.published_at).toLocaleDateString():new Date(x.created_at).toLocaleDateString()]}),x.blog_categories&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fp,{className:"w-4 h-4"}),x.blog_categories.name]})]}),e.jsx("h2",{className:"text-3xl font-bold text-navy-ink mb-4",children:x.title}),x.excerpt&&e.jsx("p",{className:"text-gray-700 mb-6",children:x.excerpt}),e.jsxs(ot,{to:`/blog/${x.slug}`,className:"inline-flex items-center text-gold font-semibold hover:underline",children:["Read More ",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(N=>e.jsxs(ot,{to:`/blog/${N.slug}`,className:"bg-white rounded-card shadow-soft overflow-hidden hover:shadow-lg transition-shadow",children:[N.featured_image_url&&e.jsx("img",{src:N.featured_image_url,alt:N.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-4 h-4"}),N.published_at?new Date(N.published_at).toLocaleDateString():new Date(N.created_at).toLocaleDateString()]}),N.blog_categories&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fp,{className:"w-4 h-4"}),N.blog_categories.name]})]}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:N.title}),N.excerpt&&e.jsx("p",{className:"text-gray-600 line-clamp-3",children:N.excerpt})]})]},N.id))}),r.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No blog posts found"})]})]})}function M8(){const{id:t}=Mi();cs();const{user:s}=Mt(),[r,a]=L.useState(null),[o,l]=L.useState([]),[d,c]=L.useState(!0),[h,f]=L.useState(""),[p,y]=L.useState(!1);L.useEffect(()=>{t&&(b(),x())},[t]);const b=async()=>{if(t)try{const{data:P}=await B.database.from("forum_topics").select("*, forum_categories(*), users(*)").eq("id",t).single();P&&(a(P),s&&s.id!==P.user_id&&await B.database.from("forum_topics").update({view_count:(P.view_count||0)+1}).eq("id",t))}catch(P){console.error("Error fetching topic:",P)}finally{c(!1)}},x=async()=>{if(t)try{const{data:P}=await B.database.from("forum_replies").select("*, users(*)").eq("topic_id",t).order("created_at",{ascending:!0});l(P||[]),r&&await B.database.from("forum_topics").update({reply_count:P?.length||0,last_reply_at:new Date().toISOString()}).eq("id",t)}catch(P){console.error("Error fetching replies:",P)}},A=async P=>{if(P.preventDefault(),!(!s||!t||!h.trim()))try{y(!0),await B.database.from("forum_replies").insert({topic_id:t,user_id:s.id,content:h}),f(""),x(),b()}catch(_){console.error("Error submitting reply:",_),alert(_.message||"Error submitting reply. Please try again.")}finally{y(!1)}},N=async P=>{if(!(!s||!r||r.user_id!==s.id))try{await B.database.from("forum_replies").update({is_solution:!1}).eq("topic_id",r.id),await B.database.from("forum_replies").update({is_solution:!0}).eq("id",P),x()}catch(_){console.error("Error marking solution:",_)}};return d?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading topic..."})}):r?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(ot,{to:"/forum",className:"inline-flex items-center text-gold hover:underline mb-6",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Forum"]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.is_pinned&&e.jsx(sm,{className:"w-4 h-4 text-gold"}),r.is_locked&&e.jsx(Yr,{className:"w-4 h-4 text-gray-500"}),e.jsx("h1",{className:"text-2xl font-bold text-navy-ink",children:r.title})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-4",children:[e.jsx("span",{children:r.forum_categories?.name||"Uncategorized"}),e.jsxs("span",{children:[r.view_count," views"]}),e.jsxs("span",{children:[r.reply_count," replies"]})]})]})}),e.jsx("div",{className:"prose max-w-none mb-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.content})}),e.jsx("div",{className:"flex items-center justify-between pt-4 border-t",children:e.jsxs("div",{className:"flex items-center gap-3",children:[r.users?.avatar_url?e.jsx("img",{src:r.users.avatar_url,alt:r.users.nickname||r.users.email,className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold flex items-center justify-center text-white font-bold",children:(r.users?.nickname||r.users?.email||"U")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:r.users?.nickname||r.users?.email||"Anonymous"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(r.created_at).toLocaleDateString()})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:["Replies (",o.length,")"]}),e.jsx("div",{className:"space-y-4",children:o.map(P=>e.jsxs("div",{className:`bg-white p-6 rounded-card shadow-soft ${P.is_solution?"border-2 border-green-500":""}`,children:[P.is_solution&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-3",children:[e.jsx(Ec,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Marked as Solution"})]}),e.jsx("div",{className:"prose max-w-none mb-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:P.content})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[P.users?.avatar_url?e.jsx("img",{src:P.users.avatar_url,alt:P.users.nickname||P.users.email,className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:(P.users?.nickname||P.users?.email||"U")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:P.users?.nickname||P.users?.email||"Anonymous"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(P.created_at).toLocaleDateString()})]})]}),s&&r.user_id===s.id&&!P.is_solution&&e.jsxs(me,{onClick:()=>N(P.id),variant:"outline",size:"sm",children:[e.jsx(Ec,{className:"w-4 h-4 mr-2"}),"Mark as Solution"]})]})]},P.id))}),o.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No replies yet. Be the first to reply!"})]})]}),!r.is_locked&&s?e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Post a Reply"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsx("textarea",{value:h,onChange:P=>f(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:6,placeholder:"Write your reply...",required:!0}),e.jsxs(me,{type:"submit",variant:"primary",disabled:p,children:[e.jsx(Ic,{className:"w-4 h-4 mr-2"}),p?"Posting...":"Post Reply"]})]})]}):r.is_locked?e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Yr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"This topic is locked and no longer accepts replies."})]}):e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Please ",e.jsx(ot,{to:"/login",className:"text-gold hover:underline",children:"log in"})," to reply."]})})]}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Topic not found"}),e.jsx(ot,{to:"/forum",className:"text-gold hover:underline mt-4 inline-block",children:"Back to Forum"})]})})}function z8(){const{slug:t}=Mi(),[s,r]=L.useState(null),[a,o]=L.useState([]),[l,d]=L.useState([]),[c,h]=L.useState(!0);L.useEffect(()=>{t&&f()},[t]);const f=async()=>{if(t)try{h(!0);const{data:y}=await B.database.from("blog_posts").select("*, blog_categories(*), users(*)").eq("slug",t).eq("status","published").single();if(y){r(y),await B.database.from("blog_posts").update({view_count:(y.view_count||0)+1}).eq("id",y.id);const{data:b}=await B.database.from("blog_posts").select("*, blog_categories(*), users(*)").eq("status","published").neq("id",y.id).or(`category_id.eq.${y.category_id},post_type.eq.${y.post_type}`).limit(3);o(b||[]);const{data:x}=await B.database.from("blog_post_tags").select("blog_tags(*)").eq("post_id",y.id);d(x?.map(A=>A.blog_tags).filter(Boolean)||[])}}catch(y){console.error("Error fetching post:",y)}finally{h(!1)}},p=()=>{navigator.share?navigator.share({title:s?.title,text:s?.excerpt,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))};return c?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading post..."})}):s?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(ot,{to:"/blog",className:"inline-flex items-center text-gold hover:underline mb-6",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Blog"]}),s.featured_image_url&&e.jsx("img",{src:s.featured_image_url,alt:s.title,className:"w-full h-64 md:h-96 object-cover rounded-card mb-6"}),e.jsxs("article",{className:"bg-white p-8 rounded-card shadow-soft mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-6",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-4 h-4"}),s.published_at?new Date(s.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),s.users&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(nl,{className:"w-4 h-4"}),s.users.nickname||s.users.email]}),s.blog_categories&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fp,{className:"w-4 h-4"}),s.blog_categories.name]})]}),e.jsx("h1",{className:"text-4xl font-bold text-navy-ink mb-4",children:s.title}),s.excerpt&&e.jsx("p",{className:"text-xl text-gray-600 mb-6 italic",children:s.excerpt}),l.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:l.map(y=>e.jsx(ot,{to:`/blog?tag=${y.slug}`,className:"px-3 py-1 bg-muted-gray rounded-full text-sm text-navy-ink hover:bg-gold hover:text-white transition-colors",children:y.name},y.id))}),e.jsx("div",{className:"prose max-w-none mb-6",children:e.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:s.content}})}),e.jsx("div",{className:"pt-6 border-t",children:e.jsxs(me,{onClick:p,variant:"outline",children:[e.jsx(B6,{className:"w-4 h-4 mr-2"}),"Share Post"]})})]}),a.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"Related Posts"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(y=>e.jsxs(ot,{to:`/blog/${y.slug}`,className:"bg-white rounded-card shadow-soft overflow-hidden hover:shadow-lg transition-shadow",children:[y.featured_image_url&&e.jsx("img",{src:y.featured_image_url,alt:y.title,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-2 line-clamp-2",children:y.title}),y.excerpt&&e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:y.excerpt})]})]},y.id))})]})]}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Post not found"}),e.jsx(ot,{to:"/blog",className:"text-gold hover:underline mt-4 inline-block",children:"Back to Blog"})]})})}function O8(){const{user:t}=Mt(),[s,r]=L.useState([]),[a,o]=L.useState(null),[l,d]=L.useState("inbox"),[c,h]=L.useState(!0),[f,p]=L.useState(""),[y,b]=L.useState(!1),[x,A]=L.useState({recipient_email:"",subject:"",content:""});L.useEffect(()=>{t&&N()},[t,l]);const N=async()=>{if(t)try{h(!0);const w=l==="inbox"?B.database.from("messages").select("*, sender:users!messages_sender_id_fkey(*)").eq("recipient_id",t.id).order("created_at",{ascending:!1}):B.database.from("messages").select("*, recipient:users!messages_recipient_id_fkey(*)").eq("sender_id",t.id).order("created_at",{ascending:!1}),{data:D}=await w;r(D||[])}catch(w){console.error("Error fetching messages:",w)}finally{h(!1)}},P=async w=>{if(o(w),l==="inbox"&&!w.is_read&&t)try{await B.database.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",w.id),N()}catch(D){console.error("Error marking message as read:",D)}},_=async w=>{if(w.preventDefault(),!!t)try{const{data:D}=await B.database.from("users").select("id").eq("email",x.recipient_email).single();if(!D){alert("User not found with that email address");return}await B.database.from("messages").insert({sender_id:t.id,recipient_id:D.id,subject:x.subject,content:x.content}),A({recipient_email:"",subject:"",content:""}),b(!1),N(),alert("Message sent!")}catch(D){console.error("Error sending message:",D),alert("Error sending message")}},C=s.filter(w=>{const D=f.toLowerCase();return w.subject?.toLowerCase().includes(D)||w.content.toLowerCase().includes(D)||(l==="inbox"?w.sender?.email?.toLowerCase().includes(D)||w.sender?.nickname?.toLowerCase().includes(D):w.recipient?.email?.toLowerCase().includes(D)||w.recipient?.nickname?.toLowerCase().includes(D))}),j=s.filter(w=>!w.is_read).length;return t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Messages"}),e.jsx("p",{className:"text-gray-600",children:"Send and receive messages"})]}),e.jsxs(me,{onClick:()=>b(!0),variant:"primary",children:[e.jsx(Ic,{className:"w-4 h-4 mr-2"}),"Compose"]})]}),y&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Compose Message"}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To (Email)"}),e.jsx("input",{type:"email",value:x.recipient_email,onChange:w=>A({...x,recipient_email:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),e.jsx("input",{type:"text",value:x.subject,onChange:w=>A({...x,subject:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{value:x.content,onChange:w=>A({...x,content:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:6,required:!0})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Send"}),e.jsx(me,{type:"button",onClick:()=>b(!1),variant:"outline",children:"Cancel"})]})]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>{d("inbox"),o(null)},className:`px-4 py-2 rounded-lg font-medium ${l==="inbox"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Inbox ",j>0&&`(${j})`]}),e.jsx("button",{onClick:()=>{d("sent"),o(null)},className:`px-4 py-2 rounded-lg font-medium ${l==="sent"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:"Sent"})]}),e.jsxs("div",{className:"relative flex-1 max-w-md ml-4",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search messages...",value:f,onChange:w=>p(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y max-h-[600px] overflow-y-auto",children:C.map(w=>{const D=l==="inbox"?w.sender:w.recipient;return e.jsxs("button",{onClick:()=>P(w),className:`w-full text-left p-4 hover:bg-muted-gray transition-colors ${a?.id===w.id?"bg-muted-gray":""} ${!w.is_read&&l==="inbox"?"font-semibold":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[D?.avatar_url?e.jsx("img",{src:D.avatar_url,alt:D.nickname||D.email,className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-white text-xs font-bold",children:(D?.nickname||D?.email||"U")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-navy-ink",children:D?.nickname||D?.email||"Unknown"}),w.subject&&e.jsx("p",{className:"text-xs text-gray-600",children:w.subject})]})]}),l==="sent"&&(w.is_read?e.jsx(R_,{className:"w-4 h-4 text-blue-500"}):e.jsx(Ec,{className:"w-4 h-4 text-gray-400"}))]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:w.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(w.created_at).toLocaleDateString()})]},w.id)})}),C.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(vn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No messages"})]})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-card shadow-soft p-6",children:a?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-start justify-between mb-4 pb-4 border-b",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-2",children:a.subject||"No Subject"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[l==="inbox"?"From":"To",":"," ",l==="inbox"?a.sender?.nickname||a.sender?.email:a.recipient?.nickname||a.recipient?.email]}),e.jsx("span",{children:new Date(a.created_at).toLocaleString()})]})]})}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:a.content})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Select a message to view"})]})})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Please log in to view messages"})})}function q8(){const{courseId:t}=Mi();Mt();const[s,r]=L.useState([]),[a,o]=L.useState(!0);L.useEffect(()=>{t&&l()},[t]);const l=async()=>{if(t)try{o(!0);const{data:d}=await B.database.from("quizzes").select("*").eq("course_id",t).eq("is_active",!0).order("created_at",{ascending:!1});r(d||[])}catch(d){console.error("Error fetching quizzes:",d)}finally{o(!1)}};return a?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading quizzes..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Course Quizzes"}),e.jsx("p",{className:"text-gray-600",children:"Test your knowledge and track your progress"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(d=>e.jsx($8,{quiz:d,courseId:t||""},d.id))}),s.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(as,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No quizzes available for this course"})]})]})}function $8({quiz:t,courseId:s}){const{user:r}=Mt(),[a,o]=L.useState([]),[l,d]=L.useState(!0);L.useEffect(()=>{r&&c()},[r,t.id]);const c=async()=>{if(r)try{const{data:p}=await B.database.from("quiz_attempts").select("*").eq("quiz_id",t.id).eq("user_id",r.id).order("started_at",{ascending:!1});o(p||[])}catch(p){console.error("Error fetching attempts:",p)}finally{d(!1)}},h=a.length<t.max_attempts,f=a.length>0?a.reduce((p,y)=>(y.percentage||0)>(p.percentage||0)?y:p):null;return e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx(as,{className:"w-8 h-8 text-blue-500"}),f&&f.passed&&e.jsx(rt,{className:"w-6 h-6 text-green-500"})]}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:t.title}),t.description&&e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm text-gray-600",children:[t.time_limit&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($r,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.time_limit," minutes"]})]}),e.jsx("div",{children:e.jsxs("span",{children:["Passing Score: ",t.passing_score,"%"]})}),e.jsx("div",{children:e.jsxs("span",{children:["Attempts: ",a.length," / ",t.max_attempts]})}),f&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("span",{className:"font-semibold",children:["Best Score: ",f.percentage,"%",f.passed?" ":" "]})})]}),h?e.jsx(ot,{to:`/dashboard/courses/${s}/quizzes/${t.id}/take`,children:e.jsxs(me,{variant:"primary",className:"w-full",children:["Take Quiz ",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})}):e.jsx("div",{className:"text-center text-sm text-gray-500 py-2",children:"Maximum attempts reached"}),a.length>0&&e.jsx(ot,{to:`/dashboard/courses/${s}/quizzes/${t.id}/results`,children:e.jsx(me,{variant:"outline",className:"w-full mt-2",children:"View Results"})})]})}function U8(){const{courseId:t,quizId:s}=Mi(),r=cs(),{user:a}=Mt(),[o,l]=L.useState(null),[d,c]=L.useState([]),[h,f]=L.useState({}),[p,y]=L.useState(0),[b,x]=L.useState(null),[A,N]=L.useState(null),[P,_]=L.useState(!1),[C,j]=L.useState(!0);L.useEffect(()=>{s&&w()},[s]),L.useEffect(()=>{if(o?.time_limit&&A){const I=o.time_limit*60,R=setInterval(()=>{const $=Math.floor((new Date().getTime()-A.getTime())/1e3),q=I-$;x(q),q<=0&&(clearInterval(R),U())},1e3);return()=>clearInterval(R)}},[o,A]);const w=async()=>{if(s)try{j(!0);const[I,R]=await Promise.all([B.database.from("quizzes").select("*").eq("id",s).single(),B.database.from("quiz_questions").select("*").eq("quiz_id",s).order("order_index")]);l(I.data),c(R.data||[]),N(new Date),I.data?.time_limit&&x(I.data.time_limit*60)}catch(I){console.error("Error fetching quiz:",I)}finally{j(!1)}},D=(I,R)=>{f({...h,[I]:R})},z=()=>{let I=0,R=0;d.forEach(Q=>{I+=Q.points;const he=h[Q.id];if(Q.question_type==="multiple_choice"){const be=Q.options?.find(V=>V.correct);be&&he===be.text&&(R+=Q.points)}else Q.question_type==="true_false"?he===Q.correct_answer&&(R+=Q.points):Q.question_type==="short_answer"&&he?.toLowerCase().trim()===Q.correct_answer?.toLowerCase().trim()&&(R+=Q.points)});const $=I>0?Math.round(R/I*100):0,q=$>=(o?.passing_score||70);return{earnedPoints:R,totalPoints:I,percentage:$,passed:q}},U=async()=>{if(!(!a||!s||P))try{_(!0);const{earnedPoints:I,totalPoints:R,percentage:$,passed:q}=z(),Q=A?Math.floor((new Date().getTime()-A.getTime())/1e3):0;await B.database.from("quiz_attempts").insert({quiz_id:s,user_id:a.id,answers:h,score:I,percentage:$,passed:q,time_taken:Q,submitted_at:new Date().toISOString()}),r(`/dashboard/courses/${t}/quizzes/${s}/results`)}catch(I){console.error("Error submitting quiz:",I),alert("Error submitting quiz")}finally{_(!1)}},X=I=>{const R=Math.floor(I/60),$=I%60;return`${R}:${$.toString().padStart(2,"0")}`};if(C)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading quiz..."})});if(!o||d.length===0)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Quiz not found"})});const E=d[p],G=(p+1)/d.length*100;return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy-ink",children:o.title}),o.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:o.description})]}),b!==null&&e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx($r,{className:"w-5 h-5"}),e.jsx("span",{className:b<60?"text-red-600":"",children:X(b)})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gold h-2 rounded-full transition-all",style:{width:`${G}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Question ",p+1," of ",d.length]})]}),o.instructions&&p===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:e.jsx("p",{className:"text-blue-800",children:o.instructions})}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-2",children:E.question_text}),e.jsxs("p",{className:"text-sm text-gray-600",children:[E.points," point",E.points!==1?"s":""]})]}),e.jsxs("div",{className:"space-y-3",children:[E.question_type==="multiple_choice"&&E.options?.map((I,R)=>e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ${h[E.id]===I.text?"border-gold bg-gold/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:`question-${E.id}`,value:I.text,checked:h[E.id]===I.text,onChange:$=>D(E.id,$.target.value),className:"mr-3"}),e.jsx("span",{children:I.text})]},R)),E.question_type==="true_false"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ${h[E.id]==="true"?"border-gold bg-gold/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:`question-${E.id}`,value:"true",checked:h[E.id]==="true",onChange:I=>D(E.id,I.target.value),className:"mr-3"}),e.jsx("span",{children:"True"})]}),e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ${h[E.id]==="false"?"border-gold bg-gold/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:`question-${E.id}`,value:"false",checked:h[E.id]==="false",onChange:I=>D(E.id,I.target.value),className:"mr-3"}),e.jsx("span",{children:"False"})]})]}),E.question_type==="short_answer"&&e.jsx("textarea",{value:h[E.id]||"",onChange:I=>D(E.id,I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:4,placeholder:"Type your answer..."})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(me,{onClick:()=>y(Math.max(0,p-1)),variant:"outline",disabled:p===0,children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex gap-2",children:p<d.length-1?e.jsxs(me,{onClick:()=>y(p+1),variant:"primary",children:["Next",e.jsx(yn,{className:"w-4 h-4 ml-2"})]}):e.jsx(me,{onClick:U,variant:"primary",disabled:P,children:P?"Submitting...":"Submit Quiz"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Question Navigation"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((I,R)=>e.jsx("button",{onClick:()=>y(R),className:`w-10 h-10 rounded-lg text-sm font-medium transition-colors ${R===p?"bg-gold text-white":h[I.id]?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:R+1},I.id))})]})]})}function B8(){const{courseId:t,quizId:s}=Mi(),{user:r}=Mt(),[a,o]=L.useState(null),[l,d]=L.useState(null),[c,h]=L.useState([]),[f,p]=L.useState(!0);L.useEffect(()=>{s&&r&&y()},[s,r]);const y=async()=>{if(!(!s||!r))try{p(!0);const[A,N,P]=await Promise.all([B.database.from("quiz_attempts").select("*").eq("quiz_id",s).eq("user_id",r.id).order("submitted_at",{ascending:!1}).limit(1).single(),B.database.from("quizzes").select("*").eq("id",s).single(),B.database.from("quiz_questions").select("*").eq("quiz_id",s).order("order_index")]);o(A.data),d(N.data),h(P.data||[])}catch(A){console.error("Error fetching results:",A)}finally{p(!1)}},b=A=>{if(!a)return!1;const N=a.answers[A.id];if(A.question_type==="multiple_choice"){const P=A.options?.find(_=>_.correct);return P?N===P.text:!1}else{if(A.question_type==="true_false")return N===A.correct_answer;if(A.question_type==="short_answer")return N?.toLowerCase().trim()===A.correct_answer?.toLowerCase().trim()}return!1},x=A=>{if(!A)return"N/A";const N=Math.floor(A/60),P=A%60;return`${N}m ${P}s`};return f?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading results..."})}):!a||!l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600",children:"Results not found"}),e.jsx(ot,{to:`/dashboard/courses/${t}/quizzes`,className:"text-gold hover:underline mt-4 inline-block",children:"Back to Quizzes"})]}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx("div",{className:"mb-4",children:a.passed?e.jsx(rt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}):e.jsx(rl,{className:"w-16 h-16 text-red-500 mx-auto mb-4"})}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:l.title}),e.jsxs("p",{className:`text-2xl font-bold ${a.passed?"text-green-600":"text-red-600"}`,children:[a.percentage,"% - ",a.passed?"Passed":"Failed"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Passing Score: ",l.passing_score,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Ms,{className:"w-8 h-8 text-gold mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Score"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:[a.score||0," / ",c.reduce((A,N)=>A+N.points,0)]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx($r,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Time Taken"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:x(a.time_taken)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(rt,{className:`w-8 h-8 mx-auto mb-2 ${a.passed?"text-green-500":"text-red-500"}`}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Status"}),e.jsx("p",{className:`text-2xl font-bold ${a.passed?"text-green-600":"text-red-600"}`,children:a.passed?"Passed":"Failed"})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Question Review"})}),e.jsx("div",{className:"divide-y",children:c.map((A,N)=>{const P=b(A),_=a.answers[A.id];return e.jsxs("div",{className:`p-6 ${P?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[P?e.jsx(rt,{className:"w-5 h-5 text-green-600"}):e.jsx(rl,{className:"w-5 h-5 text-red-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-navy-ink",children:["Question ",N+1]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",A.points," point",A.points!==1?"s":"",")"]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:A.question_text})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Your Answer:"}),e.jsx("div",{className:`p-3 rounded-lg ${P?"bg-green-100":"bg-red-100"}`,children:e.jsx("p",{className:P?"text-green-800":"text-red-800",children:_||"No answer provided"})})]}),!P&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Correct Answer:"}),e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx("p",{className:"text-green-800",children:A.question_type==="multiple_choice"?A.options?.find(C=>C.correct)?.text:A.correct_answer})})]})]})]},A.id)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(ot,{to:`/dashboard/courses/${t}/quizzes`,children:e.jsxs(me,{variant:"outline",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Quizzes"]})}),e.jsx(ot,{to:`/dashboard/courses/${t}`,children:e.jsx(me,{variant:"primary",children:"Continue Course"})})]})]})}function V8(){const{user:t}=Mt(),[s,r]=L.useState(null),[a,o]=L.useState([]),[l,d]=L.useState(!0),[c,h]=L.useState(!1),[f,p]=L.useState({skills:[],availability:{days:[],hours:""}});L.useEffect(()=>{t&&y()},[t]);const y=async()=>{if(t)try{d(!0);const[x,A]=await Promise.all([B.database.from("volunteers").select("*, volunteer_roles(*)").eq("user_id",t.id).single(),B.database.from("volunteer_shifts").select("*, events(*)").eq("volunteer_id",t.id).order("start_time",{ascending:!1}).limit(10)]);r(x.data),o(A.data||[]),x.data||h(!0)}catch(x){console.error("Error fetching volunteer data:",x)}finally{d(!1)}},b=async x=>{if(x.preventDefault(),!!t)try{await B.database.from("volunteers").insert({user_id:t.id,skills:f.skills,availability:f.availability,status:"active"}),h(!1),y(),alert("Successfully registered as a volunteer!")}catch(A){console.error("Error registering volunteer:",A),alert("Error registering as volunteer")}};return t?l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading volunteer information..."})}):c||!s?e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Become a Volunteer"}),e.jsx("p",{className:"text-gray-600",children:"Join our volunteer team and make a difference"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Volunteer Registration"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills (select all that apply)"}),e.jsx("div",{className:"space-y-2",children:["Teaching","Administration","Event Planning","Technical","Music","Media","Outreach","Counseling"].map(x=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.skills.includes(x),onChange:A=>{A.target.checked?p({...f,skills:[...f.skills,x]}):p({...f,skills:f.skills.filter(N=>N!==x)})},className:"mr-2"}),e.jsx("span",{children:x})]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Days"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(x=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.availability.days.includes(x),onChange:A=>{A.target.checked?p({...f,availability:{...f.availability,days:[...f.availability.days,x]}}):p({...f,availability:{...f.availability,days:f.availability.days.filter(N=>N!==x)}})},className:"mr-2"}),e.jsx("span",{children:x})]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:'Available Hours (e.g., "9am-5pm")'}),e.jsx("input",{type:"text",value:f.availability.hours,onChange:x=>p({...f,availability:{...f.availability,hours:x.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"9am-5pm"})]}),e.jsx(me,{type:"submit",variant:"primary",children:"Register as Volunteer"})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Volunteer Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Manage your volunteer activities"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(Qt,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Status"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink capitalize",children:s.status})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx($r,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Hours"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:s.total_hours.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(ns,{className:"w-8 h-8 text-purple-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Upcoming Shifts"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:a.filter(x=>new Date(x.start_time)>new Date&&x.status==="scheduled").length})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Your Information"}),e.jsxs("div",{className:"space-y-3",children:[s.volunteer_roles&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Role: "}),e.jsx("span",{className:"font-semibold",children:s.volunteer_roles.name})]}),s.skills&&s.skills.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Skills: "}),e.jsx("span",{className:"font-semibold",children:s.skills.join(", ")})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Your Shifts"})}),e.jsx("div",{className:"divide-y",children:a.map(x=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[x.events&&e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-2",children:x.events.title}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(x.start_time).toLocaleDateString()," at"," ",new Date(x.start_time).toLocaleTimeString()]})]}),x.hours_worked&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($r,{className:"w-4 h-4"}),e.jsxs("span",{children:[x.hours_worked," hours"]})]})]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${x.status==="completed"?"bg-green-100 text-green-800":x.status==="scheduled"?"bg-blue-100 text-blue-800":x.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:x.status})]})},x.id))}),a.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No shifts scheduled"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Please log in to view volunteer information"})})}function W8(){const{user:t}=Mt(),[s,r]=L.useState([]),[a,o]=L.useState([]),[l,d]=L.useState(!0),[c,h]=L.useState("all");L.useEffect(()=>{t&&f()},[t,c]);const f=async()=>{if(t)try{d(!0);const[b,x]=await Promise.all([(()=>{let A=B.database.from("attendance").select("*, events(*), courses(*)").eq("user_id",t.id).order("check_in_time",{ascending:!1});return c!=="all"&&(A=A.eq("attendance_type",c)),A})(),B.database.from("events").select("*").gte("event_date",new Date().toISOString()).order("event_date",{ascending:!0}).limit(5)]);r(b.data||[]),o(x.data||[])}catch(b){console.error("Error fetching attendance:",b)}finally{d(!1)}},p=async b=>{if(t)try{const{data:x}=await B.database.from("attendance").select("*").eq("user_id",t.id).eq("event_id",b).eq("check_in_time",new Date().toISOString().split("T")[0]).single();if(x){alert("You have already checked in for this event today");return}await B.database.from("attendance").insert({user_id:t.id,event_id:b,attendance_type:"event",status:"present",check_in_time:new Date().toISOString()}),alert("Checked in successfully!"),f()}catch(x){console.error("Error checking in:",x),alert("Error checking in")}},y={total:s.length,present:s.filter(b=>b.status==="present").length,absent:s.filter(b=>b.status==="absent").length,events:s.filter(b=>b.attendance_type==="event").length,courses:s.filter(b=>b.attendance_type==="course").length};return t?l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading attendance..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Attendance"}),e.jsx("p",{className:"text-gray-600",children:"Track your attendance at events and courses"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(ns,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:y.total})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(rt,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Present"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:y.present})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx(Ul,{className:"w-8 h-8 text-purple-500 mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Events"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:y.events})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx($r,{className:"w-8 h-8 text-gold mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Courses"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:y.courses})]})]}),a.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Upcoming Events - Quick Check-in"}),e.jsx("div",{className:"space-y-3",children:a.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted-gray rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-navy-ink",children:b.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(b.event_date).toLocaleDateString()," at"," ",new Date(b.event_date).toLocaleTimeString()]})]}),e.jsx(me,{onClick:()=>p(b.id),variant:"primary",size:"sm",children:"Check In"})]},b.id))})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:c,onChange:b=>h(b.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"event",children:"Events"}),e.jsx("option",{value:"course",children:"Courses"}),e.jsx("option",{value:"lesson",children:"Lessons"})]})]})}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Attendance History"})}),e.jsx("div",{className:"divide-y",children:s.map(b=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-2",children:b.events?.title||b.courses?.title||"Attendance Record"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(b.check_in_time).toLocaleDateString()," at"," ",new Date(b.check_in_time).toLocaleTimeString()]})]}),b.check_out_time&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($r,{className:"w-4 h-4"}),e.jsxs("span",{children:["Checked out: ",new Date(b.check_out_time).toLocaleTimeString()]})]}),e.jsx("div",{children:e.jsx("span",{className:"capitalize",children:b.attendance_type})})]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${b.status==="present"?"bg-green-100 text-green-800":b.status==="absent"?"bg-red-100 text-red-800":b.status==="late"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:b.status})]})},b.id))}),s.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No attendance records yet"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Please log in to view attendance"})})}function H8(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState(!0),[d,c]=L.useState(!1),[h,f]=L.useState(null),[p,y]=L.useState(""),[b,x]=L.useState({course_id:"",title:"",description:"",instructions:"",time_limit:"",passing_score:70,max_attempts:1,is_active:!0});L.useEffect(()=>{A()},[]);const A=async()=>{try{l(!0);const[j,w]=await Promise.all([B.database.from("quizzes").select("*, courses(*)").order("created_at",{ascending:!1}),B.database.from("courses").select("*").order("title")]);s(j.data||[]),a(w.data||[])}catch(j){console.error("Error fetching data:",j)}finally{l(!1)}},N=async j=>{j.preventDefault();try{const w={...b,course_id:b.course_id||null,time_limit:b.time_limit?parseInt(b.time_limit):null,passing_score:parseInt(b.passing_score.toString()),max_attempts:parseInt(b.max_attempts.toString())};h?await B.database.from("quizzes").update(w).eq("id",h.id):await B.database.from("quizzes").insert(w),c(!1),f(null),x({course_id:"",title:"",description:"",instructions:"",time_limit:"",passing_score:70,max_attempts:1,is_active:!0}),A()}catch(w){console.error("Error saving quiz:",w),alert("Error saving quiz")}},P=j=>{f(j),x({course_id:j.course_id||"",title:j.title,description:j.description||"",instructions:"",time_limit:j.time_limit?.toString()||"",passing_score:j.passing_score,max_attempts:j.max_attempts,is_active:j.is_active}),c(!0)},_=async j=>{if(confirm("Are you sure you want to delete this quiz?"))try{await B.database.from("quizzes").delete().eq("id",j),A()}catch(w){console.error("Error deleting quiz:",w),alert("Error deleting quiz")}},C=t.filter(j=>j.title.toLowerCase().includes(p.toLowerCase())||j.description?.toLowerCase().includes(p.toLowerCase()));return o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading quizzes..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Quiz Management"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage course quizzes"})]}),e.jsxs(me,{onClick:()=>{f(null),x({course_id:"",title:"",description:"",instructions:"",time_limit:"",passing_score:70,max_attempts:1,is_active:!0}),c(!0)},variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Quiz"]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search quizzes...",value:p,onChange:j=>y(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})}),d&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:h?"Edit Quiz":"Create Quiz"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course (Optional)"}),e.jsxs("select",{value:b.course_id,onChange:j=>x({...b,course_id:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"No Course (General Quiz)"}),r.map(j=>e.jsx("option",{value:j.id,children:j.title},j.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:b.title,onChange:j=>x({...b,title:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:j=>x({...b,description:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),e.jsx("textarea",{value:b.instructions,onChange:j=>x({...b,instructions:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Limit (minutes)"}),e.jsx("input",{type:"number",value:b.time_limit,onChange:j=>x({...b,time_limit:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passing Score (%)"}),e.jsx("input",{type:"number",value:b.passing_score,onChange:j=>x({...b,passing_score:parseInt(j.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",min:"0",max:"100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attempts"}),e.jsx("input",{type:"number",value:b.max_attempts,onChange:j=>x({...b,max_attempts:parseInt(j.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",min:"1",required:!0})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:b.is_active,onChange:j=>x({...b,is_active:j.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save"}),e.jsx(me,{type:"button",onClick:()=>{c(!1),f(null)},variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Course"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Time Limit"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Passing Score"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:C.map(j=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6 font-medium",children:j.title}),e.jsx("td",{className:"py-4 px-6",children:j.courses?.title||"General"}),e.jsx("td",{className:"py-4 px-6",children:j.time_limit?`${j.time_limit} min`:"No limit"}),e.jsxs("td",{className:"py-4 px-6",children:[j.passing_score,"%"]}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(j),className:"text-blue-600 hover:text-blue-800",children:e.jsx(bn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(j.id),className:"text-red-600 hover:text-red-800",children:e.jsx(zs,{className:"w-4 h-4"})}),e.jsx(Link,{to:`/admin/quizzes/${j.id}/questions`,className:"text-gold hover:text-gold/80",children:e.jsx(rm,{className:"w-4 h-4"})})]})})]},j.id))})]})}),C.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(as,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No quizzes found"})]})]})]})}function G8(){const{quizId:t}=Mi(),[s,r]=L.useState(null),[a,o]=L.useState([]),[l,d]=L.useState(!0),[c,h]=L.useState(null),[f,p]=L.useState(!1),[y,b]=L.useState({question_text:"",question_type:"multiple_choice",options:[{text:"",correct:!1},{text:"",correct:!1}],correct_answer:"",points:1,order_index:0});L.useEffect(()=>{t&&x()},[t]);const x=async()=>{if(t)try{d(!0);const[z,U]=await Promise.all([B.database.from("quizzes").select("*").eq("id",t).single(),B.database.from("quiz_questions").select("*").eq("quiz_id",t).order("order_index")]);r(z.data),o(U.data||[])}catch(z){console.error("Error fetching data:",z)}finally{d(!1)}},A=()=>{b({...y,options:[...y.options||[],{text:"",correct:!1}]})},N=z=>{const U=y.options?.filter((X,E)=>E!==z)||[];b({...y,options:U})},P=(z,U,X)=>{const E=[...y.options||[]];E[z]={...E[z],[U]:X},b({...y,options:E})},_=async z=>{if(z.preventDefault(),!!t)try{const U={quiz_id:t,question_text:y.question_text,question_type:y.question_type,points:y.points,order_index:y.order_index||a.length};y.question_type==="multiple_choice"?U.options=y.options:(y.question_type==="true_false"||y.question_type==="short_answer")&&(U.correct_answer=y.correct_answer),c?await B.database.from("quiz_questions").update(U).eq("id",c.id):await B.database.from("quiz_questions").insert(U),p(!1),h(null),C(),x()}catch(U){console.error("Error saving question:",U),alert("Error saving question")}},C=()=>{b({question_text:"",question_type:"multiple_choice",options:[{text:"",correct:!1},{text:"",correct:!1}],correct_answer:"",points:1,order_index:0})},j=z=>{h(z),b({question_text:z.question_text,question_type:z.question_type,options:z.options||[{text:"",correct:!1},{text:"",correct:!1}],correct_answer:z.correct_answer||"",points:z.points,order_index:z.order_index}),p(!0)},w=async z=>{if(confirm("Are you sure you want to delete this question?"))try{await B.database.from("quiz_questions").delete().eq("id",z),x()}catch(U){console.error("Error deleting question:",U),alert("Error deleting question")}},D=async(z,U)=>{const X=a.find(R=>R.id===z);if(!X)return;const E=X.order_index,G=U==="up"?E-1:E+1,I=a.find(R=>R.order_index===G);I&&(await Promise.all([B.database.from("quiz_questions").update({order_index:G}).eq("id",z),B.database.from("quiz_questions").update({order_index:E}).eq("id",I.id)]),x())};return l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading questions..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ot,{to:"/admin/quizzes",className:"inline-flex items-center text-gold hover:underline mb-2",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Quizzes"]}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink",children:"Quiz Questions"}),e.jsx("p",{className:"text-gray-600",children:s?.title})]}),e.jsxs(me,{onClick:()=>{h(null),C(),b({...y,order_index:a.length}),p(!0)},variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Add Question"]})]}),f&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:c?"Edit Question":"Add Question"}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),e.jsx("textarea",{value:y.question_text,onChange:z=>b({...y,question_text:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Type *"}),e.jsxs("select",{value:y.question_type,onChange:z=>{b({...y,question_type:z.target.value,options:z.target.value==="multiple_choice"?[{text:"",correct:!1},{text:"",correct:!1}]:y.options})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0,children:[e.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),e.jsx("option",{value:"true_false",children:"True/False"}),e.jsx("option",{value:"short_answer",children:"Short Answer"})]})]}),y.question_type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options *"}),y.options?.map((z,U)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:z.text,onChange:X=>P(U,"text",X.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:`Option ${U+1}`,required:!0}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"correct_option",checked:z.correct,onChange:()=>{const X=y.options?.map((E,G)=>({...E,correct:G===U}))||[];b({...y,options:X})},className:"mr-2"}),"Correct"]}),y.options&&y.options.length>2&&e.jsx("button",{type:"button",onClick:()=>N(U),className:"text-red-600 hover:text-red-800",children:e.jsx(Fr,{className:"w-4 h-4"})})]},U)),e.jsx(me,{type:"button",onClick:A,variant:"outline",size:"sm",children:"Add Option"})]}),(y.question_type==="true_false"||y.question_type==="short_answer")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),y.question_type==="true_false"?e.jsxs("select",{value:y.correct_answer,onChange:z=>b({...y,correct_answer:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"true",children:"True"}),e.jsx("option",{value:"false",children:"False"})]}):e.jsx("input",{type:"text",value:y.correct_answer,onChange:z=>b({...y,correct_answer:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points *"}),e.jsx("input",{type:"number",value:y.points,onChange:z=>b({...y,points:parseInt(z.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Index"}),e.jsx("input",{type:"number",value:y.order_index,onChange:z=>b({...y,order_index:parseInt(z.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",min:"0"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Question"}),e.jsx(me,{type:"button",onClick:()=>{p(!1),h(null),C()},variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h2",{className:"text-xl font-bold text-navy-ink",children:["Questions (",a.length,")"]})}),e.jsx("div",{className:"divide-y",children:a.map((z,U)=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-semibold text-navy-ink",children:["Q",U+1]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",z.points," point",z.points!==1?"s":"",")"]}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:z.question_type.replace("_"," ")})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:z.question_text}),z.question_type==="multiple_choice"&&z.options&&e.jsx("div",{className:"space-y-1 ml-4",children:z.options.map((X,E)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${X.correct?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{className:X.correct?"font-semibold text-green-700":"text-gray-600",children:X.text})]},E))}),(z.question_type==="true_false"||z.question_type==="short_answer")&&e.jsxs("div",{className:"ml-4",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Correct Answer: "}),e.jsx("span",{className:"font-semibold text-green-700",children:z.correct_answer})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>D(z.id,"up"),disabled:U===0,className:"text-gray-600 hover:text-navy-ink disabled:text-gray-300",title:"Move up",children:""}),e.jsx("button",{onClick:()=>D(z.id,"down"),disabled:U===a.length-1,className:"text-gray-600 hover:text-navy-ink disabled:text-gray-300",title:"Move down",children:""}),e.jsx("button",{onClick:()=>j(z),className:"text-blue-600 hover:text-blue-800",title:"Edit",children:e.jsx(bn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(z.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})]})},z.id))}),a.length===0&&e.jsx("div",{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No questions yet. Add your first question!"})})]})]})}function Z8(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState([]),[h,f]=L.useState(!0),[p,y]=L.useState("volunteers"),[b,x]=L.useState("");L.useEffect(()=>{A()},[p]);const A=async()=>{try{f(!0);const[j,w,D,z]=await Promise.all([B.database.from("volunteers").select("*, volunteer_roles(*), users(*)").order("created_at",{ascending:!1}),B.database.from("volunteer_shifts").select("*, volunteers(*, users(*)), events(*)").order("start_time",{ascending:!1}).limit(50),B.database.from("volunteer_roles").select("*"),B.database.from("events").select("*").gte("event_date",new Date().toISOString()).order("event_date")]);s(j.data||[]),a(w.data||[]),l(D.data||[]),c(z.data||[])}catch(j){console.error("Error fetching data:",j)}finally{f(!1)}},N=async(j,w)=>{try{await B.database.from("volunteers").update({status:w}).eq("id",j),A()}catch(D){console.error("Error updating status:",D)}},P=async(j,w,D)=>{try{await B.database.from("volunteer_shifts").update({status:w,hours_worked:D}).eq("id",j),A()}catch(z){console.error("Error updating shift:",z)}},_=t.filter(j=>j.users?.email?.toLowerCase().includes(b.toLowerCase())||j.users?.nickname?.toLowerCase().includes(b.toLowerCase())||j.volunteer_roles?.name?.toLowerCase().includes(b.toLowerCase())),C=r.filter(j=>j.events?.title?.toLowerCase().includes(b.toLowerCase())||j.volunteers?.users?.email?.toLowerCase().includes(b.toLowerCase()));return h?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading volunteer data..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Volunteer Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage volunteers and their shifts"})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>{y("volunteers"),x("")},className:`px-4 py-2 rounded-lg font-medium ${p==="volunteers"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Volunteers (",t.length,")"]}),e.jsxs("button",{onClick:()=>{y("shifts"),x("")},className:`px-4 py-2 rounded-lg font-medium ${p==="shifts"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Shifts (",r.length,")"]})]}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:`Search ${p}...`,value:b,onChange:j=>x(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]})}),p==="volunteers"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Volunteer"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Skills"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Total Hours"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:_.map(j=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-navy-ink",children:j.users?.nickname||j.users?.email||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:j.users?.email})]})}),e.jsx("td",{className:"py-4 px-6",children:j.volunteer_roles?.name||"No role"}),e.jsx("td",{className:"py-4 px-6",children:j.skills&&j.skills.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[j.skills.slice(0,3).map((w,D)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:w},D)),j.skills.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",j.skills.length-3]})]}):e.jsx("span",{className:"text-gray-400",children:"No skills"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($r,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:j.total_hours.toFixed(1)})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.status==="active"?"bg-green-100 text-green-800":j.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:j.status})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"flex gap-2",children:j.status==="active"?e.jsx("button",{onClick:()=>N(j.id,"inactive"),className:"text-amber-600 hover:text-amber-800",title:"Deactivate",children:e.jsx(rl,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>N(j.id,"active"),className:"text-green-600 hover:text-green-800",title:"Activate",children:e.jsx(rt,{className:"w-4 h-4"})})})})]},j.id))})]})}),_.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No volunteers found"})]})]}),p==="shifts"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Volunteer"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Event"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Date & Time"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Hours"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:C.map(j=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:j.volunteers?.users?.nickname||j.volunteers?.users?.email||"Unknown"}),e.jsx("td",{className:"py-4 px-6",children:j.events?.title||"No event"}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:new Date(j.start_time).toLocaleDateString()}),e.jsxs("div",{className:"text-gray-600",children:[new Date(j.start_time).toLocaleTimeString()," - ",new Date(j.end_time).toLocaleTimeString()]})]})}),e.jsx("td",{className:"py-4 px-6",children:j.hours_worked?`${j.hours_worked.toFixed(1)}h`:"N/A"}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.status==="completed"?"bg-green-100 text-green-800":j.status==="scheduled"?"bg-blue-100 text-blue-800":j.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:j.status})}),e.jsx("td",{className:"py-4 px-6",children:j.status==="scheduled"&&e.jsx(me,{onClick:()=>P(j.id,"completed",4),variant:"outline",size:"sm",children:"Mark Complete"})})]},j.id))})]})}),C.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No shifts found"})]})]})]})}function Y8(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(!0),[h,f]=L.useState(""),[p,y]=L.useState(!1),[b,x]=L.useState({name:"",description:"",group_type:"ministry",is_public:!0,max_members:""});L.useEffect(()=>{A()},[s]);const A=async()=>{try{c(!0);const[C,j]=await Promise.all([B.database.from("groups").select("*, users(*), group_members(*)").eq("is_public",!0).order("created_at",{ascending:!1}),s?B.database.from("group_members").select("group_id, groups(*, users(*), group_members(*))").eq("user_id",s.id).then(w=>w.data?.map(D=>D.groups).filter(Boolean)||[]):Promise.resolve([])]);a(C.data||[]),l(j||[])}catch(C){console.error("Error fetching groups:",C)}finally{c(!1)}},N=async C=>{if(C.preventDefault(),!!s)try{const{data:j}=await B.database.from("groups").insert({...b,max_members:b.max_members?parseInt(b.max_members):null,created_by:s.id}).select().single();await B.database.from("group_members").insert({group_id:j.id,user_id:s.id,role:"admin"}),x({name:"",description:"",group_type:"ministry",is_public:!0,max_members:""}),y(!1),A(),alert("Group created successfully!")}catch(j){console.error("Error creating group:",j),alert(j.message||"Error creating group. Please try again.")}},P=async C=>{if(!s){alert("Please log in to join groups");return}try{await B.database.from("group_members").insert({group_id:C,user_id:s.id,role:"member"}),A(),alert("Successfully joined group!")}catch(j){console.error("Error joining group:",j),j.code==="23505"||j.message?.includes("duplicate")||j.message?.includes("unique")?alert("You are already a member of this group."):alert(j.message||"Error joining group. Please try again.")}},_=r.filter(C=>C.name.toLowerCase().includes(h.toLowerCase())||C.description?.toLowerCase().includes(h.toLowerCase()));return d?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading groups..."})}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Groups & Ministries"}),e.jsx("p",{className:"text-gray-600",children:"Join groups and connect with others"})]}),e.jsx("div",{className:"flex items-center gap-2",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsxs(me,{onClick:()=>y(!0),variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Group"]})]})})]}),p&&s&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Create New Group"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:C=>x({...b,name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:C=>x({...b,description:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:b.group_type,onChange:C=>x({...b,group_type:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"ministry",children:"Ministry"}),e.jsx("option",{value:"small_group",children:"Small Group"}),e.jsx("option",{value:"committee",children:"Committee"}),e.jsx("option",{value:"team",children:"Team"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Members (Optional)"}),e.jsx("input",{type:"number",value:b.max_members,onChange:C=>x({...b,max_members:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",min:"1"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:b.is_public,onChange:C=>x({...b,is_public:C.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Make group public"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Create Group"}),e.jsx(me,{type:"button",onClick:()=>y(!1),variant:"outline",children:"Cancel"})]})]})]}),o.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"My Groups"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(C=>e.jsxs(ot,{to:`/groups/${C.id}`,className:"bg-white p-6 rounded-card shadow-soft hover:shadow-lg transition-shadow",children:[C.image_url&&e.jsx("img",{src:C.image_url,alt:C.name,className:"w-full h-32 object-cover rounded-lg mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:C.name}),C.description&&e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:C.description}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-4 h-4"}),C.group_members?.length||0," members"]})})]},C.id))})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search groups...",value:h,onChange:C=>f(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"All Groups"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(C=>{const j=o.some(w=>w.id===C.id);return e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[C.image_url&&e.jsx("img",{src:C.image_url,alt:C.name,className:"w-full h-32 object-cover rounded-lg mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:C.name}),C.description&&e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:C.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-4 h-4"}),C.group_members?.length||0,C.max_members&&` / ${C.max_members}`," members"]})}),!j&&e.jsx(me,{onClick:()=>P(C.id),variant:"primary",size:"sm",children:"Join"}),j&&e.jsx(ot,{to:`/groups/${C.id}`,children:e.jsx(me,{variant:"outline",size:"sm",children:"View"})})]})]},C.id)})}),_.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(Qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No groups found"})]})]})]})}function K8(){const{id:t}=Mi(),{user:s}=Mt(),[r,a]=L.useState(null),[o,l]=L.useState([]),[d,c]=L.useState([]),[h,f]=L.useState([]),[p,y]=L.useState(!1),[b,x]=L.useState(""),[A,N]=L.useState(!0),[P,_]=L.useState(""),[C,j]=L.useState("overview");L.useEffect(()=>{t&&w()},[t,s]);const w=async()=>{if(t)try{N(!0);const[G,I,R,$]=await Promise.all([B.database.from("groups").select("*, users(*)").eq("id",t).single(),B.database.from("group_members").select("*, users(*)").eq("group_id",t).order("joined_at"),B.database.from("group_events").select("*, events(*)").eq("group_id",t).order("events(event_date)"),B.database.from("group_messages").select("*, users(*)").eq("group_id",t).order("created_at",{ascending:!1}).limit(20)]);if(a(G.data),l(I.data||[]),c(R.data||[]),f($.data||[]),s){const q=I.data?.find(Q=>Q.user_id===s.id);y(!!q),x(q?.role||"")}}catch(G){console.error("Error fetching group data:",G)}finally{N(!1)}},D=async()=>{if(!(!s||!t))try{await B.database.from("group_members").insert({group_id:t,user_id:s.id,role:"member"}),w(),alert("Successfully joined the group!")}catch(G){console.error("Error joining group:",G),G.code==="23505"||G.message?.includes("duplicate")||G.message?.includes("unique")?alert("You are already a member of this group."):alert(G.message||"Error joining group. Please try again.")}},z=async G=>{if(G.preventDefault(),!(!s||!t||!P.trim()))try{await B.database.from("group_messages").insert({group_id:t,user_id:s.id,content:P.trim()}),_(""),w()}catch(I){console.error("Error sending message:",I),alert(I.message||"Error sending message. Please try again.")}},U=async G=>{if(confirm("Are you sure you want to remove this member?"))try{await B.database.from("group_members").delete().eq("id",G),w(),alert("Member removed successfully")}catch(I){console.error("Error removing member:",I),alert(I.message||"Error removing member. Please try again.")}};if(A)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading group..."})});if(!r)return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Group not found"}),e.jsx(ot,{to:"/groups",className:"text-gold hover:underline mt-4 inline-block",children:"Back to Groups"})]})});const E=b==="admin"||b==="leader"||r.created_by===s?.id;return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs(ot,{to:"/groups",className:"inline-flex items-center text-gold hover:underline mb-6",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Groups"]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[r.image_url&&e.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-48 object-cover rounded-lg mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:r.name}),r.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-4 h-4"}),o.length," member",o.length!==1?"s":"",r.max_members&&` / ${r.max_members}`]}),r.group_type&&e.jsx("span",{className:"capitalize",children:r.group_type.replace("_"," ")})]})]}),e.jsx("div",{children:!p&&s?e.jsxs(me,{onClick:D,variant:"primary",children:[e.jsx(o3,{className:"w-4 h-4 mr-2"}),"Join Group"]}):p&&e.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-800 rounded-lg text-sm font-medium",children:"Member"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:e.jsxs("div",{className:"flex gap-4 border-b",children:[e.jsx("button",{onClick:()=>j("overview"),className:`px-4 py-2 font-medium ${C==="overview"?"border-b-2 border-gold text-gold":"text-gray-600 hover:text-navy-ink"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>j("members"),className:`px-4 py-2 font-medium ${C==="members"?"border-b-2 border-gold text-gold":"text-gray-600 hover:text-navy-ink"}`,children:["Members (",o.length,")"]}),e.jsxs("button",{onClick:()=>j("events"),className:`px-4 py-2 font-medium ${C==="events"?"border-b-2 border-gold text-gold":"text-gray-600 hover:text-navy-ink"}`,children:["Events (",d.length,")"]}),p&&e.jsx("button",{onClick:()=>j("messages"),className:`px-4 py-2 font-medium ${C==="messages"?"border-b-2 border-gold text-gold":"text-gray-600 hover:text-navy-ink"}`,children:"Messages"})]})}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[C==="overview"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"About This Group"}),r.description?e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.description}):e.jsx("p",{className:"text-gray-600",children:"No description provided."})]}),C==="members"&&e.jsx("div",{className:"divide-y",children:o.map(G=>e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[G.users?.avatar_url?e.jsx("img",{src:G.users.avatar_url,alt:G.users.nickname||G.users.email,className:"w-12 h-12 rounded-full"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gold flex items-center justify-center text-white font-bold",children:(G.users?.nickname||G.users?.email||"U")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:G.users?.nickname||G.users?.email||"Unknown"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[G.role,"  Joined ",new Date(G.joined_at).toLocaleDateString()]})]})]}),E&&G.user_id!==s?.id&&e.jsx(me,{onClick:()=>U(G.id),variant:"outline",size:"sm",children:"Remove"})]},G.id))}),C==="events"&&e.jsxs("div",{className:"divide-y",children:[d.map(G=>e.jsx("div",{className:"p-6",children:G.events&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-2",children:G.events.title}),G.events.description&&e.jsx("p",{className:"text-gray-600 mb-3",children:G.events.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-4 h-4"}),new Date(G.events.event_date).toLocaleDateString()," at"," ",new Date(G.events.event_date).toLocaleTimeString()]}),G.events.location&&e.jsx("span",{children:G.events.location})]})]})},G.id)),d.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No events scheduled"})]})]}),C==="messages"&&p&&e.jsxs("div",{children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Group Messages"}),e.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:P,onChange:G=>_(G.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"}),e.jsxs(me,{type:"submit",variant:"primary",children:[e.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Send"]})]})]}),e.jsx("div",{className:"divide-y max-h-96 overflow-y-auto",children:h.map(G=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[G.users?.avatar_url?e.jsx("img",{src:G.users.avatar_url,alt:G.users.nickname||G.users.email,className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:(G.users?.nickname||G.users?.email||"U")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:G.users?.nickname||G.users?.email||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(G.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-gray-700",children:G.content})]})]})},G.id))}),h.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No messages yet. Start the conversation!"})]})]})]})]})}function J8(){const{user:t}=Mt(),[s,r]=L.useState([]),[a,o]=L.useState([]),[l,d]=L.useState(!0),[c,h]=L.useState(!1),[f,p]=L.useState(null),[y,b]=L.useState(""),[x,A]=L.useState("all"),[N,P]=L.useState({category_id:"",title:"",slug:"",excerpt:"",content:"",post_type:"post",status:"draft",published_at:""});L.useEffect(()=>{_()},[x]);const _=async()=>{try{d(!0);const[E,G]=await Promise.all([(()=>{let I=B.database.from("blog_posts").select("*, blog_categories(*)").order("created_at",{ascending:!1});return x!=="all"&&(I=I.eq("status",x)),I})(),B.database.from("blog_categories").select("*")]);r(E.data||[]),o(G.data||[])}catch(E){console.error("Error fetching data:",E)}finally{d(!1)}},C=E=>E.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),j=async E=>{if(E.preventDefault(),!!t)try{const G=N.slug||C(N.title),I={...N,author_id:t.id,slug:G,category_id:N.category_id||null,published_at:N.status==="published"&&!N.published_at?new Date().toISOString():N.published_at||null};f?await B.database.from("blog_posts").update(I).eq("id",f.id):await B.database.from("blog_posts").insert(I),h(!1),p(null),w(),_()}catch(G){console.error("Error saving post:",G),alert("Error saving post")}},w=()=>{P({category_id:"",title:"",slug:"",excerpt:"",content:"",post_type:"post",status:"draft",published_at:""})},D=E=>{p(E),P({category_id:E.category_id||"",title:E.title,slug:E.slug,excerpt:E.excerpt||"",content:E.content,post_type:E.post_type,status:E.status,published_at:E.published_at?E.published_at.split("T")[0]:""}),h(!0)},z=async E=>{if(confirm("Are you sure you want to delete this post?"))try{await B.database.from("blog_posts").delete().eq("id",E),_()}catch(G){console.error("Error deleting post:",G),alert("Error deleting post")}},U=async E=>{const G=E.status==="published"?"draft":"published";try{await B.database.from("blog_posts").update({status:G,published_at:G==="published"&&!E.published_at?new Date().toISOString():E.published_at}).eq("id",E.id),_()}catch(I){console.error("Error updating status:",I)}},X=s.filter(E=>E.title.toLowerCase().includes(y.toLowerCase())||E.excerpt?.toLowerCase().includes(y.toLowerCase()));return l?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading blog posts..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Blog Management"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage blog posts, news, and announcements"})]}),e.jsxs(me,{onClick:()=>{p(null),w(),h(!0)},variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Post"]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search posts...",value:y,onChange:E=>b(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:x,onChange:E=>A(E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})}),c&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:f?"Edit Post":"Create Post"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:N.title,onChange:E=>{P({...N,title:E.target.value,slug:N.slug||C(E.target.value)})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),e.jsx("input",{type:"text",value:N.slug,onChange:E=>P({...N,slug:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:N.category_id,onChange:E=>P({...N,category_id:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"No Category"}),a.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:N.post_type,onChange:E=>P({...N,post_type:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"post",children:"Blog Post"}),e.jsx("option",{value:"news",children:"News"}),e.jsx("option",{value:"announcement",children:"Announcement"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Excerpt"}),e.jsx("textarea",{value:N.excerpt,onChange:E=>P({...N,excerpt:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),e.jsx("textarea",{value:N.content,onChange:E=>P({...N,content:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:10,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:N.status,onChange:E=>P({...N,status:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),N.status==="published"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publish Date"}),e.jsx("input",{type:"datetime-local",value:N.published_at,onChange:E=>P({...N,published_at:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Post"}),e.jsx(me,{type:"button",onClick:()=>{h(!1),p(null),w()},variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Published"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:X.map(E=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-navy-ink",children:E.title}),E.excerpt&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:E.excerpt})]})}),e.jsx("td",{className:"py-4 px-6 capitalize",children:E.post_type}),e.jsx("td",{className:"py-4 px-6",children:E.blog_categories?.name||"Uncategorized"}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${E.status==="published"?"bg-green-100 text-green-800":E.status==="draft"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:E.status})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:E.published_at?new Date(E.published_at).toLocaleDateString():"Not published"}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>U(E),className:"text-blue-600 hover:text-blue-800",title:E.status==="published"?"Unpublish":"Publish",children:E.status==="published"?e.jsx(Tc,{className:"w-4 h-4"}):e.jsx(di,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>D(E),className:"text-blue-600 hover:text-blue-800",children:e.jsx(bn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(E.id),className:"text-red-600 hover:text-red-800",children:e.jsx(zs,{className:"w-4 h-4"})}),E.status==="published"&&e.jsx(ot,{to:`/blog/${E.slug}`,target:"_blank",className:"text-gold hover:text-gold/80",children:e.jsx(ys,{className:"w-4 h-4"})})]})})]},E.id))})]})}),X.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ys,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No posts found"})]})]})]})}function Q8(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState([]),[h,f]=L.useState(null),[p,y]=L.useState(!0),[b,x]=L.useState("browse"),[A,N]=L.useState(!1),[P,_]=L.useState(!1),[C,j]=L.useState({program_id:"",expertise_areas:[],bio:"",max_mentees:5}),[w,D]=L.useState({program_id:"",goals:"",areas_of_interest:[]});L.useEffect(()=>{s&&z()},[s,b]);const z=async()=>{if(s)try{y(!0);const[E,G,I,R]=await Promise.all([B.database.from("mentorship_programs").select("*").eq("is_active",!0),B.database.from("mentors").select("*, users(*)").in("status",["available","full"]).limit(10),B.database.from("mentorship_matches").select("*, mentors(*, users(*)), mentees(*, users(*))").or(`mentor_id.eq.${s.id},mentee_id.eq.${s.id}`).eq("status","active"),B.database.from("mentors").select("*").eq("user_id",s.id).maybeSingle()]);a(E.data||[]),l(G.data||[]),c(I.data||[]),f(R.data||null)}catch(E){console.error("Error fetching mentorship data:",E)}finally{y(!1)}},U=async E=>{if(E.preventDefault(),!!s)try{await B.database.from("mentors").insert({user_id:s.id,program_id:C.program_id||null,expertise_areas:C.expertise_areas,bio:C.bio,max_mentees:C.max_mentees,status:"pending"}),N(!1),j({program_id:"",expertise_areas:[],bio:"",max_mentees:5}),z(),alert("Your mentor application has been submitted! It is pending admin approval. You will be notified once it is reviewed.")}catch(G){console.error("Error registering mentor:",G),alert("Error registering as mentor")}},X=async E=>{if(E.preventDefault(),!!s)try{await B.database.from("mentees").insert({user_id:s.id,program_id:w.program_id||null,goals:w.goals,areas_of_interest:w.areas_of_interest,status:"seeking"}),_(!1),D({program_id:"",goals:"",areas_of_interest:[]}),z(),alert("Successfully registered as a mentee!")}catch(G){console.error("Error registering mentee:",G),alert("Error registering as mentee")}};return s?p?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading mentorship programs..."})}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Mentorship Programs"}),e.jsx("p",{className:"text-gray-600",children:"Connect with mentors and grow in your leadership journey"})]}),e.jsxs("div",{className:"flex gap-2",children:[s&&e.jsxs(me,{variant:"outline",onClick:()=>t("/dashboard"),children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsxs(me,{onClick:()=>N(!0),variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Become a Mentor"]}),e.jsxs(me,{onClick:()=>_(!0),variant:"secondary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Find a Mentor"]})]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>x("browse"),className:`px-4 py-2 rounded-lg font-medium ${b==="browse"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:"Browse Mentors"}),e.jsxs("button",{onClick:()=>x("my-mentorship"),className:`px-4 py-2 rounded-lg font-medium ${b==="my-mentorship"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["My Mentorship (",d.length,")"]})]})}),h&&e.jsx("div",{className:`p-4 rounded-card mb-6 ${h.status==="pending"?"bg-amber-50 border-2 border-amber-300":h.status==="available"?"bg-green-50 border-2 border-green-300":h.status==="rejected"?"bg-red-50 border-2 border-red-300":"bg-gray-50 border-2 border-gray-300"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-navy-ink mb-1",children:[h.status==="pending"&&" Mentor Application Pending",h.status==="available"&&" Mentor Application Approved",h.status==="rejected"&&" Mentor Application Rejected",h.status==="inactive"&&" Mentor Status: Inactive"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h.status==="pending"&&"Your application is being reviewed by administrators. You will be notified once a decision is made.",h.status==="available"&&"Congratulations! You are now an approved mentor and can be matched with mentees.",h.status==="rejected"&&"Your mentor application was not approved. Please contact support if you have questions.",h.status==="inactive"&&"Your mentor status is currently inactive."]})]})})}),A&&!h&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Register as Mentor"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your application will be reviewed by administrators before you can be matched with mentees."}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program (Optional)"}),e.jsxs("select",{value:C.program_id,onChange:E=>j({...C,program_id:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"No Specific Program"}),r.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expertise Areas"}),e.jsx("div",{className:"space-y-2",children:["Leadership","Ministry","Business","Education","Counseling","Music","Media"].map(E=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:C.expertise_areas.includes(E),onChange:G=>{G.target.checked?j({...C,expertise_areas:[...C.expertise_areas,E]}):j({...C,expertise_areas:C.expertise_areas.filter(I=>I!==E)})},className:"mr-2"}),e.jsx("span",{children:E})]},E))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{value:C.bio,onChange:E=>j({...C,bio:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:4,placeholder:"Tell us about your experience and how you can help..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Mentees"}),e.jsx("input",{type:"number",value:C.max_mentees,onChange:E=>j({...C,max_mentees:parseInt(E.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",min:"1",max:"10"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Register"}),e.jsx(me,{type:"button",onClick:()=>N(!1),variant:"outline",children:"Cancel"})]})]})]}),P&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Find a Mentor"}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program (Optional)"}),e.jsxs("select",{value:w.program_id,onChange:E=>D({...w,program_id:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"No Specific Program"}),r.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Goals"}),e.jsx("textarea",{value:w.goals,onChange:E=>D({...w,goals:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:4,placeholder:"What do you hope to achieve through mentorship?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Areas of Interest"}),e.jsx("div",{className:"space-y-2",children:["Leadership","Ministry","Business","Education","Counseling","Music","Media"].map(E=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:w.areas_of_interest.includes(E),onChange:G=>{G.target.checked?D({...w,areas_of_interest:[...w.areas_of_interest,E]}):D({...w,areas_of_interest:w.areas_of_interest.filter(I=>I!==E)})},className:"mr-2"}),e.jsx("span",{children:E})]},E))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Register"}),e.jsx(me,{type:"button",onClick:()=>_(!1),variant:"outline",children:"Cancel"})]})]})]}),b==="browse"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"Available Mentors"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(E=>e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx(Qt,{className:"w-8 h-8 text-blue-500"}),e.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:[E.current_mentees,"/",E.max_mentees," mentees"]})]}),e.jsx("h3",{className:"text-lg font-bold text-navy-ink mb-2",children:E.users?.nickname||E.users?.email||"Mentor"}),E.bio&&e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:E.bio}),E.expertise_areas&&E.expertise_areas.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:E.expertise_areas.slice(0,3).map((G,I)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:G},I))}),e.jsx(me,{variant:"outline",className:"w-full",size:"sm",children:"View Profile"})]},E.id))}),o.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx(Qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No mentors available at the moment"})]})]}),b==="my-mentorship"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-4",children:"My Mentorship Matches"}),e.jsx("div",{className:"space-y-4",children:d.map(E=>{const G=E.mentor_id===s.id,I=G?E.mentees:E.mentors;return e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[G?e.jsx($d,{className:"w-5 h-5 text-blue-500"}):e.jsx(Qt,{className:"w-5 h-5 text-green-500"}),e.jsxs("h3",{className:"text-lg font-bold text-navy-ink",children:[G?"Mentoring":"Mentored by",": ",I?.users?.nickname||I?.users?.email||"Unknown"]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 mb-4",children:[e.jsxs("p",{children:["Started: ",new Date(E.start_date).toLocaleDateString()]}),E.end_date&&e.jsxs("p",{children:["Ends: ",new Date(E.end_date).toLocaleDateString()]})]}),!G&&E.mentees?.goals&&e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Goals:"})," ",E.mentees.goals]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${E.status==="active"?"bg-green-100 text-green-800":E.status==="completed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:E.status})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(me,{variant:"outline",size:"sm",children:[e.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Message"]}),e.jsxs(me,{variant:"outline",size:"sm",children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),"Schedule Session"]})]})]},E.id)})}),d.length===0&&e.jsxs("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:[e.jsx($d,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No active mentorship matches"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Register as a mentor or mentee to get started"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Please log in to access mentorship programs"})})}function X8(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState([]),[h,f]=L.useState(!0),[p,y]=L.useState("pending-mentors"),[b,x]=L.useState(""),[A,N]=L.useState("all"),[P,_]=L.useState(null),[C,j]=L.useState(!1);L.useEffect(()=>{w()},[p,A]);const w=async()=>{try{f(!0);const[q,Q,he,be]=await Promise.all([B.database.from("mentorship_programs").select("*").order("created_at",{ascending:!1}),(()=>{let V=B.database.from("mentors").select("*, users(*)").order("created_at",{ascending:!1});return A!=="all"&&(V=V.eq("status",A)),V})(),B.database.from("mentees").select("*, users(*)").order("created_at",{ascending:!1}),B.database.from("mentorship_matches").select("*, mentors(*, users(*)), mentees(*, users(*))").order("start_date",{ascending:!1})]);s(q.data||[]),a(Q.data||[]),l(he.data||[]),c(be.data||[])}catch(q){console.error("Error fetching data:",q)}finally{f(!1)}},D=async(q,Q)=>{try{const he=r.find(be=>be.id===q);if(he&&he.current_mentees>=he.max_mentees){alert("Mentor has reached maximum mentees");return}await B.database.from("mentorship_matches").insert({mentor_id:q,mentee_id:Q,status:"active",start_date:new Date().toISOString().split("T")[0]}),await B.database.from("mentors").update({current_mentees:(he?.current_mentees||0)+1}).eq("id",q),await B.database.from("mentees").update({status:"matched"}).eq("id",Q),w(),alert("Mentorship match created successfully!")}catch(he){console.error("Error creating match:",he),alert("Error creating match")}},z=async(q,Q)=>{try{await B.database.from("mentorship_matches").update({status:Q,end_date:Q==="completed"?new Date().toISOString().split("T")[0]:null}).eq("id",q),w()}catch(he){console.error("Error updating match:",he)}},U=async q=>{if(confirm("Approve this mentor application? They will become available for matching."))try{await B.database.from("mentors").update({status:"available"}).eq("id",q),w(),alert("Mentor approved successfully!")}catch(Q){console.error("Error approving mentor:",Q),alert("Failed to approve mentor")}},X=async q=>{if(confirm("Reject this mentor application? This action can be undone later."))try{await B.database.from("mentors").update({status:"rejected"}).eq("id",q),w(),alert("Mentor application rejected.")}catch(Q){console.error("Error rejecting mentor:",Q),alert("Failed to reject mentor")}},E=async q=>{if(confirm("Are you sure you want to delete this mentor application? This action cannot be undone."))try{await B.database.from("mentors").delete().eq("id",q),w(),alert("Mentor application deleted.")}catch(Q){console.error("Error deleting mentor:",Q),alert("Failed to delete mentor")}},G=async(q,Q)=>{try{await B.database.from("mentors").update({status:Q}).eq("id",q),w()}catch(he){console.error("Error updating mentor status:",he),alert("Failed to update mentor status")}};if(h)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading mentorship data..."})});const I=r.filter(q=>q.users?.email?.toLowerCase().includes(b.toLowerCase())||q.users?.nickname?.toLowerCase().includes(b.toLowerCase())),R=r.filter(q=>q.status==="pending");r.filter(q=>q.status==="available"||q.status==="full");const $=o.filter(q=>q.users?.email?.toLowerCase().includes(b.toLowerCase())||q.users?.nickname?.toLowerCase().includes(b.toLowerCase())||q.status==="seeking");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Mentorship Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage mentorship programs, mentors, mentees, and matches"})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>{y("pending-mentors"),x(""),N("pending")},className:`px-4 py-2 rounded-lg font-medium relative ${p==="pending-mentors"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Pending Approval",R.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:R.length})]}),e.jsxs("button",{onClick:()=>{y("programs"),x("")},className:`px-4 py-2 rounded-lg font-medium ${p==="programs"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Programs (",t.length,")"]}),e.jsxs("button",{onClick:()=>{y("mentors"),x(""),N("all")},className:`px-4 py-2 rounded-lg font-medium ${p==="mentors"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["All Mentors (",r.length,")"]}),e.jsxs("button",{onClick:()=>{y("mentees"),x("")},className:`px-4 py-2 rounded-lg font-medium ${p==="mentees"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Mentees (",o.length,")"]}),e.jsxs("button",{onClick:()=>{y("matches"),x("")},className:`px-4 py-2 rounded-lg font-medium ${p==="matches"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Matches (",d.length,")"]})]}),e.jsxs("div",{className:"flex gap-2 flex-1 max-w-md ml-4",children:[p==="mentors"&&e.jsxs("select",{value:A,onChange:q=>N(q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:`Search ${p}...`,value:b,onChange:q=>x(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]})]})}),p==="pending-mentors"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Pending Mentor Applications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and approve new mentor applications"})]}),R.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(rt,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No pending mentor applications"})]}):e.jsx("div",{className:"divide-y",children:R.map(q=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink",children:q.users?.nickname||q.users?.email||"Unknown User"}),e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:"Pending Approval"})]}),q.bio&&e.jsx("p",{className:"text-gray-600 mb-3",children:q.bio}),q.expertise_areas&&q.expertise_areas.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Expertise Areas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.expertise_areas.map((Q,he)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:Q},he))})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Max Mentees: ",q.max_mentees]}),e.jsxs("span",{children:["Applied: ",new Date(q.created_at||"").toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(me,{onClick:()=>U(q.id),variant:"primary",size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(rt,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs(me,{onClick:()=>X(q.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(rl,{className:"w-4 h-4 mr-1"}),"Reject"]}),e.jsx(me,{onClick:()=>{_(q),j(!0)},variant:"outline",size:"sm",children:e.jsx(di,{className:"w-4 h-4"})})]})]})},q.id))})]}),p==="programs"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Mentorship Programs"})}),e.jsx("div",{className:"divide-y",children:t.map(q=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-2",children:q.name}),q.description&&e.jsx("p",{className:"text-gray-600 mb-2",children:q.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[q.duration_months&&e.jsxs("span",{children:["Duration: ",q.duration_months," months"]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:q.is_active?"Active":"Inactive"})]})]})})},q.id))})]}),p==="mentors"&&e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Mentor"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Expertise"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Mentees"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:I.map(q=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:q.users?.nickname||q.users?.email||"Unknown"}),e.jsx("td",{className:"py-4 px-6",children:q.expertise_areas&&q.expertise_areas.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:q.expertise_areas.slice(0,2).map((Q,he)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:Q},he))}):e.jsx("span",{className:"text-gray-400",children:"No expertise listed"})}),e.jsxs("td",{className:"py-4 px-6",children:[q.current_mentees," / ",q.max_mentees]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("select",{value:q.status,onChange:Q=>G(q.id,Q.target.value),className:`px-2 py-1 text-xs rounded border ${q.status==="available"?"bg-green-100 text-green-800 border-green-300":q.status==="pending"?"bg-amber-100 text-amber-800 border-amber-300":q.status==="rejected"?"bg-red-100 text-red-800 border-red-300":q.status==="full"?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-100 text-gray-800 border-gray-300"}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[q.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(me,{onClick:()=>U(q.id),variant:"outline",size:"sm",className:"text-green-600 border-green-300 hover:bg-green-50",title:"Approve",children:e.jsx(rt,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>X(q.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",title:"Reject",children:e.jsx(rl,{className:"w-4 h-4"})})]}),e.jsx(me,{onClick:()=>E(q.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},q.id))})]})})}),p==="mentees"&&e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Mentee"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Goals"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:$.map(q=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:q.users?.nickname||q.users?.email||"Unknown"}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:q.goals||"No goals specified"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q.status==="matched"?"bg-green-100 text-green-800":q.status==="seeking"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:q.status})}),e.jsx("td",{className:"py-4 px-6",children:q.status==="seeking"&&e.jsxs("select",{onChange:Q=>{Q.target.value&&D(Q.target.value,q.id)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm",defaultValue:"",children:[e.jsx("option",{value:"",children:"Match with mentor..."}),r.filter(Q=>Q.status==="available"&&Q.current_mentees<Q.max_mentees).map(Q=>e.jsx("option",{value:Q.id,children:Q.users?.nickname||Q.users?.email},Q.id))]})})]},q.id))})]})})}),p==="matches"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y",children:d.map(q=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:"Mentor"}),e.jsx("p",{className:"text-sm text-gray-600",children:q.mentors?.users?.nickname||q.mentors?.users?.email||"Unknown"})]}),e.jsx(y6,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:"Mentee"}),e.jsx("p",{className:"text-sm text-gray-600",children:q.mentees?.users?.nickname||q.mentees?.users?.email||"Unknown"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Started: ",new Date(q.start_date).toLocaleDateString(),q.end_date&&e.jsxs("span",{children:["  Ended: ",new Date(q.end_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${q.status==="active"?"bg-green-100 text-green-800":q.status==="completed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:q.status}),q.status==="active"&&e.jsx(me,{onClick:()=>z(q.id,"completed"),variant:"outline",size:"sm",children:"Complete"})]})]})},q.id))}),d.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx($d,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No matches yet"})]})]})]})}function eA(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState(!0),[d,c]=L.useState(!1),[h,f]=L.useState(null),[p,y]=L.useState({event_id:"",title:"",description:"",stream_url:"",stream_key:"",provider:"youtube",scheduled_start:"",recording_url:""});L.useEffect(()=>{b()},[]);const b=async()=>{try{l(!0);const[C,j]=await Promise.all([B.database.from("live_streams").select("*, events(*)").order("scheduled_start",{ascending:!1}),B.database.from("events").select("*").gte("event_date",new Date().toISOString()).order("event_date")]);s(C.data||[]),a(j.data||[])}catch(C){console.error("Error fetching data:",C)}finally{l(!1)}},x=async C=>{C.preventDefault();try{const j={...p,event_id:p.event_id||null,scheduled_start:p.scheduled_start,status:"scheduled"};h?await B.database.from("live_streams").update(j).eq("id",h.id):await B.database.from("live_streams").insert(j),c(!1),f(null),A(),b()}catch(j){console.error("Error saving stream:",j),alert("Error saving stream")}},A=()=>{y({event_id:"",title:"",description:"",stream_url:"",stream_key:"",provider:"youtube",scheduled_start:"",recording_url:""})},N=C=>{f(C),y({event_id:C.event_id||"",title:C.title,description:C.description||"",stream_url:C.stream_url||"",stream_key:"",provider:C.provider||"youtube",scheduled_start:C.scheduled_start?C.scheduled_start.split("T")[0]+"T"+C.scheduled_start.split("T")[1]?.substring(0,5):"",recording_url:C.recording_url||""}),c(!0)},P=async C=>{if(confirm("Are you sure you want to delete this stream?"))try{await B.database.from("live_streams").delete().eq("id",C),b()}catch(j){console.error("Error deleting stream:",j),alert("Error deleting stream")}},_=async(C,j)=>{try{const w={status:j};j==="live"?w.started_at=new Date().toISOString():j==="ended"&&(w.ended_at=new Date().toISOString(),w.status="recorded"),await B.database.from("live_streams").update(w).eq("id",C),b()}catch(w){console.error("Error updating status:",w)}};return o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading streams..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Live Stream Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage live streams and recordings"})]}),e.jsxs(me,{onClick:()=>{f(null),A(),c(!0)},variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Stream"]})]}),d&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:h?"Edit Stream":"Create Stream"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event (Optional)"}),e.jsxs("select",{value:p.event_id,onChange:C=>y({...p,event_id:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"",children:"No Event"}),r.map(C=>e.jsx("option",{value:C.id,children:C.title},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:p.title,onChange:C=>y({...p,title:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:C=>y({...p,description:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provider"}),e.jsxs("select",{value:p.provider,onChange:C=>y({...p,provider:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"youtube",children:"YouTube"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"vimeo",children:"Vimeo"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Start *"}),e.jsx("input",{type:"datetime-local",value:p.scheduled_start,onChange:C=>y({...p,scheduled_start:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stream URL"}),e.jsx("input",{type:"url",value:p.stream_url,onChange:C=>y({...p,stream_url:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stream Key (Optional)"}),e.jsx("input",{type:"text",value:p.stream_key,onChange:C=>y({...p,stream_key:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"For OBS or streaming software"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recording URL (After Stream)"}),e.jsx("input",{type:"url",value:p.recording_url,onChange:C=>y({...p,recording_url:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"https://..."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Stream"}),e.jsx(me,{type:"button",onClick:()=>{c(!1),f(null),A()},variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Event"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Scheduled"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Viewers"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(C=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6 font-medium",children:C.title}),e.jsx("td",{className:"py-4 px-6",children:C.events?.title||"No event"}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date(C.scheduled_start).toLocaleString()}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${C.status==="live"?"bg-red-100 text-red-800":C.status==="scheduled"?"bg-blue-100 text-blue-800":C.status==="recorded"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C.status})}),e.jsx("td",{className:"py-4 px-6",children:C.viewer_count||0}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[C.status==="scheduled"&&e.jsx("button",{onClick:()=>_(C.id,"live"),className:"text-green-600 hover:text-green-800",title:"Go Live",children:e.jsx(Cc,{className:"w-4 h-4"})}),C.status==="live"&&e.jsx("button",{onClick:()=>_(C.id,"ended"),className:"text-red-600 hover:text-red-800",title:"End Stream",children:e.jsx(Tc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(C),className:"text-blue-600 hover:text-blue-800",children:e.jsx(bn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(C.id),className:"text-red-600 hover:text-red-800",children:e.jsx(zs,{className:"w-4 h-4"})}),C.stream_url&&e.jsx("a",{href:C.stream_url,target:"_blank",rel:"noopener noreferrer",className:"text-gold hover:text-gold/80",children:e.jsx(Wl,{className:"w-4 h-4"})})]})})]},C.id))})]})}),t.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Wl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No streams created yet"})]})]})]})}function tA(){const[t,s]=L.useState("topics"),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState([]),[h,f]=L.useState(!0),[p,y]=L.useState(""),[b,x]=L.useState("all"),[A,N]=L.useState(null),[P,_]=L.useState(!1);L.useEffect(()=>{C()},[t,b]);const C=async()=>{try{f(!0);const[I,R,$]=await Promise.all([(()=>{let q=B.database.from("forum_topics").select("*, forum_categories(*), users(*)").order("created_at",{ascending:!1});return b!=="all"&&(q=q.eq("category_id",b)),q})(),B.database.from("forum_replies").select("*, users(*), forum_topics(id, title)").order("created_at",{ascending:!1}).limit(100),B.database.from("forum_categories").select("*").order("order_index")]);a(I.data||[]),l(R.data||[]),c($.data||[])}catch(I){console.error("Error fetching forum data:",I)}finally{f(!1)}},j=async I=>{if(confirm("Are you sure you want to delete this topic? All replies will also be deleted."))try{await B.database.from("forum_replies").delete().eq("topic_id",I),await B.database.from("forum_topics").delete().eq("id",I),C(),alert("Topic deleted successfully")}catch(R){console.error("Error deleting topic:",R),alert("Failed to delete topic")}},w=async I=>{if(confirm("Are you sure you want to delete this reply?"))try{await B.database.from("forum_replies").delete().eq("id",I);const R=o.find($=>$.id===I);if(R?.topic_id){const{data:$}=await B.database.from("forum_replies").select("id").eq("topic_id",R.topic_id);await B.database.from("forum_topics").update({reply_count:$?.length||0}).eq("id",R.topic_id)}C(),alert("Reply deleted successfully")}catch(R){console.error("Error deleting reply:",R),alert("Failed to delete reply")}},D=async(I,R)=>{try{await B.database.from("forum_topics").update({is_pinned:!R}).eq("id",I),C()}catch($){console.error("Error toggling pin:",$),alert("Failed to update pin status")}},z=async(I,R)=>{try{await B.database.from("forum_topics").update({is_locked:!R}).eq("id",I),C()}catch($){console.error("Error toggling lock:",$),alert("Failed to update lock status")}},U=async(I,R)=>{try{await B.database.from("forum_categories").update({is_active:!R}).eq("id",I),C()}catch($){console.error("Error toggling category:",$),alert("Failed to update category status")}},X=async I=>{if(confirm("Are you sure you want to delete this category? All topics in this category will also be deleted."))try{const{data:R}=await B.database.from("forum_topics").select("id").eq("category_id",I);if(R&&R.length>0){for(const $ of R)await B.database.from("forum_replies").delete().eq("topic_id",$.id);await B.database.from("forum_topics").delete().eq("category_id",I)}await B.database.from("forum_categories").delete().eq("id",I),C(),alert("Category deleted successfully")}catch(R){console.error("Error deleting category:",R),alert("Failed to delete category")}},E=r.filter(I=>I.title.toLowerCase().includes(p.toLowerCase())||I.content.toLowerCase().includes(p.toLowerCase())||I.users?.nickname?.toLowerCase().includes(p.toLowerCase())),G=o.filter(I=>I.content.toLowerCase().includes(p.toLowerCase())||I.users?.nickname?.toLowerCase().includes(p.toLowerCase())||I.forum_topics?.title?.toLowerCase().includes(p.toLowerCase()));return h?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading forum data..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Forum Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage forum topics, replies, and categories"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>{s("topics"),y("")},className:`px-4 py-2 rounded-lg font-medium ${t==="topics"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Topics (",r.length,")"]}),e.jsxs("button",{onClick:()=>{s("replies"),y("")},className:`px-4 py-2 rounded-lg font-medium ${t==="replies"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Replies (",o.length,")"]}),e.jsxs("button",{onClick:()=>{s("categories"),y("")},className:`px-4 py-2 rounded-lg font-medium ${t==="categories"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Categories (",d.length,")"]})]}),e.jsxs("div",{className:"relative flex-1 max-w-md ml-4",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:`Search ${t}...`,value:p,onChange:I=>y(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]}),t==="topics"&&e.jsxs("select",{value:b,onChange:I=>x(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Categories"}),d.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),t==="topics"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Author"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Replies"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Views"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:E.map(I=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[I.is_pinned&&e.jsx(sm,{className:"w-4 h-4 text-gold"}),I.is_locked&&e.jsx(Yr,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:I.title})]})}),e.jsx("td",{className:"py-4 px-6 text-sm",children:I.users?.nickname||I.users?.email||"Unknown"}),e.jsx("td",{className:"py-4 px-6 text-sm",children:I.forum_categories?.name||"Uncategorized"}),e.jsx("td",{className:"py-4 px-6",children:I.reply_count||0}),e.jsx("td",{className:"py-4 px-6",children:I.view_count||0}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-1",children:[I.is_pinned&&e.jsx("span",{className:"px-2 py-1 bg-gold text-white text-xs rounded",children:"Pinned"}),I.is_locked&&e.jsx("span",{className:"px-2 py-1 bg-gray-500 text-white text-xs rounded",children:"Locked"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{onClick:()=>{N(I),_(!0)},variant:"outline",size:"sm",title:"View Details",children:e.jsx(di,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>D(I.id,I.is_pinned),variant:"outline",size:"sm",title:I.is_pinned?"Unpin":"Pin",children:I.is_pinned?e.jsx(T6,{className:"w-4 h-4"}):e.jsx(sm,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>z(I.id,I.is_locked),variant:"outline",size:"sm",title:I.is_locked?"Unlock":"Lock",children:e.jsx(Yr,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>j(I.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},I.id))})]})}),E.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No topics found"})]})]}),t==="replies"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y",children:G.map(I=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-navy-ink",children:I.users?.nickname||I.users?.email||"Unknown"}),I.is_solution&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Solution"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-3",children:I.content}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Topic: ",I.forum_topics?.title||"Unknown"," ",new Date(I.created_at).toLocaleDateString()]})]}),e.jsx(me,{onClick:()=>w(I.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 ml-4",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})},I.id))}),G.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No replies found"})]})]}),t==="categories"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y",children:d.map(I=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:I.is_active?"Active":"Inactive"})]}),I.description&&e.jsx("p",{className:"text-gray-600 mb-2",children:I.description}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Slug: ",I.slug,"  Order: ",I.order_index]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(me,{onClick:()=>U(I.id,I.is_active),variant:"outline",size:"sm",children:I.is_active?"Deactivate":"Activate"}),e.jsx(me,{onClick:()=>X(I.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})]})},I.id))}),d.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No categories found"})]})]}),P&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-card shadow-lg max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink",children:"Topic Details"}),e.jsx(me,{onClick:()=>{_(!1),N(null)},variant:"outline",size:"sm",children:e.jsx(Fr,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-2",children:A.title}),e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["By: ",A.users?.nickname||A.users?.email||"Unknown","  Category: ",A.forum_categories?.name||"Uncategorized"," ",new Date(A.created_at).toLocaleDateString()]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg whitespace-pre-wrap",children:A.content})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{onClick:()=>{_(!1),N(null)},variant:"primary",children:"Close"}),e.jsxs(me,{onClick:()=>{j(A.id),_(!1),N(null)},variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(zs,{className:"w-4 h-4 mr-2"}),"Delete Topic"]})]})]})]})})]})}function sA(){const[t,s]=L.useState([]),[r,a]=L.useState(!0),[o,l]=L.useState(""),[d,c]=L.useState("all"),[h,f]=L.useState(null),[p,y]=L.useState(!1),[b,x]=L.useState([]);L.useEffect(()=>{A()},[d]);const A=async()=>{try{a(!0);let D=B.database.from("groups").select("*, users(*), group_members(*)").order("created_at",{ascending:!1});d!=="all"&&(D=D.eq("group_type",d));const{data:z}=await D;s(z||[])}catch(D){console.error("Error fetching groups:",D)}finally{a(!1)}},N=async D=>{try{const{data:z}=await B.database.from("group_members").select("*, users(*)").eq("group_id",D).order("joined_at",{ascending:!1});x(z||[])}catch(z){console.error("Error fetching group members:",z)}},P=async D=>{if(confirm("Are you sure you want to delete this group? All members and related data will also be deleted."))try{await B.database.from("group_messages").delete().eq("group_id",D),await B.database.from("group_events").delete().eq("group_id",D),await B.database.from("group_members").delete().eq("group_id",D);const z=t.find(U=>U.id===D);if(z?.image_url)try{await B.storage.from("gallery").remove(z.image_url)}catch(U){console.warn("Error deleting group image:",U)}await B.database.from("groups").delete().eq("id",D),A(),alert("Group deleted successfully")}catch(z){console.error("Error deleting group:",z),alert("Failed to delete group")}},_=async(D,z)=>{try{await B.database.from("groups").update({is_public:!z}).eq("id",D),A()}catch(U){console.error("Error toggling public status:",U),alert("Failed to update group status")}},C=async(D,z)=>{if(confirm("Are you sure you want to remove this member from the group?"))try{await B.database.from("group_members").delete().eq("id",D),N(z),A(),alert("Member removed successfully")}catch(U){console.error("Error removing member:",U),alert("Failed to remove member")}},j=t.filter(D=>D.name.toLowerCase().includes(o.toLowerCase())||D.description?.toLowerCase().includes(o.toLowerCase())||D.users?.nickname?.toLowerCase().includes(o.toLowerCase())),w=Array.from(new Set(t.map(D=>D.group_type).filter(Boolean)));return r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading groups..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Groups Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage groups, members, and group content"})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search groups...",value:o,onChange:D=>l(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:d,onChange:D=>c(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Types"}),w.map(D=>e.jsx("option",{value:D,children:D.charAt(0).toUpperCase()+D.slice(1)},D))]})]})}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Group Name"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Creator"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Members"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Created"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:j.map(D=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"py-4 px-6",children:[e.jsx("div",{className:"font-medium",children:D.name}),D.description&&e.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:D.description})]}),e.jsx("td",{className:"py-4 px-6 text-sm",children:D.users?.nickname||D.users?.email||"Unknown"}),e.jsx("td",{className:"py-4 px-6 text-sm",children:D.group_type||"N/A"}),e.jsxs("td",{className:"py-4 px-6",children:[D.group_members?.length||0,D.max_members&&` / ${D.max_members}`]}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.is_public?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:D.is_public?"Public":"Private"})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date(D.created_at).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{onClick:async()=>{f(D),await N(D.id),y(!0)},variant:"outline",size:"sm",title:"View Details",children:e.jsx(di,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>_(D.id,D.is_public),variant:"outline",size:"sm",title:D.is_public?"Make Private":"Make Public",children:D.is_public?e.jsx(Yr,{className:"w-4 h-4"}):e.jsx(Qv,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>P(D.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},D.id))})]})}),j.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No groups found"})]})]}),p&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-card shadow-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink",children:"Group Details"}),e.jsx(me,{onClick:()=>{y(!1),f(null),x([])},variant:"outline",size:"sm",children:e.jsx(Fr,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-navy-ink mb-2",children:h.name}),h.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:h.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",h.group_type||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_public?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_public?"Public":"Private"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Creator:"})," ",h.users?.nickname||h.users?.email||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(h.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-semibold text-navy-ink mb-3",children:["Members (",b.length,")"]}),e.jsx("div",{className:"divide-y",children:b.map(D=>e.jsxs("div",{className:"py-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:D.users?.nickname||D.users?.email||"Unknown"}),e.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:D.role})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Joined: ",new Date(D.joined_at).toLocaleDateString()]}),D.role!=="admin"&&e.jsx(me,{onClick:()=>C(D.id,h.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Remove"})]})]},D.id))}),b.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No members found"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{onClick:()=>{y(!1),f(null),x([])},variant:"primary",children:"Close"}),e.jsxs(me,{onClick:()=>{P(h.id),y(!1),f(null),x([])},variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(zs,{className:"w-4 h-4 mr-2"}),"Delete Group"]})]})]})]})})]})}function rA(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState(!0),[d,c]=L.useState(""),[h,f]=L.useState("all"),[p,y]=L.useState("all"),[b,x]=L.useState("resources"),[A,N]=L.useState(!1),[P,_]=L.useState(null),[C,j]=L.useState({category_id:"",title:"",description:"",resource_type:"document",file_url:"",thumbnail_url:"",is_featured:!1,is_public:!0});L.useEffect(()=>{w()},[h,p,b]);const w=async()=>{try{l(!0);const[R,$]=await Promise.all([(()=>{let q=B.database.from("resources").select("*, resource_categories(*)").order("created_at",{ascending:!1});return h!=="all"&&(q=q.eq("category_id",h)),p!=="all"&&(q=q.eq("resource_type",p)),q})(),B.database.from("resource_categories").select("*").order("order_index")]);s(R.data||[]),a($.data||[])}catch(R){console.error("Error fetching resources:",R)}finally{l(!1)}},D=async R=>{if(confirm("Are you sure you want to delete this resource? This action cannot be undone."))try{const $=t.find(q=>q.id===R);if($?.file_url)try{const q=$.file_url.split("/").pop();q&&await B.storage.from("resources").remove(q)}catch(q){console.warn("Error deleting resource file:",q)}if($?.thumbnail_url)try{const q=$.thumbnail_url.split("/").pop();q&&await B.storage.from("resources").remove(q)}catch(q){console.warn("Error deleting thumbnail:",q)}await B.database.from("resources").delete().eq("id",R),w(),alert("Resource deleted successfully")}catch($){console.error("Error deleting resource:",$),alert("Failed to delete resource")}},z=async(R,$)=>{try{await B.database.from("resources").update({is_featured:!$}).eq("id",R),w()}catch(q){console.error("Error toggling featured status:",q),alert("Failed to update featured status")}},U=async(R,$)=>{try{await B.database.from("resources").update({is_public:!$}).eq("id",R),w()}catch(q){console.error("Error toggling public status:",q),alert("Failed to update public status")}},X=async R=>{if(confirm("Are you sure you want to delete this category? Resources in this category will not be deleted but will become uncategorized."))try{await B.database.from("resources").update({category_id:null}).eq("category_id",R),await B.database.from("resource_categories").delete().eq("id",R),w(),alert("Category deleted successfully")}catch($){console.error("Error deleting category:",$),alert("Failed to delete category")}},E=R=>{switch(R){case"video":return e.jsx(Wl,{className:"w-5 h-5"});case"audio":return e.jsx(Jv,{className:"w-5 h-5"});default:return e.jsx(ys,{className:"w-5 h-5"})}},G=t.filter(R=>R.title.toLowerCase().includes(d.toLowerCase())||R.description?.toLowerCase().includes(d.toLowerCase())),I=Array.from(new Set(t.map(R=>R.resource_type).filter(Boolean)));return o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading resources..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Resources Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage resources, categories, and content"})]})}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>{x("resources"),c("")},className:`px-4 py-2 rounded-lg font-medium ${b==="resources"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Resources (",t.length,")"]}),e.jsxs("button",{onClick:()=>{x("categories"),c("")},className:`px-4 py-2 rounded-lg font-medium ${b==="categories"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Categories (",r.length,")"]})]}),e.jsxs("div",{className:"relative flex-1 max-w-md ml-4",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:`Search ${b}...`,value:d,onChange:R=>c(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]}),b==="resources"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{value:h,onChange:R=>f(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Categories"}),r.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]}),e.jsxs("select",{value:p,onChange:R=>y(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Types"}),I.map(R=>e.jsx("option",{value:R,children:R.charAt(0).toUpperCase()+R.slice(1)},R))]})]})]}),b==="resources"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Resource"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Downloads"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:G.map(R=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[E(R.resource_type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:R.title}),R.description&&e.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:R.description})]})]})}),e.jsx("td",{className:"py-4 px-6 text-sm",children:R.resource_categories?.name||"Uncategorized"}),e.jsx("td",{className:"py-4 px-6 text-sm",children:R.resource_type}),e.jsx("td",{className:"py-4 px-6",children:R.download_count||0}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-1",children:[R.is_featured&&e.jsx("span",{className:"px-2 py-1 bg-gold text-white text-xs rounded",children:"Featured"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${R.is_public?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.is_public?"Public":"Private"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{onClick:()=>z(R.id,R.is_featured),variant:"outline",size:"sm",title:R.is_featured?"Remove Featured":"Make Featured",children:R.is_featured?e.jsx(K6,{className:"w-4 h-4"}):e.jsx(Bh,{className:"w-4 h-4"})}),e.jsx(me,{onClick:()=>U(R.id,R.is_public),variant:"outline",size:"sm",title:R.is_public?"Make Private":"Make Public",children:R.is_public?"Hide":"Show"}),e.jsx(me,{onClick:()=>D(R.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},R.id))})]})}),G.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ys,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No resources found"})]})]}),b==="categories"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y",children:r.map(R=>{const $=t.filter(q=>q.category_id===R.id);return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink mb-2",children:R.name}),R.description&&e.jsx("p",{className:"text-gray-600 mb-2",children:R.description}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Slug: ",R.slug,"  Order: ",R.order_index,"  Resources: ",$.length]})]}),e.jsx(me,{onClick:()=>X(R.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 ml-4",title:"Delete",children:e.jsx(zs,{className:"w-4 h-4"})})]})},R.id)})}),r.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ys,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No categories found"})]})]})]})}function nA(){const{id:t}=Mi(),[s,r]=L.useState(null),[a,o]=L.useState(!0);L.useEffect(()=>{t&&l()},[t]);const l=async()=>{if(t)try{o(!0);const{data:f}=await B.database.from("live_streams").select("*, events(*)").eq("id",t).single();r(f),f&&f.status==="live"&&await B.database.from("live_streams").update({viewer_count:(f.viewer_count||0)+1}).eq("id",t)}catch(f){console.error("Error fetching stream:",f)}finally{o(!1)}};if(a)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading stream..."})});if(!s)return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white p-12 rounded-card shadow-soft text-center",children:e.jsx("p",{className:"text-gray-600",children:"Stream not found"})})});const d=s.status==="live",c=s.status==="scheduled"&&new Date(s.scheduled_start)>new Date,h=s.recording_url&&s.status==="recorded";return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs(ot,{to:"/dashboard/events",className:"inline-flex items-center text-gold hover:underline mb-6",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Events"]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d&&e.jsxs("span",{className:"px-3 py-1 bg-red-500 text-white text-sm font-semibold rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]}),c&&e.jsx("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-semibold rounded-full",children:"Scheduled"}),h&&e.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-sm font-semibold rounded-full",children:"Recorded"})]}),e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.events&&e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-4 h-4"}),s.events.title]}),e.jsx("span",{children:new Date(s.events.event_date).toLocaleDateString()})]})]}),d&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Qt,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[s.viewer_count||0," viewers"]})]})]})}),e.jsx("div",{className:"bg-white rounded-card shadow-soft overflow-hidden mb-6",children:d&&s.stream_url?e.jsx("div",{className:"relative",style:{paddingBottom:"56.25%"},children:e.jsx("iframe",{src:s.stream_url,className:"absolute top-0 left-0 w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):h&&s.recording_url?e.jsx("div",{className:"relative",style:{paddingBottom:"56.25%"},children:e.jsx("iframe",{src:s.recording_url,className:"absolute top-0 left-0 w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):c?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Wl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-2",children:"Stream Scheduled"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["This stream will begin on"," ",new Date(s.scheduled_start).toLocaleString()]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[e.jsx(ns,{className:"w-5 h-5"}),e.jsxs("span",{children:[new Date(s.scheduled_start).toLocaleDateString()," at"," ",new Date(s.scheduled_start).toLocaleTimeString()]})]})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Wl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Stream not available"})]})}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Stream Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Provider:"}),e.jsx("span",{className:"ml-2 text-gray-600 capitalize",children:s.provider||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Scheduled Start:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(s.scheduled_start).toLocaleString()})]}),s.started_at&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Started:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(s.started_at).toLocaleString()})]}),s.ended_at&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Ended:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(s.ended_at).toLocaleString()})]})]}),s.stream_url&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:s.stream_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-gold hover:underline",children:[e.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Open in New Tab"]})})]})]})}function aA(){const[t,s]=L.useState(null),[r,a]=L.useState(!0),[o,l]=L.useState({start:new Date(new Date().setMonth(new Date().getMonth()-6)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});L.useEffect(()=>{d()},[o]);const d=async()=>{try{a(!0);const[c,h,f]=await Promise.all([B.database.from("users").select("*",{count:"exact"}),B.database.from("users").select("*",{count:"exact"}).gte("created_at",o.start).lte("created_at",o.end),B.database.from("user_profiles").select("province")]),[p,y,b]=await Promise.all([B.database.from("courses").select("*",{count:"exact"}),B.database.from("course_enrollments").select("*",{count:"exact"}),B.database.from("user_course_progress").select("*").eq("completed",!0)]),x=await B.database.from("donations").select("amount, created_at").eq("status","confirmed").gte("created_at",o.start).lte("created_at",o.end),[A,N,P,_]=await Promise.all([B.database.from("applications").select("*",{count:"exact"}),B.database.from("applications").select("*",{count:"exact"}).eq("status","approved"),B.database.from("applications").select("*",{count:"exact"}).eq("status","pending"),B.database.from("applications").select("*",{count:"exact"}).eq("status","rejected")]),C=new Map;f.data?.forEach(D=>{D.province&&C.set(D.province,(C.get(D.province)||0)+1)});const j=new Map;x.data?.forEach(D=>{const z=new Date(D.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short"});j.set(z,(j.get(z)||0)+parseFloat(D.amount||0))});const w=x.data?.reduce((D,z)=>D+parseFloat(z.amount||0),0)||0;s({userEngagement:{totalUsers:c.count||0,activeUsers:c.count||0,newUsers:h.count||0,userGrowth:c.count?(h.count||0)/c.count*100:0},courseMetrics:{totalCourses:p.count||0,enrollments:y.count||0,completions:b.data?.length||0,completionRate:y.count?(b.data?.length||0)/y.count*100:0},donationTrends:{total:w,monthly:Array.from(j.entries()).map(([D,z])=>({month:D,amount:z})),average:x.data?.length?w/x.data.length:0},applicationMetrics:{total:A.count||0,approved:N.count||0,pending:P.count||0,rejected:_.count||0,conversionRate:A.count?(N.count||0)/A.count*100:0},geographic:Array.from(C.entries()).map(([D,z])=>({province:D,count:z})).sort((D,z)=>z.count-D.count).slice(0,10)})}catch(c){console.error("Error fetching analytics:",c)}finally{a(!1)}};return r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive insights into platform performance"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"date",value:o.start,onChange:c=>l({...o,start:c.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"}),e.jsx("input",{type:"date",value:o.end,onChange:c=>l({...o,end:c.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx(Qt,{className:"w-5 h-5"}),"User Engagement Metrics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.userEngagement.totalUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.userEngagement.activeUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"New Users (Period)"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.userEngagement.newUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Growth Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:[t.userEngagement.userGrowth.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5"}),"Course Completion Rates"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Courses"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.courseMetrics.totalCourses})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Enrollments"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.courseMetrics.enrollments})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Completions"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.courseMetrics.completions})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Completion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:[t.courseMetrics.completionRate.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx(fo,{className:"w-5 h-5"}),"Donation Trends"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Donations"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",t.donationTrends.total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Average Donation"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",t.donationTrends.average.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Monthly Breakdown"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:[t.donationTrends.monthly.length," months"]})]})]}),t.donationTrends.monthly.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Monthly Donations"}),e.jsx("div",{className:"space-y-2",children:t.donationTrends.monthly.map((c,h)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 text-sm text-gray-600",children:c.month}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4 relative",children:e.jsx("div",{className:"bg-gold h-4 rounded-full",style:{width:`${c.amount/t.donationTrends.total*100}%`}})}),e.jsxs("div",{className:"w-24 text-right text-sm font-semibold",children:["R",c.amount.toFixed(2)]})]},h))})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx($d,{className:"w-5 h-5"}),"Application Conversion Rates"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Applications"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.applicationMetrics.total})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.applicationMetrics.approved})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:t.applicationMetrics.pending})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.applicationMetrics.rejected})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:[t.applicationMetrics.conversionRate.toFixed(1),"%"]})]})]})]}),t.geographic.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx(Zl,{className:"w-5 h-5"}),"Geographic Distribution"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.geographic.map((c,h)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted-gray rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-white font-bold",children:h+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:c.province}),e.jsxs("p",{className:"text-sm text-gray-600",children:[c.count," users"]})]})]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gold h-2 rounded-full",style:{width:`${c.count/t.geographic[0].count*100}%`}})})]},h))})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No analytics data available"})})}function iA(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState(!0),[d,c]=L.useState(!1),[h,f]=L.useState({name:"",description:"",report_type:"users",query_config:{},export_formats:["pdf","excel"],is_active:!0});L.useEffect(()=>{p()},[]);const p=async()=>{try{l(!0);const[N,P]=await Promise.all([B.database.from("report_templates").select("*").order("created_at",{ascending:!1}),B.database.from("report_runs").select("*, report_templates(*)").order("started_at",{ascending:!1}).limit(20)]);s(N.data||[]),a(P.data||[])}catch(N){console.error("Error fetching data:",N)}finally{l(!1)}},y=async N=>{N.preventDefault();try{await B.database.from("report_templates").insert({...h,query_config:b(h.report_type)}),c(!1),f({name:"",description:"",report_type:"users",query_config:{},export_formats:["pdf","excel"],is_active:!0}),p()}catch(P){console.error("Error creating template:",P),alert("Error creating template")}},b=N=>({users:{table:"user_profiles",columns:["user_id","phone","city","province","role"],filters:{},groupBy:null},donations:{table:"donations",columns:["amount","campaign_name","created_at"],filters:{status:"confirmed"},groupBy:"campaign_name"},applications:{table:"applications",columns:["program_type","status","created_at"],filters:{},groupBy:"program_type"},payments:{table:"payments",columns:["amount","payment_type","status","created_at"],filters:{},groupBy:"payment_type"}})[N]||{},x=async N=>{try{const{data:P}=await B.database.from("report_runs").insert({template_id:N,status:"running"}).select().single();setTimeout(async()=>{await B.database.from("report_runs").update({status:"completed",completed_at:new Date().toISOString(),file_url:`#report-${P.id}`}).eq("id",P.id),p()},2e3),p(),alert("Report generation started!")}catch(P){console.error("Error running report:",P),alert("Error running report")}},A=async N=>{if(confirm("Are you sure you want to delete this template?"))try{await B.database.from("report_templates").delete().eq("id",N),p()}catch(P){console.error("Error deleting template:",P)}};return o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading reports..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Custom Reports Builder"}),e.jsx("p",{className:"text-gray-600",children:"Create and schedule custom reports"})]}),e.jsxs(me,{onClick:()=>c(!0),variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Template"]})]}),d&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:"Create Report Template"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:N=>f({...h,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:N=>f({...h,description:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type *"}),e.jsxs("select",{value:h.report_type,onChange:N=>f({...h,report_type:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0,children:[e.jsx("option",{value:"users",children:"Users"}),e.jsx("option",{value:"donations",children:"Donations"}),e.jsx("option",{value:"applications",children:"Applications"}),e.jsx("option",{value:"payments",children:"Payments"}),e.jsx("option",{value:"courses",children:"Courses"}),e.jsx("option",{value:"events",children:"Events"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Formats"}),e.jsx("div",{className:"space-y-2",children:["pdf","excel","csv"].map(N=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.export_formats.includes(N),onChange:P=>{P.target.checked?f({...h,export_formats:[...h.export_formats,N]}):f({...h,export_formats:h.export_formats.filter(_=>_!==N)})},className:"mr-2"}),e.jsx("span",{className:"capitalize",children:N})]},N))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Create Template"}),e.jsx(me,{type:"button",onClick:()=>c(!1),variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Report Templates"})}),e.jsx("div",{className:"divide-y",children:t.map(N=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy-ink",children:N.name}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded capitalize",children:N.report_type}),N.is_active?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Active"}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"Inactive"})]}),N.description&&e.jsx("p",{className:"text-gray-600 mb-2",children:N.description}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsxs("span",{children:["Formats: ",N.export_formats.join(", ").toUpperCase()]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{onClick:()=>x(N.id),variant:"primary",size:"sm",children:[e.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Run"]}),e.jsx("button",{onClick:()=>A(N.id),className:"text-red-600 hover:text-red-800",children:e.jsx(zs,{className:"w-4 h-4"})})]})]})},N.id))}),t.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ys,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No report templates yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Recent Report Runs"})}),e.jsx("div",{className:"divide-y",children:r.map(N=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:N.report_templates?.name||"Unknown Report"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Started: ",new Date(N.started_at).toLocaleString(),N.completed_at&&e.jsxs("span",{children:["  Completed: ",new Date(N.completed_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${N.status==="completed"?"bg-green-100 text-green-800":N.status==="running"?"bg-blue-100 text-blue-800":N.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:N.status}),N.status==="completed"&&N.file_url&&e.jsxs(me,{variant:"outline",size:"sm",children:[e.jsx(ci,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})},N.id))}),r.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No report runs yet"})]})]})]})}function oA(){const[t,s]=L.useState([]),[r,a]=L.useState([]),[o,l]=L.useState(!0),[d,c]=L.useState(!1),[h,f]=L.useState(null),[p,y]=L.useState("templates"),[b,x]=L.useState({template_key:"",name:"",subject:"",body_html:"",body_text:"",is_active:!0});L.useEffect(()=>{A()},[p]);const A=async()=>{try{l(!0);const[w,D]=await Promise.all([B.database.from("email_templates").select("*").order("created_at",{ascending:!1}),B.database.from("scheduled_emails").select("*, email_templates(*)").order("scheduled_for",{ascending:!1}).limit(50)]);s(w.data||[]),a(D.data||[])}catch(w){console.error("Error fetching data:",w)}finally{l(!1)}},N=async w=>{w.preventDefault();try{const D={...b,template_key:b.template_key||b.name.toLowerCase().replace(/\s+/g,"_")};h?await B.database.from("email_templates").update(D).eq("id",h.id):await B.database.from("email_templates").insert(D),c(!1),f(null),P(),A()}catch(D){console.error("Error saving template:",D),alert("Error saving template")}},P=()=>{x({template_key:"",name:"",subject:"",body_html:"",body_text:"",is_active:!0})},_=w=>{f(w),x({template_key:w.template_key,name:w.name,subject:w.subject,body_html:w.body_html,body_text:w.body_text||"",is_active:w.is_active}),c(!0)},C=async w=>{if(confirm("Are you sure you want to delete this template?"))try{await B.database.from("email_templates").delete().eq("id",w),A()}catch(D){console.error("Error deleting template:",D)}},j=w=>{const D=window.open("","_blank");D&&D.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Email Preview: ${w.name}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; }
            .email-preview { border: 1px solid #ddd; padding: 20px; }
          </style>
        </head>
        <body>
          <h2>${w.subject}</h2>
          <div class="email-preview">
            ${w.body_html}
          </div>
        </body>
      </html>
    `)};return o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading email templates..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Email Templates"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage email templates"})]}),e.jsxs(me,{onClick:()=>{f(null),P(),c(!0)},variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Template"]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>y("templates"),className:`px-4 py-2 rounded-lg font-medium ${p==="templates"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Templates (",t.length,")"]}),e.jsxs("button",{onClick:()=>y("scheduled"),className:`px-4 py-2 rounded-lg font-medium ${p==="scheduled"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Scheduled Emails (",r.length,")"]})]})}),d&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:h?"Edit Template":"Create Template"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Key *"}),e.jsx("input",{type:"text",value:b.template_key,onChange:w=>x({...b,template_key:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"e.g., donation_confirmation",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:w=>x({...b,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),e.jsx("input",{type:"text",value:b.subject,onChange:w=>x({...b,subject:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HTML Body *"}),e.jsx("textarea",{value:b.body_html,onChange:w=>x({...b,body_html:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold font-mono text-sm",rows:10,required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use HTML. Variables: ","{{name}}",", ","{{amount}}",", ","{{date}}",", etc."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plain Text Body (Optional)"}),e.jsx("textarea",{value:b.body_text,onChange:w=>x({...b,body_text:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:5})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:b.is_active,onChange:w=>x({...b,is_active:w.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Template"}),e.jsx(me,{type:"button",onClick:()=>{c(!1),f(null),P()},variant:"outline",children:"Cancel"})]})]})]}),p==="templates"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Key"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Subject"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(w=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6 font-medium",children:w.name}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600 font-mono",children:w.template_key}),e.jsx("td",{className:"py-4 px-6",children:w.subject}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(w),className:"text-blue-600 hover:text-blue-800",title:"Preview",children:e.jsx(di,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(w),className:"text-blue-600 hover:text-blue-800",children:e.jsx(bn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(w.id),className:"text-red-600 hover:text-red-800",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},w.id))})]})}),t.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(vn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No email templates yet"})]})]}),p==="scheduled"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y",children:r.map(w=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:w.subject}),e.jsxs("p",{className:"text-sm text-gray-600",children:["To: ",w.recipient_email]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",new Date(w.scheduled_for).toLocaleString()]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${w.status==="sent"?"bg-green-100 text-green-800":w.status==="pending"?"bg-blue-100 text-blue-800":w.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:w.status})]})},w.id))}),r.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No scheduled emails"})]})]})]})}function lA(){const[t,s]=L.useState([]),[r,a]=L.useState(!0),[o,l]=L.useState(""),[d,c]=L.useState("all"),[h,f]=L.useState("all"),[p,y]=L.useState({start:new Date(new Date().setDate(new Date().getDate()-7)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});L.useEffect(()=>{b()},[d,h,p]);const b=async()=>{try{a(!0);let _=B.database.from("audit_logs").select("*, users(*)").gte("created_at",p.start).lte("created_at",p.end+"T23:59:59").order("created_at",{ascending:!1}).limit(100);d!=="all"&&(_=_.eq("action",d)),h!=="all"&&(_=_.eq("resource_type",h));const{data:C}=await _;s(C||[])}catch(_){console.error("Error fetching audit logs:",_)}finally{a(!1)}},x=()=>{const C=[["Date","User","Action","Resource Type","Resource ID","IP Address","Details"],...t.map(z=>[new Date(z.created_at).toLocaleString(),z.users?.email||"System",z.action,z.resource_type,z.resource_id||"N/A",z.ip_address||"N/A",JSON.stringify(z.details||{})])].map(z=>z.join(",")).join(`
`),j=new Blob([C],{type:"text/csv"}),w=window.URL.createObjectURL(j),D=document.createElement("a");D.href=w,D.download=`audit-logs-${p.start}-${p.end}.csv`,D.click(),window.URL.revokeObjectURL(w)},A=t.filter(_=>_.action.toLowerCase().includes(o.toLowerCase())||_.resource_type.toLowerCase().includes(o.toLowerCase())||_.users?.email?.toLowerCase().includes(o.toLowerCase())),N=Array.from(new Set(t.map(_=>_.action))),P=Array.from(new Set(t.map(_=>_.resource_type)));return r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading audit logs..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Audit Logs"}),e.jsx("p",{className:"text-gray-600",children:"Track all system actions and security events"})]}),e.jsxs(me,{onClick:x,variant:"primary",children:[e.jsx(ci,{className:"w-4 h-4 mr-2"}),"Export Logs"]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:o,onChange:_=>l(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("select",{value:d,onChange:_=>c(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Actions"}),N.map(_=>e.jsx("option",{value:_,children:_},_))]}),e.jsxs("select",{value:h,onChange:_=>f(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Resources"}),P.map(_=>e.jsx("option",{value:_,children:_},_))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:p.start,onChange:_=>y({...p,start:_.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"}),e.jsx("input",{type:"date",value:p.end,onChange:_=>y({...p,end:_.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]})}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Date & Time"}),e.jsx("th",{className:"text-left py-3 px-6",children:"User"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Action"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Resource"}),e.jsx("th",{className:"text-left py-3 px-6",children:"IP Address"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Details"})]})}),e.jsx("tbody",{children:A.map(_=>e.jsxs("tr",{className:"border-b hover:bg-muted-gray",children:[e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date(_.created_at).toLocaleString()}),e.jsx("td",{className:"py-4 px-6",children:_.users?.email||_.users?.nickname||"System"}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.action.includes("delete")?"bg-red-100 text-red-800":_.action.includes("create")||_.action.includes("insert")?"bg-green-100 text-green-800":_.action.includes("update")?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:_.action})}),e.jsxs("td",{className:"py-4 px-6",children:[e.jsx("span",{className:"text-sm",children:_.resource_type}),_.resource_id&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",_.resource_id.substring(0,8),"...)"]})]}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:_.ip_address||"N/A"}),e.jsx("td",{className:"py-4 px-6",children:_.details&&e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer text-blue-600 hover:text-blue-800",children:"View Details"}),e.jsx("pre",{className:"mt-2 p-2 bg-gray-50 rounded text-xs overflow-auto max-w-md",children:JSON.stringify(_.details,null,2)})]})})]},_.id))})]})}),A.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Wd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No audit logs found"})]})]})]})}function cA(){const{user:t}=Mt(),[s,r]=L.useState({enabled:!1,method:null}),[a,o]=L.useState(!0),[l,d]=L.useState("select"),[c,h]=L.useState(null),[f,p]=L.useState(""),[y,b]=L.useState(""),[x,A]=L.useState([]);L.useEffect(()=>{t&&N()},[t]);const N=async()=>{if(t)try{o(!0);const{data:C}=await B.database.from("user_security_settings").select("*").eq("user_id",t.id).single();C&&r({enabled:C.two_factor_enabled||!1,method:C.two_factor_method||null,phone_number:C.two_factor_phone,backup_codes:C.backup_codes||[]})}catch(C){console.error("Error fetching 2FA settings:",C)}finally{o(!1)}},P=async()=>{if(!(!t||!c))try{if(y==="123456"||y.length===6){const C=Array.from({length:10},()=>Math.random().toString(36).substring(2,8).toUpperCase());await B.database.from("user_security_settings").upsert({user_id:t.id,two_factor_enabled:!0,two_factor_method:c,two_factor_phone:c==="sms"?f:null,backup_codes:C}),A(C),r({enabled:!0,method:c,phone_number:c==="sms"?f:void 0,backup_codes:C}),d("complete")}else alert("Invalid verification code")}catch(C){console.error("Error verifying 2FA:",C),alert("Error setting up 2FA")}},_=async()=>{if(!(!t||!confirm("Are you sure you want to disable 2FA?")))try{await B.database.from("user_security_settings").update({two_factor_enabled:!1,two_factor_method:null,two_factor_phone:null,backup_codes:null}).eq("user_id",t.id),r({enabled:!1,method:null}),d("select"),alert("2FA has been disabled")}catch(C){console.error("Error disabling 2FA:",C)}};return a?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading security settings..."})}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account security and two-factor authentication"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-2 flex items-center gap-2",children:[e.jsx(Wd,{className:"w-5 h-5"}),"Two-Factor Authentication"]}),e.jsx("p",{className:"text-gray-600",children:"Add an extra layer of security to your account"})]}),s.enabled&&e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(rt,{className:"w-4 h-4"}),"Enabled"]})]}),s.enabled?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"2FA is enabled"})," via ",s.method==="sms"?"SMS":"Email",s.phone_number&&` (${s.phone_number})`]})}),s.backup_codes&&s.backup_codes.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-2",children:"Your Backup Codes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 mb-4",children:s.backup_codes.map((C,j)=>e.jsx("div",{className:"p-2 bg-gray-100 rounded text-center font-mono text-sm",children:C},j))})]}),e.jsx(me,{onClick:_,variant:"outline",children:"Disable 2FA"})]}):e.jsxs("div",{children:[l==="select"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Choose your 2FA method:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>{h("sms"),d("verify")},className:"p-6 border-2 border-gray-300 rounded-lg hover:border-gold transition-colors text-left",children:[e.jsx(Xv,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx("h3",{className:"font-semibold text-navy-ink mb-1",children:"SMS"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive codes via text message"})]}),e.jsxs("button",{onClick:()=>{h("email"),d("verify")},className:"p-6 border-2 border-gray-300 rounded-lg hover:border-gold transition-colors text-left",children:[e.jsx(vn,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx("h3",{className:"font-semibold text-navy-ink mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive codes via email"})]})]})]}),l==="verify"&&c&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>{d("select"),h(null)},className:"text-gold hover:underline mb-4",children:" Back"}),c==="sms"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:f,onChange:C=>p(C.target.value),placeholder:"+27 12 345 6789",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold mb-4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code *"}),e.jsx("input",{type:"text",value:y,onChange:C=>b(C.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c==="sms"?"Enter the code sent to your phone":"Enter the code sent to your email"})]}),e.jsx(me,{onClick:P,variant:"primary",children:"Verify & Enable"})]}),l==="complete"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(rt,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"font-semibold text-green-800",children:"2FA Enabled Successfully!"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Your account is now protected with two-factor authentication."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-2",children:"Backup Codes"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Save these codes in a safe place. You can use them to access your account if you lose access to your ",c==="sms"?"phone":"email","."]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 mb-4",children:x.map((C,j)=>e.jsx("div",{className:"p-2 bg-gray-100 rounded text-center font-mono text-sm",children:C},j))}),e.jsx(me,{onClick:()=>{d("select"),h(null),b(""),p("")},variant:"outline",children:"Done"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx(p6,{className:"w-5 h-5"}),"Change Password"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Update your password to keep your account secure"}),e.jsx(me,{variant:"outline",children:"Change Password"})]})]})}function dA(){const[t,s]=L.useState(null),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(!0),[h,f]=L.useState(!1),[p,y]=L.useState(!1),[b,x]=L.useState(null),[A,N]=L.useState("config"),[P,_]=L.useState({provider:"twilio",api_key:"",api_secret:"",sender_id:"",is_active:!1}),[C,j]=L.useState({template_key:"",name:"",message:"",is_active:!0});L.useEffect(()=>{w()},[A]);const w=async()=>{try{c(!0);const[E,G,I]=await Promise.all([B.database.from("sms_config").select("*").single(),B.database.from("sms_templates").select("*").order("created_at",{ascending:!1}),B.database.from("scheduled_sms").select("*, sms_templates(*)").order("scheduled_for",{ascending:!1}).limit(50)]);s(E.data),a(G.data||[]),l(I.data||[]),E.data&&_({provider:E.data.provider,api_key:E.data.api_key||"",api_secret:E.data.api_secret||"",sender_id:E.data.sender_id||"",is_active:E.data.is_active})}catch(E){console.error("Error fetching data:",E)}finally{c(!1)}},D=async E=>{E.preventDefault();try{t?await B.database.from("sms_config").update(P).eq("id",t.id):await B.database.from("sms_config").insert(P),f(!1),w(),alert("SMS configuration saved!")}catch(G){console.error("Error saving config:",G),alert("Error saving configuration")}},z=async E=>{E.preventDefault();try{const G={...C,template_key:C.template_key||C.name.toLowerCase().replace(/\s+/g,"_")};b?await B.database.from("sms_templates").update(G).eq("id",b.id):await B.database.from("sms_templates").insert(G),y(!1),x(null),j({template_key:"",name:"",message:"",is_active:!0}),w()}catch(G){console.error("Error saving template:",G),alert("Error saving template")}},U=async E=>{if(confirm("Are you sure you want to delete this template?"))try{await B.database.from("sms_templates").delete().eq("id",E),w()}catch(G){console.error("Error deleting template:",G)}},X=async E=>{const G=r.find(R=>R.id===E);if(!G)return;const I=prompt("Enter phone number to send test SMS:");if(I)try{alert(`Test SMS would be sent to ${I} with message: ${G.message}`)}catch(R){console.error("Error sending test SMS:",R)}};return d?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading SMS settings..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"SMS Notifications"}),e.jsx("p",{className:"text-gray-600",children:"Configure SMS provider and manage SMS templates"})]}),A==="templates"&&e.jsxs(me,{onClick:()=>{x(null),j({template_key:"",name:"",message:"",is_active:!0}),y(!0)},variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Template"]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>N("config"),className:`px-4 py-2 rounded-lg font-medium ${A==="config"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:"Configuration"}),e.jsxs("button",{onClick:()=>N("templates"),className:`px-4 py-2 rounded-lg font-medium ${A==="templates"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Templates (",r.length,")"]}),e.jsxs("button",{onClick:()=>N("scheduled"),className:`px-4 py-2 rounded-lg font-medium ${A==="scheduled"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Scheduled (",o.length,")"]})]})}),A==="config"&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"SMS Provider Configuration"}),t?.is_active&&e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(rt,{className:"w-4 h-4"}),"Active"]})]}),h?e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provider *"}),e.jsxs("select",{value:P.provider,onChange:E=>_({...P,provider:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0,children:[e.jsx("option",{value:"twilio",children:"Twilio"}),e.jsx("option",{value:"africas_talking",children:"Africa's Talking"}),e.jsx("option",{value:"clickatell",children:"Clickatell"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key *"}),e.jsx("input",{type:"text",value:P.api_key,onChange:E=>_({...P,api_key:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Secret *"}),e.jsx("input",{type:"password",value:P.api_secret,onChange:E=>_({...P,api_secret:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sender ID"}),e.jsx("input",{type:"text",value:P.sender_id,onChange:E=>_({...P,sender_id:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"CLM"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:P.is_active,onChange:E=>_({...P,is_active:E.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Activate SMS notifications"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Configuration"}),e.jsx(me,{type:"button",onClick:()=>f(!1),variant:"outline",children:"Cancel"})]})]}):e.jsx("div",{children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Provider"}),e.jsx("p",{className:"font-semibold capitalize",children:t.provider})]}),t.sender_id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sender ID"}),e.jsx("p",{className:"font-semibold",children:t.sender_id})]}),e.jsxs(me,{onClick:()=>f(!0),variant:"primary",children:[e.jsx(bn,{className:"w-4 h-4 mr-2"}),"Edit Configuration"]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No SMS configuration found. Set up your provider to enable SMS notifications."}),e.jsxs(me,{onClick:()=>f(!0),variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Configure SMS Provider"]})]})})]}),A==="templates"&&e.jsxs("div",{children:[p&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:b?"Edit Template":"Create Template"}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Key *"}),e.jsx("input",{type:"text",value:C.template_key,onChange:E=>j({...C,template_key:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"payment_confirmation",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:C.name,onChange:E=>j({...C,name:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),e.jsx("textarea",{value:C.message,onChange:E=>j({...C,message:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:4,maxLength:160,required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C.message.length,"/160 characters. Use ","{{variable}}"," for dynamic content."]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:C.is_active,onChange:E=>j({...C,is_active:E.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Template"}),e.jsx(me,{type:"button",onClick:()=>{y(!1),x(null)},variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Key"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Message"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(E=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6 font-medium",children:E.name}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600 font-mono",children:E.template_key}),e.jsx("td",{className:"py-4 px-6 text-sm",children:E.message}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${E.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>X(E.id),className:"text-blue-600 hover:text-blue-800",title:"Send Test",children:e.jsx(Ic,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{x(E),j({template_key:E.template_key,name:E.name,message:E.message,is_active:E.is_active}),y(!0)},className:"text-blue-600 hover:text-blue-800",children:e.jsx(bn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(E.id),className:"text-red-600 hover:text-red-800",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},E.id))})]})}),r.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No SMS templates yet"})]})]})]}),A==="scheduled"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y",children:o.map(E=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:E.message}),e.jsxs("p",{className:"text-sm text-gray-600",children:["To: ",E.recipient_phone]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",new Date(E.scheduled_for).toLocaleString()]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${E.status==="sent"?"bg-green-100 text-green-800":E.status==="pending"?"bg-blue-100 text-blue-800":E.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:E.status})]})},E.id))}),o.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No scheduled SMS"})]})]})]})}function uA(){const[t,s]=L.useState(null),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(!0),[h,f]=L.useState(!1),[p,y]=L.useState(!1),[b,x]=L.useState(null),[A,N]=L.useState("config"),[P,_]=L.useState([]),[C,j]=L.useState({vapid_public_key:"",vapid_private_key:"",is_active:!1}),[w,D]=L.useState({template_key:"",title:"",body:"",icon_url:"",badge_url:"",action_url:"",is_active:!0});L.useEffect(()=>{U(),z()},[A]);const z=async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()},U=async()=>{try{c(!0);const[$,q,Q,he]=await Promise.all([B.database.from("push_config").select("*").single(),B.database.from("push_templates").select("*").order("created_at",{ascending:!1}),B.database.from("scheduled_push").select("*, push_templates(*)").order("scheduled_for",{ascending:!1}).limit(50),B.database.from("push_subscriptions").select("*, users(*)").order("created_at",{ascending:!1}).limit(100)]);s($.data),a(q.data||[]),l(Q.data||[]),_(he.data||[]),$.data&&j({vapid_public_key:$.data.vapid_public_key||"",vapid_private_key:$.data.vapid_private_key||"",is_active:$.data.is_active})}catch($){console.error("Error fetching data:",$)}finally{c(!1)}},X=async $=>{$.preventDefault();try{t?await B.database.from("push_config").update(C).eq("id",t.id):await B.database.from("push_config").insert(C),f(!1),U(),alert("Push notification configuration saved!")}catch(q){console.error("Error saving config:",q),alert("Error saving configuration")}},E=async $=>{$.preventDefault();try{const q={...w,template_key:w.template_key||w.title.toLowerCase().replace(/\s+/g,"_")};b?await B.database.from("push_templates").update(q).eq("id",b.id):await B.database.from("push_templates").insert(q),y(!1),x(null),D({template_key:"",title:"",body:"",icon_url:"",badge_url:"",action_url:"",is_active:!0}),U()}catch(q){console.error("Error saving template:",q),alert("Error saving template")}},G=async $=>{if(confirm("Are you sure you want to delete this template?"))try{await B.database.from("push_templates").delete().eq("id",$),U()}catch(q){console.error("Error deleting template:",q)}},I=async $=>{if(!("Notification"in window)){alert("Push notifications are not supported in this browser");return}if(Notification.permission!=="granted"&&await Notification.requestPermission()!=="granted"){alert("Notification permission denied");return}const q=r.find(Q=>Q.id===$);if(q)try{new Notification(q.title,{body:q.body,icon:q.icon_url||"/icon-192x192.png",badge:q.badge_url||"/badge-72x72.png",tag:q.template_key,requireInteraction:!1}),alert("Test push notification sent!")}catch(Q){console.error("Error sending test push:",Q),alert("Error sending test notification")}},R=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window)){alert("Push notifications are not supported in this browser");return}try{const q=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C.vapid_public_key});await B.database.from("push_subscriptions").insert({endpoint:q.endpoint,keys:JSON.stringify(q.toJSON().keys)}),alert("Successfully subscribed to push notifications!"),U()}catch($){console.error("Error subscribing to push:",$),alert("Error subscribing to push notifications")}};return d?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading push notification settings..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Push Notifications"}),e.jsx("p",{className:"text-gray-600",children:"Configure browser push notifications"})]}),A==="templates"&&e.jsxs(me,{onClick:()=>{x(null),D({template_key:"",title:"",body:"",icon_url:"",badge_url:"",action_url:"",is_active:!0}),y(!0)},variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Create Template"]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx("button",{onClick:()=>N("config"),className:`px-4 py-2 rounded-lg font-medium ${A==="config"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:"Configuration"}),e.jsxs("button",{onClick:()=>N("templates"),className:`px-4 py-2 rounded-lg font-medium ${A==="templates"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Templates (",r.length,")"]}),e.jsxs("button",{onClick:()=>N("scheduled"),className:`px-4 py-2 rounded-lg font-medium ${A==="scheduled"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Scheduled (",o.length,")"]}),e.jsxs("button",{onClick:()=>N("subscriptions"),className:`px-4 py-2 rounded-lg font-medium ${A==="subscriptions"?"bg-gold text-white":"bg-muted-gray text-navy-ink hover:bg-gray-200"}`,children:["Subscriptions (",P.length,")"]})]})}),A==="config"&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink",children:"Push Notification Configuration"}),t?.is_active&&e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(rt,{className:"w-4 h-4"}),"Active"]})]}),h?e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VAPID Public Key *"}),e.jsx("input",{type:"text",value:C.vapid_public_key,onChange:$=>j({...C,vapid_public_key:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold font-mono text-sm",placeholder:"BEl62iUYgUivxIkv69yViEuiBIa40HI...",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Generate VAPID keys using web-push library"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VAPID Private Key *"}),e.jsx("input",{type:"password",value:C.vapid_private_key,onChange:$=>j({...C,vapid_private_key:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold font-mono text-sm",placeholder:"Private key (keep secure)",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:C.is_active,onChange:$=>j({...C,is_active:$.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Activate push notifications"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Configuration"}),e.jsx(me,{type:"button",onClick:()=>f(!1),variant:"outline",children:"Cancel"})]})]}):e.jsx("div",{children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"VAPID Public Key"}),e.jsx("p",{className:"font-mono text-sm break-all",children:t.vapid_public_key||"Not set"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{onClick:()=>f(!0),variant:"primary",children:[e.jsx(bn,{className:"w-4 h-4 mr-2"}),"Edit Configuration"]}),e.jsxs(me,{onClick:R,variant:"secondary",children:[e.jsx(sl,{className:"w-4 h-4 mr-2"}),"Subscribe to Push"]})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No push configuration found. Set up VAPID keys to enable push notifications."}),e.jsxs(me,{onClick:()=>f(!0),variant:"primary",children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Configure Push Notifications"]})]})})]}),A==="templates"&&e.jsxs("div",{children:[p&&e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-4",children:b?"Edit Template":"Create Template"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Key *"}),e.jsx("input",{type:"text",value:w.template_key,onChange:$=>D({...w,template_key:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",placeholder:"event_reminder",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:w.title,onChange:$=>D({...w,title:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",maxLength:50,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Body *"}),e.jsx("textarea",{value:w.body,onChange:$=>D({...w,body:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",rows:3,maxLength:200,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon URL"}),e.jsx("input",{type:"url",value:w.icon_url,onChange:$=>D({...w,icon_url:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Badge URL"}),e.jsx("input",{type:"url",value:w.badge_url,onChange:$=>D({...w,badge_url:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action URL"}),e.jsx("input",{type:"url",value:w.action_url,onChange:$=>D({...w,action_url:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:w.is_active,onChange:$=>D({...w,is_active:$.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(me,{type:"submit",variant:"primary",children:"Save Template"}),e.jsx(me,{type:"button",onClick:()=>{y(!1),x(null)},variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Key"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Body"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:r.map($=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6 font-medium",children:$.title}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600 font-mono",children:$.template_key}),e.jsx("td",{className:"py-4 px-6 text-sm",children:$.body}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${$.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:$.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I($.id),className:"text-blue-600 hover:text-blue-800",title:"Send Test",children:e.jsx(Ic,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{x($),D({template_key:$.template_key,title:$.title,body:$.body,icon_url:$.icon_url||"",badge_url:$.badge_url||"",action_url:$.action_url||"",is_active:$.is_active}),y(!0)},className:"text-blue-600 hover:text-blue-800",children:e.jsx(bn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G($.id),className:"text-red-600 hover:text-red-800",children:e.jsx(zs,{className:"w-4 h-4"})})]})})]},$.id))})]})}),r.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(sl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No push templates yet"})]})]})]}),A==="scheduled"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"divide-y",children:o.map($=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-navy-ink",children:$.title}),e.jsx("p",{className:"text-sm text-gray-600",children:$.body}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",new Date($.scheduled_for).toLocaleString()]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${$.status==="sent"?"bg-green-100 text-green-800":$.status==="pending"?"bg-blue-100 text-blue-800":$.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:$.status})]})},$.id))}),o.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(sl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No scheduled push notifications"})]})]}),A==="subscriptions"&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"User"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Endpoint"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Subscribed"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Status"})]})}),e.jsx("tbody",{children:P.map($=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:$.users?.email||$.users?.nickname||"Unknown"}),e.jsxs("td",{className:"py-4 px-6 text-sm text-gray-600 font-mono break-all",children:[$.endpoint?.substring(0,50),"..."]}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date($.created_at).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Active"})})]},$.id))})]})}),P.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(sl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No push subscriptions yet"})]})]})]})}function hA(){const[t,s]=L.useState([]),[r,a]=L.useState(!0),[o,l]=L.useState(new Date().getFullYear()),[d,c]=L.useState(""),[h,f]=L.useState("all");L.useEffect(()=>{p()},[o,h]);const p=async()=>{try{a(!0);let j=B.database.from("annual_giving_statements").select("*, users(*)").eq("year",o).order("generated_at",{ascending:!1});h==="sent"?j=j.not("sent_at","is",null):h==="pending"&&(j=j.is("sent_at",null));const{data:w}=await j;s(w||[])}catch(j){console.error("Error fetching statements:",j)}finally{a(!1)}},y=async()=>{if(confirm(`Generate annual giving statements for ${o}? This may take a few minutes.`))try{alert(`Annual giving statements generation started for ${o}. This is a background process.`),p()}catch(j){console.error("Error generating statements:",j),alert("Error generating statements")}},b=async j=>{if(confirm("Send this statement to the donor via email?"))try{await B.database.from("annual_giving_statements").update({sent_at:new Date().toISOString()}).eq("id",j),alert("Statement sent successfully!"),p()}catch(w){console.error("Error sending statement:",w),alert("Error sending statement")}},x=async()=>{if(confirm("Send all pending statements to donors?"))try{const j=t.filter(w=>!w.sent_at);for(const w of j)await B.database.from("annual_giving_statements").update({sent_at:new Date().toISOString()}).eq("id",w.id);alert(`${j.length} statements sent successfully!`),p()}catch(j){console.error("Error sending statements:",j),alert("Error sending statements")}},A=j=>{j.file_url?window.open(j.file_url,"_blank"):alert("Statement PDF not yet generated")},N=t.filter(j=>j.users?.email?.toLowerCase().includes(d.toLowerCase())||j.users?.nickname?.toLowerCase().includes(d.toLowerCase())),P=t.reduce((j,w)=>j+parseFloat(w.total_amount.toString()),0),_=t.filter(j=>j.sent_at).length,C=t.filter(j=>!j.sent_at).length;return r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading annual giving statements..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-2",children:"Annual Giving Statements"}),e.jsx("p",{className:"text-gray-600",children:"Generate and send annual giving statements to donors"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{onClick:y,variant:"primary",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Generate for ",o]}),C>0&&e.jsxs(me,{onClick:x,variant:"secondary",children:[e.jsx(vn,{className:"w-4 h-4 mr-2"}),"Send All Pending (",C,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Statements"}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:t.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-navy-ink",children:["R",P.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Sent"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:_})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:C})]})]}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("select",{value:o,onChange:j=>l(parseInt(j.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:Array.from({length:5},(j,w)=>new Date().getFullYear()-w).map(j=>e.jsx("option",{value:j,children:j},j))})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by donor...",value:d,onChange:j=>c(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:h,onChange:j=>f(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted-gray",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:"Donor"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Year"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Total Amount"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Donations"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Generated"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Sent"}),e.jsx("th",{className:"text-left py-3 px-6",children:"Actions"})]})}),e.jsx("tbody",{children:N.map(j=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4 px-6",children:j.users?.nickname||j.users?.email||"Unknown"}),e.jsx("td",{className:"py-4 px-6",children:j.year}),e.jsxs("td",{className:"py-4 px-6 font-semibold",children:["R",parseFloat(j.total_amount.toString()).toFixed(2)]}),e.jsx("td",{className:"py-4 px-6",children:j.donation_count}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date(j.generated_at).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6",children:j.sent_at?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:new Date(j.sent_at).toLocaleDateString()}):e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:"Pending"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[j.file_url&&e.jsx("button",{onClick:()=>A(j),className:"text-blue-600 hover:text-blue-800",title:"Download",children:e.jsx(ci,{className:"w-4 h-4"})}),!j.sent_at&&e.jsx("button",{onClick:()=>b(j.id),className:"text-green-600 hover:text-green-800",title:"Send",children:e.jsx(vn,{className:"w-4 h-4"})})]})})]},j.id))})]})}),N.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ys,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-600",children:["No statements found for ",o]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Generate statements to get started"})]})]})]})}function mA(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState([]),[o,l]=L.useState([]),[d,c]=L.useState(!0),[h,f]=L.useState(""),[p,y]=L.useState("all"),[b,x]=L.useState(!1);L.useEffect(()=>{A()},[]),L.useEffect(()=>{N()},[r,h,p,b]);const A=async()=>{try{const{data:C,error:j}=await B.database.from("courses").select("*").order("is_up_endorsed",{ascending:!1}).order("created_at",{ascending:!1});if(j)throw j;a(C||[])}catch(C){console.error("Error fetching courses:",C)}finally{c(!1)}},N=()=>{let C=[...r];if(b&&(C=C.filter(j=>j.is_up_endorsed)),p!=="all"&&(C=C.filter(j=>j.category===p)),h){const j=h.toLowerCase();C=C.filter(w=>w.title.toLowerCase().includes(j)||w.description?.toLowerCase().includes(j)||w.instructor?.toLowerCase().includes(j))}l(C)},P=Array.from(new Set(r.map(C=>C.category).filter(Boolean))),_=r.filter(C=>C.is_up_endorsed);return d?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading course catalogue..."})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-navy-ink to-brand-dark-blue text-white p-8 rounded-card",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mo,{className:"w-10 h-10"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Course Catalogue"})]}),s&&e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),className:"bg-white/10 hover:bg-white/20 text-white border-white/20",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})]}),e.jsx("p",{className:"text-lg text-blue-100 mb-6",children:"Explore our comprehensive range of courses designed to empower and transform communities"}),_.length>0&&e.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ms,{className:"w-6 h-6 text-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"University of Pretoria Partnership"}),e.jsxs("p",{className:"text-sm text-blue-100",children:["We are proud to partner with the ",e.jsx("strong",{children:"Centre for Faith and Community"})," at the",e.jsx("strong",{children:" Faculty of Theology and Religion, University of Pretoria"}),". The following ",_.length," courses are endorsed by ",e.jsx("strong",{children:"Enterprises@UP"}),"and facilitated by the Centre for Faith and Community."]})]})]})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:h,onChange:C=>f(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Kv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsxs("select",{value:p,onChange:C=>y(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold appearance-none",children:[e.jsx("option",{value:"all",children:"All Categories"}),P.map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"up-only",checked:b,onChange:C=>x(C.target.checked),className:"w-4 h-4 text-gold focus:ring-gold"}),e.jsx("label",{htmlFor:"up-only",className:"text-sm text-gray-700 cursor-pointer",children:"Show UP-endorsed courses only"})]})]})}),o.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-card shadow-soft",children:[e.jsx(as,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No courses found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(C=>e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden hover:shadow-lg transition-shadow",children:[C.image_url?e.jsxs("div",{className:"h-48 overflow-hidden relative",children:[e.jsx("img",{src:C.image_url,alt:C.title,className:"w-full h-full object-cover"}),C.is_up_endorsed&&e.jsxs("div",{className:"absolute top-2 right-2 bg-gold text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ms,{className:"w-3 h-3"}),"UP Endorsed"]})]}):e.jsxs("div",{className:"h-48 bg-gradient-to-r from-navy-ink to-brand-dark-blue relative",children:[C.is_up_endorsed&&e.jsxs("div",{className:"absolute top-2 right-2 bg-gold text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ms,{className:"w-3 h-3"}),"UP Endorsed"]}),e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(as,{className:"w-16 h-16 text-white/30"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:C.title}),e.jsxs("div",{className:"space-y-2 mb-4",children:[C.category&&e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:e.jsx("span",{className:"px-2 py-1 bg-muted-gray rounded text-xs",children:C.category})}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[C.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($r,{className:"w-4 h-4"}),e.jsx("span",{children:C.duration})]}),C.level&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:C.level})]})]}),C.instructor&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Instructor:"})," ",C.instructor]}),C.is_up_endorsed&&C.partner_institution&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 text-xs",children:[e.jsx("p",{className:"text-blue-800 font-semibold mb-1",children:"University of Pretoria Partnership"}),e.jsx("p",{className:"text-blue-700",children:C.partner_institution})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:C.description||"No description available."}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t(`/courses/${C.id}`),children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"View Course Details"]})]})]},C.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(as,{className:"mx-auto text-blue-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:r.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Courses"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Ms,{className:"mx-auto text-gold mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:_.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"UP-Endorsed Courses"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Qt,{className:"mx-auto text-green-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:P.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Course Categories"})]})]})]})}function fA(){const{id:t}=Mi(),s=cs(),{user:r}=Mt(),[a,o]=L.useState(null),[l,d]=L.useState([]),[c,h]=L.useState(!0),[f,p]=L.useState(!1),[y,b]=L.useState(null);L.useEffect(()=>{t&&x()},[t,r]);const x=async()=>{try{h(!0);const{data:P,error:_}=await B.database.from("courses").select("*").eq("id",t).single();if(_)throw _;o(P);const{data:C}=await B.database.from("course_lessons").select("*").eq("course_id",t).order("order_index",{ascending:!0});if(d(C||[]),r){const{data:j}=await B.database.from("applications").select("program_id").eq("user_id",r.id).eq("payment_status","confirmed").eq("status","approved"),w=j?.some(z=>z.program_id===P.id)||!1;p(w);const{data:D}=await B.database.from("user_course_progress").select("*").eq("user_id",r.id).eq("course_id",t).single();b(D)}}catch(P){console.error("Error fetching course:",P)}finally{h(!1)}},A=()=>{if(!r){s("/login");return}s("/apply")},N=P=>{if(!f){alert("Please enroll in this course to access lessons.");return}s(`/dashboard/courses/${t}/lessons/${P}`)};return c?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading course details..."})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(me,{onClick:()=>s("/courses"),variant:"outline",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Catalogue"]}),r&&e.jsxs(me,{variant:"secondary",onClick:()=>s("/dashboard"),children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden",children:[a.image_url?e.jsxs("div",{className:"h-64 overflow-hidden relative",children:[e.jsx("img",{src:a.image_url,alt:a.title,className:"w-full h-full object-cover"}),a.is_up_endorsed&&e.jsxs("div",{className:"absolute top-4 right-4 bg-gold text-white px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"University of Pretoria Endorsed"]})]}):e.jsxs("div",{className:"h-64 bg-gradient-to-r from-navy-ink to-brand-dark-blue relative flex items-center justify-center",children:[a.is_up_endorsed&&e.jsxs("div",{className:"absolute top-4 right-4 bg-gold text-white px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"University of Pretoria Endorsed"]}),e.jsx(as,{className:"w-24 h-24 text-white/30"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-ink mb-3",children:a.title}),a.is_up_endorsed&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(mo,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-1",children:"University of Pretoria Partnership"}),e.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:["This course is endorsed by ",e.jsx("strong",{children:"Enterprises@UP"})," and facilitated by the",e.jsx("strong",{children:" Centre for Faith and Community"})," at the",e.jsx("strong",{children:" Faculty of Theology and Religion, University of Pretoria"}),"."]}),a.partner_institution&&e.jsx("p",{className:"text-xs text-blue-700",children:a.partner_institution})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[a.category&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"px-3 py-1 bg-muted-gray rounded-full text-sm",children:a.category})}),a.duration&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx($r,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a.duration})]}),a.level&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a.level})]})]}),a.instructor&&e.jsxs("p",{className:"text-gray-600 mb-4",children:[e.jsx("strong",{children:"Instructor:"})," ",a.instructor]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-navy-ink mb-3",children:"About This Course"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:a.description||"No description available."})]}),y&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Your Progress"}),e.jsxs("span",{className:"text-sm font-semibold text-navy-ink",children:[y.progress_percentage||0,"%"]})]}),e.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-3 bg-gold rounded-full transition-all",style:{width:`${y.progress_percentage||0}%`}})})]}),e.jsx("div",{className:"flex gap-4",children:f?e.jsxs(me,{variant:"primary",onClick:()=>{l.length>0?N(l[0].id):alert("Lessons are being prepared. Please check back soon.")},children:[e.jsx(Cc,{className:"w-4 h-4 mr-2"}),y?.completed?"Review Course":"Start Learning"]}):e.jsxs(me,{variant:"primary",onClick:A,children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),r?"Enroll in Course":"Login to Enroll"]})})]})]}),l.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-6",children:"Course Lessons"}),e.jsx("div",{className:"space-y-4",children:l.map((P,_)=>e.jsx("div",{className:`border rounded-lg p-4 ${f?"border-gray-200 hover:border-gold hover:shadow-md transition-all cursor-pointer":"border-gray-200 opacity-60"}`,onClick:()=>f&&N(P.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-navy-ink text-white rounded-full flex items-center justify-center font-bold",children:P.order_index||_+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-navy-ink mb-1",children:P.title}),P.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:P.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[P.video_url&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Cc,{className:"w-3 h-3"}),"Video Available"]}),P.resources_url&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"w-3 h-3"}),"Resources Available"]}),P.scheduled_date&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($r,{className:"w-3 h-3"}),new Date(P.scheduled_date).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!f&&e.jsx(Yr,{className:"w-5 h-5 text-gray-400"}),f&&e.jsxs(me,{variant:"outline",size:"sm",children:[e.jsx(Cc,{className:"w-4 h-4 mr-1"}),"Start"]})]})]})},P.id))})]}),f&&l.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy-ink mb-6",children:"Course Materials"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.filter(P=>P.resources_url).map(P=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gold transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ys,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-navy-ink",children:P.title}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resources"})]})]}),e.jsx("a",{href:P.resources_url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-gold hover:text-gold-dark",children:e.jsx(ci,{className:"w-5 h-5"})})]})},P.id))})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Course not found"}),e.jsxs(me,{onClick:()=>s("/courses"),variant:"primary",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Catalogue"]})]})}function pA(){const t=cs(),[s]=Iu(),{user:r}=Mt(),[a,o]=L.useState([]),[l,d]=L.useState([]),[c,h]=L.useState([]),[f,p]=L.useState([]),[y,b]=L.useState(!0),[x,A]=L.useState(""),[N,P]=L.useState("all"),[_,C]=L.useState(!1),j=s.get("up_courses")==="true";L.useEffect(()=>{w(),D(),r&&z()},[r]),L.useEffect(()=>{j&&P("up_courses"),U(),X()},[a,l,x,N,j]);const w=async()=>{try{const{data:R,error:$}=await B.database.from("programs").select("*").neq("type","short_course").order("created_at",{ascending:!1});if($)throw $;o(R||[])}catch(R){console.error("Error fetching programs:",R)}finally{b(!1)}},D=async()=>{try{const{data:R,error:$}=await B.database.from("courses").select("*").order("is_up_endorsed",{ascending:!1}).order("created_at",{ascending:!1});if($)throw $;d(R||[])}catch(R){console.error("Error fetching courses:",R)}},z=async()=>{if(r)try{const{data:R}=await B.database.from("applications").select("status").eq("user_id",r.id).eq("program_type","membership").eq("status","approved").eq("payment_status","confirmed").maybeSingle();C(!!R)}catch(R){console.error("Error checking membership:",R)}},U=()=>{let R=[...a];if(x){const $=x.toLowerCase();R=R.filter(q=>q.name.toLowerCase().includes($)||q.description?.toLowerCase().includes($)||q.type.toLowerCase().includes($))}h(R)},X=()=>{let R=[...l];if(N==="up_courses"?R=R.filter($=>$.is_up_endorsed):N!=="all"&&N!=="programs"&&(R=R.filter($=>$.category===N)),x){const $=x.toLowerCase();R=R.filter(q=>q.title.toLowerCase().includes($)||q.description?.toLowerCase().includes($)||q.category?.toLowerCase().includes($))}p(R)};Array.from(new Set(a.map(R=>R.type)));const E=Array.from(new Set(l.map(R=>R.category).filter(Boolean))),G=l.filter(R=>R.is_up_endorsed),I=l.filter(R=>!R.is_up_endorsed);return y?e.jsx("div",{className:"min-h-screen bg-muted-gray flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading programs..."})})}):e.jsxs("div",{className:"min-h-screen bg-muted-gray",children:[e.jsx("div",{className:"bg-gradient-to-r from-navy-ink to-brand-dark-blue text-white py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:j?"University of Pretoria Courses":"Our Programs"}),e.jsx("p",{className:"text-lg text-blue-100 max-w-3xl",children:j?"Endorsed courses by Enterprises@UP and facilitated by the Centre for Faith and Community at the Faculty of Theology and Religion, University of Pretoria.":"Explore our comprehensive range of programs and courses designed to equip and empower Christian leaders. Browse by category to find what you need."})]}),r&&e.jsx("div",{className:"ml-4",children:e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),className:"bg-white/10 hover:bg-white/20 text-white border-white/20",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[!j&&e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search programs and courses...",value:x,onChange:R=>A(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsx("div",{children:e.jsxs("select",{value:N,onChange:R=>P(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"programs",children:"Programs Only"}),e.jsx("option",{value:"up_courses",children:"University of Pretoria Courses"}),e.jsx("option",{value:"courses",children:"All Courses"}),E.map(R=>e.jsx("option",{value:R,children:R},R))]})})]})}),(N==="all"||N==="programs"||j)&&c.length>0&&!j&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-6 flex items-center gap-2",children:[e.jsx(as,{className:"w-8 h-8 text-brand-dark-blue"}),"Programs"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8",children:c.map(R=>e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden hover:shadow-lg transition-all",children:[R.image_url?e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:R.image_url,alt:R.name,className:"w-full h-full object-cover transition-transform hover:scale-105"})}):e.jsx("div",{className:"h-48 bg-gradient-to-r from-navy-ink to-brand-dark-blue flex items-center justify-center",children:e.jsx(as,{className:"w-16 h-16 text-white/30"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:"px-3 py-1 bg-gold/10 text-gold rounded-full text-xs font-semibold",children:R.type.split("_").map($=>$.charAt(0).toUpperCase()+$.slice(1)).join(" ")})}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-3",children:R.name}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:R.description||"No description available."}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>{R.type==="bible_school"?t("/programs/bible-school"):R.type==="membership"?t("/programs/membership"):t(`/apply?type=${R.type}`)},children:[R.type==="bible_school"||R.type==="membership"?"View Program":"Apply Now",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})]})]},R.id))})]}),(N==="all"||N==="up_courses"||j)&&G.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-card p-6 mb-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(mo,{className:"w-8 h-8 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-navy-ink mb-2 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-6 h-6 text-gold"}),"University of Pretoria Courses"]}),e.jsxs("p",{className:"text-gray-700 mb-3",children:["These courses are endorsed by ",e.jsx("strong",{children:"Enterprises@UP"})," and facilitated by the",e.jsx("strong",{children:" Centre for Faith and Community"})," at the",e.jsx("strong",{children:" Faculty of Theology and Religion, University of Pretoria"}),"."]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"These comprehensive courses are designed to equip Christian leaders with practical skills and knowledge for effective ministry and community transformation. Each course combines academic excellence with real-world application."}),!_&&e.jsx("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-5 mt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Yr,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-amber-900 mb-2 text-lg",children:"CLM Membership Required"}),e.jsxs("p",{className:"text-amber-800 mb-3",children:[e.jsx("strong",{children:"You must be a registered CLM member to access these courses."})," These University of Pretoria endorsed courses are exclusive to CLM members. Please complete your membership application first to unlock access to all course materials, resources, and learning content."]}),e.jsxs(me,{variant:"primary",size:"md",onClick:()=>t("/apply?type=membership"),className:"mt-2",children:["Apply for Membership",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})]})]})}),_&&e.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-lg p-5 mt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rt,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-900 font-bold mb-1",children:" You are a registered CLM member!"}),e.jsx("p",{className:"text-green-800 text-sm",children:"You have full access to all University of Pretoria courses below. Click on any course to view details and enroll."})]})]})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8",children:(j?G:f.filter(R=>R.is_up_endorsed)).map(R=>e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"h-48 bg-gradient-to-r from-navy-ink to-brand-dark-blue relative flex items-center justify-center",children:[e.jsx(Ms,{className:"absolute top-2 right-2 w-6 h-6 text-gold"}),e.jsx(as,{className:"w-16 h-16 text-white/30"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-3 py-1 bg-gold text-white rounded-full text-xs font-semibold flex items-center gap-1 w-fit",children:[e.jsx(Ms,{className:"w-3 h-3"}),"UP Endorsed"]})}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:R.title}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2 text-sm leading-relaxed",children:R.description||"Comprehensive course designed to equip Christian leaders with practical skills and knowledge for effective ministry and community transformation."}),e.jsxs("div",{className:"space-y-2 mb-4 text-xs text-gray-500 border-t pt-3",children:[R.category&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"px-2 py-1 bg-muted-gray rounded text-xs font-medium",children:R.category})}),R.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-3 h-3"}),e.jsxs("span",{children:["Duration: ",R.duration]})]}),R.level&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-3 h-3"}),e.jsxs("span",{children:["Level: ",R.level]})]})]}),_?e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t(`/courses/${R.id}`),children:["View Course",e.jsx(yn,{className:"w-4 h-4 ml-2"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 text-gray-600 px-4 py-2 rounded-lg text-center text-sm",children:[e.jsx(Yr,{className:"w-4 h-4 inline mr-1"}),"Membership Required"]}),e.jsx(me,{variant:"secondary",className:"w-full",onClick:()=>t("/apply?type=membership"),children:"Apply for Membership"})]})]})]},R.id))})]}),(N==="all"||N==="courses"||N!=="up_courses"&&N!=="programs"&&E.includes(N))&&I.length>0&&!j&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-6 flex items-center gap-2",children:[e.jsx(mo,{className:"w-8 h-8 text-brand-dark-blue"}),"Other Courses"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8",children:f.filter(R=>!R.is_up_endorsed).map(R=>e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden hover:shadow-lg transition-all",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-purple-600 to-indigo-600 relative flex items-center justify-center",children:e.jsx(as,{className:"w-16 h-16 text-white/30"})}),e.jsxs("div",{className:"p-6",children:[R.category&&e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold",children:R.category})}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-2",children:R.title}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2 text-sm leading-relaxed",children:R.description||"Comprehensive course designed to equip Christian leaders with practical skills and knowledge."}),e.jsxs("div",{className:"space-y-2 mb-4 text-xs text-gray-500 border-t pt-3",children:[R.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-3 h-3"}),e.jsxs("span",{children:["Duration: ",R.duration]})]}),R.level&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-3 h-3"}),e.jsxs("span",{children:["Level: ",R.level]})]})]}),e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>t(`/courses/${R.id}`),children:["View Course",e.jsx(yn,{className:"w-4 h-4 ml-2"})]})]})]},R.id))})]}),!j&&c.length===0&&f.length===0&&e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-12 text-center",children:[e.jsx(as,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No programs or courses found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your filters or search term"})]}),j?e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(as,{className:"mx-auto text-blue-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:G.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"UP Endorsed Courses"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Ms,{className:"mx-auto text-gold mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:"University of Pretoria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Partner Institution"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Yr,{className:"mx-auto text-amber-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:"Members Only"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Access Requirement"})]})]}):e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(as,{className:"mx-auto text-blue-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:a.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Programs"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(mo,{className:"mx-auto text-gold mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:l.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Courses"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Ms,{className:"mx-auto text-green-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:G.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"UP Endorsed"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Qt,{className:"mx-auto text-purple-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:E.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Categories"})]})]})]})]})}function xA(){const t=cs(),{user:s,isLoaded:r}=Mt(),[a,o]=L.useState([]),[l,d]=L.useState([]),[c,h]=L.useState({}),[f,p]=L.useState({}),[y,b]=L.useState(!0),[x,A]=L.useState(""),[N,P]=L.useState("upcoming");L.useEffect(()=>{_()},[]),L.useEffect(()=>{s&&r&&C()},[s,r]),L.useEffect(()=>{j()},[a,x,N]);const _=async()=>{try{const{data:U,error:X}=await B.database.from("events").select("*").order("event_date",{ascending:!0});if(X)throw X;if(o(U||[]),U&&U.length>0){const E=U.map(R=>R.id),{data:G}=await B.database.from("event_registrations").select("event_id").in("event_id",E),I={};G?.forEach(R=>{I[R.event_id]=(I[R.event_id]||0)+1}),h(I)}}catch(U){console.error("Error fetching events:",U)}finally{b(!1)}},C=async()=>{if(s)try{const{data:U}=await B.database.from("event_registrations").select("event_id").eq("user_id",s.id),X={};U?.forEach(E=>{X[E.event_id]=!0}),p(X)}catch(U){console.error("Error fetching user registrations:",U)}},j=()=>{let U=[...a];const X=new Date().toISOString();if(N==="upcoming"?U=U.filter(E=>E.event_date>=X):N==="past"&&(U=U.filter(E=>E.event_date<X)),x){const E=x.toLowerCase();U=U.filter(G=>G.title.toLowerCase().includes(E)||G.description?.toLowerCase().includes(E)||G.location?.toLowerCase().includes(E))}d(U)},w=async U=>{if(!s){t("/login",{state:{returnTo:"/events"}});return}try{const{error:X}=await B.database.from("event_registrations").insert([{user_id:s.id,event_id:U}]);if(X)throw X;p({...f,[U]:!0}),h({...c,[U]:(c[U]||0)+1}),alert("Successfully registered for this event!")}catch(X){console.error("Error registering for event:",X),X.message?.includes("duplicate")||X.message?.includes("unique")?alert("You are already registered for this event."):alert("Failed to register for event. Please try again.")}},D=a.filter(U=>new Date(U.event_date)>=new Date).length,z=a.filter(U=>new Date(U.event_date)<new Date).length;return y?e.jsx("div",{className:"min-h-screen bg-muted-gray flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading events..."})})}):e.jsxs("div",{className:"min-h-screen bg-muted-gray",children:[e.jsx("div",{className:"bg-gradient-to-r from-navy-ink to-brand-dark-blue text-white py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Events"}),e.jsx("p",{className:"text-lg text-blue-100 max-w-3xl",children:"Join us for transformative gatherings, conferences, workshops, and community events designed to equip and inspire Christian leaders."})]}),s&&e.jsx("div",{className:"ml-4",children:e.jsxs(me,{variant:"secondary",onClick:()=>t("/dashboard"),className:"bg-white/10 hover:bg-white/20 text-white border-white/20",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-card shadow-soft mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:x,onChange:U=>A(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold"})]}),e.jsx("div",{children:e.jsxs("select",{value:N,onChange:U=>P(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"upcoming",children:"Upcoming Events"}),e.jsx("option",{value:"past",children:"Past Events"})]})}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Upcoming: ",e.jsx("strong",{children:D})]}),e.jsxs("span",{children:["Past: ",e.jsx("strong",{children:z})]})]})]})}),l.length===0?e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-12 text-center",children:[e.jsx(ns,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No events found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.map(U=>{const X=new Date(U.event_date),E=X>=new Date,G=U.location?.toLowerCase().includes("online")||U.location?.toLowerCase().includes("zoom")||U.location?.toLowerCase().includes("virtual"),I=f[U.id],R=c[U.id]||0;return e.jsxs("div",{className:"bg-white rounded-card shadow-soft overflow-hidden hover:shadow-lg transition-all",children:[U.image_url?e.jsxs("div",{className:"h-48 overflow-hidden relative",children:[e.jsx("img",{src:U.image_url,alt:U.title,className:"w-full h-full object-cover"}),!E&&e.jsx("div",{className:"absolute top-2 right-2 bg-gray-600 text-white px-3 py-1 rounded-full text-xs font-semibold",children:"Past Event"})]}):e.jsxs("div",{className:"h-48 bg-gradient-to-r from-navy-ink to-brand-dark-blue relative flex items-center justify-center",children:[e.jsx(ns,{className:"w-16 h-16 text-white/30"}),!E&&e.jsx("div",{className:"absolute top-2 right-2 bg-gray-600 text-white px-3 py-1 rounded-full text-xs font-semibold",children:"Past Event"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsx("span",{children:X.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),e.jsx($r,{className:"w-4 h-4 ml-2"}),e.jsx("span",{children:X.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("h3",{className:"text-xl font-bold text-navy-ink mb-3",children:U.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[e.jsx(Zl,{className:"w-4 h-4"}),e.jsxs("span",{className:G?"text-blue-600 font-semibold":"",children:[U.location||"Location TBA",G&&" (Online)"]})]}),U.capacity&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsxs("span",{children:[R," registered",U.capacity&&` / ${U.capacity} capacity`]})]}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:U.description||"No description available."}),E?I?e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-lg text-center text-sm font-medium",children:" Registered"}):e.jsxs(me,{variant:"primary",className:"w-full",onClick:()=>w(U.id),children:["Register Now",e.jsx(yn,{className:"w-4 h-4 ml-2"})]}):e.jsx("div",{className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg text-center text-sm",children:"Event Ended"})]})]},U.id)})}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(ns,{className:"mx-auto text-blue-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:a.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx($r,{className:"mx-auto text-green-500 mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:D}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming Events"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-card shadow-soft text-center",children:[e.jsx(Qt,{className:"mx-auto text-gold mb-2",size:32}),e.jsx("p",{className:"text-2xl font-bold text-navy-ink",children:Object.values(c).reduce((U,X)=>U+X,0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Registrations"})]})]})]})]})}function gA(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState(null),[o,l]=L.useState(!0);L.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:h,error:f}=await B.database.from("programs").select("*").eq("type","bible_school").maybeSingle();if(f)throw f;a(h)}catch(h){console.error("Error fetching program:",h)}finally{l(!1)}},c=()=>{if(!s){t("/login?redirect=/apply?type=bible_school");return}t("/apply?type=bible_school")};return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsxs("main",{className:"flex-grow bg-muted-gray",children:[e.jsx("div",{className:"bg-gradient-to-r from-navy-ink to-brand-dark-blue text-white py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(me,{variant:"secondary",onClick:()=>t("/"),className:"mb-6 bg-white/10 hover:bg-white/20 text-white border-white/20",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-white/20 p-4 rounded-full",children:e.jsx(mo,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Bible School Program"}),e.jsx("p",{className:"text-lg text-blue-100",children:"Comprehensive theological education and leadership training"})]})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx(as,{className:"w-8 h-8 text-brand-dark-blue"}),"About Bible School"]}),e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:r?.description||"Our Bible School program offers comprehensive theological education and leadership training designed to equip Christian leaders for effective ministry and service. This program provides in-depth biblical studies, practical ministry skills, and leadership development."}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"The Bible School program is designed for individuals who are called to Christian leadership and ministry. Through structured coursework, practical training, and mentorship, students develop a strong biblical foundation and the skills necessary to serve effectively in their communities and beyond."})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-brand-dark-blue to-navy-ink text-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(rt,{className:"w-8 h-8"}),"Why Apply for Bible School?"]}),e.jsx("p",{className:"text-lg text-blue-100 mb-6",children:"Transform your calling into effective ministry through comprehensive theological education and practical leadership training."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-gold flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-blue-50",children:"Develop a deep understanding of Scripture and theology"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-gold flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-blue-50",children:"Gain practical ministry skills for real-world application"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-gold flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-blue-50",children:"Build confidence in preaching, teaching, and leadership"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-gold flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-blue-50",children:"Join a community of like-minded Christian leaders"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-gold flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-blue-50",children:"Receive recognized certification for your ministry"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-gold flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-blue-50",children:"Access ongoing support and mentorship"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-6 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-8 h-8 text-gold"}),"What You'll Gain"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"bg-brand-dark-blue/20 p-3 rounded-lg",children:e.jsx(as,{className:"w-6 h-6 text-brand-dark-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Comprehensive Biblical Education"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"In-depth study of Old and New Testaments, systematic theology, church history, biblical interpretation, and hermeneutics."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Complete Bible survey and exegesis"}),e.jsx("li",{children:" Theological foundations and doctrines"}),e.jsx("li",{children:" Church history and tradition"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gold/5 rounded-lg",children:[e.jsx("div",{className:"bg-gold/20 p-3 rounded-lg",children:e.jsx(Qt,{className:"w-6 h-6 text-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Practical Ministry Skills"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Hands-on training in pastoral care, preaching, teaching, counseling, worship leadership, and community outreach."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Sermon preparation and delivery"}),e.jsx("li",{children:" Pastoral counseling techniques"}),e.jsx("li",{children:" Worship and service planning"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"bg-green-500/20 p-3 rounded-lg",children:e.jsx(Ms,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Recognized Certification"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Earn a certificate of completion that validates your theological education and enhances your ministry credentials."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Official CLM Bible School certificate"}),e.jsx("li",{children:" Enhanced ministry credibility"}),e.jsx("li",{children:" Recognition in Christian leadership circles"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"bg-purple-500/20 p-3 rounded-lg",children:e.jsx(rt,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Mentorship & Support"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Access to experienced pastors and leaders who provide guidance, answer questions, and support your growth."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" One-on-one mentorship sessions"}),e.jsx("li",{children:" Regular check-ins and feedback"}),e.jsx("li",{children:" Ongoing support after graduation"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-6 flex items-center gap-2",children:[e.jsx(as,{className:"w-8 h-8 text-brand-dark-blue"}),"Resources & Materials You'll Receive"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border-l-4 border-brand-dark-blue pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Study Materials"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Comprehensive course textbooks and study guides"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Digital library access with theological resources"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Biblical commentaries and reference materials"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Study notes and lecture materials"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-gold pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Video & Audio Content"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Recorded lectures and teaching sessions"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Video demonstrations of ministry practices"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Audio sermons and teaching series"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Interactive online learning modules"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Practical Tools"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Sermon preparation templates and guides"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Ministry planning worksheets and checklists"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Counseling resources and frameworks"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Leadership assessment tools"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Community Access"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Access to student forums and discussion groups"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Networking opportunities with fellow students"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Access to alumni network after graduation"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Regular webinars and Q&A sessions"})]})]})]})]})]}),e.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-card p-6 mb-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(ys,{className:"w-8 h-8 text-amber-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-amber-900 mb-2",children:"Application Required"}),e.jsx("p",{className:"text-amber-800 mb-4",children:"To enroll in the Bible School program, you need to complete the application form. The application process includes providing personal information, spiritual background, leadership interests, vision & calling, and references."}),e.jsx("p",{className:"text-amber-800 font-medium",children:'Click the "Apply Now" button below to start your application.'})]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsxs(me,{variant:"primary",size:"lg",onClick:c,className:"px-8 py-4 text-lg",children:["Apply Now",e.jsx(yn,{className:"w-5 h-5 ml-2"})]}),!s&&e.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:"You'll need to log in to complete the application"})]})]})]}),e.jsx(un,{})]})}function yA(){const t=cs(),{user:s}=Mt(),[r,a]=L.useState(null),[o,l]=L.useState(!1),[d,c]=L.useState(!0);L.useEffect(()=>{h(),s&&f()},[s]);const h=async()=>{try{const{data:y,error:b}=await B.database.from("programs").select("*").eq("type","membership").maybeSingle();if(b)throw b;a(y)}catch(y){console.error("Error fetching program:",y)}finally{c(!1)}},f=async()=>{if(s)try{const{data:y}=await B.database.from("applications").select("status").eq("user_id",s.id).eq("program_type","membership").eq("status","approved").eq("payment_status","confirmed").maybeSingle();l(!!y)}catch(y){console.error("Error checking membership:",y)}},p=()=>{if(!s){t("/login?redirect=/apply?type=membership");return}t("/apply?type=membership")};return d?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(dn,{}),e.jsxs("main",{className:"flex-grow bg-muted-gray",children:[e.jsx("div",{className:"bg-gradient-to-r from-navy-ink to-brand-dark-blue text-white py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(me,{variant:"secondary",onClick:()=>t("/"),className:"mb-6 bg-white/10 hover:bg-white/20 text-white border-white/20",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-white/20 p-4 rounded-full",children:e.jsx(Qt,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"CLM Membership Program"}),e.jsx("p",{className:"text-lg text-blue-100",children:"Full membership with access to all resources and benefits"})]})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-4 flex items-center gap-2",children:[e.jsx(as,{className:"w-8 h-8 text-gold"}),"About Membership"]}),e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:r?.description||"Join the Christian Leadership Movement and gain access to all resources, courses, and community benefits. Membership provides you with exclusive access to our comprehensive library of educational materials, University of Pretoria endorsed courses, mentorship programs, and a supportive community of Christian leaders."}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"As a CLM member, you become part of a vibrant community dedicated to equipping and empowering Christian leaders for effective ministry. Our membership program is designed to support your growth, provide valuable resources, and connect you with like-minded individuals on similar journeys."})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gold to-amber-500 text-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(rt,{className:"w-8 h-8"}),"Why Become a CLM Member?"]}),e.jsx("p",{className:"text-lg text-amber-50 mb-6",children:"Unlock unlimited access to resources, courses, and a supportive community of Christian leaders. Your membership opens doors to transformation and growth."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-navy-ink flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-amber-50",children:"Access all University of Pretoria endorsed courses"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-navy-ink flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-amber-50",children:"Join a vibrant community of Christian leaders"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-navy-ink flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-amber-50",children:"Get exclusive access to premium resources"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-navy-ink flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-amber-50",children:"Participate in mentorship programs"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-navy-ink flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-amber-50",children:"Attend exclusive events and workshops"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-navy-ink flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-amber-50",children:"Earn certificates and recognition"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-6 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-8 h-8 text-gold"}),"Exclusive Membership Benefits"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gold/5 rounded-lg",children:[e.jsx("div",{className:"bg-gold/20 p-3 rounded-lg",children:e.jsx(as,{className:"w-6 h-6 text-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Full Course Access"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Unlimited access to all University of Pretoria endorsed courses, Bible School programs, and specialized training courses."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" All UP-endorsed courses included"}),e.jsx("li",{children:" Self-paced learning options"}),e.jsx("li",{children:" Progress tracking and certificates"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"bg-brand-dark-blue/20 p-3 rounded-lg",children:e.jsx(Qt,{className:"w-6 h-6 text-brand-dark-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Community & Networking"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Join forums, discussion groups, and connect with Christian leaders from around the world."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Private member forums"}),e.jsx("li",{children:" Networking events and meetups"}),e.jsx("li",{children:" Peer support and collaboration"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"bg-green-500/20 p-3 rounded-lg",children:e.jsx(Ms,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Premium Resource Library"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Access thousands of documents, videos, audio resources, study guides, and educational materials."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Downloadable study materials"}),e.jsx("li",{children:" Video and audio content library"}),e.jsx("li",{children:" Exclusive member-only resources"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"bg-purple-500/20 p-3 rounded-lg",children:e.jsx(rt,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Mentorship Programs"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Get matched with experienced mentors who provide guidance, support, and wisdom for your leadership journey."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" One-on-one mentorship matching"}),e.jsx("li",{children:" Regular mentorship sessions"}),e.jsx("li",{children:" Career and ministry guidance"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"bg-orange-500/20 p-3 rounded-lg",children:e.jsx(ys,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Exclusive Events & Workshops"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Priority access to conferences, workshops, training sessions, and member-only events."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Early registration for events"}),e.jsx("li",{children:" Member-only workshops"}),e.jsx("li",{children:" Discounted event tickets"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-indigo-50 rounded-lg",children:[e.jsx("div",{className:"bg-indigo-500/20 p-3 rounded-lg",children:e.jsx(Ms,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-2",children:"Certificates & Recognition"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Earn certificates for completed courses, achievements, and milestones in your leadership journey."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Course completion certificates"}),e.jsx("li",{children:" Achievement badges and recognition"}),e.jsx("li",{children:" Professional development credits"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-soft p-8 mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-navy-ink mb-6 flex items-center gap-2",children:[e.jsx(as,{className:"w-8 h-8 text-gold"}),"Resources & Materials You'll Get"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border-l-4 border-gold pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Educational Resources"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Complete access to all course materials and textbooks"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Study guides, notes, and supplementary materials"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Digital library with theological and ministry resources"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Research papers and academic articles"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-brand-dark-blue pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Multimedia Content"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Video lectures and teaching series"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Audio sermons, podcasts, and interviews"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Interactive online courses and webinars"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Documentary films and ministry case studies"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Practical Tools"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Sermon preparation templates and outlines"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Ministry planning worksheets and checklists"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Leadership development resources"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Counseling and pastoral care guides"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[e.jsx("h3",{className:"font-bold text-navy-ink mb-3",children:" Community & Support"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Access to private member forums and groups"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Monthly member newsletters and updates"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Priority customer support and assistance"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-1"}),e.jsx("span",{children:"Networking opportunities and member directory"})]})]})]})]})]}),e.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-card p-6 mb-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(ys,{className:"w-8 h-8 text-amber-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-amber-900 mb-2",children:"Application Required"}),e.jsx("p",{className:"text-amber-800 mb-4",children:"To become a CLM member, you need to complete the membership application form. The application process includes providing personal information, ministry involvement, qualifications, and references."}),e.jsx("p",{className:"text-amber-800 font-medium",children:'Click the "Apply Now" button below to start your membership application.'})]})]})}),o&&e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-card p-6 mb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Qv,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-green-900 mb-2",children:"You are a CLM Member!"}),e.jsx("p",{className:"text-green-800",children:"You have full access to all membership benefits and resources."})]})]})}),e.jsx("div",{className:"text-center",children:o?e.jsxs(me,{variant:"secondary",size:"lg",onClick:()=>t("/dashboard"),className:"px-8 py-4 text-lg",children:["Go to Dashboard",e.jsx(yn,{className:"w-5 h-5 ml-2"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(me,{variant:"primary",size:"lg",onClick:p,className:"px-8 py-4 text-lg",children:["Apply Now",e.jsx(yn,{className:"w-5 h-5 ml-2"})]}),!s&&e.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:"You'll need to log in to complete the application"})]})})]})]}),e.jsx(un,{})]})}function vA(){return e.jsx(m_,{children:e.jsx(x_,{children:e.jsx(t_,{baseUrl:Ou(),anonKey:vm(),children:e.jsx(G1,{children:e.jsxs(O1,{children:[e.jsx(at,{path:"/",element:e.jsx(L3,{})}),e.jsx(at,{path:"/login",element:e.jsx(ek,{})}),e.jsx(at,{path:"/register",element:e.jsx(tk,{})}),e.jsx(at,{path:"/forgot-password",element:e.jsx(sk,{})}),e.jsx(at,{path:"/reset-password",element:e.jsx(rk,{})}),e.jsx(at,{path:"/apply",element:e.jsx(d8,{})}),e.jsx(at,{path:"/apply/membership",element:e.jsx(m8,{})}),e.jsx(at,{path:"/apply/bible-school",element:e.jsx(f8,{})}),e.jsx(at,{path:"/donations",element:e.jsx(p8,{})}),e.jsx(at,{path:"/payment",element:e.jsx(_8,{})}),e.jsx(at,{path:"/payment/success",element:e.jsx(k8,{})}),e.jsx(at,{path:"/objectives/:slug",element:e.jsx(S8,{})}),e.jsx(at,{path:"/courses",element:e.jsx(mA,{})}),e.jsx(at,{path:"/courses/:id",element:e.jsx(fA,{})}),e.jsx(at,{path:"/programs",element:e.jsx(pA,{})}),e.jsx(at,{path:"/programs/bible-school",element:e.jsx(gA,{})}),e.jsx(at,{path:"/programs/membership",element:e.jsx(yA,{})}),e.jsx(at,{path:"/events",element:e.jsx(xA,{})}),e.jsx(at,{path:"/prayer-requests",element:e.jsx(P8,{})}),e.jsx(at,{path:"/testimonials",element:e.jsx(E8,{})}),e.jsx(at,{path:"/forum",element:e.jsx(T8,{})}),e.jsx(at,{path:"/forum/new-topic",element:e.jsx(F8,{})}),e.jsx(at,{path:"/forum/topic/:id",element:e.jsx(M8,{})}),e.jsx(at,{path:"/referrals",element:e.jsx(D8,{})}),e.jsx(at,{path:"/resources",element:e.jsx(R8,{})}),e.jsx(at,{path:"/blog",element:e.jsx(I8,{})}),e.jsx(at,{path:"/blog/:slug",element:e.jsx(z8,{})}),e.jsx(at,{path:"/groups",element:e.jsx(Y8,{})}),e.jsx(at,{path:"/groups/:id",element:e.jsx(K8,{})}),e.jsx(at,{path:"/mentorship",element:e.jsx(Q8,{})}),e.jsx(at,{path:"/stream/:id",element:e.jsx(nA,{})}),e.jsxs(at,{path:"/dashboard",element:e.jsx(nk,{}),children:[e.jsx(at,{index:!0,element:e.jsx(ak,{})}),e.jsx(at,{path:"profile",element:e.jsx(ik,{})}),e.jsx(at,{path:"applications",element:e.jsx(ok,{})}),e.jsx(at,{path:"notifications",element:e.jsx(x8,{})}),e.jsx(at,{path:"events",element:e.jsx(g8,{})}),e.jsx(at,{path:"courses",element:e.jsx(y8,{})}),e.jsx(at,{path:"courses/:courseId/lessons/:lessonId",element:e.jsx(v8,{})}),e.jsx(at,{path:"courses/:courseId/quizzes",element:e.jsx(q8,{})}),e.jsx(at,{path:"courses/:courseId/quizzes/:quizId/take",element:e.jsx(U8,{})}),e.jsx(at,{path:"courses/:courseId/quizzes/:quizId/results",element:e.jsx(B8,{})}),e.jsx(at,{path:"certificates",element:e.jsx(b8,{})}),e.jsx(at,{path:"messages",element:e.jsx(O8,{})}),e.jsx(at,{path:"volunteer",element:e.jsx(V8,{})}),e.jsx(at,{path:"attendance",element:e.jsx(W8,{})}),e.jsx(at,{path:"security",element:e.jsx(cA,{})})]}),e.jsxs(at,{path:"/admin",element:e.jsx(C8,{children:e.jsx(lk,{})}),children:[e.jsx(at,{index:!0,element:e.jsx(ck,{})}),e.jsx(at,{path:"profile",element:e.jsx(uk,{})}),e.jsx(at,{path:"users",element:e.jsx(hk,{})}),e.jsx(at,{path:"applications",element:e.jsx(r8,{})}),e.jsx(at,{path:"courses",element:e.jsx(n8,{})}),e.jsx(at,{path:"events",element:e.jsx(a8,{})}),e.jsx(at,{path:"certificates",element:e.jsx(i8,{})}),e.jsx(at,{path:"analytics",element:e.jsx(o8,{})}),e.jsx(at,{path:"communication",element:e.jsx(l8,{})}),e.jsx(at,{path:"settings",element:e.jsx(c8,{})}),e.jsx(at,{path:"content",element:e.jsx(j8,{})}),e.jsx(at,{path:"fees",element:e.jsx(w8,{})}),e.jsx(at,{path:"objectives",element:e.jsx(N8,{})}),e.jsx(at,{path:"financial-reports",element:e.jsx(A8,{})}),e.jsx(at,{path:"prayer-requests",element:e.jsx(L8,{})}),e.jsx(at,{path:"quizzes",element:e.jsx(H8,{})}),e.jsx(at,{path:"quizzes/:quizId/questions",element:e.jsx(G8,{})}),e.jsx(at,{path:"volunteers",element:e.jsx(Z8,{})}),e.jsx(at,{path:"blog",element:e.jsx(J8,{})}),e.jsx(at,{path:"mentorship",element:e.jsx(X8,{})}),e.jsx(at,{path:"streams",element:e.jsx(eA,{})}),e.jsx(at,{path:"forum",element:e.jsx(tA,{})}),e.jsx(at,{path:"groups",element:e.jsx(sA,{})}),e.jsx(at,{path:"resources",element:e.jsx(rA,{})}),e.jsx(at,{path:"advanced-analytics",element:e.jsx(aA,{})}),e.jsx(at,{path:"reports",element:e.jsx(iA,{})}),e.jsx(at,{path:"email-templates",element:e.jsx(oA,{})}),e.jsx(at,{path:"audit-logs",element:e.jsx(lA,{})}),e.jsx(at,{path:"sms",element:e.jsx(dA,{})}),e.jsx(at,{path:"push",element:e.jsx(uA,{})}),e.jsx(at,{path:"giving-statements",element:e.jsx(hA,{})})]})]})})})})})}const Yy=document.getElementById("root");Yy&&Bb.createRoot(Yy).render(e.jsx(vA,{}));export{Ls as _,bA as c,Ky as g};
